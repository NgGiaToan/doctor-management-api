2024-09-06 14:05:34.355 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-06 14:05:34.844 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-06 14:05:35.325 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-06 14:06:55.248 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-06 14:06:55.695 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-06 14:06:55.708 +07:00 [DBG] Creating DbConnection.
2024-09-06 14:06:55.752 +07:00 [DBG] Created DbConnection. (42ms).
2024-09-06 14:06:55.755 +07:00 [DBG] Migrating using database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:55.762 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:55.997 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.001 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:06:56.005 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (4ms).
2024-09-06 14:06:56.006 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (7ms).
2024-09-06 14:06:56.011 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-06 14:06:56.029 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-06 14:06:56.030 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.034 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-09-06 14:06:56.036 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-09-06 14:06:56.036 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-09-06 14:06:56.036 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-09-06 14:06:56.036 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.037 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.038 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-06 14:06:56.052 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-06 14:06:56.052 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.052 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-06 14:06:56.053 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.053 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.053 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:06:56.053 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:56.053 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:56.053 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-06 14:06:56.054 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-06 14:06:56.054 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.054 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-06 14:06:56.055 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-09-06 14:06:56.055 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-09-06 14:06:56.055 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-09-06 14:06:56.055 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.055 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.055 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-06 14:06:56.055 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-06 14:06:56.055 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.056 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-06 14:06:56.065 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.066 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.066 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:06:56.066 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:06:56.066 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:06:56.066 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-09-06 14:06:56.087 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-09-06 14:06:56.089 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.089 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-06 14:06:56.090 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.090 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-06 14:06:56.098 +07:00 [INF] Applying migration '20240906070535_UpdateDatabase'.
2024-09-06 14:06:56.128 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.128 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:06:56.130 +07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-09-06 14:06:56.135 +07:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-09-06 14:06:56.136 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:06:56.533 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (397ms).
2024-09-06 14:06:56.535 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (398ms).
2024-09-06 14:06:56.535 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointment] DROP CONSTRAINT [FK_Appointment_Patient_PatientId];
2024-09-06 14:06:56.560 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointment] DROP CONSTRAINT [FK_Appointment_Patient_PatientId];
2024-09-06 14:06:56.560 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:06:56.560 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:56.560 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:56.560 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Patient] DROP CONSTRAINT [FK_Patient_Payment_PaymentId];
2024-09-06 14:06:56.563 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Patient] DROP CONSTRAINT [FK_Patient_Payment_PaymentId];
2024-09-06 14:06:56.563 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:06:56.563 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:56.564 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:56.564 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Payment]') AND [c].[name] = N'PaymentName');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Payment] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Payment] ALTER COLUMN [PaymentName] nvarchar(100) NOT NULL;
2024-09-06 14:06:56.613 +07:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Payment]') AND [c].[name] = N'PaymentName');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Payment] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Payment] ALTER COLUMN [PaymentName] nvarchar(100) NOT NULL;
2024-09-06 14:06:56.613 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:06:56.613 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:56.613 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:56.613 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'PhoneNumber');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Patient] ALTER COLUMN [PhoneNumber] nvarchar(15) NOT NULL;
2024-09-06 14:06:56.633 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'PhoneNumber');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Patient] ALTER COLUMN [PhoneNumber] nvarchar(15) NOT NULL;
2024-09-06 14:06:56.633 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:06:56.633 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:56.633 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:56.633 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Patient_PaymentId] ON [Patient];
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'PaymentId');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var2 + '];');
UPDATE [Patient] SET [PaymentId] = '00000000-0000-0000-0000-000000000000' WHERE [PaymentId] IS NULL;
ALTER TABLE [Patient] ALTER COLUMN [PaymentId] uniqueidentifier NOT NULL;
ALTER TABLE [Patient] ADD DEFAULT '00000000-0000-0000-0000-000000000000' FOR [PaymentId];
CREATE INDEX [IX_Patient_PaymentId] ON [Patient] ([PaymentId]);
2024-09-06 14:06:58.569 +07:00 [INF] Executed DbCommand (1,935ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Patient_PaymentId] ON [Patient];
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'PaymentId');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var2 + '];');
UPDATE [Patient] SET [PaymentId] = '00000000-0000-0000-0000-000000000000' WHERE [PaymentId] IS NULL;
ALTER TABLE [Patient] ALTER COLUMN [PaymentId] uniqueidentifier NOT NULL;
ALTER TABLE [Patient] ADD DEFAULT '00000000-0000-0000-0000-000000000000' FOR [PaymentId];
CREATE INDEX [IX_Patient_PaymentId] ON [Patient] ([PaymentId]);
2024-09-06 14:06:58.569 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:06:58.569 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:58.569 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:58.569 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'Location');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Patient] ALTER COLUMN [Location] nvarchar(255) NOT NULL;
2024-09-06 14:06:58.594 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'Location');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Patient] ALTER COLUMN [Location] nvarchar(255) NOT NULL;
2024-09-06 14:06:58.594 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:06:58.595 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:58.595 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:06:58.595 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'FullName');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Patient] ALTER COLUMN [FullName] nvarchar(100) NOT NULL;
2024-09-06 14:06:58.614 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'FullName');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Patient] ALTER COLUMN [FullName] nvarchar(100) NOT NULL;
2024-09-06 14:06:58.614 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:06:58.614 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:01.033 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2418ms).
2024-09-06 14:07:01.034 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'Email');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Patient] ALTER COLUMN [Email] nvarchar(100) NOT NULL;
2024-09-06 14:07:01.060 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'Email');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Patient] ALTER COLUMN [Email] nvarchar(100) NOT NULL;
2024-09-06 14:07:01.060 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:07:01.060 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:01.060 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:01.060 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'Diseases');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [Patient] ALTER COLUMN [Diseases] nvarchar(500) NOT NULL;
2024-09-06 14:07:01.074 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'Diseases');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [Patient] ALTER COLUMN [Diseases] nvarchar(500) NOT NULL;
2024-09-06 14:07:01.074 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:07:01.074 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:01.074 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:01.074 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'Avatar');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [Patient] ALTER COLUMN [Avatar] nvarchar(255) NOT NULL;
2024-09-06 14:07:01.088 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patient]') AND [c].[name] = N'Avatar');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Patient] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [Patient] ALTER COLUMN [Avatar] nvarchar(255) NOT NULL;
2024-09-06 14:07:01.088 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:07:01.088 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:01.088 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:01.088 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Appointment_PatientId] ON [Appointment];
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointment]') AND [c].[name] = N'PatientId');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Appointment] DROP CONSTRAINT [' + @var8 + '];');
UPDATE [Appointment] SET [PatientId] = '00000000-0000-0000-0000-000000000000' WHERE [PatientId] IS NULL;
ALTER TABLE [Appointment] ALTER COLUMN [PatientId] uniqueidentifier NOT NULL;
ALTER TABLE [Appointment] ADD DEFAULT '00000000-0000-0000-0000-000000000000' FOR [PatientId];
CREATE INDEX [IX_Appointment_PatientId] ON [Appointment] ([PatientId]);
2024-09-06 14:07:03.046 +07:00 [INF] Executed DbCommand (1,958ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Appointment_PatientId] ON [Appointment];
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointment]') AND [c].[name] = N'PatientId');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Appointment] DROP CONSTRAINT [' + @var8 + '];');
UPDATE [Appointment] SET [PatientId] = '00000000-0000-0000-0000-000000000000' WHERE [PatientId] IS NULL;
ALTER TABLE [Appointment] ALTER COLUMN [PatientId] uniqueidentifier NOT NULL;
ALTER TABLE [Appointment] ADD DEFAULT '00000000-0000-0000-0000-000000000000' FOR [PatientId];
CREATE INDEX [IX_Appointment_PatientId] ON [Appointment] ([PatientId]);
2024-09-06 14:07:03.046 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:07:03.046 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:03.046 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:03.046 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointment]') AND [c].[name] = N'AppoitmentTime');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [Appointment] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [Appointment] ALTER COLUMN [AppoitmentTime] nvarchar(50) NOT NULL;
2024-09-06 14:07:03.063 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointment]') AND [c].[name] = N'AppoitmentTime');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [Appointment] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [Appointment] ALTER COLUMN [AppoitmentTime] nvarchar(50) NOT NULL;
2024-09-06 14:07:03.063 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:07:03.063 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:03.063 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:03.063 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointment]') AND [c].[name] = N'AppoitmentStatus');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [Appointment] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [Appointment] ALTER COLUMN [AppoitmentStatus] nvarchar(50) NOT NULL;
2024-09-06 14:07:03.077 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointment]') AND [c].[name] = N'AppoitmentStatus');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [Appointment] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [Appointment] ALTER COLUMN [AppoitmentStatus] nvarchar(50) NOT NULL;
2024-09-06 14:07:05.679 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:07:05.679 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:05.679 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:05.679 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointment] ADD CONSTRAINT [FK_Patient_Appoitment] FOREIGN KEY ([PatientId]) REFERENCES [Patient] ([PatientId]) ON DELETE CASCADE;
2024-09-06 14:07:05.683 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointment] ADD CONSTRAINT [FK_Patient_Appoitment] FOREIGN KEY ([PatientId]) REFERENCES [Patient] ([PatientId]) ON DELETE CASCADE;
2024-09-06 14:07:05.683 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:07:05.683 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:05.683 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:05.683 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Patient] ADD CONSTRAINT [FK_Patient_Payment] FOREIGN KEY ([PaymentId]) REFERENCES [Payment] ([PaymentId]) ON DELETE CASCADE;
2024-09-06 14:07:05.689 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Patient] ADD CONSTRAINT [FK_Patient_Payment] FOREIGN KEY ([PaymentId]) REFERENCES [Payment] ([PaymentId]) ON DELETE CASCADE;
2024-09-06 14:07:05.689 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 14:07:05.690 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:05.690 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 14:07:05.690 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240906070535_UpdateDatabase', N'8.0.8');
2024-09-06 14:07:05.694 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240906070535_UpdateDatabase', N'8.0.8');
2024-09-06 14:07:05.695 +07:00 [DBG] Committing transaction.
2024-09-06 14:07:05.698 +07:00 [DBG] Committed transaction.
2024-09-06 14:07:05.699 +07:00 [DBG] Disposing transaction.
2024-09-06 14:07:05.699 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:07:05.699 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-06 14:07:05.700 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-06 14:07:05.702 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 14:07:05.702 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 15:03:24.076 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-06 15:03:24.547 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-06 15:03:24.563 +07:00 [DBG] Creating DbConnection.
2024-09-06 15:03:24.603 +07:00 [DBG] Created DbConnection. (40ms).
2024-09-06 15:03:24.606 +07:00 [DBG] Migrating using database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.613 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.806 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.809 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 15:03:24.815 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (3ms).
2024-09-06 15:03:24.817 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (8ms).
2024-09-06 15:03:24.820 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-06 15:03:24.840 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-06 15:03:24.842 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.846 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-09-06 15:03:24.850 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-09-06 15:03:24.850 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-09-06 15:03:24.850 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-09-06 15:03:24.850 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.851 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.851 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-06 15:03:24.861 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-06 15:03:24.861 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.862 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-06 15:03:24.862 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.862 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.863 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-09-06 15:03:24.863 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 15:03:24.863 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-09-06 15:03:24.863 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-06 15:03:24.864 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-09-06 15:03:24.865 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.865 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-06 15:03:24.865 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-09-06 15:03:24.865 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-09-06 15:03:24.865 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-09-06 15:03:24.865 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.866 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.866 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-06 15:03:24.867 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-09-06 15:03:24.867 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.867 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-06 15:03:24.876 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.876 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.876 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 15:03:24.876 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 15:03:24.876 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 15:03:24.877 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-09-06 15:03:24.881 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-09-06 15:03:24.883 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.884 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-06 15:03:24.884 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.884 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-06 15:03:24.891 +07:00 [INF] No migrations were applied. The database is already up to date.
2024-09-06 15:03:24.891 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-06 15:03:24.893 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-06 15:03:24.894 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
