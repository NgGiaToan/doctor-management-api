2024-09-17 08:09:47.654 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 08:09:47.778 +07:00 [DBG] Hosting starting
2024-09-17 08:09:47.832 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 08:09:47.843 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 08:09:47.858 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 08:09:47.867 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 08:09:47.875 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 08:09:47.881 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 08:09:47.888 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 08:09:47.895 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 08:09:47.900 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 08:09:47.909 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 08:09:47.913 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 08:09:47.922 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 08:09:47.924 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 08:09:48.226 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 08:09:48.227 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 08:09:48.228 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 08:09:48.229 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 08:09:48.231 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 08:09:48.233 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 08:09:48.320 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 08:09:48.322 +07:00 [INF] Hosting environment: Development
2024-09-17 08:09:48.323 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 08:09:48.324 +07:00 [DBG] Hosting started
2024-09-17 08:09:48.436 +07:00 [DBG] Connection id "0HN6MMLMEGMFQ" accepted.
2024-09-17 08:09:48.438 +07:00 [DBG] Connection id "0HN6MMLMEGMFQ" started.
2024-09-17 08:09:48.503 +07:00 [DBG] Connection 0HN6MMLMEGMFQ established using the following protocol: "Tls13"
2024-09-17 08:09:49.234 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 08:09:49.419 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 08:09:49.517 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 08:09:49.522 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 08:09:49.551 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 08:09:49.554 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 08:09:49.563 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 335.1025ms
2024-09-17 08:09:49.568 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 08:09:49.588 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 19.7541ms
2024-09-17 08:09:49.690 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 08:09:49.789 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 99.8198ms
2024-09-17 08:09:50.009 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 08:09:50.189 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 180.2737ms
2024-09-17 08:10:33.968 +07:00 [DBG] Connection id "0HN6MMLMEGMFQ" received FIN.
2024-09-17 08:10:33.994 +07:00 [DBG] Connection id "0HN6MMLMEGMFQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 08:10:33.999 +07:00 [DBG] Connection id "0HN6MMLMEGMFQ" is closed. The last processed stream ID was 7.
2024-09-17 08:10:34.005 +07:00 [DBG] The connection queue processing loop for 0HN6MMLMEGMFQ completed.
2024-09-17 08:10:34.013 +07:00 [DBG] Connection id "0HN6MMLMEGMFQ" stopped.
2024-09-17 08:11:05.535 +07:00 [DBG] Connection id "0HN6MMLMEGMFR" accepted.
2024-09-17 08:11:05.538 +07:00 [DBG] Connection id "0HN6MMLMEGMFR" started.
2024-09-17 08:11:05.552 +07:00 [DBG] Connection 0HN6MMLMEGMFR established using the following protocol: "Tls13"
2024-09-17 08:11:05.556 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 08:11:05.565 +07:00 [DBG] POST requests are not supported
2024-09-17 08:11:05.591 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 08:11:05.598 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 08:11:05.611 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:11:05.704 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:11:05.710 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:11:05.738 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:11:05.746 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:11:05.752 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:11:05.757 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:11:05.766 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:11:05.772 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:11:05.779 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:11:05.984 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 08:11:06.010 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:11:06.021 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 08:11:06.027 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 08:11:06.032 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 08:11:06.035 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 08:11:06.044 +07:00 [DBG] Connection id "0HN6MMLMEGMFR", Request id "0HN6MMLMEGMFR:00000001": started reading request body.
2024-09-17 08:11:06.047 +07:00 [DBG] Connection id "0HN6MMLMEGMFR", Request id "0HN6MMLMEGMFR:00000001": done reading request body.
2024-09-17 08:11:06.149 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:11:06.155 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:11:06.160 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 08:11:06.174 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:11:06.869 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:11:06.907 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:11:06.967 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:11:06.974 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:11:06.980 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:11:06.998 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:11:07.066 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:11:07.125 +07:00 [DBG] Created DbConnection. (58ms).
2024-09-17 08:11:07.135 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:11:07.509 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:11:07.520 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:11:07.529 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2024-09-17 08:11:07.543 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (24ms).
2024-09-17 08:11:07.556 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 08:11:07.612 +07:00 [INF] Executed DbCommand (59ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 08:11:07.623 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:11:07.632 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2024-09-17 08:11:07.640 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:11:07.649 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (8ms).
2024-09-17 08:11:07.663 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:11:07.670 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:11:10.012 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 08:11:10.025 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 08:11:10.028 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-09-17 08:11:10.037 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-09-17 08:11:10.041 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-09-17 08:11:10.099 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 4317.9528ms
2024-09-17 08:11:10.103 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:11:10.112 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:11:10.122 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:11:10.127 +07:00 [DBG] Disposed connection to database '' on server '' (4ms).
2024-09-17 08:11:10.129 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 201 application/problem+json; charset=utf-8 4573.4385ms
2024-09-17 08:11:52.422 +07:00 [DBG] Connection id "0HN6MMLMEGMFR" received FIN.
2024-09-17 08:11:52.440 +07:00 [DBG] Connection id "0HN6MMLMEGMFR" is closed. The last processed stream ID was 1.
2024-09-17 08:11:52.443 +07:00 [DBG] The connection queue processing loop for 0HN6MMLMEGMFR completed.
2024-09-17 08:11:52.452 +07:00 [DBG] Connection id "0HN6MMLMEGMFR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 08:11:52.470 +07:00 [DBG] Connection id "0HN6MMLMEGMFR" stopped.
2024-09-17 08:15:03.306 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 08:15:03.455 +07:00 [DBG] Hosting starting
2024-09-17 08:15:03.494 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 08:15:03.508 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 08:15:03.516 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 08:15:03.523 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 08:15:03.527 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 08:15:03.533 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 08:15:03.537 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 08:15:03.539 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 08:15:03.540 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 08:15:03.546 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 08:15:03.548 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 08:15:03.552 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 08:15:03.554 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 08:15:03.758 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 08:15:03.761 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 08:15:03.762 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 08:15:03.762 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 08:15:03.763 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 08:15:03.764 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 08:15:03.814 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 08:15:03.816 +07:00 [INF] Hosting environment: Development
2024-09-17 08:15:03.818 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 08:15:03.821 +07:00 [DBG] Hosting started
2024-09-17 08:15:06.554 +07:00 [DBG] Connection id "0HN6MMOL8AMJI" accepted.
2024-09-17 08:15:06.559 +07:00 [DBG] Connection id "0HN6MMOL8AMJI" started.
2024-09-17 08:15:06.626 +07:00 [DBG] Connection 0HN6MMOL8AMJI established using the following protocol: "Tls13"
2024-09-17 08:15:06.696 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 08:15:06.807 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 08:15:06.879 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 08:15:06.884 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 08:15:06.908 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 08:15:06.913 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 08:15:06.920 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 229.8523ms
2024-09-17 08:15:06.929 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 08:15:06.929 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 08:15:06.959 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 30.7316ms
2024-09-17 08:15:07.015 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 86.6194ms
2024-09-17 08:15:07.330 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 08:15:07.480 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 150.1659ms
2024-09-17 08:16:26.428 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 141
2024-09-17 08:16:26.440 +07:00 [DBG] POST requests are not supported
2024-09-17 08:16:26.472 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 08:16:26.480 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 08:16:26.494 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:16:26.560 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:16:26.568 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:16:26.593 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:16:26.604 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:16:26.610 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:16:26.615 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:16:26.618 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:16:26.619 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:16:26.621 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:16:26.736 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 08:16:26.757 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:16:26.764 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 08:16:26.772 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 08:16:26.779 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 08:16:26.786 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 08:16:26.796 +07:00 [DBG] Connection id "0HN6MMOL8AMJI", Request id "0HN6MMOL8AMJI:00000009": started reading request body.
2024-09-17 08:16:26.800 +07:00 [DBG] Connection id "0HN6MMOL8AMJI", Request id "0HN6MMOL8AMJI:00000009": done reading request body.
2024-09-17 08:16:26.911 +07:00 [DBG] JSON input formatter threw an exception.
Newtonsoft.Json.JsonSerializationException: Error converting value "ebd83cd4-b96b-4969-b238-267135571a9a6" to type 'System.Guid'. Path 'patientId', line 4, position 54.
 ---> System.ArgumentException: Could not cast or convert from System.String to System.Guid.
   at Newtonsoft.Json.Utilities.ConvertUtils.EnsureTypeAssignable(Object value, Type initialType, Type targetType)
   at Newtonsoft.Json.Utilities.ConvertUtils.ConvertOrCast(Object initialValue, CultureInfo culture, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.SetPropertyValue(JsonProperty property, JsonConverter propertyConverter, JsonContainerContract containerContract, JsonProperty containerProperty, JsonReader reader, Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, JsonProperty member, String id)
2024-09-17 08:16:26.982 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:16:26.987 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:16:26.992 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 08:16:27.004 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:16:27.011 +07:00 [DBG] The request has model state errors, returning an error response.
2024-09-17 08:16:27.015 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-09-17 08:16:27.022 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 08:16:27.031 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 08:16:27.034 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-09-17 08:16:27.043 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-09-17 08:16:27.050 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-09-17 08:16:27.114 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 490.4345ms
2024-09-17 08:16:27.118 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:16:27.125 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 400 399 application/problem+json; charset=utf-8 697.8686ms
2024-09-17 08:18:55.961 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/8ee2cbfb-1c67-45f7-28b7-08dcd564bbe6 - null null
2024-09-17 08:18:55.969 +07:00 [DBG] DELETE requests are not supported
2024-09-17 08:18:55.973 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/8ee2cbfb-1c67-45f7-28b7-08dcd564bbe6'
2024-09-17 08:18:55.977 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/8ee2cbfb-1c67-45f7-28b7-08dcd564bbe6'
2024-09-17 08:18:55.983 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:18:55.987 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:18:55.994 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:18:56.005 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:18:56.007 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:18:56.009 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:18:56.011 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:18:56.012 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:18:56.014 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:18:56.017 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:18:56.028 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:18:56.031 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 08:18:56.035 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 08:18:56.038 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:18:56.041 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:18:56.042 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 08:18:56.045 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 08:18:56.627 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:18:56.694 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .SingleOrDefault(ap => ap.AppoitmentId == __id_0)'
2024-09-17 08:18:56.928 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Appointment.AppoitmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppoitmentStatus (string) Required MaxLength(50), 1], [Property: Appointment.AppoitmentTime (DateTime) Required, 2], [Property: Appointment.PatientId (Guid) Required FK Index, 3] }
        SELECT TOP(2) a.AppoitmentId, a.AppoitmentStatus, a.AppoitmentTime, a.PatientId
        FROM Appointment AS a
        WHERE a.AppoitmentId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 08:18:56.965 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:18:56.990 +07:00 [DBG] Created DbConnection. (21ms).
2024-09-17 08:18:56.997 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:18:57.287 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:18:57.293 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:18:57.305 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2024-09-17 08:18:57.319 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (25ms).
2024-09-17 08:18:57.333 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:18:57.393 +07:00 [INF] Executed DbCommand (66ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:18:57.434 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:18:57.461 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:18:57.472 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 65ms reading results.
2024-09-17 08:18:57.480 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:18:57.487 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (6ms).
2024-09-17 08:18:57.500 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:18:57.511 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:18:57.518 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:18:57.539 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:18:57.594 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:18:57.603 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:18:57.608 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:18:57.609 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:18:57.609 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:18:57.611 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:18:57.626 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:18:57.632 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:18:57.636 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2024-09-17 08:18:57.640 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:18:57.642 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 08:18:57.646 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:18:57.650 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:18:57.653 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 08:18:57.654 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 1636.4869ms
2024-09-17 08:18:57.655 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:18:57.658 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:18:57.664 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:18:57.667 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-09-17 08:18:57.669 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/8ee2cbfb-1c67-45f7-28b7-08dcd564bbe6 - 200 0 null 1712.8488ms
2024-09-17 08:19:15.030 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/274e5951-0ccd-4484-28ba-08dcd564bbe6 - null null
2024-09-17 08:19:15.038 +07:00 [DBG] DELETE requests are not supported
2024-09-17 08:19:15.041 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/274e5951-0ccd-4484-28ba-08dcd564bbe6'
2024-09-17 08:19:15.044 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/274e5951-0ccd-4484-28ba-08dcd564bbe6'
2024-09-17 08:19:15.049 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:19:15.054 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:19:15.057 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:19:15.060 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:19:15.068 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:19:15.071 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:19:15.077 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:19:15.085 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:19:15.087 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:19:15.088 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:19:15.094 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:19:15.095 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 08:19:15.096 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 08:19:15.097 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:19:15.099 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:19:15.101 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 08:19:15.102 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 08:19:15.116 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:19:15.120 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:19:15.121 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-17 08:19:15.122 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:15.123 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:15.124 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:19:15.124 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:19:15.125 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:19:15.127 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:19:15.131 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:19:15.134 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:19:15.137 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:15.140 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 6ms reading results.
2024-09-17 08:19:15.142 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:15.143 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 08:19:15.144 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:19:15.145 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:19:15.145 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:19:15.148 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:19:15.149 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:15.150 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:15.151 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:19:15.151 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:19:15.153 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:19:15.155 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:19:15.159 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:19:15.164 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:15.166 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-09-17 08:19:15.169 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:15.170 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 08:19:15.172 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:19:15.174 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:19:15.176 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 08:19:15.177 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 88.1172ms
2024-09-17 08:19:15.177 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:19:15.178 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:19:15.179 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:15.181 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-17 08:19:15.183 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/274e5951-0ccd-4484-28ba-08dcd564bbe6 - 200 0 null 153.8164ms
2024-09-17 08:19:25.794 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 08:19:25.802 +07:00 [DBG] POST requests are not supported
2024-09-17 08:19:25.804 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 08:19:25.806 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 08:19:25.810 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:19:25.812 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:19:25.814 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:19:25.816 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:19:25.820 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:19:25.821 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:19:25.822 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:19:25.824 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:19:25.826 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:19:25.827 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:19:25.829 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:19:25.830 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 08:19:25.831 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 08:19:25.832 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 08:19:25.834 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 08:19:25.835 +07:00 [DBG] Connection id "0HN6MMOL8AMJI", Request id "0HN6MMOL8AMJI:0000000F": started reading request body.
2024-09-17 08:19:25.836 +07:00 [DBG] Connection id "0HN6MMOL8AMJI", Request id "0HN6MMOL8AMJI:0000000F": done reading request body.
2024-09-17 08:19:25.839 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:19:25.840 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:19:25.842 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 08:19:25.846 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:19:25.896 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:19:25.918 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:19:25.930 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:19:25.932 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:19:25.940 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:19:25.944 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:19:25.956 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:19:25.960 +07:00 [DBG] Created DbConnection. (3ms).
2024-09-17 08:19:25.966 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:25.972 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:25.978 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:19:25.979 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:19:25.983 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-09-17 08:19:25.984 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 08:19:25.992 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 08:19:25.993 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:25.995 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 08:19:25.997 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:25.998 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 08:19:25.999 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:19:26.001 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:19:26.170 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 08:19:26.172 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 08:19:26.174 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-09-17 08:19:26.176 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-09-17 08:19:26.178 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-09-17 08:19:26.183 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 355.4281ms
2024-09-17 08:19:26.184 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:19:26.185 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:19:26.190 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:19:26.192 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-17 08:19:26.193 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 201 application/problem+json; charset=utf-8 399.627ms
2024-09-17 08:21:26.417 +07:00 [DBG] Connection id "0HN6MMOL8AMJI" received FIN.
2024-09-17 08:21:26.460 +07:00 [DBG] Connection id "0HN6MMOL8AMJI" is closed. The last processed stream ID was 15.
2024-09-17 08:21:26.465 +07:00 [DBG] The connection queue processing loop for 0HN6MMOL8AMJI completed.
2024-09-17 08:21:26.467 +07:00 [DBG] Connection id "0HN6MMOL8AMJI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 08:21:26.489 +07:00 [DBG] Connection id "0HN6MMOL8AMJI" stopped.
2024-09-17 08:26:19.547 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 08:26:19.658 +07:00 [DBG] Hosting starting
2024-09-17 08:26:19.697 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 08:26:19.707 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 08:26:19.716 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 08:26:19.724 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 08:26:19.730 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 08:26:19.739 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 08:26:19.745 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 08:26:19.746 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 08:26:19.749 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 08:26:19.753 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 08:26:19.756 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 08:26:19.757 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 08:26:19.759 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 08:26:19.924 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 08:26:19.928 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 08:26:19.931 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 08:26:19.934 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 08:26:19.935 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 08:26:19.938 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 08:26:19.989 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 08:26:19.992 +07:00 [INF] Hosting environment: Development
2024-09-17 08:26:19.997 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 08:26:19.998 +07:00 [DBG] Hosting started
2024-09-17 08:26:42.631 +07:00 [DBG] Connection id "0HN6MMV4MKIED" accepted.
2024-09-17 08:26:42.634 +07:00 [DBG] Connection id "0HN6MMV4MKIED" started.
2024-09-17 08:26:42.718 +07:00 [DBG] Connection 0HN6MMV4MKIED established using the following protocol: "Tls13"
2024-09-17 08:26:42.773 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 08:26:42.883 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 08:26:42.951 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 08:26:42.957 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 08:26:42.986 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 08:26:42.988 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 08:26:42.992 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 226.2596ms
2024-09-17 08:26:43.182 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 08:26:43.182 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 08:26:43.222 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 40.4173ms
2024-09-17 08:26:43.263 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.3869ms
2024-09-17 08:26:43.420 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 08:26:43.578 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 158.1259ms
2024-09-17 08:27:19.452 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/0390d4c5-d506-4c0c-28bb-08dcd564bbe6 - null null
2024-09-17 08:27:19.466 +07:00 [DBG] DELETE requests are not supported
2024-09-17 08:27:19.487 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/0390d4c5-d506-4c0c-28bb-08dcd564bbe6'
2024-09-17 08:27:19.495 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/0390d4c5-d506-4c0c-28bb-08dcd564bbe6'
2024-09-17 08:27:19.509 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:27:19.574 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:27:19.581 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:27:19.600 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:27:19.607 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:27:19.610 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:27:19.612 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:27:19.615 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:27:19.620 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:27:19.623 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:27:19.737 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 08:27:19.756 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:27:19.763 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 08:27:19.770 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 08:27:19.778 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:27:19.783 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:27:19.789 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 08:27:19.792 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 08:27:20.315 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:27:20.376 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .SingleOrDefault(ap => ap.AppoitmentId == __id_0)'
2024-09-17 08:27:20.550 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Appointment.AppoitmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppoitmentStatus (string) Required MaxLength(50), 1], [Property: Appointment.AppoitmentTime (DateTime) Required, 2], [Property: Appointment.PatientId (Guid) Required FK Index, 3] }
        SELECT TOP(2) a.AppoitmentId, a.AppoitmentStatus, a.AppoitmentTime, a.PatientId
        FROM Appointment AS a
        WHERE a.AppoitmentId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 08:27:20.581 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:27:20.606 +07:00 [DBG] Created DbConnection. (22ms).
2024-09-17 08:27:20.613 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:20.873 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:20.882 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:27:20.890 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-09-17 08:27:20.906 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (23ms).
2024-09-17 08:27:20.918 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:27:20.968 +07:00 [INF] Executed DbCommand (56ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:27:21.001 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:27:21.030 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:21.042 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 64ms reading results.
2024-09-17 08:27:21.049 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:21.057 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (7ms).
2024-09-17 08:27:21.071 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:27:21.082 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:27:21.088 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:27:21.109 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:27:21.180 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:21.188 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:21.195 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:27:21.196 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:27:21.198 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-09-17 08:27:21.200 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:27:21.208 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:27:21.213 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:21.215 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-09-17 08:27:21.217 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:21.219 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-09-17 08:27:21.226 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:27:21.229 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:27:21.231 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 08:27:21.235 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 1610.8731ms
2024-09-17 08:27:21.238 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:27:21.242 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:27:21.248 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:21.253 +07:00 [DBG] Disposed connection to database '' on server '' (4ms).
2024-09-17 08:27:21.256 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/0390d4c5-d506-4c0c-28bb-08dcd564bbe6 - 200 0 null 1804.4032ms
2024-09-17 08:27:40.485 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 08:27:40.493 +07:00 [DBG] POST requests are not supported
2024-09-17 08:27:40.497 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 08:27:40.501 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 08:27:40.504 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:27:40.510 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:27:40.514 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:27:40.521 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:27:40.529 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:27:40.535 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:27:40.541 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:27:40.550 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:27:40.552 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:27:40.554 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:27:40.556 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:27:40.557 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 08:27:40.559 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 08:27:40.562 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 08:27:40.563 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 08:27:40.569 +07:00 [DBG] Connection id "0HN6MMV4MKIED", Request id "0HN6MMV4MKIED:0000000B": started reading request body.
2024-09-17 08:27:40.571 +07:00 [DBG] Connection id "0HN6MMV4MKIED", Request id "0HN6MMV4MKIED:0000000B": done reading request body.
2024-09-17 08:27:40.644 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:27:40.648 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:27:40.654 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 08:27:40.664 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:27:40.686 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:27:40.707 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:27:40.720 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:27:40.726 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:27:40.729 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:27:40.730 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:27:40.742 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:27:40.746 +07:00 [DBG] Created DbConnection. (3ms).
2024-09-17 08:27:40.749 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:40.751 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:40.753 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:27:40.754 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:27:40.757 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-09-17 08:27:40.758 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 08:27:40.765 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 08:27:40.767 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:40.769 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 08:27:40.770 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:40.771 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 08:27:40.774 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:27:40.775 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:27:40.778 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 08:27:40.785 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 08:27:40.789 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:40.790 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:40.791 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:27:40.792 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:27:40.793 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-17 08:27:40.795 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 08:27:40.800 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 08:27:40.813 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:27:40.826 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:27:40.842 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:40.847 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 45ms reading results.
2024-09-17 08:27:40.855 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:40.858 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (3ms).
2024-09-17 08:27:40.864 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 08:27:40.868 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 08:27:40.869 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 08:27:40.869 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 08:27:40.872 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 08:27:40.873 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:27:40.897 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 343.6275ms
2024-09-17 08:27:40.902 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:27:40.906 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:27:40.910 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:27:40.914 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-09-17 08:27:40.919 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 123 application/json; charset=utf-8 434.007ms
2024-09-17 08:28:28.556 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/c53674db-03cb-4d7f-28b8-08dcd564bbe6 - null null
2024-09-17 08:28:28.566 +07:00 [DBG] DELETE requests are not supported
2024-09-17 08:28:28.569 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/c53674db-03cb-4d7f-28b8-08dcd564bbe6'
2024-09-17 08:28:28.571 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/c53674db-03cb-4d7f-28b8-08dcd564bbe6'
2024-09-17 08:28:28.579 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:28.588 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:28:28.592 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:28.596 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:28:28.606 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:28:28.612 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:28:28.614 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:28:28.616 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:28:28.616 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:28:28.617 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:28:28.622 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:28:28.623 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 08:28:28.624 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 08:28:28.625 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:28.625 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:28.627 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 08:28:28.628 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:28.678 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:28:28.688 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:28:28.689 +07:00 [DBG] Created DbConnection. (1ms).
2024-09-17 08:28:28.694 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:28.697 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:28.698 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:28:28.699 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:28:28.699 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:28:28.700 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:28:28.708 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:28:28.711 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:28.712 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:28.713 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 08:28:28.713 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:28.714 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 08:28:28.715 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:28.716 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:28:28.717 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:28:28.718 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:28:28.719 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:28.721 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:28.722 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:28:28.722 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:28:28.723 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:28:28.724 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:28:28.728 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:28:28.730 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:28.731 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 08:28:28.733 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:28.734 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 08:28:28.735 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:28.736 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:28:28.737 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 08:28:28.738 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 120.424ms
2024-09-17 08:28:28.739 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:28.739 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:28:28.740 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:28.741 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-17 08:28:28.742 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/c53674db-03cb-4d7f-28b8-08dcd564bbe6 - 200 0 null 186.2839ms
2024-09-17 08:28:38.691 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/c8678faf-a1e3-49b2-28bc-08dcd564bbe6 - null null
2024-09-17 08:28:38.693 +07:00 [DBG] DELETE requests are not supported
2024-09-17 08:28:38.694 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/c8678faf-a1e3-49b2-28bc-08dcd564bbe6'
2024-09-17 08:28:38.696 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/c8678faf-a1e3-49b2-28bc-08dcd564bbe6'
2024-09-17 08:28:38.698 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:38.699 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:28:38.700 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:38.701 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:28:38.704 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:28:38.706 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:28:38.707 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:28:38.710 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:28:38.717 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:28:38.723 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:28:38.726 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:28:38.729 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 08:28:38.731 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 08:28:38.733 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:38.736 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:38.738 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 08:28:38.740 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:38.745 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:28:38.752 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:28:38.756 +07:00 [DBG] Created DbConnection. (4ms).
2024-09-17 08:28:38.759 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:38.763 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:38.765 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:28:38.767 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-09-17 08:28:38.768 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-09-17 08:28:38.769 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:28:38.771 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:28:38.773 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:38.775 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:38.776 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-09-17 08:28:38.777 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:38.778 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 08:28:38.780 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:38.781 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:28:38.782 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:28:38.783 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:28:38.784 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:38.785 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:38.787 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:28:38.788 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:28:38.789 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-17 08:28:38.790 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:28:38.793 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:28:38.795 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:38.796 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 08:28:38.797 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:38.798 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 08:28:38.800 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:38.803 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:28:38.804 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 08:28:38.805 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 81.7128ms
2024-09-17 08:28:38.806 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:38.807 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:28:38.808 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:38.809 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-17 08:28:38.811 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/c8678faf-a1e3-49b2-28bc-08dcd564bbe6 - 200 0 null 120.0112ms
2024-09-17 08:28:44.636 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/2dbb4451-f748-4baf-28be-08dcd564bbe6 - null null
2024-09-17 08:28:44.643 +07:00 [DBG] DELETE requests are not supported
2024-09-17 08:28:44.645 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/2dbb4451-f748-4baf-28be-08dcd564bbe6'
2024-09-17 08:28:44.646 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/2dbb4451-f748-4baf-28be-08dcd564bbe6'
2024-09-17 08:28:44.648 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:44.650 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:28:44.651 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:44.656 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:28:44.665 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:28:44.673 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:28:44.679 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:28:44.682 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:28:44.684 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:28:44.685 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:28:44.687 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:28:44.689 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 08:28:44.691 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 08:28:44.692 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:44.694 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:44.697 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 08:28:44.698 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:44.699 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:28:44.701 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:28:44.702 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-17 08:28:44.703 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:44.705 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:44.705 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:28:44.706 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:28:44.707 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:28:44.708 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:28:44.711 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:28:44.714 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:44.715 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:44.715 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 08:28:44.717 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:44.719 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 08:28:44.720 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:44.721 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:28:44.722 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:28:44.723 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:28:44.725 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:44.727 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:44.728 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:28:44.729 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:28:44.730 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-17 08:28:44.732 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:28:44.735 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:28:44.737 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:44.738 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 08:28:44.739 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:44.740 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 08:28:44.741 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:44.742 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:28:44.743 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 08:28:44.743 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 58.0708ms
2024-09-17 08:28:44.745 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:44.746 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:28:44.747 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:44.748 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-17 08:28:44.749 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/2dbb4451-f748-4baf-28be-08dcd564bbe6 - 200 0 null 113.2091ms
2024-09-17 08:28:50.577 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/eb15fe1a-8073-4aa3-28bf-08dcd564bbe6 - null null
2024-09-17 08:28:50.579 +07:00 [DBG] DELETE requests are not supported
2024-09-17 08:28:50.580 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/eb15fe1a-8073-4aa3-28bf-08dcd564bbe6'
2024-09-17 08:28:50.584 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/eb15fe1a-8073-4aa3-28bf-08dcd564bbe6'
2024-09-17 08:28:50.586 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:50.587 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:28:50.589 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:50.590 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:28:50.594 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:28:50.598 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:28:50.603 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:28:50.606 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:28:50.608 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:28:50.610 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:28:50.611 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:28:50.612 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 08:28:50.613 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 08:28:50.614 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:50.615 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:50.616 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 08:28:50.617 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:50.619 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:28:50.621 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:28:50.622 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-17 08:28:50.623 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:50.624 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:50.624 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:28:50.625 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:28:50.628 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-09-17 08:28:50.629 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:28:50.631 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:28:50.632 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:50.635 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:50.635 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-09-17 08:28:50.637 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:50.638 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 08:28:50.639 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:50.642 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:28:50.643 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:28:50.643 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:28:50.644 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:50.645 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:50.647 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:28:50.650 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-09-17 08:28:50.652 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-09-17 08:28:50.653 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:28:50.656 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:28:50.658 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:50.659 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-17 08:28:50.660 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:50.663 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-09-17 08:28:50.665 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:50.666 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:28:50.667 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 08:28:50.669 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 59.2351ms
2024-09-17 08:28:50.670 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:50.671 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:28:50.672 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:50.674 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-17 08:28:50.678 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/eb15fe1a-8073-4aa3-28bf-08dcd564bbe6 - 200 0 null 100.845ms
2024-09-17 08:28:57.024 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/c0bee088-89c1-408e-28c0-08dcd564bbe6 - null null
2024-09-17 08:28:57.029 +07:00 [DBG] DELETE requests are not supported
2024-09-17 08:28:57.031 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/c0bee088-89c1-408e-28c0-08dcd564bbe6'
2024-09-17 08:28:57.034 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/c0bee088-89c1-408e-28c0-08dcd564bbe6'
2024-09-17 08:28:57.035 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:57.037 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:28:57.038 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:57.039 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:28:57.041 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:28:57.043 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:28:57.049 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:28:57.051 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:28:57.053 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:28:57.054 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:28:57.055 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:28:57.056 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 08:28:57.057 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 08:28:57.058 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:57.059 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:57.060 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 08:28:57.061 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 08:28:57.063 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:28:57.065 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:28:57.066 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-17 08:28:57.067 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:57.068 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:57.069 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:28:57.070 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:28:57.071 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-17 08:28:57.072 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:28:57.076 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:28:57.079 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:57.080 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:57.080 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 08:28:57.081 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:57.082 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 08:28:57.083 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:57.084 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:28:57.085 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:28:57.086 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:28:57.087 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:57.088 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:57.089 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:28:57.090 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:28:57.092 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-17 08:28:57.093 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:28:57.095 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:28:57.097 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:57.098 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 08:28:57.100 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:57.101 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 08:28:57.101 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:28:57.103 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:28:57.103 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 08:28:57.104 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 50.1536ms
2024-09-17 08:28:57.106 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:28:57.107 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:28:57.108 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:28:57.110 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-17 08:28:57.112 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/c0bee088-89c1-408e-28c0-08dcd564bbe6 - 200 0 null 87.8415ms
2024-09-17 08:29:05.099 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/8d37e883-be37-4e80-c778-08dcd6b59bad - null null
2024-09-17 08:29:05.104 +07:00 [DBG] DELETE requests are not supported
2024-09-17 08:29:05.106 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/8d37e883-be37-4e80-c778-08dcd6b59bad'
2024-09-17 08:29:05.107 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/8d37e883-be37-4e80-c778-08dcd6b59bad'
2024-09-17 08:29:05.109 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:29:05.110 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:29:05.111 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:29:05.113 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:29:05.116 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:29:05.118 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:29:05.120 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:29:05.124 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:29:05.125 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:29:05.128 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:29:05.130 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:29:05.131 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 08:29:05.133 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 08:29:05.137 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:29:05.138 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:29:05.140 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 08:29:05.141 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 08:29:05.143 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:29:05.145 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:29:05.145 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-17 08:29:05.147 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:05.149 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:05.150 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:29:05.150 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:29:05.151 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:29:05.152 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:29:05.155 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:29:05.158 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:29:05.159 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:05.160 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-09-17 08:29:05.162 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:05.163 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 08:29:05.164 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:29:05.165 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:29:05.166 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:29:05.166 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:29:05.168 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:05.169 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:05.170 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:29:05.171 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:29:05.172 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-17 08:29:05.174 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:29:05.179 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:29:05.180 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:05.182 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 08:29:05.183 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:05.185 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 08:29:05.186 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:29:05.188 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:29:05.189 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 08:29:05.190 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 62.1637ms
2024-09-17 08:29:05.191 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:29:05.191 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:29:05.192 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:05.193 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-17 08:29:05.194 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/8d37e883-be37-4e80-c778-08dcd6b59bad - 200 0 null 95.5891ms
2024-09-17 08:29:12.157 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/782b082b-9235-449e-ad0b-08dcd6b6c51c - null null
2024-09-17 08:29:12.166 +07:00 [DBG] DELETE requests are not supported
2024-09-17 08:29:12.170 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/782b082b-9235-449e-ad0b-08dcd6b6c51c'
2024-09-17 08:29:12.176 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/782b082b-9235-449e-ad0b-08dcd6b6c51c'
2024-09-17 08:29:12.178 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:29:12.179 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:29:12.180 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:29:12.182 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:29:12.183 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:29:12.183 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:29:12.184 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:29:12.185 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:29:12.186 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:29:12.188 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:29:12.190 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:29:12.191 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 08:29:12.192 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 08:29:12.193 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:29:12.193 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:29:12.195 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 08:29:12.196 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 08:29:12.198 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:29:12.201 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:29:12.202 +07:00 [DBG] Created DbConnection. (1ms).
2024-09-17 08:29:12.203 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:12.204 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:12.205 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:29:12.206 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:29:12.207 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:29:12.208 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:29:12.213 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:29:12.215 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:29:12.218 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:12.219 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-09-17 08:29:12.221 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:12.222 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 08:29:12.224 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:29:12.227 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:29:12.228 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:29:12.229 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:29:12.230 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:12.232 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:12.234 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:29:12.234 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:29:12.235 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:29:12.236 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:29:12.239 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:29:12.241 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:12.242 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-17 08:29:12.243 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:12.245 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-09-17 08:29:12.247 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:29:12.248 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:29:12.249 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 08:29:12.250 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 61.8156ms
2024-09-17 08:29:12.250 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:29:12.252 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:29:12.253 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:12.254 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-17 08:29:12.255 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/782b082b-9235-449e-ad0b-08dcd6b6c51c - 200 0 null 98.8381ms
2024-09-17 08:29:18.336 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/f7cc5f02-b7ff-4260-c3ee-08dcd6b7ec07 - null null
2024-09-17 08:29:18.338 +07:00 [DBG] DELETE requests are not supported
2024-09-17 08:29:18.338 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/f7cc5f02-b7ff-4260-c3ee-08dcd6b7ec07'
2024-09-17 08:29:18.339 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/f7cc5f02-b7ff-4260-c3ee-08dcd6b7ec07'
2024-09-17 08:29:18.341 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:29:18.343 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:29:18.344 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:29:18.345 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:29:18.351 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:29:18.355 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:29:18.357 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:29:18.361 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:29:18.366 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:29:18.369 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:29:18.372 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:29:18.374 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 08:29:18.375 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 08:29:18.376 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:29:18.378 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 08:29:18.380 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 08:29:18.381 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 08:29:18.383 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:29:18.384 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:29:18.385 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-17 08:29:18.386 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:18.386 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:18.387 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:29:18.388 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:29:18.389 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:29:18.390 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:29:18.392 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 08:29:18.393 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:29:18.394 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:18.395 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-09-17 08:29:18.397 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:18.398 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 08:29:18.399 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:29:18.400 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:29:18.400 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:29:18.401 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:29:18.402 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:18.403 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:18.405 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:29:18.405 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 08:29:18.406 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:29:18.407 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:29:18.410 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 08:29:18.412 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:18.414 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 08:29:18.415 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:18.416 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 08:29:18.418 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:29:18.420 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:29:18.421 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 08:29:18.422 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 52.4467ms
2024-09-17 08:29:18.422 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 08:29:18.424 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:29:18.425 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:29:18.426 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-17 08:29:18.427 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/f7cc5f02-b7ff-4260-c3ee-08dcd6b7ec07 - 200 0 null 91.7593ms
2024-09-17 08:30:14.836 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 08:30:14.985 +07:00 [DBG] Hosting starting
2024-09-17 08:30:15.023 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 08:30:15.038 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 08:30:15.046 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 08:30:15.053 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 08:30:15.058 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 08:30:15.067 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 08:30:15.073 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 08:30:15.076 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 08:30:15.079 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 08:30:15.084 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 08:30:15.087 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 08:30:15.090 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 08:30:15.092 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 08:30:15.306 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 08:30:15.311 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 08:30:15.313 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 08:30:15.315 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 08:30:15.317 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 08:30:15.318 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 08:30:15.378 +07:00 [DBG] Connection id "0HN6MN143HK4J" accepted.
2024-09-17 08:30:15.383 +07:00 [DBG] Connection id "0HN6MN143HK4J" started.
2024-09-17 08:30:15.383 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 08:30:15.390 +07:00 [INF] Hosting environment: Development
2024-09-17 08:30:15.392 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 08:30:15.398 +07:00 [DBG] Hosting started
2024-09-17 08:30:15.446 +07:00 [DBG] Connection 0HN6MN143HK4J established using the following protocol: "Tls13"
2024-09-17 08:30:16.191 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 08:30:16.323 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 08:30:16.402 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 08:30:16.405 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 08:30:16.438 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 08:30:16.440 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 08:30:16.447 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 263.3928ms
2024-09-17 08:30:16.452 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 08:30:16.469 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 17.3363ms
2024-09-17 08:30:16.586 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 08:30:16.645 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.5003ms
2024-09-17 08:30:16.822 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 08:30:17.034 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 212.6267ms
2024-09-17 08:30:43.697 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 08:30:43.711 +07:00 [DBG] POST requests are not supported
2024-09-17 08:30:43.734 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 08:30:43.743 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 08:30:43.757 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:30:43.822 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:30:43.827 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:30:43.847 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:30:43.856 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:30:43.863 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:30:43.867 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:30:43.873 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:30:43.875 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:30:43.877 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:30:43.983 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 08:30:44.004 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:30:44.015 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 08:30:44.022 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 08:30:44.027 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 08:30:44.035 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 08:30:44.044 +07:00 [DBG] Connection id "0HN6MN143HK4J", Request id "0HN6MN143HK4J:00000009": started reading request body.
2024-09-17 08:30:44.052 +07:00 [DBG] Connection id "0HN6MN143HK4J", Request id "0HN6MN143HK4J:00000009": done reading request body.
2024-09-17 08:30:44.163 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:30:44.167 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:30:44.172 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 08:30:44.185 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:30:44.821 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:30:44.857 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:30:44.905 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:30:44.911 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:30:44.918 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:30:44.930 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:30:44.992 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:30:45.029 +07:00 [DBG] Created DbConnection. (36ms).
2024-09-17 08:30:45.036 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:30:45.344 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:30:45.351 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:30:45.359 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-09-17 08:30:45.371 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2024-09-17 08:30:45.384 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 08:30:45.436 +07:00 [INF] Executed DbCommand (54ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 08:30:45.443 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:30:45.454 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 10ms reading results.
2024-09-17 08:30:45.461 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:30:45.469 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (7ms).
2024-09-17 08:30:45.481 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:30:45.484 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:30:45.520 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 08:30:45.736 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 08:30:45.774 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:30:45.779 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:30:45.785 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:30:45.790 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-09-17 08:30:45.797 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-09-17 08:30:45.801 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 08:30:45.815 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 08:30:45.843 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:30:45.858 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:30:45.884 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:30:45.891 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 70ms reading results.
2024-09-17 08:30:45.898 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:30:45.904 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (6ms).
2024-09-17 08:30:47.948 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 08:30:47.960 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 08:30:47.964 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-09-17 08:30:47.971 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-09-17 08:30:47.973 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-09-17 08:30:48.015 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 4136.8773ms
2024-09-17 08:30:48.020 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:30:48.038 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:30:48.044 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:30:48.049 +07:00 [DBG] Disposed connection to database '' on server '' (5ms).
2024-09-17 08:30:48.055 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 201 application/problem+json; charset=utf-8 4358.2179ms
2024-09-17 08:36:54.248 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 08:36:54.363 +07:00 [DBG] Hosting starting
2024-09-17 08:36:54.390 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 08:36:54.399 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 08:36:54.404 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 08:36:54.409 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 08:36:54.413 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 08:36:54.417 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 08:36:54.421 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 08:36:54.423 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 08:36:54.424 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 08:36:54.428 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 08:36:54.430 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 08:36:54.433 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 08:36:54.435 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 08:36:54.613 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 08:36:54.615 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 08:36:54.615 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 08:36:54.616 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 08:36:54.618 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 08:36:54.619 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 08:36:54.673 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 08:36:54.675 +07:00 [INF] Hosting environment: Development
2024-09-17 08:36:54.677 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 08:36:54.678 +07:00 [DBG] Hosting started
2024-09-17 08:36:54.799 +07:00 [DBG] Connection id "0HN6MN4R4NC6V" accepted.
2024-09-17 08:36:54.803 +07:00 [DBG] Connection id "0HN6MN4R4NC6V" started.
2024-09-17 08:36:54.848 +07:00 [DBG] Connection id "0HN6MN4R4NC70" accepted.
2024-09-17 08:36:54.851 +07:00 [DBG] Connection id "0HN6MN4R4NC70" started.
2024-09-17 08:36:54.856 +07:00 [DBG] Connection 0HN6MN4R4NC6V established using the following protocol: "Tls13"
2024-09-17 08:36:54.859 +07:00 [DBG] Connection 0HN6MN4R4NC70 established using the following protocol: "Tls13"
2024-09-17 08:36:54.904 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 08:36:55.001 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 08:36:55.075 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 08:36:55.078 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 08:36:55.102 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 08:36:55.104 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 08:36:55.108 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 208.3617ms
2024-09-17 08:36:55.334 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 08:36:55.334 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 08:36:55.355 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 21.1179ms
2024-09-17 08:36:55.398 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.3689ms
2024-09-17 08:36:55.515 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 08:36:55.689 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 173.9643ms
2024-09-17 08:37:29.527 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 08:37:29.541 +07:00 [DBG] POST requests are not supported
2024-09-17 08:37:29.565 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 08:37:29.573 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 08:37:29.584 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:37:29.651 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 08:37:29.657 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:37:29.679 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 08:37:29.690 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 08:37:29.697 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 08:37:29.705 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:37:29.711 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 08:37:29.713 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 08:37:29.715 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:37:29.834 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 08:37:29.865 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 08:37:29.874 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 08:37:29.880 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 08:37:29.886 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 08:37:29.891 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 08:37:29.903 +07:00 [DBG] Connection id "0HN6MN4R4NC6V", Request id "0HN6MN4R4NC6V:00000009": started reading request body.
2024-09-17 08:37:29.908 +07:00 [DBG] Connection id "0HN6MN4R4NC6V", Request id "0HN6MN4R4NC6V:00000009": done reading request body.
2024-09-17 08:37:29.998 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:37:29.999 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:37:30.001 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 08:37:30.011 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:37:30.653 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 08:37:30.688 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:37:30.736 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:37:30.745 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 08:37:30.754 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 08:37:30.771 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 08:37:30.838 +07:00 [DBG] Creating DbConnection.
2024-09-17 08:37:30.879 +07:00 [DBG] Created DbConnection. (39ms).
2024-09-17 08:37:30.885 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:37:31.192 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:37:31.202 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:37:31.214 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2024-09-17 08:37:31.229 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (26ms).
2024-09-17 08:37:31.244 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 08:37:31.305 +07:00 [INF] Executed DbCommand (65ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 08:37:31.317 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:37:31.330 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 10ms reading results.
2024-09-17 08:37:31.338 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:37:31.350 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (11ms).
2024-09-17 08:37:31.359 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:37:31.370 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 08:37:31.411 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 08:37:31.603 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 08:37:31.635 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:37:31.642 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:37:31.647 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 08:37:31.648 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-09-17 08:37:31.650 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-09-17 08:37:31.651 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 08:37:31.658 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 08:37:31.677 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:37:31.693 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 08:37:31.709 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:37:31.716 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 55ms reading results.
2024-09-17 08:37:31.723 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:37:31.727 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (3ms).
2024-09-17 08:37:38.145 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 08:37:38.158 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 08:37:38.159 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 08:37:38.161 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 08:37:38.163 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 08:37:38.165 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 08:37:38.194 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 8478.0228ms
2024-09-17 08:37:38.199 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 08:37:38.218 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 08:37:38.227 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 08:37:38.235 +07:00 [DBG] Disposed connection to database '' on server '' (7ms).
2024-09-17 08:37:38.243 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 8716.345ms
2024-09-17 08:39:26.421 +07:00 [DBG] Connection id "0HN6MN4R4NC70" received FIN.
2024-09-17 08:39:26.432 +07:00 [DBG] Connection id "0HN6MN4R4NC6V" received FIN.
2024-09-17 08:39:26.454 +07:00 [DBG] Connection id "0HN6MN4R4NC6V" is closed. The last processed stream ID was 9.
2024-09-17 08:39:26.458 +07:00 [DBG] The connection queue processing loop for 0HN6MN4R4NC6V completed.
2024-09-17 08:39:26.454 +07:00 [DBG] Connection id "0HN6MN4R4NC70" is closed. The last processed stream ID was 0.
2024-09-17 08:39:26.458 +07:00 [DBG] The connection queue processing loop for 0HN6MN4R4NC70 completed.
2024-09-17 08:39:26.470 +07:00 [DBG] Connection id "0HN6MN4R4NC6V" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 08:39:26.477 +07:00 [DBG] Connection id "0HN6MN4R4NC70" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 08:39:26.489 +07:00 [DBG] Connection id "0HN6MN4R4NC6V" stopped.
2024-09-17 08:39:26.489 +07:00 [DBG] Connection id "0HN6MN4R4NC70" stopped.
2024-09-17 08:58:08.088 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 08:58:08.211 +07:00 [DBG] Hosting starting
2024-09-17 08:58:08.240 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 08:58:08.250 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 08:58:08.261 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 08:58:08.269 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 08:58:08.277 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 08:58:08.285 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 08:58:08.294 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 08:58:08.300 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 08:58:08.307 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 08:58:08.316 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 08:58:08.323 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 08:58:08.330 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 08:58:08.336 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 08:58:08.520 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 08:58:08.522 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 08:58:08.526 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 08:58:08.532 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 08:58:08.536 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 08:58:08.541 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 08:58:08.592 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 08:58:08.596 +07:00 [INF] Hosting environment: Development
2024-09-17 08:58:08.601 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 08:58:08.604 +07:00 [DBG] Hosting started
2024-09-17 08:58:17.188 +07:00 [DBG] Connection id "0HN6MNGPAHE3J" accepted.
2024-09-17 08:58:17.195 +07:00 [DBG] Connection id "0HN6MNGPAHE3J" started.
2024-09-17 08:58:17.274 +07:00 [DBG] Connection 0HN6MNGPAHE3J established using the following protocol: "Tls13"
2024-09-17 08:58:17.330 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 08:58:17.420 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 08:58:17.487 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 08:58:17.493 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 08:58:17.516 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 08:58:17.519 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 08:58:17.523 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 198.2337ms
2024-09-17 08:58:17.732 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 08:58:17.732 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 08:58:17.768 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 36.7428ms
2024-09-17 08:58:17.795 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.047ms
2024-09-17 08:58:17.921 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 08:58:18.086 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 165.9473ms
2024-09-17 09:01:27.422 +07:00 [DBG] Connection id "0HN6MNGPAHE3J" received FIN.
2024-09-17 09:01:27.452 +07:00 [DBG] Connection id "0HN6MNGPAHE3J" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 09:01:27.458 +07:00 [DBG] Connection id "0HN6MNGPAHE3J" is closed. The last processed stream ID was 7.
2024-09-17 09:01:27.464 +07:00 [DBG] The connection queue processing loop for 0HN6MNGPAHE3J completed.
2024-09-17 09:01:27.469 +07:00 [DBG] Connection id "0HN6MNGPAHE3J" stopped.
2024-09-17 09:01:57.093 +07:00 [DBG] Connection id "0HN6MNGPAHE3K" accepted.
2024-09-17 09:01:57.104 +07:00 [DBG] Connection id "0HN6MNGPAHE3K" started.
2024-09-17 09:01:57.113 +07:00 [DBG] Connection 0HN6MNGPAHE3K established using the following protocol: "Tls13"
2024-09-17 09:01:57.129 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 09:01:57.136 +07:00 [DBG] POST requests are not supported
2024-09-17 09:01:57.161 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 09:01:57.170 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 09:01:57.185 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:01:57.261 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:01:57.267 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:01:57.285 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:01:57.289 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:01:57.291 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:01:57.294 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:01:57.296 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:01:57.297 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:01:57.300 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:01:57.403 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 09:01:57.422 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:01:57.431 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:01:57.436 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 09:01:57.441 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:01:57.447 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:01:57.458 +07:00 [DBG] Connection id "0HN6MNGPAHE3K", Request id "0HN6MNGPAHE3K:00000001": started reading request body.
2024-09-17 09:01:57.461 +07:00 [DBG] Connection id "0HN6MNGPAHE3K", Request id "0HN6MNGPAHE3K:00000001": done reading request body.
2024-09-17 09:01:57.538 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:01:57.541 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:01:57.542 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:01:57.555 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:01:58.175 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 09:01:58.210 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:01:58.256 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:01:58.262 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 09:01:58.268 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 09:01:58.282 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 09:01:58.346 +07:00 [DBG] Creating DbConnection.
2024-09-17 09:01:58.381 +07:00 [DBG] Created DbConnection. (33ms).
2024-09-17 09:01:58.387 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:01:58.719 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:01:58.729 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:01:58.735 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-09-17 09:01:58.748 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2024-09-17 09:01:58.762 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 09:01:58.831 +07:00 [INF] Executed DbCommand (69ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 09:01:58.841 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:01:58.856 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 13ms reading results.
2024-09-17 09:01:58.866 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:01:58.876 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (9ms).
2024-09-17 09:01:58.888 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:01:58.893 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 09:01:58.940 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 09:01:59.187 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 09:01:59.216 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:01:59.219 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:01:59.221 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:01:59.222 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 09:01:59.223 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 09:01:59.225 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 09:01:59.233 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 09:01:59.257 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:01:59.270 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:01:59.289 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:01:59.293 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 58ms reading results.
2024-09-17 09:01:59.295 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:01:59.297 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 09:02:01.930 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 09:02:01.942 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 09:02:01.945 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 09:02:01.946 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 09:02:01.948 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 09:02:01.950 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:02:01.979 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 4678.8694ms
2024-09-17 09:02:01.982 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:02:01.990 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 09:02:01.999 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:02:02.004 +07:00 [DBG] Disposed connection to database '' on server '' (4ms).
2024-09-17 09:02:02.010 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 4881.0571ms
2024-09-17 09:06:07.435 +07:00 [DBG] Connection id "0HN6MNGPAHE3K" received FIN.
2024-09-17 09:06:07.449 +07:00 [DBG] Connection id "0HN6MNGPAHE3K" is closed. The last processed stream ID was 1.
2024-09-17 09:06:07.449 +07:00 [DBG] The connection queue processing loop for 0HN6MNGPAHE3K completed.
2024-09-17 09:06:07.452 +07:00 [DBG] Connection id "0HN6MNGPAHE3K" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 09:06:07.468 +07:00 [DBG] Connection id "0HN6MNGPAHE3K" stopped.
2024-09-17 09:06:32.816 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 09:06:32.933 +07:00 [DBG] Hosting starting
2024-09-17 09:06:32.966 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 09:06:32.981 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 09:06:32.994 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 09:06:33.001 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 09:06:33.006 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 09:06:33.020 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 09:06:33.028 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 09:06:33.034 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 09:06:33.040 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 09:06:33.048 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 09:06:33.051 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 09:06:33.056 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 09:06:33.059 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 09:06:33.248 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 09:06:33.252 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 09:06:33.254 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 09:06:33.255 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 09:06:33.256 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 09:06:33.257 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 09:06:33.308 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 09:06:33.311 +07:00 [INF] Hosting environment: Development
2024-09-17 09:06:33.313 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 09:06:33.314 +07:00 [DBG] Hosting started
2024-09-17 09:06:38.450 +07:00 [DBG] Connection id "0HN6MNLEMUG5U" accepted.
2024-09-17 09:06:38.456 +07:00 [DBG] Connection id "0HN6MNLEMUG5U" started.
2024-09-17 09:06:38.531 +07:00 [DBG] Connection 0HN6MNLEMUG5U established using the following protocol: "Tls13"
2024-09-17 09:06:38.596 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 09:06:38.706 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 09:06:38.783 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 09:06:38.786 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 09:06:38.809 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 09:06:38.811 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 09:06:38.818 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 228.5768ms
2024-09-17 09:06:39.068 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 09:06:39.068 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 09:06:39.086 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 18.2445ms
2024-09-17 09:06:39.124 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.7621ms
2024-09-17 09:06:39.272 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 09:06:39.459 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 186.9938ms
2024-09-17 09:06:45.856 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/c845a049-756a-49d1-a8f7-08dcd6b94baf - null null
2024-09-17 09:06:45.860 +07:00 [DBG] DELETE requests are not supported
2024-09-17 09:06:45.883 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/c845a049-756a-49d1-a8f7-08dcd6b94baf'
2024-09-17 09:06:45.888 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/c845a049-756a-49d1-a8f7-08dcd6b94baf'
2024-09-17 09:06:45.897 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:06:45.959 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:06:45.963 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:06:45.992 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:06:46.002 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:06:46.008 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:06:46.014 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:06:46.016 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:06:46.018 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:06:46.024 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:06:46.138 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 09:06:46.166 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:06:46.174 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 09:06:46.183 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 09:06:46.190 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 09:06:46.194 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 09:06:46.196 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 09:06:46.199 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 09:06:46.899 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 09:06:46.955 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .SingleOrDefault(ap => ap.AppoitmentId == __id_0)'
2024-09-17 09:06:47.124 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Appointment.AppoitmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppoitmentStatus (string) Required MaxLength(50), 1], [Property: Appointment.AppoitmentTime (DateTime) Required, 2], [Property: Appointment.PatientId (Guid) Required FK Index, 3] }
        SELECT TOP(2) a.AppoitmentId, a.AppoitmentStatus, a.AppoitmentTime, a.PatientId
        FROM Appointment AS a
        WHERE a.AppoitmentId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 09:06:47.161 +07:00 [DBG] Creating DbConnection.
2024-09-17 09:06:47.186 +07:00 [DBG] Created DbConnection. (23ms).
2024-09-17 09:06:47.190 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:47.548 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:47.558 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:06:47.571 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (11ms).
2024-09-17 09:06:47.589 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (31ms).
2024-09-17 09:06:47.603 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 09:06:47.653 +07:00 [INF] Executed DbCommand (54ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 09:06:47.700 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:06:47.720 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:47.734 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 68ms reading results.
2024-09-17 09:06:47.744 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:47.758 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (13ms).
2024-09-17 09:06:47.772 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:06:47.782 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 09:06:47.789 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 09:06:47.815 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 09:06:47.869 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:47.876 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:47.879 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:06:47.881 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-09-17 09:06:47.883 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-09-17 09:06:47.887 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 09:06:47.899 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 09:06:47.906 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:47.908 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 5ms reading results.
2024-09-17 09:06:47.910 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:47.912 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-09-17 09:06:47.917 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:06:47.921 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 09:06:47.924 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 09:06:47.930 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 1902.4856ms
2024-09-17 09:06:47.931 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:06:47.938 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 09:06:47.945 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:47.951 +07:00 [DBG] Disposed connection to database '' on server '' (6ms).
2024-09-17 09:06:47.959 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/c845a049-756a-49d1-a8f7-08dcd6b94baf - 200 0 null 2102.9806ms
2024-09-17 09:06:51.838 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/2b37c534-26f4-49e8-b2de-08dcd6bcb665 - null null
2024-09-17 09:06:51.842 +07:00 [DBG] DELETE requests are not supported
2024-09-17 09:06:51.844 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/2b37c534-26f4-49e8-b2de-08dcd6bcb665'
2024-09-17 09:06:51.845 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/2b37c534-26f4-49e8-b2de-08dcd6bcb665'
2024-09-17 09:06:51.849 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:06:51.855 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:06:51.860 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:06:51.864 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:06:51.870 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:06:51.871 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:06:51.872 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:06:51.875 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:06:51.876 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:06:51.878 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:06:51.880 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:06:51.881 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 09:06:51.882 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 09:06:51.883 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 09:06:51.884 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 09:06:51.885 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 09:06:51.885 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 09:06:51.902 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 09:06:51.909 +07:00 [DBG] Creating DbConnection.
2024-09-17 09:06:51.910 +07:00 [DBG] Created DbConnection. (1ms).
2024-09-17 09:06:51.916 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:51.921 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:51.923 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:06:51.924 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 09:06:51.925 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-17 09:06:51.927 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 09:06:51.930 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 09:06:51.931 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:06:51.933 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:51.935 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-09-17 09:06:51.937 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:51.938 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 09:06:51.940 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:06:51.941 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 09:06:51.942 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 09:06:51.943 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 09:06:51.944 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:51.946 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:51.947 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:06:51.948 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 09:06:51.949 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 09:06:51.949 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 09:06:51.952 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 09:06:51.954 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:51.955 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 09:06:51.957 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:51.958 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 09:06:51.960 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:06:51.961 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 09:06:51.962 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 09:06:51.963 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 85.5375ms
2024-09-17 09:06:51.964 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:06:51.965 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 09:06:51.965 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:06:51.967 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-17 09:06:51.969 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/2b37c534-26f4-49e8-b2de-08dcd6bcb665 - 200 0 null 131.3375ms
2024-09-17 09:07:23.120 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 141
2024-09-17 09:07:23.130 +07:00 [DBG] POST requests are not supported
2024-09-17 09:07:23.130 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 09:07:23.132 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 09:07:23.136 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:07:23.142 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:07:23.144 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:07:23.149 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:07:23.152 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:07:23.154 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:07:23.157 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:07:23.162 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:07:23.164 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:07:23.167 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:07:23.174 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:07:23.176 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:07:23.179 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 09:07:23.182 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:07:23.185 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:07:23.195 +07:00 [DBG] Connection id "0HN6MNLEMUG5U", Request id "0HN6MNLEMUG5U:0000000D": started reading request body.
2024-09-17 09:07:23.200 +07:00 [DBG] Connection id "0HN6MNLEMUG5U", Request id "0HN6MNLEMUG5U:0000000D": done reading request body.
2024-09-17 09:07:23.298 +07:00 [DBG] JSON input formatter threw an exception.
Newtonsoft.Json.JsonSerializationException: Error converting value "4a3db22f-54b9-4f21-9d5b-2c401c3c91f46" to type 'System.Guid'. Path 'patientId', line 4, position 54.
 ---> System.ArgumentException: Could not cast or convert from System.String to System.Guid.
   at Newtonsoft.Json.Utilities.ConvertUtils.EnsureTypeAssignable(Object value, Type initialType, Type targetType)
   at Newtonsoft.Json.Utilities.ConvertUtils.ConvertOrCast(Object initialValue, CultureInfo culture, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.SetPropertyValue(JsonProperty property, JsonConverter propertyConverter, JsonContainerContract containerContract, JsonProperty containerProperty, JsonReader reader, Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, JsonProperty member, String id)
2024-09-17 09:07:23.377 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:07:23.382 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:07:23.383 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:07:23.392 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:07:23.397 +07:00 [DBG] The request has model state errors, returning an error response.
2024-09-17 09:07:23.400 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-09-17 09:07:23.405 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 09:07:23.410 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 09:07:23.411 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-09-17 09:07:23.415 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-09-17 09:07:23.416 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-09-17 09:07:23.474 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 307.5508ms
2024-09-17 09:07:23.477 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:07:23.480 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 400 399 application/problem+json; charset=utf-8 359.4291ms
2024-09-17 09:07:26.432 +07:00 [DBG] Connection id "0HN6MNLEMUG5U" received FIN.
2024-09-17 09:07:26.436 +07:00 [DBG] Connection id "0HN6MNLEMUG5U" is closed. The last processed stream ID was 13.
2024-09-17 09:07:26.439 +07:00 [DBG] Connection id "0HN6MNLEMUG5U" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 09:07:26.443 +07:00 [DBG] The connection queue processing loop for 0HN6MNLEMUG5U completed.
2024-09-17 09:07:26.452 +07:00 [DBG] Connection id "0HN6MNLEMUG5U" stopped.
2024-09-17 09:07:37.527 +07:00 [DBG] Connection id "0HN6MNLEMUG5V" accepted.
2024-09-17 09:07:37.529 +07:00 [DBG] Connection id "0HN6MNLEMUG5V" started.
2024-09-17 09:07:37.536 +07:00 [DBG] Connection 0HN6MNLEMUG5V established using the following protocol: "Tls13"
2024-09-17 09:07:37.542 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 141
2024-09-17 09:07:37.553 +07:00 [DBG] POST requests are not supported
2024-09-17 09:07:37.554 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 09:07:37.557 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 09:07:37.562 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:07:37.563 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:07:37.565 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:07:37.568 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:07:37.571 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:07:37.573 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:07:37.577 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:07:37.580 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:07:37.585 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:07:37.587 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:07:37.588 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:07:37.591 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:07:37.593 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 09:07:37.595 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:07:37.600 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:07:37.601 +07:00 [DBG] Connection id "0HN6MNLEMUG5V", Request id "0HN6MNLEMUG5V:00000001": started reading request body.
2024-09-17 09:07:37.603 +07:00 [DBG] Connection id "0HN6MNLEMUG5V", Request id "0HN6MNLEMUG5V:00000001": done reading request body.
2024-09-17 09:07:37.608 +07:00 [DBG] JSON input formatter threw an exception.
Newtonsoft.Json.JsonSerializationException: Error converting value "4a3db22f-54b9-4f21-9d5b-2c401c3c91f46" to type 'System.Guid'. Path 'patientId', line 4, position 54.
 ---> System.ArgumentException: Could not cast or convert from System.String to System.Guid.
   at Newtonsoft.Json.Utilities.ConvertUtils.EnsureTypeAssignable(Object value, Type initialType, Type targetType)
   at Newtonsoft.Json.Utilities.ConvertUtils.ConvertOrCast(Object initialValue, CultureInfo culture, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.SetPropertyValue(JsonProperty property, JsonConverter propertyConverter, JsonContainerContract containerContract, JsonProperty containerProperty, JsonReader reader, Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, JsonProperty member, String id)
2024-09-17 09:07:37.614 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:07:37.616 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:07:37.617 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:07:37.620 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:07:37.621 +07:00 [DBG] The request has model state errors, returning an error response.
2024-09-17 09:07:37.622 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-09-17 09:07:37.624 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 09:07:37.627 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 09:07:37.628 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-09-17 09:07:37.631 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-09-17 09:07:37.637 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-09-17 09:07:37.642 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 55.2805ms
2024-09-17 09:07:37.643 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:07:37.645 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 400 399 application/problem+json; charset=utf-8 103.6105ms
2024-09-17 09:07:47.409 +07:00 [DBG] Connection id "0HN6MNLEMUG5V" received FIN.
2024-09-17 09:07:47.411 +07:00 [DBG] Connection id "0HN6MNLEMUG5V" is closed. The last processed stream ID was 1.
2024-09-17 09:07:47.416 +07:00 [DBG] Connection id "0HN6MNLEMUG5V" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 09:07:47.426 +07:00 [DBG] The connection queue processing loop for 0HN6MNLEMUG5V completed.
2024-09-17 09:07:47.428 +07:00 [DBG] Connection id "0HN6MNLEMUG5V" stopped.
2024-09-17 09:08:25.267 +07:00 [DBG] Connection id "0HN6MNLEMUG60" accepted.
2024-09-17 09:08:25.275 +07:00 [DBG] Connection id "0HN6MNLEMUG60" started.
2024-09-17 09:08:25.282 +07:00 [DBG] Connection 0HN6MNLEMUG60 established using the following protocol: "Tls13"
2024-09-17 09:08:25.292 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 09:08:25.302 +07:00 [DBG] POST requests are not supported
2024-09-17 09:08:25.303 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 09:08:25.307 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 09:08:25.311 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:08:25.316 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:08:25.318 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:08:25.322 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:08:25.326 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:08:25.332 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:08:25.338 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:08:25.343 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:08:25.344 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:08:25.346 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:08:25.349 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:08:25.350 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:08:25.353 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 09:08:25.355 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:08:25.356 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:08:25.357 +07:00 [DBG] Connection id "0HN6MNLEMUG60", Request id "0HN6MNLEMUG60:00000001": started reading request body.
2024-09-17 09:08:25.358 +07:00 [DBG] Connection id "0HN6MNLEMUG60", Request id "0HN6MNLEMUG60:00000001": done reading request body.
2024-09-17 09:08:25.360 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:08:25.362 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:08:25.362 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:08:25.365 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:08:25.424 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 09:08:25.431 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 09:08:25.441 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 09:08:25.444 +07:00 [DBG] Creating DbConnection.
2024-09-17 09:08:25.448 +07:00 [DBG] Created DbConnection. (4ms).
2024-09-17 09:08:25.451 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:08:25.455 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:08:25.458 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:08:25.464 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-09-17 09:08:25.469 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-09-17 09:08:25.475 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 09:08:25.489 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 09:08:25.497 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:08:25.521 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:08:25.525 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 33ms reading results.
2024-09-17 09:08:25.528 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:08:25.530 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 09:08:27.337 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:08:27.353 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:08:27.371 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:08:27.375 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 09:08:27.378 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 09:08:27.391 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 09:08:27.407 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:08:27.412 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:08:27.415 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:08:27.416 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-09-17 09:08:27.424 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-09-17 09:08:27.425 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 09:08:27.433 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 09:08:27.439 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:08:27.440 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-17 09:08:27.441 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:08:27.442 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 09:08:27.446 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:08:27.448 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 09:08:27.454 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 09:08:27.457 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 09:08:27.458 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 09:08:27.459 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 09:08:27.460 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 09:08:27.460 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:08:27.462 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 2115.8662ms
2024-09-17 09:08:27.464 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:08:27.465 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 09:08:27.466 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:08:27.468 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-17 09:08:27.469 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 2177.2311ms
2024-09-17 09:08:42.922 +07:00 [DBG] Connection id "0HN6MNLEMUG60" received FIN.
2024-09-17 09:08:42.938 +07:00 [DBG] Connection id "0HN6MNLEMUG60" is closed. The last processed stream ID was 1.
2024-09-17 09:08:42.938 +07:00 [DBG] The connection queue processing loop for 0HN6MNLEMUG60 completed.
2024-09-17 09:08:42.940 +07:00 [DBG] Connection id "0HN6MNLEMUG60" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 09:08:42.951 +07:00 [DBG] Connection id "0HN6MNLEMUG60" stopped.
2024-09-17 09:11:02.372 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 09:11:02.497 +07:00 [DBG] Hosting starting
2024-09-17 09:11:02.546 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 09:11:02.558 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 09:11:02.567 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 09:11:02.577 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 09:11:02.586 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 09:11:02.602 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 09:11:02.612 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 09:11:02.622 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 09:11:02.626 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 09:11:02.637 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 09:11:02.642 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 09:11:02.651 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 09:11:02.654 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 09:11:02.864 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 09:11:02.867 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 09:11:02.871 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 09:11:02.875 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 09:11:02.875 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 09:11:02.876 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 09:11:02.920 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 09:11:02.922 +07:00 [INF] Hosting environment: Development
2024-09-17 09:11:02.926 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 09:11:02.929 +07:00 [DBG] Hosting started
2024-09-17 09:11:03.548 +07:00 [DBG] Connection id "0HN6MNNTN3LT1" accepted.
2024-09-17 09:11:03.552 +07:00 [DBG] Connection id "0HN6MNNTN3LT1" started.
2024-09-17 09:11:03.618 +07:00 [DBG] Connection 0HN6MNNTN3LT1 established using the following protocol: "Tls13"
2024-09-17 09:11:03.669 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 09:11:03.776 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 09:11:03.848 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 09:11:03.854 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 09:11:03.875 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 09:11:03.880 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 09:11:03.886 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 220.3802ms
2024-09-17 09:11:03.899 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 09:11:03.913 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 14.1909ms
2024-09-17 09:11:04.003 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 09:11:04.062 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.3557ms
2024-09-17 09:11:04.228 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 09:11:04.408 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 181.3198ms
2024-09-17 09:11:09.954 +07:00 [DBG] Connection id "0HN6MNNTN3LT1" received FIN.
2024-09-17 09:11:09.966 +07:00 [DBG] The connection queue processing loop for 0HN6MNNTN3LT1 completed.
2024-09-17 09:11:09.968 +07:00 [DBG] Connection id "0HN6MNNTN3LT1" is closed. The last processed stream ID was 7.
2024-09-17 09:11:09.977 +07:00 [DBG] Connection id "0HN6MNNTN3LT1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 09:11:09.983 +07:00 [DBG] Connection id "0HN6MNNTN3LT1" stopped.
2024-09-17 09:11:11.753 +07:00 [DBG] Connection id "0HN6MNNTN3LT2" accepted.
2024-09-17 09:11:11.755 +07:00 [DBG] Connection id "0HN6MNNTN3LT2" started.
2024-09-17 09:11:11.760 +07:00 [DBG] Connection 0HN6MNNTN3LT2 established using the following protocol: "Tls13"
2024-09-17 09:11:11.765 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/634bd9bb-0eb4-45ca-28bd-08dcd564bbe6 - null null
2024-09-17 09:11:11.771 +07:00 [DBG] DELETE requests are not supported
2024-09-17 09:11:11.799 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/634bd9bb-0eb4-45ca-28bd-08dcd564bbe6'
2024-09-17 09:11:11.804 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/634bd9bb-0eb4-45ca-28bd-08dcd564bbe6'
2024-09-17 09:11:11.814 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:11:11.870 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:11:11.879 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:11:11.898 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:11:11.906 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:11:11.907 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:11:11.910 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:11:11.912 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:11:11.913 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:11:11.915 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:11:12.034 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 09:11:12.056 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:11:12.067 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 09:11:12.076 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 09:11:12.083 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 09:11:12.084 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 09:11:12.087 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 09:11:12.091 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 09:11:12.697 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 09:11:12.743 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .SingleOrDefault(ap => ap.AppoitmentId == __id_0)'
2024-09-17 09:11:12.918 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Appointment.AppoitmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppoitmentStatus (string) Required MaxLength(50), 1], [Property: Appointment.AppoitmentTime (DateTime) Required, 2], [Property: Appointment.PatientId (Guid) Required FK Index, 3] }
        SELECT TOP(2) a.AppoitmentId, a.AppoitmentStatus, a.AppoitmentTime, a.PatientId
        FROM Appointment AS a
        WHERE a.AppoitmentId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 09:11:12.963 +07:00 [DBG] Creating DbConnection.
2024-09-17 09:11:12.998 +07:00 [DBG] Created DbConnection. (32ms).
2024-09-17 09:11:13.005 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:13.324 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:13.330 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:11:13.337 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-09-17 09:11:13.346 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2024-09-17 09:11:13.360 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 09:11:13.412 +07:00 [INF] Executed DbCommand (54ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 09:11:13.452 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:13.480 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:13.493 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 70ms reading results.
2024-09-17 09:11:13.501 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:13.511 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (9ms).
2024-09-17 09:11:13.526 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:13.534 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 09:11:13.539 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 09:11:13.561 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 09:11:13.616 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:13.621 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:13.625 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:11:13.627 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-09-17 09:11:13.628 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-17 09:11:13.629 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 09:11:13.635 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 09:11:13.639 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:13.640 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-09-17 09:11:13.642 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:13.643 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 09:11:13.648 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:13.650 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 09:11:13.653 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 09:11:13.657 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 1740.0299ms
2024-09-17 09:11:13.658 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:11:13.663 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 09:11:13.667 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:13.672 +07:00 [DBG] Disposed connection to database '' on server '' (4ms).
2024-09-17 09:11:13.674 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/634bd9bb-0eb4-45ca-28bd-08dcd564bbe6 - 200 0 null 1908.847ms
2024-09-17 09:11:17.509 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/b54562d8-bb60-4287-bd2d-08dcd6b859ca - null null
2024-09-17 09:11:17.514 +07:00 [DBG] DELETE requests are not supported
2024-09-17 09:11:17.519 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/b54562d8-bb60-4287-bd2d-08dcd6b859ca'
2024-09-17 09:11:17.523 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/b54562d8-bb60-4287-bd2d-08dcd6b859ca'
2024-09-17 09:11:17.528 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:11:17.533 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:11:17.538 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:11:17.542 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:11:17.544 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:11:17.545 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:11:17.546 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:11:17.548 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:11:17.549 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:11:17.551 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:11:17.554 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:11:17.555 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 09:11:17.556 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 09:11:17.557 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 09:11:17.559 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 09:11:17.560 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 09:11:17.561 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 09:11:17.573 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 09:11:17.578 +07:00 [DBG] Creating DbConnection.
2024-09-17 09:11:17.579 +07:00 [DBG] Created DbConnection. (1ms).
2024-09-17 09:11:17.580 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:17.581 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:17.582 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:11:17.583 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 09:11:17.584 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 09:11:17.586 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 09:11:17.588 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 09:11:17.590 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:17.591 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:17.592 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-09-17 09:11:17.593 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:17.594 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 09:11:17.595 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:17.597 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 09:11:17.597 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 09:11:17.599 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 09:11:17.601 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:17.602 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:17.603 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:11:17.604 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 09:11:17.605 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 09:11:17.606 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 09:11:17.609 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 09:11:17.610 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:17.611 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-17 09:11:17.612 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:17.614 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 09:11:17.615 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:17.616 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 09:11:17.617 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 09:11:17.618 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 66.2737ms
2024-09-17 09:11:17.618 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:11:17.619 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 09:11:17.621 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:17.622 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-17 09:11:17.623 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/b54562d8-bb60-4287-bd2d-08dcd6b859ca - 200 0 null 114.5589ms
2024-09-17 09:11:24.608 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/da3026ff-5fe1-49ba-e1e4-08dcd6bd9e55 - null null
2024-09-17 09:11:24.611 +07:00 [DBG] DELETE requests are not supported
2024-09-17 09:11:24.611 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/da3026ff-5fe1-49ba-e1e4-08dcd6bd9e55'
2024-09-17 09:11:24.612 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/da3026ff-5fe1-49ba-e1e4-08dcd6bd9e55'
2024-09-17 09:11:24.614 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:11:24.618 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:11:24.621 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:11:24.625 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:11:24.633 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:11:24.635 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:11:24.636 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:11:24.637 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:11:24.638 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:11:24.639 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:11:24.644 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:11:24.645 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 09:11:24.646 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 09:11:24.647 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 09:11:24.648 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 09:11:24.649 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 09:11:24.651 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 09:11:24.715 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 09:11:24.720 +07:00 [DBG] Creating DbConnection.
2024-09-17 09:11:24.721 +07:00 [DBG] Created DbConnection. (1ms).
2024-09-17 09:11:24.722 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:24.727 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:24.729 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:11:24.730 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-09-17 09:11:24.732 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-09-17 09:11:24.734 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 09:11:24.750 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 09:11:24.755 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:24.759 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:24.763 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 9ms reading results.
2024-09-17 09:11:24.767 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:24.768 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 09:11:24.770 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:24.772 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 09:11:24.773 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 09:11:24.774 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 09:11:24.776 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:24.777 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:24.778 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:11:24.778 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 09:11:24.780 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-17 09:11:24.782 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 09:11:24.791 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 09:11:24.793 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:24.794 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 09:11:24.796 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:24.797 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 09:11:24.799 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:24.801 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 09:11:24.802 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 09:11:24.803 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 164.0619ms
2024-09-17 09:11:24.804 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 09:11:24.805 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 09:11:24.806 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:24.808 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-17 09:11:24.810 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/da3026ff-5fe1-49ba-e1e4-08dcd6bd9e55 - 200 0 null 202.2247ms
2024-09-17 09:11:49.240 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 09:11:49.258 +07:00 [DBG] POST requests are not supported
2024-09-17 09:11:49.262 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 09:11:49.266 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 09:11:49.268 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:11:49.268 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:11:49.270 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:11:49.274 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:11:49.276 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:11:49.277 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:11:49.279 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:11:49.281 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:11:49.283 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:11:49.284 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:11:49.285 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:11:49.287 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:11:49.289 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 09:11:49.292 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:11:49.295 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:11:49.302 +07:00 [DBG] Connection id "0HN6MNNTN3LT2", Request id "0HN6MNNTN3LT2:00000007": started reading request body.
2024-09-17 09:11:49.304 +07:00 [DBG] Connection id "0HN6MNNTN3LT2", Request id "0HN6MNNTN3LT2:00000007": done reading request body.
2024-09-17 09:11:49.371 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:11:49.376 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:11:49.382 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:11:49.390 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:11:49.395 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 09:11:49.400 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 09:11:49.411 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 09:11:49.420 +07:00 [DBG] Creating DbConnection.
2024-09-17 09:11:49.424 +07:00 [DBG] Created DbConnection. (4ms).
2024-09-17 09:11:49.427 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:49.434 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:49.438 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:11:49.443 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-17 09:11:49.448 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-09-17 09:11:49.450 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 09:11:49.458 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 09:11:49.466 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:49.487 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:49.495 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 33ms reading results.
2024-09-17 09:11:49.500 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:49.502 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 09:11:51.095 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:51.105 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:51.121 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:51.128 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 09:11:51.129 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 09:11:51.143 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 09:11:51.159 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:51.168 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:51.174 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:11:51.177 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-09-17 09:11:51.180 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-09-17 09:11:51.181 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 09:11:51.188 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 09:11:51.191 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:51.191 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-17 09:11:51.193 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:51.194 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 09:11:51.198 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:11:51.199 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 09:11:51.202 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 09:11:51.208 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 09:11:51.210 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 09:11:51.211 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 09:11:51.213 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 09:11:51.215 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:11:51.241 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 1956.8564ms
2024-09-17 09:11:51.244 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:11:51.250 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 09:11:51.251 +07:00 [DBG] Connection id "0HN6MNNTN3LT2" received FIN.
2024-09-17 09:11:51.252 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:11:51.256 +07:00 [DBG] Connection id "0HN6MNNTN3LT2" is closed. The last processed stream ID was 7.
2024-09-17 09:11:51.257 +07:00 [DBG] Connection id "0HN6MNNTN3LT2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 09:11:51.259 +07:00 [DBG] Disposed connection to database '' on server '' (7ms).
2024-09-17 09:11:51.274 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 2034.1263ms
2024-09-17 09:11:51.286 +07:00 [DBG] The connection queue processing loop for 0HN6MNNTN3LT2 completed.
2024-09-17 09:11:51.292 +07:00 [DBG] Connection id "0HN6MNNTN3LT2" stopped.
2024-09-17 09:13:35.771 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 09:13:35.901 +07:00 [DBG] Hosting starting
2024-09-17 09:13:35.937 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 09:13:35.948 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 09:13:35.956 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 09:13:35.962 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 09:13:35.967 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 09:13:35.975 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 09:13:35.980 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 09:13:35.983 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 09:13:35.985 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 09:13:35.990 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 09:13:35.994 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 09:13:35.996 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 09:13:35.998 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 09:13:36.227 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 09:13:36.229 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 09:13:36.232 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 09:13:36.233 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 09:13:36.234 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 09:13:36.236 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 09:13:36.323 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 09:13:36.325 +07:00 [INF] Hosting environment: Development
2024-09-17 09:13:36.326 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 09:13:36.327 +07:00 [DBG] Hosting started
2024-09-17 09:13:38.755 +07:00 [DBG] Connection id "0HN6MNPBV98U0" accepted.
2024-09-17 09:13:38.761 +07:00 [DBG] Connection id "0HN6MNPBV98U0" started.
2024-09-17 09:13:38.833 +07:00 [DBG] Connection 0HN6MNPBV98U0 established using the following protocol: "Tls13"
2024-09-17 09:13:38.886 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 09:13:38.994 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 09:13:39.072 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 09:13:39.077 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 09:13:39.100 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 09:13:39.104 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 09:13:39.111 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 229.0749ms
2024-09-17 09:13:39.119 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 09:13:39.119 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 09:13:39.160 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 41.6289ms
2024-09-17 09:13:39.201 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.7898ms
2024-09-17 09:13:39.550 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 09:13:39.760 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 210.6141ms
2024-09-17 09:14:03.060 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 09:14:03.068 +07:00 [DBG] POST requests are not supported
2024-09-17 09:14:03.092 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 09:14:03.099 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 09:14:03.115 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:14:03.183 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:14:03.188 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:14:03.211 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:14:03.221 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:14:03.224 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:14:03.227 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:14:03.229 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:14:03.230 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:14:03.232 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:14:03.346 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 09:14:03.372 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:14:03.380 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:14:03.390 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 09:14:03.397 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:14:03.403 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:14:03.412 +07:00 [DBG] Connection id "0HN6MNPBV98U0", Request id "0HN6MNPBV98U0:00000009": started reading request body.
2024-09-17 09:14:03.418 +07:00 [DBG] Connection id "0HN6MNPBV98U0", Request id "0HN6MNPBV98U0:00000009": done reading request body.
2024-09-17 09:14:03.493 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:14:03.499 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:14:03.503 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:14:03.511 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:14:04.118 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 09:14:04.174 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 09:14:04.348 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 09:14:04.391 +07:00 [DBG] Creating DbConnection.
2024-09-17 09:14:04.416 +07:00 [DBG] Created DbConnection. (22ms).
2024-09-17 09:14:04.424 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:14:04.721 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:14:04.728 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:14:04.736 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-09-17 09:14:04.746 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2024-09-17 09:14:04.759 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 09:14:04.817 +07:00 [INF] Executed DbCommand (61ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 09:14:04.866 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:14:04.898 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:14:04.909 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 75ms reading results.
2024-09-17 09:14:04.918 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:14:04.929 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (10ms).
2024-09-17 09:14:06.197 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:14:06.223 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:14:06.236 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:14:06.242 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 09:14:06.249 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 09:14:06.270 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 09:14:06.323 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:14:06.332 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:14:06.337 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:14:06.340 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-17 09:14:06.346 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-09-17 09:14:06.351 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 09:14:06.362 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 09:14:06.367 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:14:06.369 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-09-17 09:14:06.371 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:14:06.374 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-09-17 09:14:06.381 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:14:06.385 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 09:14:06.389 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 09:14:06.394 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 09:14:06.395 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 09:14:06.396 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 09:14:06.397 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 09:14:06.398 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:14:06.432 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 3196.1043ms
2024-09-17 09:14:06.437 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:14:06.445 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 09:14:06.453 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:14:06.459 +07:00 [DBG] Disposed connection to database '' on server '' (6ms).
2024-09-17 09:14:06.468 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 3413.3088ms
2024-09-17 09:16:36.015 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 09:16:36.117 +07:00 [DBG] Hosting starting
2024-09-17 09:16:36.147 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 09:16:36.159 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 09:16:36.169 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 09:16:36.179 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 09:16:36.186 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 09:16:36.193 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 09:16:36.201 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 09:16:36.204 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 09:16:36.210 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 09:16:36.220 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 09:16:36.228 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 09:16:36.232 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 09:16:36.237 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 09:16:36.449 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 09:16:36.452 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 09:16:36.455 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 09:16:36.456 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 09:16:36.457 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 09:16:36.458 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 09:16:36.518 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 09:16:36.520 +07:00 [INF] Hosting environment: Development
2024-09-17 09:16:36.520 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 09:16:36.522 +07:00 [DBG] Hosting started
2024-09-17 09:16:36.569 +07:00 [DBG] Connection id "0HN6MNR0V1SLN" accepted.
2024-09-17 09:16:36.572 +07:00 [DBG] Connection id "0HN6MNR0V1SLN" started.
2024-09-17 09:16:36.606 +07:00 [DBG] Connection id "0HN6MNR0V1SLO" accepted.
2024-09-17 09:16:36.609 +07:00 [DBG] Connection id "0HN6MNR0V1SLO" started.
2024-09-17 09:16:36.627 +07:00 [DBG] Connection id "0HN6MNR0V1SLO" received FIN.
2024-09-17 09:16:36.651 +07:00 [DBG] Connection 0HN6MNR0V1SLN established using the following protocol: "Tls13"
2024-09-17 09:16:36.651 +07:00 [DBG] Connection 0HN6MNR0V1SLO established using the following protocol: "Tls13"
2024-09-17 09:16:36.672 +07:00 [DBG] Connection id "0HN6MNR0V1SLO" is closed. The last processed stream ID was 0.
2024-09-17 09:16:36.674 +07:00 [DBG] Connection id "0HN6MNR0V1SLO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 09:16:36.680 +07:00 [DBG] The connection queue processing loop for 0HN6MNR0V1SLO completed.
2024-09-17 09:16:36.687 +07:00 [DBG] Connection id "0HN6MNR0V1SLO" stopped.
2024-09-17 09:16:36.702 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 09:16:36.799 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 09:16:36.861 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 09:16:36.864 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 09:16:36.891 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 09:16:36.894 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 09:16:36.900 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 202.2585ms
2024-09-17 09:16:36.906 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 09:16:36.919 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 13.5778ms
2024-09-17 09:16:37.011 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 09:16:37.076 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.4774ms
2024-09-17 09:16:37.232 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 09:16:37.394 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 163.0837ms
2024-09-17 09:16:51.927 +07:00 [DBG] Connection id "0HN6MNR0V1SLN" received FIN.
2024-09-17 09:16:51.942 +07:00 [DBG] Connection id "0HN6MNR0V1SLN" is closed. The last processed stream ID was 7.
2024-09-17 09:16:51.942 +07:00 [DBG] The connection queue processing loop for 0HN6MNR0V1SLN completed.
2024-09-17 09:16:51.944 +07:00 [DBG] Connection id "0HN6MNR0V1SLN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 09:16:51.958 +07:00 [DBG] Connection id "0HN6MNR0V1SLN" stopped.
2024-09-17 09:17:10.630 +07:00 [DBG] Connection id "0HN6MNR0V1SLP" accepted.
2024-09-17 09:17:10.633 +07:00 [DBG] Connection id "0HN6MNR0V1SLP" started.
2024-09-17 09:17:10.644 +07:00 [DBG] Connection 0HN6MNR0V1SLP established using the following protocol: "Tls13"
2024-09-17 09:17:10.650 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 09:17:10.663 +07:00 [DBG] POST requests are not supported
2024-09-17 09:17:10.691 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 09:17:10.697 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 09:17:10.709 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:17:10.781 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:17:10.788 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:17:10.817 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:17:10.827 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:17:10.835 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:17:10.841 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:17:10.845 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:17:10.846 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:17:10.849 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:17:10.963 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 09:17:10.985 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:17:10.991 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:17:10.997 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 09:17:11.004 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:17:11.008 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:17:11.018 +07:00 [DBG] Connection id "0HN6MNR0V1SLP", Request id "0HN6MNR0V1SLP:00000001": started reading request body.
2024-09-17 09:17:11.022 +07:00 [DBG] Connection id "0HN6MNR0V1SLP", Request id "0HN6MNR0V1SLP:00000001": done reading request body.
2024-09-17 09:17:11.104 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:17:11.107 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:17:11.109 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:17:11.117 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:17:11.731 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 09:17:11.795 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 09:17:12.001 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 09:17:12.031 +07:00 [DBG] Creating DbConnection.
2024-09-17 09:17:12.051 +07:00 [DBG] Created DbConnection. (17ms).
2024-09-17 09:17:12.056 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:17:12.365 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:17:12.372 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:17:12.379 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2024-09-17 09:17:12.392 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2024-09-17 09:17:12.406 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 09:17:12.464 +07:00 [INF] Executed DbCommand (63ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 09:17:12.512 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:17:12.545 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:17:12.557 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 79ms reading results.
2024-09-17 09:17:12.566 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:17:12.578 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (10ms).
2024-09-17 09:17:12.686 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:17:12.714 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:17:12.749 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:17:12.758 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 09:17:12.767 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 09:17:12.795 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 09:17:12.860 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:17:12.866 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:17:12.871 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:17:12.875 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-09-17 09:17:12.880 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2024-09-17 09:17:12.882 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 09:17:12.890 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 09:17:12.893 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:17:12.895 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-09-17 09:17:12.897 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:17:12.898 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 09:17:12.907 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:17:12.910 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 09:17:12.914 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 09:17:12.920 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 09:17:12.921 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 09:17:12.922 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 09:17:12.924 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 09:17:12.926 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:17:12.962 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 2110.5781ms
2024-09-17 09:17:12.967 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:17:12.974 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 09:17:12.983 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:17:12.989 +07:00 [DBG] Disposed connection to database '' on server '' (6ms).
2024-09-17 09:17:12.994 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 2343.7447ms
2024-09-17 09:18:36.936 +07:00 [DBG] Connection id "0HN6MNR0V1SLP" received FIN.
2024-09-17 09:18:36.957 +07:00 [DBG] Connection id "0HN6MNR0V1SLP" is closed. The last processed stream ID was 1.
2024-09-17 09:18:36.958 +07:00 [DBG] The connection queue processing loop for 0HN6MNR0V1SLP completed.
2024-09-17 09:18:36.969 +07:00 [DBG] Connection id "0HN6MNR0V1SLP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 09:18:36.987 +07:00 [DBG] Connection id "0HN6MNR0V1SLP" stopped.
2024-09-17 09:25:43.322 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 09:25:43.443 +07:00 [DBG] Hosting starting
2024-09-17 09:25:43.473 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 09:25:43.482 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 09:25:43.491 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 09:25:43.498 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 09:25:43.504 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 09:25:43.513 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 09:25:43.519 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 09:25:43.525 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 09:25:43.532 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 09:25:43.538 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 09:25:43.545 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 09:25:43.551 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 09:25:43.552 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 09:25:43.721 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 09:25:43.724 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 09:25:43.726 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 09:25:43.729 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 09:25:43.732 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 09:25:43.735 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 09:25:43.799 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 09:25:43.802 +07:00 [INF] Hosting environment: Development
2024-09-17 09:25:43.805 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 09:25:43.806 +07:00 [DBG] Hosting started
2024-09-17 09:26:06.107 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 09:26:06.233 +07:00 [DBG] Hosting starting
2024-09-17 09:26:06.260 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 09:26:06.267 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 09:26:06.275 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 09:26:06.281 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 09:26:06.286 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 09:26:06.291 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 09:26:06.295 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 09:26:06.297 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 09:26:06.299 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 09:26:06.303 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 09:26:06.306 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 09:26:06.308 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 09:26:06.310 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 09:26:06.477 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 09:26:06.482 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 09:26:06.488 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 09:26:06.492 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 09:26:06.495 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 09:26:06.498 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 09:26:06.579 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 09:26:06.580 +07:00 [INF] Hosting environment: Development
2024-09-17 09:26:06.582 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 09:26:06.584 +07:00 [DBG] Hosting started
2024-09-17 09:26:12.310 +07:00 [DBG] Connection id "0HN6MO0CHO38G" accepted.
2024-09-17 09:26:12.313 +07:00 [DBG] Connection id "0HN6MO0CHO38G" started.
2024-09-17 09:26:12.369 +07:00 [DBG] Connection 0HN6MO0CHO38G established using the following protocol: "Tls13"
2024-09-17 09:26:12.427 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 09:26:12.531 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 09:26:12.609 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 09:26:12.614 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 09:26:12.641 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 09:26:12.643 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 09:26:12.648 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 228.3804ms
2024-09-17 09:26:12.656 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 09:26:12.656 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 09:26:12.680 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 24.1726ms
2024-09-17 09:26:12.715 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.4017ms
2024-09-17 09:26:13.103 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 09:26:13.308 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 205.0766ms
2024-09-17 09:35:16.048 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 09:35:16.062 +07:00 [DBG] POST requests are not supported
2024-09-17 09:35:16.090 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 09:35:16.095 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 09:35:16.111 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:35:16.171 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 09:35:16.179 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:35:16.202 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 09:35:16.209 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 09:35:16.214 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 09:35:16.221 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:35:16.225 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 09:35:16.227 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 09:35:16.230 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:35:16.346 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 09:35:16.369 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 09:35:16.376 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:35:16.382 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 09:35:16.387 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:35:16.389 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 09:35:16.399 +07:00 [DBG] Connection id "0HN6MO0CHO38G", Request id "0HN6MO0CHO38G:00000009": started reading request body.
2024-09-17 09:35:16.401 +07:00 [DBG] Connection id "0HN6MO0CHO38G", Request id "0HN6MO0CHO38G:00000009": done reading request body.
2024-09-17 09:35:16.495 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:35:16.497 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:35:16.502 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 09:35:16.511 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:35:17.189 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 09:35:17.259 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 09:35:17.486 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 09:35:17.528 +07:00 [DBG] Creating DbConnection.
2024-09-17 09:35:17.550 +07:00 [DBG] Created DbConnection. (21ms).
2024-09-17 09:35:17.557 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:35:17.825 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:35:17.832 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:35:17.845 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2024-09-17 09:35:17.860 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (28ms).
2024-09-17 09:35:17.877 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 09:35:17.939 +07:00 [INF] Executed DbCommand (65ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 09:35:17.999 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:35:18.034 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:35:18.050 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 97ms reading results.
2024-09-17 09:35:18.056 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:35:18.068 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (11ms).
2024-09-17 09:35:18.195 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:35:18.215 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:35:18.235 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:35:18.244 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 09:35:18.249 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 09:35:18.272 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 09:35:18.340 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:35:18.344 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:35:18.352 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 09:35:18.357 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-09-17 09:35:18.365 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-09-17 09:35:18.368 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 09:35:18.377 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 09:35:18.383 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:35:18.387 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 5ms reading results.
2024-09-17 09:35:18.389 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:35:18.390 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-17 09:35:18.398 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 09:35:18.401 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 09:35:18.406 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 09:35:18.410 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 09:35:18.411 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 09:35:18.411 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 09:35:18.413 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 09:35:18.415 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 09:35:18.455 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 2223.4508ms
2024-09-17 09:35:18.458 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 09:35:18.464 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 09:35:18.471 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 09:35:18.479 +07:00 [DBG] Disposed connection to database '' on server '' (8ms).
2024-09-17 09:35:18.487 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 2440.1998ms
2024-09-17 10:41:00.481 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 10:41:00.557 +07:00 [DBG] Hosting starting
2024-09-17 10:41:00.580 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 10:41:00.586 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 10:41:00.591 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 10:41:00.595 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 10:41:00.598 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 10:41:00.603 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 10:41:00.605 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 10:41:00.607 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 10:41:00.609 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 10:41:00.613 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 10:41:00.616 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 10:41:00.618 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 10:41:00.620 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 10:41:00.765 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 10:41:00.766 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 10:41:00.767 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 10:41:00.767 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 10:41:00.768 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 10:41:00.768 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 10:41:00.812 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 10:41:00.813 +07:00 [INF] Hosting environment: Development
2024-09-17 10:41:00.814 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 10:41:00.814 +07:00 [DBG] Hosting started
2024-09-17 10:41:02.293 +07:00 [DBG] Connection id "0HN6MPA6LIARU" accepted.
2024-09-17 10:41:02.295 +07:00 [DBG] Connection id "0HN6MPA6LIARU" started.
2024-09-17 10:41:02.333 +07:00 [DBG] Connection 0HN6MPA6LIARU established using the following protocol: "Tls13"
2024-09-17 10:41:02.366 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 10:41:02.431 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 10:41:02.478 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 10:41:02.480 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 10:41:02.494 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 10:41:02.496 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 10:41:02.499 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 135.7763ms
2024-09-17 10:41:02.505 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 10:41:02.505 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 10:41:02.517 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 12.7308ms
2024-09-17 10:41:02.548 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.2503ms
2024-09-17 10:41:02.799 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 10:41:02.926 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.4685ms
2024-09-17 10:41:30.305 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/080d6c0a-dc57-4fcf-9a6e-08dcd6bed777 - null null
2024-09-17 10:41:30.309 +07:00 [DBG] DELETE requests are not supported
2024-09-17 10:41:30.325 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/080d6c0a-dc57-4fcf-9a6e-08dcd6bed777'
2024-09-17 10:41:30.329 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/080d6c0a-dc57-4fcf-9a6e-08dcd6bed777'
2024-09-17 10:41:30.334 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 10:41:30.368 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 10:41:30.370 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 10:41:30.383 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 10:41:30.386 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 10:41:30.387 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 10:41:30.388 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 10:41:30.389 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 10:41:30.390 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 10:41:30.391 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 10:41:30.465 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 10:41:30.477 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 10:41:30.480 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 10:41:30.482 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 10:41:30.483 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 10:41:30.484 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 10:41:30.485 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 10:41:30.486 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 10:41:30.913 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 10:41:30.951 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .SingleOrDefault(ap => ap.AppoitmentId == __id_0)'
2024-09-17 10:41:31.140 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Appointment.AppoitmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppoitmentStatus (string) Required MaxLength(50), 1], [Property: Appointment.AppoitmentTime (DateTime) Required, 2], [Property: Appointment.PatientId (Guid) Required FK Index, 3] }
        SELECT TOP(2) a.AppoitmentId, a.AppoitmentStatus, a.AppoitmentTime, a.PatientId
        FROM Appointment AS a
        WHERE a.AppoitmentId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 10:41:31.168 +07:00 [DBG] Creating DbConnection.
2024-09-17 10:41:31.188 +07:00 [DBG] Created DbConnection. (18ms).
2024-09-17 10:41:31.192 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:31.410 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:31.415 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 10:41:31.422 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-09-17 10:41:31.428 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2024-09-17 10:41:31.436 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 10:41:31.477 +07:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 10:41:31.503 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:41:31.519 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:31.526 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 45ms reading results.
2024-09-17 10:41:31.528 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:31.535 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (5ms).
2024-09-17 10:41:31.544 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:41:31.547 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 10:41:31.549 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 10:41:31.561 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 10:41:31.601 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:31.603 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:31.604 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 10:41:31.605 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 10:41:31.605 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 10:41:31.606 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 10:41:31.613 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 10:41:31.617 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:31.618 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-09-17 10:41:31.619 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:31.619 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 10:41:31.624 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:41:31.625 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 10:41:31.628 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 10:41:31.630 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 1238.089ms
2024-09-17 10:41:31.632 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 10:41:31.634 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 10:41:31.639 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:31.641 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-17 10:41:31.643 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/080d6c0a-dc57-4fcf-9a6e-08dcd6bed777 - 200 0 null 1341.4883ms
2024-09-17 10:41:49.092 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 10:41:49.095 +07:00 [DBG] POST requests are not supported
2024-09-17 10:41:49.097 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 10:41:49.098 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 10:41:49.099 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 10:41:49.101 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 10:41:49.102 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 10:41:49.104 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 10:41:49.106 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 10:41:49.107 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 10:41:49.108 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 10:41:49.109 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 10:41:49.109 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 10:41:49.111 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 10:41:49.112 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 10:41:49.114 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 10:41:49.116 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 10:41:49.118 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 10:41:49.119 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 10:41:49.124 +07:00 [DBG] Connection id "0HN6MPA6LIARU", Request id "0HN6MPA6LIARU:0000000B": started reading request body.
2024-09-17 10:41:49.125 +07:00 [DBG] Connection id "0HN6MPA6LIARU", Request id "0HN6MPA6LIARU:0000000B": done reading request body.
2024-09-17 10:41:49.176 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 10:41:49.178 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 10:41:49.179 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 10:41:49.184 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 10:41:49.194 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 10:41:49.197 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 10:41:49.202 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 10:41:49.205 +07:00 [DBG] Creating DbConnection.
2024-09-17 10:41:49.205 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-17 10:41:49.206 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:49.207 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:49.207 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 10:41:49.208 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 10:41:49.208 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-17 10:41:49.209 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 10:41:49.214 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 10:41:49.220 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:41:49.232 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:49.234 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 18ms reading results.
2024-09-17 10:41:49.235 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:49.236 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 10:41:49.305 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:41:49.313 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:41:49.324 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:41:49.326 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 10:41:49.326 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 10:41:49.333 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 10:41:49.341 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:49.343 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:49.343 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 10:41:49.345 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 10:41:49.346 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-17 10:41:49.347 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 10:41:49.353 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 10:41:49.354 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:49.356 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 10:41:49.358 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:49.358 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 10:41:49.361 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:41:49.364 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 10:41:49.367 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 10:41:49.372 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 10:41:49.373 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 10:41:49.374 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 10:41:49.375 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 10:41:49.376 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 10:41:49.397 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 285.8947ms
2024-09-17 10:41:49.399 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 10:41:49.400 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 10:41:49.402 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:41:49.403 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-17 10:41:49.404 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 312.1172ms
2024-09-17 10:44:30.288 +07:00 [DBG] Connection id "0HN6MPA6LIARU" received FIN.
2024-09-17 10:44:30.368 +07:00 [DBG] Connection id "0HN6MPA6LIARU" is closed. The last processed stream ID was 11.
2024-09-17 10:44:30.372 +07:00 [DBG] Connection id "0HN6MPA6LIARU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 10:44:30.378 +07:00 [DBG] The connection queue processing loop for 0HN6MPA6LIARU completed.
2024-09-17 10:44:30.392 +07:00 [DBG] Connection id "0HN6MPA6LIARU" stopped.
2024-09-17 10:53:54.007 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 10:53:54.085 +07:00 [DBG] Hosting starting
2024-09-17 10:53:54.108 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 10:53:54.116 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 10:53:54.121 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 10:53:54.124 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 10:53:54.127 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 10:53:54.132 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 10:53:54.135 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 10:53:54.136 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 10:53:54.138 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 10:53:54.142 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 10:53:54.143 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 10:53:54.145 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 10:53:54.146 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 10:53:54.279 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 10:53:54.280 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 10:53:54.281 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 10:53:54.281 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 10:53:54.282 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 10:53:54.282 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 10:53:54.325 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 10:53:54.327 +07:00 [INF] Hosting environment: Development
2024-09-17 10:53:54.328 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 10:53:54.329 +07:00 [DBG] Hosting started
2024-09-17 10:53:57.894 +07:00 [DBG] Connection id "0HN6MPHDQ8NSD" accepted.
2024-09-17 10:53:57.896 +07:00 [DBG] Connection id "0HN6MPHDQ8NSD" started.
2024-09-17 10:53:57.937 +07:00 [DBG] Connection 0HN6MPHDQ8NSD established using the following protocol: "Tls13"
2024-09-17 10:53:57.969 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 10:53:58.033 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 10:53:58.083 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 10:53:58.085 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 10:53:58.100 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 10:53:58.103 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 10:53:58.107 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 140.9838ms
2024-09-17 10:53:58.116 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 10:53:58.116 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 10:53:58.135 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 20.6046ms
2024-09-17 10:53:58.159 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.7493ms
2024-09-17 10:53:58.389 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 10:53:58.516 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 127.362ms
2024-09-17 10:54:16.950 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/a3e5088f-409f-423a-ce1e-08dcd6be17c8 - null null
2024-09-17 10:54:16.953 +07:00 [DBG] DELETE requests are not supported
2024-09-17 10:54:16.971 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/a3e5088f-409f-423a-ce1e-08dcd6be17c8'
2024-09-17 10:54:16.974 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/a3e5088f-409f-423a-ce1e-08dcd6be17c8'
2024-09-17 10:54:16.979 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 10:54:17.016 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 10:54:17.018 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 10:54:17.031 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 10:54:17.032 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 10:54:17.033 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 10:54:17.034 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 10:54:17.035 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 10:54:17.037 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 10:54:17.040 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 10:54:17.113 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 10:54:17.132 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 10:54:17.137 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 10:54:17.140 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 10:54:17.142 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 10:54:17.143 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 10:54:17.145 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 10:54:17.147 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 10:54:17.623 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 10:54:17.669 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .SingleOrDefault(ap => ap.AppoitmentId == __id_0)'
2024-09-17 10:54:17.822 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Appointment.AppoitmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppoitmentStatus (string) Required MaxLength(50), 1], [Property: Appointment.AppoitmentTime (DateTime) Required, 2], [Property: Appointment.PatientId (Guid) Required FK Index, 3] }
        SELECT TOP(2) a.AppoitmentId, a.AppoitmentStatus, a.AppoitmentTime, a.PatientId
        FROM Appointment AS a
        WHERE a.AppoitmentId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 10:54:17.844 +07:00 [DBG] Creating DbConnection.
2024-09-17 10:54:17.859 +07:00 [DBG] Created DbConnection. (13ms).
2024-09-17 10:54:17.862 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:18.051 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:18.055 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 10:54:18.060 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-17 10:54:18.066 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-09-17 10:54:18.073 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 10:54:18.105 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 10:54:18.130 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:54:18.146 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:18.153 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 44ms reading results.
2024-09-17 10:54:18.156 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:18.161 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (5ms).
2024-09-17 10:54:18.171 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:54:18.174 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 10:54:18.176 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 10:54:18.188 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 10:54:18.227 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:18.230 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:18.231 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 10:54:18.232 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-09-17 10:54:18.233 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 10:54:18.234 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 10:54:18.239 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 10:54:18.243 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:18.245 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-09-17 10:54:18.246 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:18.247 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 10:54:18.252 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:54:18.255 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 10:54:18.257 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 10:54:18.261 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 1220.1951ms
2024-09-17 10:54:18.262 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 10:54:18.266 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 10:54:18.270 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:18.273 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-09-17 10:54:18.274 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/a3e5088f-409f-423a-ce1e-08dcd6be17c8 - 200 0 null 1324.948ms
2024-09-17 10:54:35.535 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/4b0e17ef-c498-4bb0-adcc-08dcd6be684f - null null
2024-09-17 10:54:35.538 +07:00 [DBG] DELETE requests are not supported
2024-09-17 10:54:35.540 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/4b0e17ef-c498-4bb0-adcc-08dcd6be684f'
2024-09-17 10:54:35.541 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/4b0e17ef-c498-4bb0-adcc-08dcd6be684f'
2024-09-17 10:54:35.542 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 10:54:35.544 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 10:54:35.544 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 10:54:35.545 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 10:54:35.546 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 10:54:35.547 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 10:54:35.548 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 10:54:35.549 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 10:54:35.549 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 10:54:35.550 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 10:54:35.552 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 10:54:35.554 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 10:54:35.555 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 10:54:35.556 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 10:54:35.556 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 10:54:35.557 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 10:54:35.557 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 10:54:35.566 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 10:54:35.570 +07:00 [DBG] Creating DbConnection.
2024-09-17 10:54:35.571 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-17 10:54:35.572 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:35.573 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:35.574 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 10:54:35.574 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 10:54:35.575 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 10:54:35.576 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 10:54:35.577 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 10:54:35.579 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:54:35.579 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:35.580 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-17 10:54:35.581 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:35.582 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 10:54:35.582 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:54:35.583 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 10:54:35.584 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 10:54:35.585 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 10:54:35.586 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:35.587 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:35.588 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 10:54:35.588 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 10:54:35.589 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 10:54:35.590 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 10:54:35.593 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 10:54:35.594 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:35.595 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-17 10:54:35.596 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:35.596 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 10:54:35.597 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:54:35.598 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 10:54:35.599 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 10:54:35.600 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 49.5815ms
2024-09-17 10:54:35.600 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 10:54:35.601 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 10:54:35.602 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:35.603 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-17 10:54:35.604 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/4b0e17ef-c498-4bb0-adcc-08dcd6be684f - 200 0 null 68.8699ms
2024-09-17 10:54:43.481 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Appointment/26a208b5-9164-4f22-08c7-08dcd6c15e7b - null null
2024-09-17 10:54:43.483 +07:00 [DBG] DELETE requests are not supported
2024-09-17 10:54:43.484 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/26a208b5-9164-4f22-08c7-08dcd6c15e7b'
2024-09-17 10:54:43.486 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/26a208b5-9164-4f22-08c7-08dcd6c15e7b'
2024-09-17 10:54:43.487 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 10:54:43.489 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 10:54:43.490 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 10:54:43.491 +07:00 [INF] Route matched with {action = "Delete", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 10:54:43.492 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 10:54:43.493 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 10:54:43.494 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 10:54:43.495 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 10:54:43.496 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 10:54:43.497 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 10:54:43.500 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 10:54:43.501 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-09-17 10:54:43.502 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-09-17 10:54:43.503 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 10:54:43.504 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-09-17 10:54:43.505 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-09-17 10:54:43.505 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-09-17 10:54:43.549 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 10:54:43.551 +07:00 [DBG] Creating DbConnection.
2024-09-17 10:54:43.552 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-17 10:54:43.553 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:43.553 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:43.554 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 10:54:43.555 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 10:54:43.555 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 10:54:43.556 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 10:54:43.564 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppoitmentId], [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppoitmentId] = @__id_0
2024-09-17 10:54:43.565 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:54:43.566 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:43.567 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-09-17 10:54:43.568 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:43.569 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 10:54:43.569 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:54:43.570 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 10:54:43.571 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 10:54:43.572 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 10:54:43.572 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:43.574 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:43.574 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 10:54:43.575 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 10:54:43.576 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 10:54:43.577 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 10:54:43.580 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Appointment]
OUTPUT 1
WHERE [AppoitmentId] = @p0;
2024-09-17 10:54:43.581 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:43.582 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-17 10:54:43.583 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:43.583 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 10:54:43.585 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:54:43.586 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 10:54:43.586 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-17 10:54:43.587 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API) in 90.0551ms
2024-09-17 10:54:43.588 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Delete (CityInfo.API)'
2024-09-17 10:54:43.589 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 10:54:43.589 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:54:43.590 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-17 10:54:43.591 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Appointment/26a208b5-9164-4f22-08c7-08dcd6c15e7b - 200 0 null 110.4796ms
2024-09-17 10:55:17.458 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 10:55:17.460 +07:00 [DBG] POST requests are not supported
2024-09-17 10:55:17.461 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 10:55:17.461 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 10:55:17.462 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 10:55:17.463 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 10:55:17.464 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 10:55:17.467 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 10:55:17.468 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 10:55:17.469 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 10:55:17.470 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 10:55:17.471 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 10:55:17.472 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 10:55:17.473 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 10:55:17.474 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 10:55:17.475 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 10:55:17.476 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 10:55:17.478 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 10:55:17.479 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 10:55:17.485 +07:00 [DBG] Connection id "0HN6MPHDQ8NSD", Request id "0HN6MPHDQ8NSD:0000000F": started reading request body.
2024-09-17 10:55:17.486 +07:00 [DBG] Connection id "0HN6MPHDQ8NSD", Request id "0HN6MPHDQ8NSD:0000000F": done reading request body.
2024-09-17 10:55:17.545 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 10:55:17.547 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 10:55:17.548 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 10:55:17.555 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 10:55:17.558 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 10:55:17.561 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 10:55:17.566 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 10:55:17.568 +07:00 [DBG] Creating DbConnection.
2024-09-17 10:55:17.568 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-17 10:55:17.569 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:55:17.570 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:55:17.570 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 10:55:17.571 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 10:55:17.571 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-17 10:55:17.572 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 10:55:17.577 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 10:55:17.584 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:55:17.597 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:55:17.598 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 19ms reading results.
2024-09-17 10:55:17.599 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:55:17.600 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 10:55:17.706 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:55:17.713 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:55:17.722 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:55:17.724 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 10:55:17.724 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 10:55:17.732 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 10:55:17.741 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:55:17.742 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:55:17.743 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 10:55:17.743 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 10:55:17.745 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-17 10:55:17.746 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 10:55:17.750 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 10:55:17.751 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:55:17.752 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-17 10:55:17.752 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:55:17.753 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-17 10:55:17.754 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 10:55:17.756 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-17 10:55:17.758 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 10:55:17.761 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 10:55:17.762 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 10:55:17.762 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 10:55:17.764 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 10:55:17.765 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 10:55:17.788 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 314.9576ms
2024-09-17 10:55:17.789 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 10:55:17.790 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 10:55:17.790 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 10:55:17.791 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-17 10:55:17.793 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 334.5975ms
2024-09-17 10:55:38.280 +07:00 [DBG] Connection id "0HN6MPHDQ8NSD" received FIN.
2024-09-17 10:55:38.288 +07:00 [DBG] Connection id "0HN6MPHDQ8NSD" is closed. The last processed stream ID was 15.
2024-09-17 10:55:38.289 +07:00 [DBG] The connection queue processing loop for 0HN6MPHDQ8NSD completed.
2024-09-17 10:55:38.290 +07:00 [DBG] Connection id "0HN6MPHDQ8NSD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 10:55:38.295 +07:00 [DBG] Connection id "0HN6MPHDQ8NSD" stopped.
2024-09-17 13:38:23.458 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 13:38:23.595 +07:00 [DBG] Hosting starting
2024-09-17 13:38:23.626 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 13:38:23.638 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 13:38:23.650 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 13:38:23.659 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 13:38:23.667 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 13:38:23.674 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 13:38:23.677 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 13:38:23.680 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 13:38:23.683 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 13:38:23.689 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 13:38:23.693 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 13:38:23.697 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 13:38:23.699 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 13:38:23.906 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 13:38:23.907 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 13:38:23.908 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 13:38:23.910 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 13:38:23.911 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 13:38:23.912 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 13:38:23.984 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 13:38:23.987 +07:00 [INF] Hosting environment: Development
2024-09-17 13:38:23.989 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 13:38:23.992 +07:00 [DBG] Hosting started
2024-09-17 13:38:29.070 +07:00 [DBG] Connection id "0HN6MSDBL4FGM" accepted.
2024-09-17 13:38:29.076 +07:00 [DBG] Connection id "0HN6MSDBL4FGM" started.
2024-09-17 13:38:29.164 +07:00 [DBG] Connection 0HN6MSDBL4FGM established using the following protocol: "Tls13"
2024-09-17 13:38:29.227 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 13:38:29.340 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 13:38:29.424 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 13:38:29.428 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 13:38:29.453 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 13:38:29.457 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 13:38:29.463 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 242.5107ms
2024-09-17 13:38:29.483 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 13:38:29.498 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 15.2441ms
2024-09-17 13:38:29.596 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 13:38:29.658 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.3774ms
2024-09-17 13:38:29.897 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 13:38:30.082 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 185.281ms
2024-09-17 13:38:49.347 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 13:38:49.358 +07:00 [DBG] POST requests are not supported
2024-09-17 13:38:49.384 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 13:38:49.392 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 13:38:49.404 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 13:38:49.478 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 13:38:49.484 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 13:38:49.512 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 13:38:49.520 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 13:38:49.525 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 13:38:49.532 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 13:38:49.539 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 13:38:49.543 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 13:38:49.551 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 13:38:49.714 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 13:38:49.744 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 13:38:49.754 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 13:38:49.760 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 13:38:49.766 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 13:38:49.770 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 13:38:49.781 +07:00 [DBG] Connection id "0HN6MSDBL4FGM", Request id "0HN6MSDBL4FGM:00000009": started reading request body.
2024-09-17 13:38:49.786 +07:00 [DBG] Connection id "0HN6MSDBL4FGM", Request id "0HN6MSDBL4FGM:00000009": done reading request body.
2024-09-17 13:38:49.890 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 13:38:49.892 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 13:38:49.893 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 13:38:49.903 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 13:38:50.567 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 13:38:50.641 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 13:38:50.821 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 13:38:50.860 +07:00 [DBG] Creating DbConnection.
2024-09-17 13:38:50.903 +07:00 [DBG] Created DbConnection. (40ms).
2024-09-17 13:38:50.909 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 13:38:51.252 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 13:38:51.259 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 13:38:51.270 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2024-09-17 13:38:51.283 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (24ms).
2024-09-17 13:38:51.297 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 13:38:51.352 +07:00 [INF] Executed DbCommand (58ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 13:38:51.400 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 13:38:51.428 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 13:38:51.439 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 72ms reading results.
2024-09-17 13:38:51.448 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 13:38:51.458 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (10ms).
2024-09-17 13:39:12.870 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 13:39:12.884 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 13:39:12.888 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 13:39:12.889 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 13:39:12.891 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 13:39:12.892 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Threading.Tasks.Task`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-17 13:39:12.927 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 23375.1219ms
2024-09-17 13:39:12.936 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 13:39:12.944 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Result' on 'System.Threading.Tasks.Task`1[CityInfo.API.Models.AppointmentModelForAdd]'.
 ---> System.AggregateException: One or more errors occurred. (Cannot connect to SMTP server 64.233.188.108 (64.233.188.108:587), connect error 10060)
 ---> MailKit.Net.Smtp.SmtpCommandException: Cannot connect to SMTP server 64.233.188.108 (64.233.188.108:587), connect error 10060
   at MailKit.Net.Smtp.SmtpClient.PostConnect(Stream stream, String host, Int32 port, SecureSocketOptions options, Boolean starttls, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.Connect(String host, Int32 port, SecureSocketOptions options, CancellationToken cancellationToken)
   at CityInfo.API.Services.EmailSender.SendEmail(EmailRequest emailRequest) in C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API\Services\EmailSender.cs:line 30
   at CityInfo.API.Services.AppointmentRespository.Add(AppointmentModelForAdd appointment) in C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API\Services\AppointmentRespository.cs:line 115
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at lambda_method76(Closure, Object)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-17 13:39:13.008 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 13:39:13.018 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 13:39:13.023 +07:00 [DBG] Disposed connection to database '' on server '' (4ms).
2024-09-17 13:39:13.029 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 23683.1397ms
2024-09-17 13:40:12.849 +07:00 [DBG] Connection id "0HN6MSDBL4FGM" received FIN.
2024-09-17 13:40:12.861 +07:00 [DBG] Connection id "0HN6MSDBL4FGM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 13:40:12.862 +07:00 [DBG] Connection id "0HN6MSDBL4FGM" is closed. The last processed stream ID was 9.
2024-09-17 13:40:12.867 +07:00 [DBG] The connection queue processing loop for 0HN6MSDBL4FGM completed.
2024-09-17 13:40:12.879 +07:00 [DBG] Connection id "0HN6MSDBL4FGM" stopped.
2024-09-17 13:43:59.504 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 13:43:59.609 +07:00 [DBG] Hosting starting
2024-09-17 13:43:59.641 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 13:43:59.649 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 13:43:59.658 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 13:43:59.663 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 13:43:59.671 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 13:43:59.679 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 13:43:59.684 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 13:43:59.688 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 13:43:59.691 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 13:43:59.700 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 13:43:59.704 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 13:43:59.708 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 13:43:59.715 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 13:43:59.894 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 13:43:59.898 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 13:43:59.898 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 13:43:59.902 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 13:43:59.905 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 13:43:59.907 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 13:43:59.951 +07:00 [DBG] Connection id "0HN6MSGE8LLG0" accepted.
2024-09-17 13:43:59.954 +07:00 [DBG] Connection id "0HN6MSGE8LLG0" started.
2024-09-17 13:43:59.962 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 13:43:59.969 +07:00 [INF] Hosting environment: Development
2024-09-17 13:43:59.970 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 13:43:59.973 +07:00 [DBG] Hosting started
2024-09-17 13:44:00.018 +07:00 [DBG] Connection 0HN6MSGE8LLG0 established using the following protocol: "Tls13"
2024-09-17 13:44:00.076 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 13:44:00.167 +07:00 [DBG] Connection id "0HN6MSGE8LLG1" accepted.
2024-09-17 13:44:00.170 +07:00 [DBG] Connection id "0HN6MSGE8LLG1" started.
2024-09-17 13:44:00.177 +07:00 [DBG] Connection 0HN6MSGE8LLG1 established using the following protocol: "Tls13"
2024-09-17 13:44:00.190 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 13:44:00.247 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 13:44:00.253 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 13:44:00.284 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 13:44:00.287 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 13:44:00.291 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 13:44:00.291 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 13:44:00.291 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 220.602ms
2024-09-17 13:44:00.316 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 25.44ms
2024-09-17 13:44:00.359 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.8106ms
2024-09-17 13:44:00.655 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 13:44:00.844 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 189.3293ms
2024-09-17 13:44:40.518 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 13:44:40.535 +07:00 [DBG] POST requests are not supported
2024-09-17 13:44:40.563 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 13:44:40.570 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 13:44:40.584 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 13:44:40.654 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 13:44:40.661 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 13:44:40.682 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 13:44:40.692 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 13:44:40.700 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 13:44:40.702 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 13:44:40.704 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 13:44:40.705 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 13:44:40.708 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 13:44:40.817 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 13:44:40.837 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 13:44:40.845 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 13:44:40.851 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 13:44:40.858 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 13:44:40.862 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 13:44:40.871 +07:00 [DBG] Connection id "0HN6MSGE8LLG0", Request id "0HN6MSGE8LLG0:00000009": started reading request body.
2024-09-17 13:44:40.876 +07:00 [DBG] Connection id "0HN6MSGE8LLG0", Request id "0HN6MSGE8LLG0:00000009": done reading request body.
2024-09-17 13:44:40.946 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 13:44:40.952 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 13:44:40.957 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 13:44:40.966 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 13:44:41.573 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 13:44:41.621 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 13:44:41.793 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 13:44:41.822 +07:00 [DBG] Creating DbConnection.
2024-09-17 13:44:41.844 +07:00 [DBG] Created DbConnection. (20ms).
2024-09-17 13:44:41.849 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 13:44:42.092 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 13:44:42.098 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 13:44:42.108 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2024-09-17 13:44:42.124 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (24ms).
2024-09-17 13:44:42.139 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 13:44:42.195 +07:00 [INF] Executed DbCommand (64ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 13:44:42.236 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 13:44:42.269 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 13:44:42.280 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 75ms reading results.
2024-09-17 13:44:42.286 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 13:44:42.294 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (7ms).
2024-09-17 13:44:44.684 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 13:44:44.693 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 13:44:44.696 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 13:44:44.697 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 13:44:44.699 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 13:44:44.701 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Threading.Tasks.Task`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-17 13:44:44.734 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 4025.2756ms
2024-09-17 13:44:44.738 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 13:44:44.744 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Result' on 'System.Threading.Tasks.Task`1[CityInfo.API.Models.AppointmentModelForAdd]'.
 ---> System.AggregateException: One or more errors occurred. (An error occurred while attempting to establish an SSL or TLS connection.

The server's SSL certificate could not be validated for the following reasons:
• The server certificate has the following errors:
  • The revocation function was unable to check revocation for the certificate.
)
 ---> MailKit.Security.SslHandshakeException: An error occurred while attempting to establish an SSL or TLS connection.

The server's SSL certificate could not be validated for the following reasons:
• The server certificate has the following errors:
  • The revocation function was unable to check revocation for the certificate.

 ---> System.Security.Authentication.AuthenticationException: The remote certificate was rejected by the provided RemoteCertificateValidationCallback.
   at System.Net.Security.SslStream.CompleteHandshake(SslAuthenticationOptions sslAuthenticationOptions)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.AuthenticateAsClient(SslClientAuthenticationOptions sslClientAuthenticationOptions)
   at MailKit.Net.Smtp.SmtpClient.SslHandshake(SslStream ssl, String host, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.PostConnect(Stream stream, String host, Int32 port, SecureSocketOptions options, Boolean starttls, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.PostConnect(Stream stream, String host, Int32 port, SecureSocketOptions options, Boolean starttls, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.Connect(String host, Int32 port, SecureSocketOptions options, CancellationToken cancellationToken)
   at CityInfo.API.Services.EmailSender.SendEmail(EmailRequest emailRequest) in C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API\Services\EmailSender.cs:line 30
   at CityInfo.API.Services.AppointmentRespository.Add(AppointmentModelForAdd appointment) in C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API\Services\AppointmentRespository.cs:line 123
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at lambda_method76(Closure, Object)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-17 13:44:44.825 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 13:44:44.836 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 13:44:44.845 +07:00 [DBG] Disposed connection to database '' on server '' (8ms).
2024-09-17 13:44:44.851 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 4333.3748ms
2024-09-17 13:45:34.723 +07:00 [DBG] Connection id "0HN6MSGE8LLG1" received FIN.
2024-09-17 13:45:34.737 +07:00 [DBG] Connection id "0HN6MSGE8LLG1" is closed. The last processed stream ID was 0.
2024-09-17 13:45:34.739 +07:00 [DBG] The connection queue processing loop for 0HN6MSGE8LLG1 completed.
2024-09-17 13:45:34.745 +07:00 [DBG] Connection id "0HN6MSGE8LLG1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 13:45:34.760 +07:00 [DBG] Connection id "0HN6MSGE8LLG1" stopped.
2024-09-17 13:47:38.377 +07:00 [DBG] Connection id "0HN6MSGE8LLG0" received FIN.
2024-09-17 13:47:38.384 +07:00 [DBG] Connection id "0HN6MSGE8LLG0" is closed. The last processed stream ID was 9.
2024-09-17 13:47:38.385 +07:00 [DBG] The connection queue processing loop for 0HN6MSGE8LLG0 completed.
2024-09-17 13:47:38.391 +07:00 [DBG] Connection id "0HN6MSGE8LLG0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 13:47:38.403 +07:00 [DBG] Connection id "0HN6MSGE8LLG0" stopped.
2024-09-17 14:11:58.237 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 14:11:58.330 +07:00 [DBG] Hosting starting
2024-09-17 14:11:58.368 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 14:11:58.378 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 14:11:58.384 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 14:11:58.389 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 14:11:58.393 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 14:11:58.398 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 14:11:58.402 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 14:11:58.405 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 14:11:58.407 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 14:11:58.412 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 14:11:58.414 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 14:11:58.416 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 14:11:58.418 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 14:11:58.593 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 14:11:58.596 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 14:11:58.597 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 14:11:58.597 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 14:11:58.598 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 14:11:58.598 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 14:11:58.645 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 14:11:58.648 +07:00 [INF] Hosting environment: Development
2024-09-17 14:11:58.653 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 14:11:58.655 +07:00 [DBG] Hosting started
2024-09-17 14:52:58.228 +07:00 [DBG] Connection id "0HN6MTMVIBAGO" accepted.
2024-09-17 14:52:58.231 +07:00 [DBG] Connection id "0HN6MTMVIBAGO" started.
2024-09-17 14:52:58.322 +07:00 [DBG] Connection 0HN6MTMVIBAGO established using the following protocol: "Tls13"
2024-09-17 14:52:58.373 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 14:52:58.480 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 14:52:58.546 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 14:52:58.549 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 14:52:58.589 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 14:52:58.593 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 14:52:58.602 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 234.2974ms
2024-09-17 14:52:58.729 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 14:52:58.729 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 14:52:58.742 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 13.7473ms
2024-09-17 14:52:58.790 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 61.368ms
2024-09-17 14:52:59.037 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 14:52:59.225 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 188.8852ms
2024-09-17 14:53:33.210 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 14:53:33.224 +07:00 [DBG] POST requests are not supported
2024-09-17 14:53:33.254 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 14:53:33.263 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 14:53:33.278 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 14:53:33.356 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 14:53:33.365 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 14:53:33.390 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 14:53:33.404 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 14:53:33.408 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 14:53:33.410 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 14:53:33.412 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 14:53:33.413 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 14:53:33.417 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 14:53:33.540 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 14:53:33.558 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 14:53:33.567 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 14:53:33.574 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 14:53:33.577 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 14:53:33.578 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 14:53:33.585 +07:00 [DBG] Connection id "0HN6MTMVIBAGO", Request id "0HN6MTMVIBAGO:00000009": started reading request body.
2024-09-17 14:53:33.586 +07:00 [DBG] Connection id "0HN6MTMVIBAGO", Request id "0HN6MTMVIBAGO:00000009": done reading request body.
2024-09-17 14:53:33.640 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 14:53:33.645 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 14:53:33.650 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 14:53:33.656 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 14:53:34.101 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 14:53:34.151 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 14:53:34.300 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 14:53:34.332 +07:00 [DBG] Creating DbConnection.
2024-09-17 14:53:34.354 +07:00 [DBG] Created DbConnection. (20ms).
2024-09-17 14:53:34.358 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 14:53:34.600 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 14:53:34.607 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 14:53:34.619 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2024-09-17 14:53:34.630 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (23ms).
2024-09-17 14:53:34.642 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 14:53:34.697 +07:00 [INF] Executed DbCommand (59ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 14:53:34.737 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 14:53:34.771 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 14:53:34.785 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 76ms reading results.
2024-09-17 14:53:34.791 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 14:53:34.801 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (9ms).
2024-09-17 14:53:38.315 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 14:53:38.326 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 14:53:38.327 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 14:53:38.328 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 14:53:38.330 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 14:53:38.331 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<Add>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-17 14:53:38.368 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 4949.6452ms
2024-09-17 14:53:38.372 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 14:53:38.375 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'task' with type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<Add>d__10]'. Path 'stateMachine.<>t__builder'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-17 14:53:38.422 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 14:53:38.428 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 14:53:38.431 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-09-17 14:53:38.433 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 5223.2952ms
2024-09-17 14:56:19.133 +07:00 [DBG] Connection id "0HN6MTMVIBAGO" received FIN.
2024-09-17 14:56:19.261 +07:00 [DBG] Connection id "0HN6MTMVIBAGO" is closed. The last processed stream ID was 9.
2024-09-17 14:56:19.261 +07:00 [DBG] Connection id "0HN6MTMVIBAGO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 14:56:19.289 +07:00 [DBG] The connection queue processing loop for 0HN6MTMVIBAGO completed.
2024-09-17 14:56:19.296 +07:00 [DBG] Connection id "0HN6MTMVIBAGO" stopped.
2024-09-17 15:00:54.822 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 15:00:54.979 +07:00 [DBG] Hosting starting
2024-09-17 15:00:55.015 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 15:00:55.026 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 15:00:55.035 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 15:00:55.043 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 15:00:55.049 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 15:00:55.058 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 15:00:55.065 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 15:00:55.070 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 15:00:55.074 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 15:00:55.083 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 15:00:55.090 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 15:00:55.097 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 15:00:55.100 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 15:00:55.277 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 15:00:55.280 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 15:00:55.282 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 15:00:55.283 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 15:00:55.284 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 15:00:55.284 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 15:00:55.353 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 15:00:55.356 +07:00 [INF] Hosting environment: Development
2024-09-17 15:00:55.360 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 15:00:55.363 +07:00 [DBG] Hosting started
2024-09-17 15:00:56.990 +07:00 [DBG] Connection id "0HN6MTRE85RD1" accepted.
2024-09-17 15:00:56.993 +07:00 [DBG] Connection id "0HN6MTRE85RD1" started.
2024-09-17 15:00:57.040 +07:00 [DBG] Connection 0HN6MTRE85RD1 established using the following protocol: "Tls13"
2024-09-17 15:00:57.097 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 15:00:57.207 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 15:00:57.295 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 15:00:57.300 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 15:00:57.334 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 15:00:57.337 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 15:00:57.343 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 253.0357ms
2024-09-17 15:00:57.584 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 15:00:57.584 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 15:00:57.608 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 22.1804ms
2024-09-17 15:00:57.637 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.3423ms
2024-09-17 15:00:57.777 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 15:00:57.930 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 153.3997ms
2024-09-17 15:01:18.497 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 15:01:18.502 +07:00 [DBG] POST requests are not supported
2024-09-17 15:01:18.528 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 15:01:18.535 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 15:01:18.547 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 15:01:18.605 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 15:01:18.611 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 15:01:18.639 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 15:01:18.646 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 15:01:18.650 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 15:01:18.652 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 15:01:18.653 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 15:01:18.655 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 15:01:18.658 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 15:01:18.781 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 15:01:18.802 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 15:01:18.808 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 15:01:18.812 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 15:01:18.816 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 15:01:18.819 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 15:01:18.825 +07:00 [DBG] Connection id "0HN6MTRE85RD1", Request id "0HN6MTRE85RD1:00000009": started reading request body.
2024-09-17 15:01:18.826 +07:00 [DBG] Connection id "0HN6MTRE85RD1", Request id "0HN6MTRE85RD1:00000009": done reading request body.
2024-09-17 15:01:18.901 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 15:01:18.904 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 15:01:18.907 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 15:01:18.916 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 15:01:19.549 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 15:01:19.619 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 15:01:19.835 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 15:01:19.866 +07:00 [DBG] Creating DbConnection.
2024-09-17 15:01:19.895 +07:00 [DBG] Created DbConnection. (25ms).
2024-09-17 15:01:19.902 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 15:01:20.201 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 15:01:20.209 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 15:01:20.222 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2024-09-17 15:01:20.241 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (32ms).
2024-09-17 15:01:20.256 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 15:01:20.316 +07:00 [INF] Executed DbCommand (64ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 15:01:20.364 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 15:01:20.393 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 15:01:20.403 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 78ms reading results.
2024-09-17 15:01:20.407 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 15:01:20.416 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (8ms).
2024-09-17 15:01:22.739 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 15:01:22.744 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 15:01:22.746 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 15:01:22.747 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 15:01:22.749 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 15:01:22.751 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<Add>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-17 15:01:22.796 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 4136.8406ms
2024-09-17 15:01:22.800 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 15:01:22.803 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'task' with type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<Add>d__10]'. Path 'stateMachine.<>t__builder'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-17 15:01:22.849 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 15:01:22.856 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 15:01:22.859 +07:00 [DBG] Disposed connection to database '' on server '' (4ms).
2024-09-17 15:01:22.862 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 4366.2853ms
2024-09-17 15:02:28.291 +07:00 [DBG] Connection id "0HN6MTRE85RD1" received FIN.
2024-09-17 15:02:28.301 +07:00 [DBG] Connection id "0HN6MTRE85RD1" is closed. The last processed stream ID was 9.
2024-09-17 15:02:28.302 +07:00 [DBG] The connection queue processing loop for 0HN6MTRE85RD1 completed.
2024-09-17 15:02:28.303 +07:00 [DBG] Connection id "0HN6MTRE85RD1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 15:02:28.314 +07:00 [DBG] Connection id "0HN6MTRE85RD1" stopped.
2024-09-17 17:02:21.914 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 17:02:21.988 +07:00 [DBG] Hosting starting
2024-09-17 17:02:22.013 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 17:02:22.019 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 17:02:22.023 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 17:02:22.025 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 17:02:22.028 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 17:02:22.031 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 17:02:22.033 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 17:02:22.035 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 17:02:22.036 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 17:02:22.039 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 17:02:22.041 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 17:02:22.042 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 17:02:22.042 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 17:02:22.153 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 17:02:22.154 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 17:02:22.154 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 17:02:22.155 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 17:02:22.155 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 17:02:22.155 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 17:02:22.191 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 17:02:22.192 +07:00 [INF] Hosting environment: Development
2024-09-17 17:02:22.193 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 17:02:22.193 +07:00 [DBG] Hosting started
2024-09-17 17:30:01.104 +07:00 [DBG] Connection id "0HN6N0ENPSQFQ" accepted.
2024-09-17 17:30:01.105 +07:00 [DBG] Connection id "0HN6N0ENPSQFQ" started.
2024-09-17 17:30:01.146 +07:00 [DBG] Connection 0HN6N0ENPSQFQ established using the following protocol: "Tls13"
2024-09-17 17:30:01.174 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 17:30:01.236 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 17:30:01.281 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 17:30:01.283 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 17:30:01.302 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 17:30:01.304 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 17:30:01.306 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 17:30:01.306 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 17:30:01.311 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 139.4053ms
2024-09-17 17:30:01.322 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 16.2156ms
2024-09-17 17:30:01.341 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.1597ms
2024-09-17 17:30:01.553 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 17:30:01.672 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 119.1108ms
2024-09-17 17:30:24.999 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 17:30:25.009 +07:00 [DBG] POST requests are not supported
2024-09-17 17:30:25.029 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 17:30:25.032 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 17:30:25.038 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 17:30:25.071 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 17:30:25.073 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 17:30:25.087 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 17:30:25.088 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 17:30:25.089 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 17:30:25.090 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 17:30:25.091 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 17:30:25.092 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 17:30:25.093 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 17:30:25.164 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 17:30:25.177 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 17:30:25.180 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 17:30:25.182 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 17:30:25.183 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 17:30:25.184 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 17:30:25.188 +07:00 [DBG] Connection id "0HN6N0ENPSQFQ", Request id "0HN6N0ENPSQFQ:00000009": started reading request body.
2024-09-17 17:30:25.188 +07:00 [DBG] Connection id "0HN6N0ENPSQFQ", Request id "0HN6N0ENPSQFQ:00000009": done reading request body.
2024-09-17 17:30:25.237 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 17:30:25.239 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 17:30:25.239 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 17:30:25.244 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 17:30:25.631 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 17:30:25.664 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 17:30:25.785 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 17:30:25.806 +07:00 [DBG] Creating DbConnection.
2024-09-17 17:30:25.820 +07:00 [DBG] Created DbConnection. (12ms).
2024-09-17 17:30:25.823 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:30:26.012 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:30:26.016 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 17:30:26.021 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-17 17:30:26.026 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-09-17 17:30:26.033 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 17:30:26.067 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 17:30:26.095 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 17:30:26.115 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:30:26.121 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 49ms reading results.
2024-09-17 17:30:26.123 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:30:26.127 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2024-09-17 17:30:27.804 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 17:30:27.808 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 17:30:27.808 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 17:30:27.808 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 17:30:27.809 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 17:30:27.810 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<Add>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-17 17:30:27.905 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 2810.5261ms
2024-09-17 17:30:27.907 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 17:30:27.908 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Context' on 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<Add>d__10]'.
 ---> System.InvalidOperationException: Could not create getter for System.Threading.ExecutionContext& Context. ByRef return values are not supported.
   at Newtonsoft.Json.Utilities.ReflectionDelegateFactory.CreateGet[T](MemberInfo memberInfo)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-17 17:30:27.951 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 17:30:27.955 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:30:27.957 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-17 17:30:27.958 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 2959.8001ms
2024-09-17 17:36:45.261 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 17:36:45.339 +07:00 [DBG] Hosting starting
2024-09-17 17:36:45.357 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 17:36:45.362 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 17:36:45.366 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 17:36:45.369 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 17:36:45.371 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 17:36:45.375 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 17:36:45.377 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 17:36:45.379 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 17:36:45.381 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 17:36:45.384 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 17:36:45.386 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 17:36:45.387 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 17:36:45.388 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 17:36:45.494 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 17:36:45.494 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 17:36:45.495 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 17:36:45.496 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 17:36:45.496 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 17:36:45.497 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 17:36:45.535 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 17:36:45.535 +07:00 [INF] Hosting environment: Development
2024-09-17 17:36:45.536 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 17:36:45.536 +07:00 [DBG] Hosting started
2024-09-17 17:36:52.611 +07:00 [DBG] Connection id "0HN6N0IIEB34V" accepted.
2024-09-17 17:36:52.612 +07:00 [DBG] Connection id "0HN6N0IIEB34V" started.
2024-09-17 17:36:52.645 +07:00 [DBG] Connection 0HN6N0IIEB34V established using the following protocol: "Tls13"
2024-09-17 17:36:52.672 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 17:36:52.731 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 17:36:52.772 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 17:36:52.774 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 17:36:52.785 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 17:36:52.786 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 17:36:52.789 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 119.5607ms
2024-09-17 17:36:52.797 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 17:36:52.797 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 17:36:52.813 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 15.4898ms
2024-09-17 17:36:52.836 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.4098ms
2024-09-17 17:36:53.063 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 17:36:53.231 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 167.8136ms
2024-09-17 17:36:58.238 +07:00 [DBG] Connection id "0HN6N0IIEB34V" received FIN.
2024-09-17 17:36:58.240 +07:00 [DBG] Connection id "0HN6N0IIEB34V" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 17:36:58.243 +07:00 [DBG] Connection id "0HN6N0IIEB34V" is closed. The last processed stream ID was 7.
2024-09-17 17:36:58.245 +07:00 [DBG] The connection queue processing loop for 0HN6N0IIEB34V completed.
2024-09-17 17:36:58.249 +07:00 [DBG] Connection id "0HN6N0IIEB34V" stopped.
2024-09-17 17:36:59.269 +07:00 [DBG] Connection id "0HN6N0IIEB350" accepted.
2024-09-17 17:36:59.270 +07:00 [DBG] Connection id "0HN6N0IIEB350" started.
2024-09-17 17:36:59.273 +07:00 [DBG] Connection 0HN6N0IIEB350 established using the following protocol: "Tls13"
2024-09-17 17:36:59.275 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 17:36:59.278 +07:00 [DBG] POST requests are not supported
2024-09-17 17:36:59.295 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 17:36:59.297 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 17:36:59.302 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 17:36:59.334 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 17:36:59.336 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 17:36:59.348 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 17:36:59.349 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 17:36:59.350 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 17:36:59.350 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 17:36:59.352 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 17:36:59.352 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 17:36:59.354 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 17:36:59.421 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 17:36:59.435 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 17:36:59.438 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 17:36:59.440 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 17:36:59.441 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 17:36:59.442 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 17:36:59.446 +07:00 [DBG] Connection id "0HN6N0IIEB350", Request id "0HN6N0IIEB350:00000001": started reading request body.
2024-09-17 17:36:59.446 +07:00 [DBG] Connection id "0HN6N0IIEB350", Request id "0HN6N0IIEB350:00000001": done reading request body.
2024-09-17 17:36:59.492 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 17:36:59.493 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 17:36:59.494 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 17:36:59.499 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 17:36:59.914 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 17:36:59.946 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 17:37:00.091 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 17:37:00.114 +07:00 [DBG] Creating DbConnection.
2024-09-17 17:37:00.131 +07:00 [DBG] Created DbConnection. (15ms).
2024-09-17 17:37:00.134 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:37:00.301 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:37:00.304 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 17:37:00.307 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-17 17:37:00.313 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-09-17 17:37:00.318 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 17:37:00.353 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 17:37:00.380 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 17:37:00.402 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:37:00.409 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 51ms reading results.
2024-09-17 17:37:00.411 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:37:00.415 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2024-09-17 17:37:02.089 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 17:37:02.091 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 17:37:02.092 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 17:37:02.092 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 17:37:02.093 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 17:37:02.094 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<Add>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-17 17:37:02.191 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 2836.2281ms
2024-09-17 17:37:02.193 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 17:37:02.194 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Context' on 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<Add>d__10]'.
 ---> System.InvalidOperationException: Could not create getter for System.Threading.ExecutionContext& Context. ByRef return values are not supported.
   at Newtonsoft.Json.Utilities.ReflectionDelegateFactory.CreateGet[T](MemberInfo memberInfo)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-17 17:37:02.215 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 17:37:02.218 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:37:02.221 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-17 17:37:02.222 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 2946.7915ms
2024-09-17 17:37:38.268 +07:00 [DBG] Connection id "0HN6N0IIEB350" received FIN.
2024-09-17 17:37:38.275 +07:00 [DBG] Connection id "0HN6N0IIEB350" is closed. The last processed stream ID was 1.
2024-09-17 17:37:38.276 +07:00 [DBG] Connection id "0HN6N0IIEB350" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 17:37:38.276 +07:00 [DBG] The connection queue processing loop for 0HN6N0IIEB350 completed.
2024-09-17 17:37:38.277 +07:00 [DBG] Connection id "0HN6N0IIEB350" stopped.
2024-09-17 17:50:55.155 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-17 17:50:55.242 +07:00 [DBG] Hosting starting
2024-09-17 17:50:55.264 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-17 17:50:55.269 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-17 17:50:55.276 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-17 17:50:55.281 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-17 17:50:55.285 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-17 17:50:55.289 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-17 17:50:55.292 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 17:50:55.293 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-17 17:50:55.295 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-17 17:50:55.298 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-17 17:50:55.299 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-17 17:50:55.301 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-17 17:50:55.301 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-17 17:50:55.434 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-17 17:50:55.435 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-17 17:50:55.435 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-17 17:50:55.435 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-17 17:50:55.436 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-17 17:50:55.436 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-17 17:50:55.483 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-17 17:50:55.484 +07:00 [INF] Hosting environment: Development
2024-09-17 17:50:55.485 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-17 17:50:55.485 +07:00 [DBG] Hosting started
2024-09-17 17:50:56.263 +07:00 [DBG] Connection id "0HN6N0QDS11PP" accepted.
2024-09-17 17:50:56.264 +07:00 [DBG] Connection id "0HN6N0QDS11PP" started.
2024-09-17 17:50:56.301 +07:00 [DBG] Connection 0HN6N0QDS11PP established using the following protocol: "Tls13"
2024-09-17 17:50:56.333 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 17:50:56.399 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-17 17:50:56.450 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 17:50:56.451 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 17:50:56.465 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 17:50:56.467 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 17:50:56.470 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 138.9919ms
2024-09-17 17:50:56.476 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 17:50:56.476 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 17:50:56.482 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 6.5375ms
2024-09-17 17:50:56.517 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.3957ms
2024-09-17 17:50:56.740 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 17:50:56.878 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 137.5088ms
2024-09-17 17:51:02.834 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-17 17:51:02.838 +07:00 [DBG] POST requests are not supported
2024-09-17 17:51:02.863 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 17:51:02.865 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 17:51:02.870 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 17:51:02.906 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 17:51:02.907 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 17:51:02.921 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 17:51:02.923 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 17:51:02.925 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 17:51:02.926 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 17:51:02.927 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 17:51:02.928 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 17:51:02.929 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 17:51:03.020 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-17 17:51:03.033 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 17:51:03.036 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 17:51:03.038 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 17:51:03.039 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 17:51:03.040 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 17:51:03.044 +07:00 [DBG] Connection id "0HN6N0QDS11PP", Request id "0HN6N0QDS11PP:00000009": started reading request body.
2024-09-17 17:51:03.045 +07:00 [DBG] Connection id "0HN6N0QDS11PP", Request id "0HN6N0QDS11PP:00000009": done reading request body.
2024-09-17 17:51:03.107 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 17:51:03.108 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 17:51:03.109 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 17:51:03.114 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 17:51:03.505 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 17:51:03.550 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-17 17:51:03.677 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-17 17:51:03.699 +07:00 [DBG] Creating DbConnection.
2024-09-17 17:51:03.720 +07:00 [DBG] Created DbConnection. (19ms).
2024-09-17 17:51:03.722 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:51:03.930 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:51:03.933 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 17:51:03.939 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-17 17:51:03.945 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-09-17 17:51:03.952 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 17:51:03.985 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-17 17:51:04.014 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 17:51:04.034 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:51:04.041 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 51ms reading results.
2024-09-17 17:51:04.044 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:51:04.048 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2024-09-17 17:51:05.550 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 17:51:05.553 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 17:51:05.553 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 17:51:05.553 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 17:51:05.554 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 17:51:05.555 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<Add>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-17 17:51:05.659 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 2728.4196ms
2024-09-17 17:51:05.660 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 17:51:05.661 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Context' on 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<Add>d__10]'.
 ---> System.InvalidOperationException: Could not create getter for System.Threading.ExecutionContext& Context. ByRef return values are not supported.
   at Newtonsoft.Json.Utilities.ReflectionDelegateFactory.CreateGet[T](MemberInfo memberInfo)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-17 17:51:05.694 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 17:51:05.698 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:51:05.700 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-17 17:51:05.701 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 2867.8007ms
2024-09-17 17:52:04.663 +07:00 [DBG] Connection id "0HN6N0QDS11PP" received FIN.
2024-09-17 17:52:04.675 +07:00 [DBG] Connection id "0HN6N0QDS11PP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 17:52:04.676 +07:00 [DBG] Connection id "0HN6N0QDS11PP" is closed. The last processed stream ID was 9.
2024-09-17 17:52:04.678 +07:00 [DBG] The connection queue processing loop for 0HN6N0QDS11PP completed.
2024-09-17 17:52:04.681 +07:00 [DBG] Connection id "0HN6N0QDS11PP" stopped.
2024-09-17 17:54:22.602 +07:00 [DBG] Connection id "0HN6N0QDS11PQ" accepted.
2024-09-17 17:54:22.603 +07:00 [DBG] Connection id "0HN6N0QDS11PQ" started.
2024-09-17 17:54:22.607 +07:00 [DBG] Connection 0HN6N0QDS11PQ established using the following protocol: "Tls13"
2024-09-17 17:54:22.612 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-17 17:54:22.621 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-17 17:54:22.622 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-17 17:54:22.625 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-17 17:54:22.626 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-17 17:54:22.626 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 14.5118ms
2024-09-17 17:54:22.638 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-17 17:54:22.638 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-17 17:54:22.640 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 2.3637ms
2024-09-17 17:54:22.656 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.1341ms
2024-09-17 17:54:22.881 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-17 17:54:22.900 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 19.1744ms
2024-09-17 17:54:39.799 +07:00 [DBG] Connection id "0HN6N0QDS11PQ" received FIN.
2024-09-17 17:54:39.815 +07:00 [DBG] Connection id "0HN6N0QDS11PQ" is closed. The last processed stream ID was 7.
2024-09-17 17:54:39.815 +07:00 [DBG] The connection queue processing loop for 0HN6N0QDS11PQ completed.
2024-09-17 17:54:39.816 +07:00 [DBG] Connection id "0HN6N0QDS11PQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 17:54:39.822 +07:00 [DBG] Connection id "0HN6N0QDS11PQ" stopped.
2024-09-17 17:55:12.901 +07:00 [DBG] Connection id "0HN6N0QDS11PR" accepted.
2024-09-17 17:55:12.907 +07:00 [DBG] Connection id "0HN6N0QDS11PR" started.
2024-09-17 17:55:12.911 +07:00 [DBG] Connection 0HN6N0QDS11PR established using the following protocol: "Tls13"
2024-09-17 17:55:12.913 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 137
2024-09-17 17:55:12.918 +07:00 [DBG] POST requests are not supported
2024-09-17 17:55:12.920 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-17 17:55:12.920 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-17 17:55:12.921 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 17:55:12.922 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-17 17:55:12.923 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 17:55:12.923 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-17 17:55:12.924 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-17 17:55:12.925 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-17 17:55:12.926 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 17:55:12.926 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-17 17:55:12.927 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-17 17:55:12.928 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 17:55:12.929 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-17 17:55:12.930 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 17:55:12.930 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-17 17:55:12.931 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 17:55:12.932 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-17 17:55:12.933 +07:00 [DBG] Connection id "0HN6N0QDS11PR", Request id "0HN6N0QDS11PR:00000001": started reading request body.
2024-09-17 17:55:12.934 +07:00 [DBG] Connection id "0HN6N0QDS11PR", Request id "0HN6N0QDS11PR:00000001": done reading request body.
2024-09-17 17:55:12.934 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 17:55:12.935 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 17:55:12.935 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-17 17:55:12.936 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-17 17:55:12.944 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-17 17:55:12.958 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 17:55:12.975 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-17 17:55:12.978 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-17 17:55:12.981 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-17 17:55:12.988 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-17 17:55:13.029 +07:00 [DBG] Creating DbConnection.
2024-09-17 17:55:13.030 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-17 17:55:13.031 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:55:13.033 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:55:13.037 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-17 17:55:13.038 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-17 17:55:13.039 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-17 17:55:13.040 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 17:55:13.054 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-17 17:55:13.056 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-17 17:55:13.056 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-17 17:55:13.056 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-17 17:55:13.057 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-17 17:55:13.057 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<Add>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-17 17:55:13.076 +07:00 [ERR] Failed executing DbCommand (35ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-17 17:55:13.083 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 154.7927ms
2024-09-17 17:55:13.084 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-17 17:55:13.086 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Context' on 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<Add>d__10]'.
 ---> System.InvalidOperationException: Could not create getter for System.Threading.ExecutionContext& Context. ByRef return values are not supported.
   at Newtonsoft.Json.Utilities.ReflectionDelegateFactory.CreateGet[T](MemberInfo memberInfo)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-17 17:55:13.087 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:55:13.093 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (5ms).
2024-09-17 17:55:13.094 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-17 17:55:13.099 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-17 17:55:13.107 +07:00 [DBG] Disposed connection to database '' on server '' (7ms).
2024-09-17 17:55:13.108 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 195.2379ms
2024-09-17 17:56:19.871 +07:00 [DBG] Connection id "0HN6N0QDS11PR" received FIN.
2024-09-17 17:56:19.876 +07:00 [DBG] Connection id "0HN6N0QDS11PR" is closed. The last processed stream ID was 1.
2024-09-17 17:56:19.878 +07:00 [DBG] The connection queue processing loop for 0HN6N0QDS11PR completed.
2024-09-17 17:56:19.904 +07:00 [DBG] Connection id "0HN6N0QDS11PR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-17 17:56:19.916 +07:00 [DBG] Connection id "0HN6N0QDS11PR" stopped.
