2024-09-18 09:38:27.737 +07:00 [DBG] Connection id "0HN6N0QDS11PS" accepted.
2024-09-18 09:38:27.774 +07:00 [DBG] Connection id "0HN6N0QDS11PS" started.
2024-09-18 09:38:27.785 +07:00 [DBG] Connection 0HN6N0QDS11PS established using the following protocol: "Tls13"
2024-09-18 09:38:27.787 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 137
2024-09-18 09:38:27.788 +07:00 [DBG] POST requests are not supported
2024-09-18 09:38:27.789 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 09:38:27.789 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 09:38:27.790 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:38:27.792 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 09:38:27.793 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:38:27.794 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 09:38:27.795 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 09:38:27.796 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 09:38:27.797 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 09:38:27.798 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 09:38:27.798 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 09:38:27.799 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 09:38:27.804 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 09:38:27.805 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 09:38:27.806 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 09:38:27.807 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 09:38:27.807 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 09:38:27.808 +07:00 [DBG] Connection id "0HN6N0QDS11PS", Request id "0HN6N0QDS11PS:00000001": started reading request body.
2024-09-18 09:38:27.809 +07:00 [DBG] Connection id "0HN6N0QDS11PS", Request id "0HN6N0QDS11PS:00000001": done reading request body.
2024-09-18 09:38:27.809 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:38:27.810 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:38:27.810 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 09:38:27.811 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:38:27.851 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 09:38:27.853 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 09:38:27.854 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 09:38:27.854 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 09:38:27.856 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 09:38:27.856 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 09:38:27.857 +07:00 [DBG] Creating DbConnection.
2024-09-18 09:38:27.858 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 09:38:27.858 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:38:27.868 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 09:38:27.870 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 09:38:27.871 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 09:38:27.871 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 09:38:27.871 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 09:38:27.872 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<Add>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-18 09:38:27.888 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:38:27.889 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 89.1461ms
2024-09-18 09:38:27.889 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 09:38:27.890 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:38:27.890 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 09:38:27.891 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Context' on 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<Add>d__10]'.
 ---> System.InvalidOperationException: Could not create getter for System.Threading.ExecutionContext& Context. ByRef return values are not supported.
   at Newtonsoft.Json.Utilities.ReflectionDelegateFactory.CreateGet[T](MemberInfo memberInfo)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-18 09:38:27.891 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-18 09:38:27.895 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 09:38:27.900 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 09:38:27.907 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:38:27.907 +07:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 09:38:27.908 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-18 09:38:27.910 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 123.3199ms
2024-09-18 09:38:28.793 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 137
2024-09-18 09:38:28.794 +07:00 [DBG] POST requests are not supported
2024-09-18 09:38:28.795 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 09:38:28.795 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 09:38:28.796 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:38:28.797 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 09:38:28.799 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:38:28.802 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 09:38:28.803 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 09:38:28.804 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 09:38:28.805 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 09:38:28.808 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 09:38:28.809 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 09:38:28.810 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 09:38:28.811 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 09:38:28.812 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 09:38:28.813 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 09:38:28.813 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 09:38:28.814 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 09:38:28.815 +07:00 [DBG] Connection id "0HN6N0QDS11PS", Request id "0HN6N0QDS11PS:00000003": started reading request body.
2024-09-18 09:38:28.816 +07:00 [DBG] Connection id "0HN6N0QDS11PS", Request id "0HN6N0QDS11PS:00000003": done reading request body.
2024-09-18 09:38:28.817 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:38:28.817 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:38:28.818 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 09:38:28.818 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:38:28.820 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 09:38:28.821 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 09:38:28.822 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 09:38:28.823 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 09:38:28.823 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 09:38:28.824 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 09:38:28.826 +07:00 [DBG] Creating DbConnection.
2024-09-18 09:38:28.827 +07:00 [DBG] Created DbConnection. (1ms).
2024-09-18 09:38:28.828 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:38:28.829 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:38:28.829 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 09:38:28.830 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 09:38:28.830 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-18 09:38:28.831 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 09:38:28.833 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 09:38:28.834 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 09:38:28.835 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 09:38:28.836 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 09:38:28.836 +07:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 09:38:28.836 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 09:38:28.838 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:38:28.838 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<Add>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-18 09:38:28.839 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 09:38:28.846 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.DoctorManagementContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Appoitment". The conflict occurred in database "DoctorDatabase", table "dbo.Patient", column 'PatientId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0a5c2dc3-6ac1-402b-984a-9ac1fa01c2be
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Appoitment". The conflict occurred in database "DoctorDatabase", table "dbo.Patient", column 'PatientId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0a5c2dc3-6ac1-402b-984a-9ac1fa01c2be
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-09-18 09:38:28.846 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 36.2495ms
2024-09-18 09:38:28.878 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:38:28.903 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Context' on 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<Add>d__10]'.
 ---> System.InvalidOperationException: Could not create getter for System.Threading.ExecutionContext& Context. ByRef return values are not supported.
   at Newtonsoft.Json.Utilities.ReflectionDelegateFactory.CreateGet[T](MemberInfo memberInfo)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-18 09:38:28.908 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 09:38:28.908 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:38:28.909 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 09:38:28.910 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 117.1901ms
2024-09-18 09:38:33.526 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 137
2024-09-18 09:38:33.527 +07:00 [DBG] POST requests are not supported
2024-09-18 09:38:33.528 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 09:38:33.528 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 09:38:33.531 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:38:33.532 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 09:38:33.532 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:38:33.533 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 09:38:33.534 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 09:38:33.535 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 09:38:33.536 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 09:38:33.537 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 09:38:33.538 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 09:38:33.539 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 09:38:33.540 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 09:38:33.540 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 09:38:33.541 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 09:38:33.542 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 09:38:33.542 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 09:38:33.543 +07:00 [DBG] Connection id "0HN6N0QDS11PS", Request id "0HN6N0QDS11PS:00000005": started reading request body.
2024-09-18 09:38:33.544 +07:00 [DBG] Connection id "0HN6N0QDS11PS", Request id "0HN6N0QDS11PS:00000005": done reading request body.
2024-09-18 09:38:33.545 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:38:33.545 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:38:33.546 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 09:38:33.547 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:38:33.548 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 09:38:33.549 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 09:38:33.549 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 09:38:33.550 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 09:38:33.551 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 09:38:33.552 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 09:38:33.552 +07:00 [DBG] Creating DbConnection.
2024-09-18 09:38:33.553 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 09:38:33.553 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:38:33.554 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:38:33.555 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 09:38:33.555 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 09:38:33.555 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-18 09:38:33.556 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 09:38:33.558 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 09:38:33.559 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 09:38:33.559 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 09:38:33.560 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 09:38:33.560 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 09:38:33.561 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 09:38:33.561 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<Add>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-18 09:38:33.562 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:38:33.563 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 09:38:33.565 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.DoctorManagementContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Appoitment". The conflict occurred in database "DoctorDatabase", table "dbo.Patient", column 'PatientId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0a5c2dc3-6ac1-402b-984a-9ac1fa01c2be
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Appoitment". The conflict occurred in database "DoctorDatabase", table "dbo.Patient", column 'PatientId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0a5c2dc3-6ac1-402b-984a-9ac1fa01c2be
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-09-18 09:38:33.569 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 29.9202ms
2024-09-18 09:38:33.590 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:38:33.609 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Context' on 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<Add>d__10]'.
 ---> System.InvalidOperationException: Could not create getter for System.Threading.ExecutionContext& Context. ByRef return values are not supported.
   at Newtonsoft.Json.Utilities.ReflectionDelegateFactory.CreateGet[T](MemberInfo memberInfo)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-18 09:38:33.613 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 09:38:33.614 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:38:33.614 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 09:38:33.615 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 89.7822ms
2024-09-18 09:38:35.542 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 09:38:35.548 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 09:38:35.548 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 09:38:35.550 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 09:38:35.550 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 09:38:35.551 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 9.5108ms
2024-09-18 09:38:35.565 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 09:38:35.565 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 09:38:35.567 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 2.3844ms
2024-09-18 09:38:35.580 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.6392ms
2024-09-18 09:38:35.821 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 09:38:35.845 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.5106ms
2024-09-18 09:38:35.918 +07:00 [DBG] Connection id "0HN6N0QDS11PS" received FIN.
2024-09-18 09:38:35.920 +07:00 [DBG] Connection id "0HN6N0QDS11PS" is closed. The last processed stream ID was 13.
2024-09-18 09:38:35.921 +07:00 [DBG] The connection queue processing loop for 0HN6N0QDS11PS completed.
2024-09-18 09:38:35.922 +07:00 [DBG] Connection id "0HN6N0QDS11PS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-18 09:38:35.926 +07:00 [DBG] Connection id "0HN6N0QDS11PS" stopped.
2024-09-18 09:39:12.514 +07:00 [DBG] Connection id "0HN6N0QDS11PT" accepted.
2024-09-18 09:39:12.515 +07:00 [DBG] Connection id "0HN6N0QDS11PT" started.
2024-09-18 09:39:12.525 +07:00 [DBG] Connection 0HN6N0QDS11PT established using the following protocol: "Tls13"
2024-09-18 09:39:12.536 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-18 09:39:12.541 +07:00 [DBG] POST requests are not supported
2024-09-18 09:39:12.542 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 09:39:12.542 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 09:39:12.543 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:39:12.544 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 09:39:12.544 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:39:12.544 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 09:39:12.545 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 09:39:12.546 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 09:39:12.546 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 09:39:12.547 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 09:39:12.548 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 09:39:12.548 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 09:39:12.549 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 09:39:12.550 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 09:39:12.551 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 09:39:12.551 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 09:39:12.552 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 09:39:12.552 +07:00 [DBG] Connection id "0HN6N0QDS11PT", Request id "0HN6N0QDS11PT:00000001": started reading request body.
2024-09-18 09:39:12.553 +07:00 [DBG] Connection id "0HN6N0QDS11PT", Request id "0HN6N0QDS11PT:00000001": done reading request body.
2024-09-18 09:39:12.553 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:39:12.554 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:39:12.554 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 09:39:12.555 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:39:12.556 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 09:39:12.560 +07:00 [DBG] Creating DbConnection.
2024-09-18 09:39:12.560 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 09:39:12.561 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:39:12.561 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:39:12.562 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 09:39:12.562 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 09:39:12.563 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-18 09:39:12.563 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 09:39:12.567 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 09:39:12.568 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 09:39:12.568 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:39:12.569 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-18 09:39:12.569 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:39:12.570 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 09:39:14.169 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 09:39:14.170 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 09:39:14.170 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 09:39:14.171 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 09:39:14.171 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 09:39:14.172 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<Add>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-18 09:39:14.181 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 1633.0692ms
2024-09-18 09:39:14.182 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:39:14.183 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Context' on 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<Add>d__10]'.
 ---> System.InvalidOperationException: Could not create getter for System.Threading.ExecutionContext& Context. ByRef return values are not supported.
   at Newtonsoft.Json.Utilities.ReflectionDelegateFactory.CreateGet[T](MemberInfo memberInfo)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-18 09:39:14.188 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 09:39:14.189 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:39:14.190 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 09:39:14.191 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 1654.5388ms
2024-09-18 09:43:46.172 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 09:43:46.244 +07:00 [DBG] Hosting starting
2024-09-18 09:43:46.272 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 09:43:46.279 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 09:43:46.283 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 09:43:46.286 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 09:43:46.289 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 09:43:46.294 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 09:43:46.297 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 09:43:46.300 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 09:43:46.302 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 09:43:46.306 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 09:43:46.307 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 09:43:46.309 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 09:43:46.310 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 09:43:46.445 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 09:43:46.446 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 09:43:46.447 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 09:43:46.447 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 09:43:46.448 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 09:43:46.448 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 09:43:46.500 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 09:43:46.501 +07:00 [INF] Hosting environment: Development
2024-09-18 09:43:46.502 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 09:43:46.502 +07:00 [DBG] Hosting started
2024-09-18 09:43:50.757 +07:00 [DBG] Connection id "0HN6NHET6G1FS" accepted.
2024-09-18 09:43:50.759 +07:00 [DBG] Connection id "0HN6NHET6G1FS" started.
2024-09-18 09:43:50.792 +07:00 [DBG] Connection 0HN6NHET6G1FS established using the following protocol: "Tls13"
2024-09-18 09:43:50.822 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 09:43:50.888 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 09:43:50.932 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 09:43:50.933 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 09:43:50.946 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 09:43:50.947 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 09:43:50.949 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 130.3575ms
2024-09-18 09:43:50.955 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 09:43:50.958 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 09:43:50.971 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 13.209ms
2024-09-18 09:43:50.990 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.9965ms
2024-09-18 09:43:51.203 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 09:43:51.312 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 108.7648ms
2024-09-18 09:44:08.570 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-18 09:44:08.575 +07:00 [DBG] POST requests are not supported
2024-09-18 09:44:08.593 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 09:44:08.596 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 09:44:08.602 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:44:08.639 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 09:44:08.642 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:44:08.656 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 09:44:08.657 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 09:44:08.658 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 09:44:08.659 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 09:44:08.661 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 09:44:08.661 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 09:44:08.664 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 09:44:08.736 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 09:44:08.750 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 09:44:08.754 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 09:44:08.755 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 09:44:08.757 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 09:44:08.758 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 09:44:08.763 +07:00 [DBG] Connection id "0HN6NHET6G1FS", Request id "0HN6NHET6G1FS:00000009": started reading request body.
2024-09-18 09:44:08.764 +07:00 [DBG] Connection id "0HN6NHET6G1FS", Request id "0HN6NHET6G1FS:00000009": done reading request body.
2024-09-18 09:44:08.818 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:44:08.819 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:44:08.821 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 09:44:08.826 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 09:44:09.226 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 09:44:09.259 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-18 09:44:09.393 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-18 09:44:09.414 +07:00 [DBG] Creating DbConnection.
2024-09-18 09:44:09.428 +07:00 [DBG] Created DbConnection. (12ms).
2024-09-18 09:44:09.431 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:44:09.635 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:44:09.638 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 09:44:09.643 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-18 09:44:09.650 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-09-18 09:44:09.658 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 09:44:09.697 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 09:44:09.727 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 09:44:09.749 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:44:09.756 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 53ms reading results.
2024-09-18 09:44:09.758 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:44:09.763 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2024-09-18 09:44:11.239 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 09:44:11.242 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 09:44:11.242 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 09:44:11.243 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 09:44:11.244 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 09:44:11.245 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[CityInfo.API.Services.AppointmentRespository+<Add>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-18 09:44:11.338 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 2673.8427ms
2024-09-18 09:44:11.339 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:44:11.342 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Context' on 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[System.String,CityInfo.API.Services.AppointmentRespository+<Add>d__10]'.
 ---> System.InvalidOperationException: Could not create getter for System.Threading.ExecutionContext& Context. ByRef return values are not supported.
   at Newtonsoft.Json.Utilities.ReflectionDelegateFactory.CreateGet[T](MemberInfo memberInfo)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-18 09:44:11.382 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 09:44:11.385 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 09:44:11.388 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-18 09:44:11.389 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 2818.4983ms
2024-09-18 09:47:56.541 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 09:47:56.614 +07:00 [DBG] Hosting starting
2024-09-18 09:47:56.631 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 09:47:56.636 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 09:47:56.640 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 09:47:56.643 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 09:47:56.645 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 09:47:56.648 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 09:47:56.651 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 09:47:56.652 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 09:47:56.653 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 09:47:56.657 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 09:47:56.659 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 09:47:56.660 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 09:47:56.661 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 09:47:56.766 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 09:47:56.767 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 09:47:56.767 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 09:47:56.768 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 09:47:56.768 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 09:47:56.769 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 09:47:56.804 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 09:47:56.805 +07:00 [INF] Hosting environment: Development
2024-09-18 09:47:56.805 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 09:47:56.806 +07:00 [DBG] Hosting started
2024-09-18 09:48:07.623 +07:00 [DBG] Connection id "0HN6NHH9O55O1" accepted.
2024-09-18 09:48:07.624 +07:00 [DBG] Connection id "0HN6NHH9O55O1" started.
2024-09-18 09:48:07.657 +07:00 [DBG] Connection 0HN6NHH9O55O1 established using the following protocol: "Tls13"
2024-09-18 09:48:07.686 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 09:48:07.743 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 09:48:07.787 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 09:48:07.788 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 09:48:07.801 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 09:48:07.802 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 09:48:07.805 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 122.0553ms
2024-09-18 09:48:07.809 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 09:48:07.812 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 09:48:07.829 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 16.9131ms
2024-09-18 09:48:07.848 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.6552ms
2024-09-18 09:48:08.081 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 09:48:08.183 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 102.0941ms
2024-09-18 09:48:23.500 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-18 09:48:23.506 +07:00 [DBG] POST requests are not supported
2024-09-18 09:48:23.526 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 09:48:23.528 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 09:48:23.533 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:48:23.564 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 09:48:23.566 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:48:23.572 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 09:48:23.574 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Multiple constructors accepting all given argument types have been found in type 'CityInfo.API.Controllers.AppointmentController'. There should only be one applicable constructor.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.TryFindMatchingConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& parameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.CreateActivator(ControllerActionDescriptor descriptor)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.CreateControllerFactory(ControllerActionDescriptor descriptor)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerRequestDelegateFactory.<>c__DisplayClass12_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-18 09:48:23.593 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 92.6198ms
2024-09-18 09:48:23.596 +07:00 [DBG] Connection id "0HN6NHH9O55O1", Request id "0HN6NHH9O55O1:00000009": started reading request body.
2024-09-18 09:48:23.597 +07:00 [DBG] Connection id "0HN6NHH9O55O1", Request id "0HN6NHH9O55O1:00000009": done reading request body.
2024-09-18 10:09:52.231 +07:00 [DBG] Connection id "0HN6NHH9O55O1" received FIN.
2024-09-18 10:09:52.242 +07:00 [DBG] Connection id "0HN6NHH9O55O1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-18 10:09:52.245 +07:00 [DBG] Connection id "0HN6NHH9O55O1" is closed. The last processed stream ID was 9.
2024-09-18 10:09:52.248 +07:00 [DBG] The connection queue processing loop for 0HN6NHH9O55O1 completed.
2024-09-18 10:09:52.253 +07:00 [DBG] Connection id "0HN6NHH9O55O1" stopped.
2024-09-18 13:12:42.576 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 13:12:42.656 +07:00 [DBG] Hosting starting
2024-09-18 13:12:42.678 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 13:12:42.684 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 13:12:42.690 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 13:12:42.694 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 13:12:42.698 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 13:12:42.703 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 13:12:42.705 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 13:12:42.706 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 13:12:42.707 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 13:12:42.711 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 13:12:42.712 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 13:12:42.714 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 13:12:42.715 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 13:12:42.847 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 13:12:42.847 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 13:12:42.848 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 13:12:42.848 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 13:12:42.848 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 13:12:42.849 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 13:12:42.892 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 13:12:42.893 +07:00 [INF] Hosting environment: Development
2024-09-18 13:12:42.894 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 13:12:42.894 +07:00 [DBG] Hosting started
2024-09-18 13:12:47.537 +07:00 [DBG] Connection id "0HN6NL3LEHADU" accepted.
2024-09-18 13:12:47.539 +07:00 [DBG] Connection id "0HN6NL3LEHADU" started.
2024-09-18 13:12:47.591 +07:00 [DBG] Connection 0HN6NL3LEHADU established using the following protocol: "Tls13"
2024-09-18 13:12:47.625 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 13:12:47.691 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 13:12:47.743 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 13:12:47.745 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 13:12:47.757 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 13:12:47.758 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 13:12:47.760 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 138.3004ms
2024-09-18 13:12:47.767 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 13:12:47.767 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 13:12:47.783 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 15.5685ms
2024-09-18 13:12:47.801 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.8958ms
2024-09-18 13:12:48.043 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 13:12:48.160 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 117.6682ms
2024-09-18 13:12:57.884 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 137
2024-09-18 13:12:57.889 +07:00 [DBG] POST requests are not supported
2024-09-18 13:12:57.908 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 13:12:57.911 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 13:12:57.917 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:12:57.957 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 13:12:57.959 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:12:57.977 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 13:12:57.978 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 13:12:57.979 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 13:12:57.980 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:12:57.981 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 13:12:57.982 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:12:57.984 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:12:58.076 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 13:12:58.090 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:12:58.094 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 13:12:58.096 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 13:12:58.097 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:12:58.099 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:12:58.105 +07:00 [DBG] Connection id "0HN6NL3LEHADU", Request id "0HN6NL3LEHADU:00000009": started reading request body.
2024-09-18 13:12:58.105 +07:00 [DBG] Connection id "0HN6NL3LEHADU", Request id "0HN6NL3LEHADU:00000009": done reading request body.
2024-09-18 13:12:58.157 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:12:58.159 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:12:58.160 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 13:12:58.165 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:12:58.615 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 13:12:58.638 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:12:58.671 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:12:58.676 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 13:12:58.679 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 13:12:58.686 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 13:12:58.737 +07:00 [DBG] Creating DbConnection.
2024-09-18 13:12:58.767 +07:00 [DBG] Created DbConnection. (30ms).
2024-09-18 13:12:58.769 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:12:58.874 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 13:12:58.877 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 13:12:58.878 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 13:12:58.878 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 13:12:58.886 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 13:12:58.887 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[System.Threading.Tasks.VoidTaskResult, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[CityInfo.API.Services.AppointmentRespository+<AddAsync>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-18 13:12:58.994 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:12:59.002 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 13:12:59.003 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 1017.6881ms
2024-09-18 13:12:59.005 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:12:59.006 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Context' on 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[System.Threading.Tasks.VoidTaskResult,CityInfo.API.Services.AppointmentRespository+<AddAsync>d__10]'.
 ---> System.InvalidOperationException: Could not create getter for System.Threading.ExecutionContext& Context. ByRef return values are not supported.
   at Newtonsoft.Json.Utilities.ReflectionDelegateFactory.CreateGet[T](MemberInfo memberInfo)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-18 13:12:59.009 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-09-18 13:12:59.043 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 13:12:59.043 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (41ms).
2024-09-18 13:12:59.050 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:12:59.051 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 13:12:59.054 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-18 13:12:59.057 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 1173.6678ms
2024-09-18 13:12:59.068 +07:00 [ERR] Failed executing DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 13:13:38.234 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 13:13:38.307 +07:00 [DBG] Hosting starting
2024-09-18 13:13:38.323 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 13:13:38.328 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 13:13:38.332 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 13:13:38.335 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 13:13:38.337 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 13:13:38.341 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 13:13:38.343 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 13:13:38.344 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 13:13:38.346 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 13:13:38.349 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 13:13:38.351 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 13:13:38.352 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 13:13:38.353 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 13:13:38.456 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 13:13:38.457 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 13:13:38.457 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 13:13:38.458 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 13:13:38.458 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 13:13:38.459 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 13:13:38.507 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 13:13:38.509 +07:00 [INF] Hosting environment: Development
2024-09-18 13:13:38.509 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 13:13:38.510 +07:00 [DBG] Hosting started
2024-09-18 13:13:46.778 +07:00 [DBG] Connection id "0HN6NL473GLT2" accepted.
2024-09-18 13:13:46.780 +07:00 [DBG] Connection id "0HN6NL473GLT2" started.
2024-09-18 13:13:46.814 +07:00 [DBG] Connection 0HN6NL473GLT2 established using the following protocol: "Tls13"
2024-09-18 13:13:46.845 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 13:13:46.906 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 13:13:46.952 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 13:13:46.954 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 13:13:46.965 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 13:13:46.966 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 13:13:46.969 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 125.8572ms
2024-09-18 13:13:46.974 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 13:13:46.975 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 13:13:46.987 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 12.6494ms
2024-09-18 13:13:47.006 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.942ms
2024-09-18 13:13:47.103 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 13:13:47.213 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 110.5597ms
2024-09-18 13:14:01.454 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 137
2024-09-18 13:14:01.459 +07:00 [DBG] POST requests are not supported
2024-09-18 13:14:01.477 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 13:14:01.480 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 13:14:01.488 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:14:01.522 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 13:14:01.523 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:14:01.537 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 13:14:01.539 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 13:14:01.540 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 13:14:01.541 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:14:01.542 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 13:14:01.542 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:14:01.544 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:14:01.613 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 13:14:01.626 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:14:01.629 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 13:14:01.631 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 13:14:01.633 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:14:01.634 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:14:01.637 +07:00 [DBG] Connection id "0HN6NL473GLT2", Request id "0HN6NL473GLT2:00000009": started reading request body.
2024-09-18 13:14:01.638 +07:00 [DBG] Connection id "0HN6NL473GLT2", Request id "0HN6NL473GLT2:00000009": done reading request body.
2024-09-18 13:14:01.685 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:14:01.687 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:14:01.688 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 13:14:01.693 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:14:02.084 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 13:14:02.104 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:14:02.137 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:14:02.141 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 13:14:02.144 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 13:14:02.151 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 13:14:02.199 +07:00 [DBG] Creating DbConnection.
2024-09-18 13:14:02.223 +07:00 [DBG] Created DbConnection. (22ms).
2024-09-18 13:14:02.225 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:14:02.315 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 13:14:02.322 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 13:14:02.322 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 13:14:02.323 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 13:14:02.324 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 13:14:02.325 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[System.Threading.Tasks.VoidTaskResult, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[CityInfo.API.Services.AppointmentRespository+<AddAsync>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-18 13:14:02.417 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:14:02.423 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 13:14:02.428 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-09-18 13:14:02.436 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-09-18 13:14:02.440 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 894.0367ms
2024-09-18 13:14:02.441 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:14:02.442 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Context' on 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[System.Threading.Tasks.VoidTaskResult,CityInfo.API.Services.AppointmentRespository+<AddAsync>d__10]'.
 ---> System.InvalidOperationException: Could not create getter for System.Threading.ExecutionContext& Context. ByRef return values are not supported.
   at Newtonsoft.Json.Utilities.ReflectionDelegateFactory.CreateGet[T](MemberInfo memberInfo)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-18 13:14:02.443 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 13:14:02.463 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 13:14:02.471 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:14:02.475 +07:00 [ERR] Failed executing DbCommand (33ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 13:14:02.475 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-18 13:14:02.477 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 1022.77ms
2024-09-18 13:16:28.101 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 13:16:28.172 +07:00 [DBG] Hosting starting
2024-09-18 13:16:28.189 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 13:16:28.195 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 13:16:28.198 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 13:16:28.201 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 13:16:28.204 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 13:16:28.207 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 13:16:28.209 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 13:16:28.210 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 13:16:28.212 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 13:16:28.214 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 13:16:28.216 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 13:16:28.217 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 13:16:28.218 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 13:16:28.322 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 13:16:28.323 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 13:16:28.323 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 13:16:28.324 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 13:16:28.324 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 13:16:28.324 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 13:16:28.357 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 13:16:28.358 +07:00 [INF] Hosting environment: Development
2024-09-18 13:16:28.359 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 13:16:28.359 +07:00 [DBG] Hosting started
2024-09-18 13:16:32.778 +07:00 [DBG] Connection id "0HN6NL5OIJPI3" accepted.
2024-09-18 13:16:32.780 +07:00 [DBG] Connection id "0HN6NL5OIJPI3" started.
2024-09-18 13:16:32.813 +07:00 [DBG] Connection 0HN6NL5OIJPI3 established using the following protocol: "Tls13"
2024-09-18 13:16:32.840 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 13:16:32.894 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 13:16:32.937 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 13:16:32.939 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 13:16:32.951 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 13:16:32.952 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 13:16:32.955 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 117.935ms
2024-09-18 13:16:32.962 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 13:16:32.962 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 13:16:32.975 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 12.9421ms
2024-09-18 13:16:32.996 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.9096ms
2024-09-18 13:16:33.209 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 13:16:33.316 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 107.6124ms
2024-09-18 13:16:42.662 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 137
2024-09-18 13:16:42.665 +07:00 [DBG] POST requests are not supported
2024-09-18 13:16:42.684 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 13:16:42.686 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 13:16:42.695 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:16:42.727 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 13:16:42.729 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:16:42.741 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 13:16:42.744 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 13:16:42.745 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 13:16:42.747 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:16:42.748 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 13:16:42.748 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:16:42.750 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:16:42.816 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 13:16:42.829 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:16:42.831 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 13:16:42.833 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 13:16:42.834 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:16:42.835 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:16:42.839 +07:00 [DBG] Connection id "0HN6NL5OIJPI3", Request id "0HN6NL5OIJPI3:00000009": started reading request body.
2024-09-18 13:16:42.839 +07:00 [DBG] Connection id "0HN6NL5OIJPI3", Request id "0HN6NL5OIJPI3:00000009": done reading request body.
2024-09-18 13:16:42.889 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:16:42.891 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:16:42.891 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 13:16:42.896 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:16:43.310 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 13:16:43.333 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:16:43.371 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:16:43.375 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 13:16:43.378 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 13:16:43.386 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 13:16:43.440 +07:00 [DBG] Creating DbConnection.
2024-09-18 13:16:43.461 +07:00 [DBG] Created DbConnection. (19ms).
2024-09-18 13:16:43.464 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:16:43.609 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 13:16:43.611 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 13:16:43.612 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 13:16:43.613 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 13:16:43.614 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 13:16:43.615 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<AddAsync>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-18 13:16:43.713 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:16:43.722 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 13:16:43.729 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-09-18 13:16:43.739 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2024-09-18 13:16:43.748 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 13:16:43.750 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 998.7784ms
2024-09-18 13:16:43.751 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:16:43.753 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error getting value from 'Context' on 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<AddAsync>d__10]'.
 ---> System.InvalidOperationException: Could not create getter for System.Threading.ExecutionContext& Context. ByRef return values are not supported.
   at Newtonsoft.Json.Utilities.ReflectionDelegateFactory.CreateGet[T](MemberInfo memberInfo)
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-18 13:16:43.781 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 13:16:43.794 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:16:43.799 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-18 13:16:43.801 +07:00 [ERR] Failed executing DbCommand (55ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 13:16:43.801 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 1139.3747ms
2024-09-18 13:17:10.415 +07:00 [DBG] Connection id "0HN6NL5OIJPI3" received FIN.
2024-09-18 13:17:10.423 +07:00 [DBG] Connection id "0HN6NL5OIJPI3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-18 13:17:10.423 +07:00 [DBG] Connection id "0HN6NL5OIJPI3" is closed. The last processed stream ID was 9.
2024-09-18 13:17:10.425 +07:00 [DBG] The connection queue processing loop for 0HN6NL5OIJPI3 completed.
2024-09-18 13:17:10.428 +07:00 [DBG] Connection id "0HN6NL5OIJPI3" stopped.
2024-09-18 13:17:50.389 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 13:17:50.463 +07:00 [DBG] Hosting starting
2024-09-18 13:17:50.480 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 13:17:50.486 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 13:17:50.489 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 13:17:50.491 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 13:17:50.495 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 13:17:50.501 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 13:17:50.504 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 13:17:50.506 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 13:17:50.508 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 13:17:50.511 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 13:17:50.513 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 13:17:50.515 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 13:17:50.516 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 13:17:50.623 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 13:17:50.623 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 13:17:50.624 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 13:17:50.624 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 13:17:50.625 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 13:17:50.625 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 13:17:50.664 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 13:17:50.664 +07:00 [INF] Hosting environment: Development
2024-09-18 13:17:50.665 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 13:17:50.665 +07:00 [DBG] Hosting started
2024-09-18 13:17:59.995 +07:00 [DBG] Connection id "0HN6NL6IIC9KO" accepted.
2024-09-18 13:17:59.997 +07:00 [DBG] Connection id "0HN6NL6IIC9KO" started.
2024-09-18 13:18:00.031 +07:00 [DBG] Connection 0HN6NL6IIC9KO established using the following protocol: "Tls13"
2024-09-18 13:18:00.059 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 13:18:00.114 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 13:18:00.155 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 13:18:00.156 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 13:18:00.170 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 13:18:00.171 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 13:18:00.174 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 116.8737ms
2024-09-18 13:18:00.179 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 13:18:00.179 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 13:18:00.190 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 11.1562ms
2024-09-18 13:18:00.216 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.4479ms
2024-09-18 13:18:00.285 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 13:18:00.399 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 114.0096ms
2024-09-18 13:18:08.720 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 138
2024-09-18 13:18:08.723 +07:00 [DBG] POST requests are not supported
2024-09-18 13:18:08.739 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 13:18:08.741 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 13:18:08.747 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:18:08.779 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 13:18:08.781 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:18:08.794 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 13:18:08.796 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 13:18:08.797 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 13:18:08.799 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:18:08.800 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 13:18:08.801 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:18:08.802 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:18:08.871 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 13:18:08.885 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:18:08.888 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 13:18:08.891 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 13:18:08.892 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:18:08.893 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:18:08.897 +07:00 [DBG] Connection id "0HN6NL6IIC9KO", Request id "0HN6NL6IIC9KO:00000009": started reading request body.
2024-09-18 13:18:08.898 +07:00 [DBG] Connection id "0HN6NL6IIC9KO", Request id "0HN6NL6IIC9KO:00000009": done reading request body.
2024-09-18 13:18:08.956 +07:00 [DBG] JSON input formatter threw an exception.
Newtonsoft.Json.JsonSerializationException: Error converting value "f154bda5-6d7c-4265-a9b7-b2f0465bdb1c6" to type 'System.Guid'. Path 'patientId', line 4, position 54.
 ---> System.ArgumentException: Could not cast or convert from System.String to System.Guid.
   at Newtonsoft.Json.Utilities.ConvertUtils.EnsureTypeAssignable(Object value, Type initialType, Type targetType)
   at Newtonsoft.Json.Utilities.ConvertUtils.ConvertOrCast(Object initialValue, CultureInfo culture, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.SetPropertyValue(JsonProperty property, JsonConverter propertyConverter, JsonContainerContract containerContract, JsonProperty containerProperty, JsonReader reader, Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, JsonProperty member, String id)
2024-09-18 13:18:08.979 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:18:08.980 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:18:08.981 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 13:18:08.988 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:18:08.990 +07:00 [DBG] The request has model state errors, returning an error response.
2024-09-18 13:18:08.992 +07:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-09-18 13:18:08.995 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 13:18:08.997 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 13:18:08.998 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-09-18 13:18:09.000 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-09-18 13:18:09.001 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-09-18 13:18:09.038 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 234.6923ms
2024-09-18 13:18:09.039 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:18:09.041 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 400 399 application/problem+json; charset=utf-8 321.003ms
2024-09-18 13:18:28.130 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 137
2024-09-18 13:18:28.132 +07:00 [DBG] POST requests are not supported
2024-09-18 13:18:28.133 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 13:18:28.135 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 13:18:28.137 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:18:28.138 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 13:18:28.144 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:18:28.144 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 13:18:28.145 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 13:18:28.146 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 13:18:28.147 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:18:28.148 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 13:18:28.148 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:18:28.149 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:18:28.155 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:18:28.156 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 13:18:28.157 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 13:18:28.158 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:18:28.159 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:18:28.160 +07:00 [DBG] Connection id "0HN6NL6IIC9KO", Request id "0HN6NL6IIC9KO:0000000B": started reading request body.
2024-09-18 13:18:28.160 +07:00 [DBG] Connection id "0HN6NL6IIC9KO", Request id "0HN6NL6IIC9KO:0000000B": done reading request body.
2024-09-18 13:18:28.162 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:18:28.162 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:18:28.163 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 13:18:28.165 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:18:28.585 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 13:18:28.609 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:18:28.643 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:18:28.647 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 13:18:28.650 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 13:18:28.658 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 13:18:28.708 +07:00 [DBG] Creating DbConnection.
2024-09-18 13:18:28.729 +07:00 [DBG] Created DbConnection. (20ms).
2024-09-18 13:18:28.733 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:18:28.820 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 13:18:28.821 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 13:18:28.822 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 13:18:28.826 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 13:18:28.827 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 13:18:28.827 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<AddAsync>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-18 13:18:28.841 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 691.3265ms
2024-09-18 13:18:28.842 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:18:28.843 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'task' with type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<AddAsync>d__10]'. Path 'stateMachine.<>t__builder'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-18 13:18:28.855 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 13:18:28.862 +07:00 [ERR] An error occurred using the connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:18:28.862 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:18:28.868 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-18 13:18:28.869 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 739.8167ms
2024-09-18 13:18:40.812 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=5 - null null
2024-09-18 13:18:40.815 +07:00 [DBG] The request path  does not match the path filter
2024-09-18 13:18:40.816 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 13:18:40.816 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 13:18:40.820 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-09-18 13:18:40.822 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 13:18:40.823 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-09-18 13:18:40.827 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 13:18:40.828 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 13:18:40.829 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 13:18:40.830 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:18:40.830 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 13:18:40.831 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:18:40.832 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:18:40.835 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:18:40.836 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-09-18 13:18:40.837 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-09-18 13:18:40.838 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-09-18 13:18:40.839 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-09-18 13:18:40.840 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-09-18 13:18:40.841 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-09-18 13:18:40.841 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-09-18 13:18:40.842 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-09-18 13:18:40.842 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-09-18 13:18:40.843 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-09-18 13:18:40.844 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-09-18 13:18:40.844 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-09-18 13:18:40.845 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-09-18 13:18:40.845 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-09-18 13:18:40.846 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-09-18 13:18:40.847 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-09-18 13:18:40.847 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-09-18 13:18:40.848 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-09-18 13:18:40.848 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-09-18 13:18:40.849 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-09-18 13:18:40.850 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-09-18 13:18:40.850 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-09-18 13:18:40.851 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-09-18 13:18:40.851 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-09-18 13:18:40.852 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-09-18 13:18:40.853 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-09-18 13:18:40.887 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 13:18:40.921 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .OrderBy(pt => pt.AppoitmentTime)
    .Skip(__p_0)
    .Take(__p_1)
    .Select(ap => new AppointmentModel{ 
        AppoitmentTime = ap.AppoitmentTime, 
        AppoitmentStatus = ap.AppoitmentStatus, 
        PatientId = ap.PatientId, 
        Gender = ap.Patient.Gender, 
        Avatar = ap.Patient.Avatar, 
        FullName = ap.Patient.FullName, 
        Date = ap.Patient.Date 
    }
    )'
2024-09-18 13:18:41.077 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppointmentModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            AppoitmentTime -> 0
            AppoitmentStatus -> 1
            PatientId -> 2
            Gender -> 3
            Avatar -> 4
            FullName -> 5
            Date -> 6
        SELECT t.AppoitmentTime, t.AppoitmentStatus, t.PatientId, p.Gender, p.Avatar, p.FullName, p.Date
        FROM 
        (
            SELECT a.AppoitmentStatus, a.AppoitmentTime, a.PatientId
            FROM Appointment AS a
            ORDER BY a.AppoitmentTime ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        INNER JOIN Patient AS p ON t.PatientId == p.PatientId
        ORDER BY t.AppoitmentTime ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppointmentModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-09-18 13:18:41.097 +07:00 [DBG] Creating DbConnection.
2024-09-18 13:18:41.098 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 13:18:41.099 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:18:41.102 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:18:41.105 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 13:18:41.109 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-09-18 13:18:41.115 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-09-18 13:18:41.122 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppoitmentTime], [t].[AppoitmentStatus], [t].[PatientId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date]
FROM (
    SELECT [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppoitmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppoitmentTime]
2024-09-18 13:18:41.157 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppoitmentTime], [t].[AppoitmentStatus], [t].[PatientId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date]
FROM (
    SELECT [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppoitmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppoitmentTime]
2024-09-18 13:18:41.167 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:18:41.170 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 10ms reading results.
2024-09-18 13:18:41.172 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:18:41.174 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-09-18 13:18:41.175 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 13:18:41.176 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 13:18:41.176 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 13:18:41.177 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 13:18:41.177 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 13:18:41.178 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-18 13:18:41.183 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 351.0564ms
2024-09-18 13:18:41.184 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-09-18 13:18:41.185 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 13:18:41.185 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:18:41.186 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 13:18:41.187 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=5 - 200 901 application/json; charset=utf-8 374.6698ms
2024-09-18 13:19:58.345 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Patient - application/json-patch+json 281
2024-09-18 13:19:58.353 +07:00 [DBG] POST requests are not supported
2024-09-18 13:19:58.354 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-09-18 13:19:58.354 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-09-18 13:19:58.355 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-09-18 13:19:58.357 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 13:19:58.358 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-09-18 13:19:58.367 +07:00 [INF] Route matched with {action = "Add", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.PatientModel) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-09-18 13:19:58.369 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 13:19:58.369 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 13:19:58.370 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:19:58.371 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 13:19:58.372 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:19:58.373 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-09-18 13:19:58.374 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-09-18 13:19:58.375 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel' ...
2024-09-18 13:19:58.375 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel' using the name '' in request data ...
2024-09-18 13:19:58.376 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:19:58.376 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:19:58.377 +07:00 [DBG] Connection id "0HN6NL6IIC9KO", Request id "0HN6NL6IIC9KO:0000000F": started reading request body.
2024-09-18 13:19:58.377 +07:00 [DBG] Connection id "0HN6NL6IIC9KO", Request id "0HN6NL6IIC9KO:0000000F": done reading request body.
2024-09-18 13:19:58.381 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-09-18 13:19:58.382 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-09-18 13:19:58.383 +07:00 [DBG] Attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientModel' ...
2024-09-18 13:19:58.385 +07:00 [DBG] Done attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-09-18 13:19:58.394 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 13:19:58.397 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Patient.PatientId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:19:58.412 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:19:58.414 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 13:19:58.416 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 13:19:58.420 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 13:19:58.425 +07:00 [DBG] Creating DbConnection.
2024-09-18 13:19:58.425 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 13:19:58.425 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:19:58.426 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:19:58.428 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 13:19:58.428 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 13:19:58.430 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-18 13:19:58.431 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (DbType = DateTime2), @p3='?' (Size = 500), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (DbType = Guid), @p9='?' (Size = 15), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patient] ([PatientId], [Avatar], [Date], [Diseases], [Email], [FullName], [Gender], [Location], [PaymentId], [PhoneNumber], [Status])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2024-09-18 13:19:58.440 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (DbType = DateTime2), @p3='?' (Size = 500), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (DbType = Guid), @p9='?' (Size = 15), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patient] ([PatientId], [Avatar], [Date], [Diseases], [Email], [FullName], [Gender], [Location], [PaymentId], [PhoneNumber], [Status])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2024-09-18 13:19:58.443 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:19:58.444 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-18 13:19:58.444 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:19:58.445 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 13:19:58.451 +07:00 [DBG] An entity of type 'Patient' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:19:58.452 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 13:19:58.453 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 13:19:58.454 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 13:19:58.454 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 13:19:58.454 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 13:19:58.455 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 13:19:58.455 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PatientModel'.
2024-09-18 13:19:58.457 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.Add (CityInfo.API) in 84.4451ms
2024-09-18 13:19:58.458 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-09-18 13:19:58.459 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 13:19:58.459 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:19:58.460 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 13:19:58.461 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Patient - 200 240 application/json; charset=utf-8 118.1265ms
2024-09-18 13:23:24.990 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 13:23:25.063 +07:00 [DBG] Hosting starting
2024-09-18 13:23:25.080 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 13:23:25.086 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 13:23:25.089 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 13:23:25.092 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 13:23:25.094 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 13:23:25.098 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 13:23:25.100 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 13:23:25.101 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 13:23:25.102 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 13:23:25.106 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 13:23:25.107 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 13:23:25.108 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 13:23:25.109 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 13:23:25.210 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 13:23:25.210 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 13:23:25.211 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 13:23:25.211 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 13:23:25.212 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 13:23:25.212 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 13:23:25.246 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 13:23:25.247 +07:00 [INF] Hosting environment: Development
2024-09-18 13:23:25.248 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 13:23:25.248 +07:00 [DBG] Hosting started
2024-09-18 13:23:35.869 +07:00 [DBG] Connection id "0HN6NL9MLGRH9" accepted.
2024-09-18 13:23:35.870 +07:00 [DBG] Connection id "0HN6NL9MLGRH9" started.
2024-09-18 13:23:35.900 +07:00 [DBG] Connection 0HN6NL9MLGRH9 established using the following protocol: "Tls13"
2024-09-18 13:23:35.926 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 13:23:35.983 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 13:23:36.026 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 13:23:36.028 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 13:23:36.040 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 13:23:36.041 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 13:23:36.044 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 119.3845ms
2024-09-18 13:23:36.048 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 13:23:36.051 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 13:23:36.061 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 9.9808ms
2024-09-18 13:23:36.089 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.1818ms
2024-09-18 13:23:36.320 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 13:23:36.450 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 129.4061ms
2024-09-18 13:23:52.882 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 137
2024-09-18 13:23:52.886 +07:00 [DBG] POST requests are not supported
2024-09-18 13:23:52.903 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 13:23:52.905 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 13:23:52.910 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:23:52.941 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 13:23:52.943 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:23:52.957 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 13:23:52.959 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 13:23:52.959 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 13:23:52.960 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:23:52.961 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 13:23:52.962 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 13:23:52.963 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:23:53.030 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 13:23:53.043 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 13:23:53.046 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 13:23:53.049 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 13:23:53.050 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:23:53.051 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 13:23:53.055 +07:00 [DBG] Connection id "0HN6NL9MLGRH9", Request id "0HN6NL9MLGRH9:00000009": started reading request body.
2024-09-18 13:23:53.056 +07:00 [DBG] Connection id "0HN6NL9MLGRH9", Request id "0HN6NL9MLGRH9:00000009": done reading request body.
2024-09-18 13:23:53.105 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:23:53.106 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:23:53.107 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 13:23:53.112 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:23:53.489 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 13:23:53.511 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:23:53.548 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 13:23:53.553 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 13:23:53.558 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 13:23:53.565 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 13:23:53.609 +07:00 [DBG] Creating DbConnection.
2024-09-18 13:23:53.630 +07:00 [DBG] Created DbConnection. (19ms).
2024-09-18 13:23:53.633 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:23:53.718 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 13:23:53.724 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 13:23:53.724 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 13:23:53.725 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 13:23:53.726 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 13:23:53.727 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 13:23:53.784 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 818.3523ms
2024-09-18 13:23:53.785 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 13:23:53.787 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 13:23:53.793 +07:00 [ERR] An error occurred using the connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:23:53.793 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 13:23:53.800 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-09-18 13:23:53.802 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 124 application/json; charset=utf-8 919.8438ms
2024-09-18 13:24:49.913 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 13:24:49.981 +07:00 [DBG] Hosting starting
2024-09-18 13:24:49.999 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 13:24:50.004 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 13:24:50.007 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 13:24:50.010 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 13:24:50.013 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 13:24:50.018 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 13:24:50.022 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 13:24:50.024 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 13:24:50.027 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 13:24:50.030 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 13:24:50.032 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 13:24:50.033 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 13:24:50.034 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 13:24:50.137 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 13:24:50.138 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 13:24:50.139 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 13:24:50.139 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 13:24:50.139 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 13:24:50.140 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 13:24:50.173 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 13:24:50.174 +07:00 [INF] Hosting environment: Development
2024-09-18 13:24:50.175 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 13:24:50.175 +07:00 [DBG] Hosting started
2024-09-18 14:20:34.355 +07:00 [DBG] Connection id "0HN6NM9HEM7HF" accepted.
2024-09-18 14:20:34.361 +07:00 [DBG] Connection id "0HN6NM9HEM7HF" started.
2024-09-18 14:20:34.434 +07:00 [DBG] Connection 0HN6NM9HEM7HF established using the following protocol: "Tls13"
2024-09-18 14:20:34.500 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 14:20:34.586 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 14:20:34.657 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 14:20:34.658 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 14:20:34.678 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 14:20:34.680 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 14:20:34.684 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 188.2328ms
2024-09-18 14:20:34.688 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 14:20:34.688 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 14:20:34.698 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 10.1745ms
2024-09-18 14:20:34.724 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.6301ms
2024-09-18 14:20:34.970 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 14:20:35.120 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 150.1753ms
2024-09-18 14:20:49.508 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-18 14:20:49.511 +07:00 [DBG] POST requests are not supported
2024-09-18 14:20:49.528 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 14:20:49.531 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 14:20:49.538 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:20:49.581 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:20:49.584 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:20:49.601 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:20:49.603 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:20:49.604 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:20:49.604 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:20:49.605 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:20:49.606 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:20:49.608 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:20:49.715 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 14:20:49.731 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:20:49.735 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:20:49.737 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:20:49.739 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:20:49.740 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:20:49.746 +07:00 [DBG] Connection id "0HN6NM9HEM7HF", Request id "0HN6NM9HEM7HF:00000009": started reading request body.
2024-09-18 14:20:49.746 +07:00 [DBG] Connection id "0HN6NM9HEM7HF", Request id "0HN6NM9HEM7HF:00000009": done reading request body.
2024-09-18 14:20:49.806 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:20:49.808 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:20:49.808 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:20:49.815 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:20:50.278 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:20:50.323 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-18 14:20:50.451 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-18 14:20:50.473 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:20:50.494 +07:00 [DBG] Created DbConnection. (19ms).
2024-09-18 14:20:50.497 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:20:50.695 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:20:50.697 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:20:50.703 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-18 14:20:50.710 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-09-18 14:20:50.718 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 14:20:50.753 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 14:20:50.780 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:20:50.799 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:20:50.805 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 46ms reading results.
2024-09-18 14:20:50.807 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:20:50.811 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (3ms).
2024-09-18 14:20:52.543 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:20:52.559 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:20:52.569 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:20:52.572 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:20:52.574 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:20:52.586 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:20:52.630 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:20:52.633 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:20:52.637 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:20:52.638 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:20:52.639 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-18 14:20:52.640 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:20:52.658 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 14:20:52.659 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:20:52.661 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 14:20:52.661 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 14:20:52.662 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 14:20:52.663 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 14:20:52.663 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:20:52.664 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:20:52.665 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-09-18 14:20:52.668 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:20:52.669 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:20:52.675 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:20:52.676 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 14:20:52.689 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 3079.4488ms
2024-09-18 14:20:52.689 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:20:52.692 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:20:52.695 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:20:52.696 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-18 14:20:52.697 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 3189.6339ms
2024-09-18 14:22:36.535 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 14:22:36.613 +07:00 [DBG] Hosting starting
2024-09-18 14:22:36.636 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 14:22:36.642 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 14:22:36.648 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 14:22:36.653 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 14:22:36.658 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 14:22:36.662 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 14:22:36.665 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:22:36.666 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 14:22:36.668 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:22:36.671 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 14:22:36.672 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 14:22:36.674 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 14:22:36.675 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 14:22:36.803 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 14:22:36.804 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 14:22:36.805 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 14:22:36.806 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 14:22:36.806 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 14:22:36.807 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 14:22:36.866 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 14:22:36.866 +07:00 [INF] Hosting environment: Development
2024-09-18 14:22:36.867 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 14:22:36.867 +07:00 [DBG] Hosting started
2024-09-18 14:22:40.874 +07:00 [DBG] Connection id "0HN6NMAN5AG9R" accepted.
2024-09-18 14:22:40.876 +07:00 [DBG] Connection id "0HN6NMAN5AG9R" started.
2024-09-18 14:22:40.963 +07:00 [DBG] Connection 0HN6NMAN5AG9R established using the following protocol: "Tls13"
2024-09-18 14:22:41.025 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 14:22:41.100 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 14:22:41.149 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 14:22:41.151 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 14:22:41.165 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 14:22:41.166 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 14:22:41.170 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 151.2886ms
2024-09-18 14:22:41.279 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 14:22:41.286 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 6.4518ms
2024-09-18 14:22:41.291 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 14:22:41.319 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.198ms
2024-09-18 14:22:41.558 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 14:22:41.704 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 145.9048ms
2024-09-18 14:22:45.192 +07:00 [DBG] Connection id "0HN6NMAN5AG9R" received FIN.
2024-09-18 14:22:45.195 +07:00 [DBG] The connection queue processing loop for 0HN6NMAN5AG9R completed.
2024-09-18 14:22:45.197 +07:00 [DBG] Connection id "0HN6NMAN5AG9R" is closed. The last processed stream ID was 7.
2024-09-18 14:22:45.199 +07:00 [DBG] Connection id "0HN6NMAN5AG9R" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-18 14:22:45.206 +07:00 [DBG] Connection id "0HN6NMAN5AG9R" stopped.
2024-09-18 14:27:58.939 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 14:27:59.014 +07:00 [DBG] Hosting starting
2024-09-18 14:27:59.031 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 14:27:59.037 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 14:27:59.040 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 14:27:59.043 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 14:27:59.045 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 14:27:59.049 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 14:27:59.051 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:27:59.053 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 14:27:59.054 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:27:59.057 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 14:27:59.058 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 14:27:59.060 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 14:27:59.060 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 14:27:59.164 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 14:27:59.165 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 14:27:59.165 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 14:27:59.166 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 14:27:59.166 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 14:27:59.166 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 14:27:59.200 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 14:27:59.201 +07:00 [INF] Hosting environment: Development
2024-09-18 14:27:59.202 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 14:27:59.202 +07:00 [DBG] Hosting started
2024-09-18 14:28:03.945 +07:00 [DBG] Connection id "0HN6NMDNEC18N" accepted.
2024-09-18 14:28:03.947 +07:00 [DBG] Connection id "0HN6NMDNEC18N" started.
2024-09-18 14:28:03.979 +07:00 [DBG] Connection 0HN6NMDNEC18N established using the following protocol: "Tls13"
2024-09-18 14:28:04.007 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 14:28:04.066 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 14:28:04.108 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 14:28:04.110 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 14:28:04.122 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 14:28:04.123 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 14:28:04.125 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 120.8021ms
2024-09-18 14:28:04.131 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 14:28:04.131 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 14:28:04.142 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 10.8925ms
2024-09-18 14:28:04.166 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.4639ms
2024-09-18 14:28:04.422 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 14:28:04.582 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 160.8713ms
2024-09-18 14:28:23.540 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 137
2024-09-18 14:28:23.543 +07:00 [DBG] POST requests are not supported
2024-09-18 14:28:23.561 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 14:28:23.563 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 14:28:23.568 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:28:23.605 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:28:23.607 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:28:23.620 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:28:23.622 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:28:23.623 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:28:23.623 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:28:23.624 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:28:23.625 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:28:23.626 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:28:23.700 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 14:28:23.712 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:28:23.715 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:28:23.717 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:28:23.719 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:28:23.719 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:28:23.723 +07:00 [DBG] Connection id "0HN6NMDNEC18N", Request id "0HN6NMDNEC18N:00000009": started reading request body.
2024-09-18 14:28:23.724 +07:00 [DBG] Connection id "0HN6NMDNEC18N", Request id "0HN6NMDNEC18N:00000009": done reading request body.
2024-09-18 14:28:23.773 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:28:23.774 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:28:23.775 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:28:23.780 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:28:24.213 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:28:24.235 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:28:24.274 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:28:24.279 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:28:24.282 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:28:24.289 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:28:24.337 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:28:24.359 +07:00 [DBG] Created DbConnection. (20ms).
2024-09-18 14:28:24.362 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:28:24.463 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 14:28:24.468 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 14:28:24.469 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 14:28:24.470 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 14:28:24.471 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 14:28:24.472 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[CityInfo.API.Models.AppointmentModelForAdd, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CityInfo.API.Services.AppointmentRespository+<Add>d__10, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-18 14:28:24.522 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 894.702ms
2024-09-18 14:28:24.524 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:28:24.527 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'task' with type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[CityInfo.API.Models.AppointmentModelForAdd,CityInfo.API.Services.AppointmentRespository+<Add>d__10]'. Path 'stateMachine.<>t__builder'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-18 14:28:24.561 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:28:24.568 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:28:24.568 +07:00 [ERR] An error occurred using the connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:28:24.573 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-18 14:28:24.575 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 500 null text/plain; charset=utf-8 1035.478ms
2024-09-18 14:33:26.906 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 14:33:27.005 +07:00 [DBG] Hosting starting
2024-09-18 14:33:27.028 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 14:33:27.036 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 14:33:27.040 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 14:33:27.044 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 14:33:27.047 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 14:33:27.052 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 14:33:27.054 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:33:27.056 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 14:33:27.058 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:33:27.061 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 14:33:27.063 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 14:33:27.064 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 14:33:27.066 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 14:33:27.211 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 14:33:27.212 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 14:33:27.212 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 14:33:27.213 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 14:33:27.213 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 14:33:27.213 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 14:33:27.252 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 14:33:27.253 +07:00 [INF] Hosting environment: Development
2024-09-18 14:33:27.253 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 14:33:27.254 +07:00 [DBG] Hosting started
2024-09-18 14:33:37.685 +07:00 [DBG] Connection id "0HN6NMGQT58ET" accepted.
2024-09-18 14:33:37.687 +07:00 [DBG] Connection id "0HN6NMGQT58ET" started.
2024-09-18 14:33:37.719 +07:00 [DBG] Connection 0HN6NMGQT58ET established using the following protocol: "Tls13"
2024-09-18 14:33:37.746 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 14:33:37.801 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 14:33:37.844 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 14:33:37.846 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 14:33:37.859 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 14:33:37.860 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 14:33:37.863 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 119.5262ms
2024-09-18 14:33:37.872 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 14:33:37.872 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 14:33:37.888 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 15.8802ms
2024-09-18 14:33:37.907 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.4125ms
2024-09-18 14:33:38.158 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 14:33:38.284 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.4752ms
2024-09-18 14:33:42.162 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=5 - null null
2024-09-18 14:33:42.166 +07:00 [DBG] The request path  does not match the path filter
2024-09-18 14:33:42.183 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 14:33:42.185 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 14:33:42.192 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-09-18 14:33:42.222 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:33:42.224 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-09-18 14:33:42.239 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:33:42.240 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:33:42.241 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:33:42.242 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:33:42.243 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:33:42.243 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:33:42.246 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:33:42.312 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 14:33:42.325 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:33:42.328 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-09-18 14:33:42.331 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-09-18 14:33:42.332 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-09-18 14:33:42.333 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-09-18 14:33:42.333 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-09-18 14:33:42.334 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-09-18 14:33:42.335 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-09-18 14:33:42.337 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-09-18 14:33:42.338 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-09-18 14:33:42.338 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-09-18 14:33:42.339 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-09-18 14:33:42.339 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-09-18 14:33:42.340 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-09-18 14:33:42.341 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-09-18 14:33:42.342 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-09-18 14:33:42.342 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-09-18 14:33:42.343 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-09-18 14:33:42.344 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-09-18 14:33:42.345 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-09-18 14:33:42.346 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-09-18 14:33:42.347 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-09-18 14:33:42.347 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-09-18 14:33:42.348 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-09-18 14:33:42.349 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-09-18 14:33:42.349 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-09-18 14:33:42.350 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-09-18 14:33:42.811 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:33:42.847 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .OrderBy(pt => pt.AppoitmentTime)
    .Skip(__p_0)
    .Take(__p_1)
    .Select(ap => new AppointmentModel{ 
        AppoitmentTime = ap.AppoitmentTime, 
        AppoitmentStatus = ap.AppoitmentStatus, 
        PatientId = ap.PatientId, 
        Gender = ap.Patient.Gender, 
        Avatar = ap.Patient.Avatar, 
        FullName = ap.Patient.FullName, 
        Date = ap.Patient.Date 
    }
    )'
2024-09-18 14:33:43.005 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppointmentModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            AppoitmentTime -> 0
            AppoitmentStatus -> 1
            PatientId -> 2
            Gender -> 3
            Avatar -> 4
            FullName -> 5
            Date -> 6
        SELECT t.AppoitmentTime, t.AppoitmentStatus, t.PatientId, p.Gender, p.Avatar, p.FullName, p.Date
        FROM 
        (
            SELECT a.AppoitmentStatus, a.AppoitmentTime, a.PatientId
            FROM Appointment AS a
            ORDER BY a.AppoitmentTime ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        INNER JOIN Patient AS p ON t.PatientId == p.PatientId
        ORDER BY t.AppoitmentTime ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppointmentModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-09-18 14:33:43.028 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:33:43.044 +07:00 [DBG] Created DbConnection. (14ms).
2024-09-18 14:33:43.047 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:33:43.225 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:33:43.227 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:33:43.232 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-18 14:33:43.239 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-09-18 14:33:43.245 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppoitmentTime], [t].[AppoitmentStatus], [t].[PatientId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date]
FROM (
    SELECT [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppoitmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppoitmentTime]
2024-09-18 14:33:43.278 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppoitmentTime], [t].[AppoitmentStatus], [t].[PatientId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date]
FROM (
    SELECT [a].[AppoitmentStatus], [a].[AppoitmentTime], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppoitmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppoitmentTime]
2024-09-18 14:33:43.287 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:33:43.292 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 10ms reading results.
2024-09-18 14:33:43.295 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:33:43.299 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2024-09-18 14:33:43.302 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 14:33:43.304 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 14:33:43.304 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 14:33:43.305 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 14:33:43.307 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 14:33:43.308 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-18 14:33:43.362 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 1114.908ms
2024-09-18 14:33:43.363 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-09-18 14:33:43.365 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:33:43.370 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:33:43.372 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-18 14:33:43.373 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=5 - 200 1125 application/json; charset=utf-8 1210.9691ms
2024-09-18 14:34:00.859 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 137
2024-09-18 14:34:00.861 +07:00 [DBG] POST requests are not supported
2024-09-18 14:34:00.862 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 14:34:00.863 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 14:34:00.864 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:34:00.865 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:34:00.866 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:34:00.871 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:34:00.873 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:34:00.873 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:34:00.874 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:34:00.875 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:34:00.876 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:34:00.877 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:34:00.878 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:34:00.879 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:34:00.880 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:34:00.882 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:34:00.883 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:34:00.887 +07:00 [DBG] Connection id "0HN6NMGQT58ET", Request id "0HN6NMGQT58ET:0000000B": started reading request body.
2024-09-18 14:34:00.888 +07:00 [DBG] Connection id "0HN6NMGQT58ET", Request id "0HN6NMGQT58ET:0000000B": done reading request body.
2024-09-18 14:34:00.907 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:34:00.909 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:34:00.909 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:34:00.914 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:34:00.925 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:34:00.949 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:34:00.983 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:34:00.988 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:34:00.990 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:34:00.997 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:34:01.047 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:34:01.048 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 14:34:01.049 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:01.052 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:01.056 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:34:01.057 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:34:01.058 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-18 14:34:01.059 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:34:01.081 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:34:01.087 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:01.088 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 5ms reading results.
2024-09-18 14:34:01.091 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:01.092 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-18 14:34:01.098 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:34:01.101 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 14:34:01.103 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 14:34:01.104 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 14:34:01.105 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 14:34:01.105 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 14:34:01.106 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 14:34:01.106 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:34:01.109 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 231.8345ms
2024-09-18 14:34:01.110 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:34:01.111 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:34:01.112 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:01.113 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 14:34:01.114 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 124 application/json; charset=utf-8 255.1322ms
2024-09-18 14:34:37.702 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-18 14:34:37.704 +07:00 [DBG] POST requests are not supported
2024-09-18 14:34:37.705 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 14:34:37.705 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 14:34:37.706 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:34:37.709 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:34:37.710 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:34:37.711 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:34:37.712 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:34:37.713 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:34:37.715 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:34:37.717 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:34:37.719 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:34:37.720 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:34:37.725 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:34:37.725 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:34:37.726 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:34:37.727 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:34:37.728 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:34:37.729 +07:00 [DBG] Connection id "0HN6NMGQT58ET", Request id "0HN6NMGQT58ET:0000000D": started reading request body.
2024-09-18 14:34:37.729 +07:00 [DBG] Connection id "0HN6NMGQT58ET", Request id "0HN6NMGQT58ET:0000000D": done reading request body.
2024-09-18 14:34:37.730 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:34:37.731 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:34:37.731 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:34:37.732 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:34:37.768 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:34:37.771 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:34:37.772 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:34:37.774 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:34:37.775 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:34:37.776 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:34:37.776 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:34:37.777 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 14:34:37.778 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:37.778 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:37.779 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:34:37.779 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:34:37.780 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-18 14:34:37.781 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:34:37.785 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:34:37.790 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:37.790 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-18 14:34:37.792 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:37.792 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:34:37.793 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:34:37.794 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 14:34:37.795 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 14:34:37.796 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 14:34:37.796 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 14:34:37.796 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 14:34:37.797 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 14:34:37.797 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:34:37.798 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 78.1409ms
2024-09-18 14:34:37.799 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:34:37.799 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:34:37.800 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:37.801 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 14:34:37.802 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 101.7192ms
2024-09-18 14:34:46.404 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-18 14:34:46.406 +07:00 [DBG] POST requests are not supported
2024-09-18 14:34:46.406 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 14:34:46.407 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 14:34:46.409 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:34:46.411 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:34:46.413 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:34:46.413 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:34:46.414 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:34:46.414 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:34:46.415 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:34:46.417 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:34:46.418 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:34:46.419 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:34:46.420 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:34:46.422 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:34:46.424 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:34:46.425 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:34:46.427 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:34:46.428 +07:00 [DBG] Connection id "0HN6NMGQT58ET", Request id "0HN6NMGQT58ET:0000000F": started reading request body.
2024-09-18 14:34:46.428 +07:00 [DBG] Connection id "0HN6NMGQT58ET", Request id "0HN6NMGQT58ET:0000000F": done reading request body.
2024-09-18 14:34:46.429 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:34:46.430 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:34:46.431 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:34:46.432 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:34:46.434 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:34:46.437 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-18 14:34:46.461 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-18 14:34:46.465 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:34:46.465 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 14:34:46.465 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:46.466 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:46.467 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:34:46.467 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:34:46.468 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:34:46.468 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 14:34:46.474 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 14:34:46.480 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:34:46.496 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:46.496 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 21ms reading results.
2024-09-18 14:34:46.497 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:46.498 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:34:47.619 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:34:47.622 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:34:47.631 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:34:47.632 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:34:47.633 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:34:47.639 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:34:47.640 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:47.641 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:47.641 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:34:47.642 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:34:47.642 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-18 14:34:47.643 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:34:47.651 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:34:47.653 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:47.653 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-18 14:34:47.654 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:47.655 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:34:47.655 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:34:47.656 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 14:34:47.657 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 14:34:47.658 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 14:34:47.658 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 14:34:47.658 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 14:34:47.659 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 14:34:47.660 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:34:47.660 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 1241.4703ms
2024-09-18 14:34:47.661 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:34:47.662 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:34:47.663 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:34:47.663 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 14:34:47.664 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 1259.89ms
2024-09-18 14:36:45.695 +07:00 [DBG] Connection id "0HN6NMGQT58ET" received FIN.
2024-09-18 14:36:45.700 +07:00 [DBG] Connection id "0HN6NMGQT58ET" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-18 14:36:45.700 +07:00 [DBG] Connection id "0HN6NMGQT58ET" is closed. The last processed stream ID was 15.
2024-09-18 14:36:45.702 +07:00 [DBG] The connection queue processing loop for 0HN6NMGQT58ET completed.
2024-09-18 14:36:45.705 +07:00 [DBG] Connection id "0HN6NMGQT58ET" stopped.
2024-09-18 14:37:34.381 +07:00 [DBG] Connection id "0HN6NMGQT58EU" accepted.
2024-09-18 14:37:34.385 +07:00 [DBG] Connection id "0HN6NMGQT58EU" started.
2024-09-18 14:37:34.390 +07:00 [DBG] Connection 0HN6NMGQT58EU established using the following protocol: "Tls13"
2024-09-18 14:37:34.395 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-18 14:37:34.401 +07:00 [DBG] POST requests are not supported
2024-09-18 14:37:34.401 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 14:37:34.402 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 14:37:34.402 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:37:34.403 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:37:34.403 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:37:34.404 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:37:34.405 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:37:34.406 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:37:34.406 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:37:34.407 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:37:34.407 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:37:34.408 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:37:34.409 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:37:34.410 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:37:34.411 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:37:34.414 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:37:34.415 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:37:34.416 +07:00 [DBG] Connection id "0HN6NMGQT58EU", Request id "0HN6NMGQT58EU:00000001": started reading request body.
2024-09-18 14:37:34.417 +07:00 [DBG] Connection id "0HN6NMGQT58EU", Request id "0HN6NMGQT58EU:00000001": done reading request body.
2024-09-18 14:37:34.419 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:37:34.420 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:37:34.420 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:37:34.421 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:37:34.423 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:37:34.428 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:37:34.429 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 14:37:34.429 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:34.430 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:34.430 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:37:34.431 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:37:34.431 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-18 14:37:34.432 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 14:37:34.439 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 14:37:34.440 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:37:34.441 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:34.441 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-18 14:37:34.443 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:34.443 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:37:35.235 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:37:35.237 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:37:35.238 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:37:35.239 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:37:35.240 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:37:35.241 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:37:35.242 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:35.243 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:35.244 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:37:35.246 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-09-18 14:37:35.247 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-09-18 14:37:35.248 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:37:35.250 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:37:35.252 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:35.252 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-18 14:37:35.253 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:35.253 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:37:35.254 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:37:35.255 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 14:37:35.256 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 14:37:35.257 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 14:37:35.258 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 14:37:35.258 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 14:37:35.258 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 14:37:35.259 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:37:35.260 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 851.6639ms
2024-09-18 14:37:35.260 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:37:35.261 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:37:35.262 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:35.263 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 14:37:35.263 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 868.3613ms
2024-09-18 14:37:36.853 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-18 14:37:36.855 +07:00 [DBG] POST requests are not supported
2024-09-18 14:37:36.856 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 14:37:36.859 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 14:37:36.860 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:37:36.861 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:37:36.861 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:37:36.862 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:37:36.865 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:37:36.866 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:37:36.867 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:37:36.869 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:37:36.872 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:37:36.874 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:37:36.876 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:37:36.878 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:37:36.878 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:37:36.879 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:37:36.880 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:37:36.881 +07:00 [DBG] Connection id "0HN6NMGQT58EU", Request id "0HN6NMGQT58EU:00000003": started reading request body.
2024-09-18 14:37:36.881 +07:00 [DBG] Connection id "0HN6NMGQT58EU", Request id "0HN6NMGQT58EU:00000003": done reading request body.
2024-09-18 14:37:36.882 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:37:36.883 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:37:36.883 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:37:36.884 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:37:36.885 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:37:36.886 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:37:36.887 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 14:37:36.887 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:36.888 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:36.889 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:37:36.889 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:37:36.890 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:37:36.890 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 14:37:36.892 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 14:37:36.893 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:37:36.893 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:36.893 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-18 14:37:36.894 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:36.894 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:37:37.691 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:37:37.692 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:37:37.693 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:37:37.694 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:37:37.694 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:37:37.695 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:37:37.697 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:37.698 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:37.699 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:37:37.700 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:37:37.700 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-18 14:37:37.701 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:37:37.704 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:37:37.705 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:37.705 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-18 14:37:37.706 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:37.707 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:37:37.707 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:37:37.708 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 14:37:37.709 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 14:37:37.711 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 14:37:37.711 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 14:37:37.712 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 14:37:37.712 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 14:37:37.713 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:37:37.715 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 840.733ms
2024-09-18 14:37:37.715 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:37:37.717 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:37:37.718 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:37:37.719 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 14:37:37.720 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 866.8029ms
2024-09-18 14:38:11.523 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-18 14:38:11.524 +07:00 [DBG] POST requests are not supported
2024-09-18 14:38:11.524 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 14:38:11.525 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 14:38:11.526 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:38:11.527 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:38:11.528 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:38:11.529 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:38:11.530 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:38:11.531 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:38:11.532 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:38:11.533 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:38:11.533 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:38:11.534 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:38:11.535 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:38:11.536 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:38:11.537 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:38:11.537 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:38:11.538 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:38:11.539 +07:00 [DBG] Connection id "0HN6NMGQT58EU", Request id "0HN6NMGQT58EU:00000005": started reading request body.
2024-09-18 14:38:11.539 +07:00 [DBG] Connection id "0HN6NMGQT58EU", Request id "0HN6NMGQT58EU:00000005": done reading request body.
2024-09-18 14:38:11.540 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:38:11.540 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:38:11.541 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:38:11.542 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:38:11.544 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:38:11.545 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:38:11.546 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 14:38:11.546 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:38:11.547 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:38:11.547 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:38:11.548 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:38:11.548 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:38:11.549 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 14:38:11.556 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 14:38:11.558 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:38:11.558 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:38:11.559 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-18 14:38:11.560 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:38:11.560 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:38:12.358 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:38:12.359 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:38:12.359 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:38:12.360 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:38:12.360 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:38:12.361 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:38:12.362 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:38:12.363 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:38:12.364 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:38:12.364 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:38:12.364 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:38:12.365 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:38:12.369 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:38:12.370 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:38:12.371 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-18 14:38:12.371 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:38:12.372 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:38:12.373 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:38:12.373 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 14:38:12.374 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 14:38:12.375 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 14:38:12.375 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 14:38:12.376 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 14:38:12.377 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 14:38:12.377 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:38:12.378 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 843.7673ms
2024-09-18 14:38:12.378 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:38:12.379 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:38:12.379 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:38:12.380 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 14:38:12.381 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 858.2473ms
2024-09-18 14:48:41.607 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 14:48:41.680 +07:00 [DBG] Hosting starting
2024-09-18 14:48:41.696 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 14:48:41.703 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 14:48:41.706 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 14:48:41.709 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 14:48:41.711 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 14:48:41.715 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 14:48:41.717 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:48:41.719 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 14:48:41.720 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:48:41.723 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 14:48:41.725 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 14:48:41.726 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 14:48:41.727 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 14:48:41.826 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 14:48:41.827 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 14:48:41.827 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 14:48:41.828 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 14:48:41.828 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 14:48:41.829 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 14:48:41.868 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 14:48:41.869 +07:00 [INF] Hosting environment: Development
2024-09-18 14:48:41.870 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 14:48:41.871 +07:00 [DBG] Hosting started
2024-09-18 14:48:46.395 +07:00 [DBG] Connection id "0HN6NMP9N9IGI" accepted.
2024-09-18 14:48:46.397 +07:00 [DBG] Connection id "0HN6NMP9N9IGI" started.
2024-09-18 14:48:46.429 +07:00 [DBG] Connection 0HN6NMP9N9IGI established using the following protocol: "Tls13"
2024-09-18 14:48:46.457 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 14:48:46.516 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 14:48:46.561 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 14:48:46.562 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 14:48:46.574 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 14:48:46.575 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 14:48:46.578 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 122.8865ms
2024-09-18 14:48:46.582 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 14:48:46.582 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 14:48:46.595 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 12.6776ms
2024-09-18 14:48:46.613 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.0151ms
2024-09-18 14:48:46.839 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 14:48:46.979 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 140.3587ms
2024-09-18 14:48:56.354 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 137
2024-09-18 14:48:56.358 +07:00 [DBG] POST requests are not supported
2024-09-18 14:48:56.376 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 14:48:56.379 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 14:48:56.385 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:48:56.419 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:48:56.421 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:48:56.441 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:48:56.442 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:48:56.443 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:48:56.445 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:48:56.446 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:48:56.447 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:48:56.449 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:48:56.525 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 14:48:56.540 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:48:56.544 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:48:56.547 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:48:56.549 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:48:56.550 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:48:56.555 +07:00 [DBG] Connection id "0HN6NMP9N9IGI", Request id "0HN6NMP9N9IGI:00000009": started reading request body.
2024-09-18 14:48:56.556 +07:00 [DBG] Connection id "0HN6NMP9N9IGI", Request id "0HN6NMP9N9IGI:00000009": done reading request body.
2024-09-18 14:48:56.612 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:48:56.613 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:48:56.613 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:48:56.620 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:48:57.085 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:48:57.107 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:48:57.138 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:48:57.142 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:48:57.144 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:48:57.151 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:48:57.198 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:48:57.219 +07:00 [DBG] Created DbConnection. (19ms).
2024-09-18 14:48:57.223 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:48:57.418 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:48:57.425 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:48:57.430 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-18 14:48:57.436 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-09-18 14:48:57.443 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:48:57.490 +07:00 [INF] Executed DbCommand (47ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:48:57.496 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:48:57.502 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 6ms reading results.
2024-09-18 14:48:57.505 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:48:57.509 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2024-09-18 14:48:57.515 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:48:57.517 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 14:48:57.521 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 14:48:57.523 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 14:48:57.524 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 14:48:57.524 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 14:48:57.525 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 14:48:57.526 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:48:57.549 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 1099.1915ms
2024-09-18 14:48:57.550 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:48:57.553 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:48:57.557 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:48:57.558 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-18 14:48:57.559 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 123 application/json; charset=utf-8 1205.9504ms
2024-09-18 14:49:10.363 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-18 14:49:10.365 +07:00 [DBG] POST requests are not supported
2024-09-18 14:49:10.366 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 14:49:10.368 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 14:49:10.369 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:49:10.370 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:49:10.370 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:49:10.371 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:49:10.372 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:49:10.372 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:49:10.373 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:49:10.374 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:49:10.375 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:49:10.376 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:49:10.377 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:49:10.378 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:49:10.379 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:49:10.380 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:49:10.380 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:49:10.381 +07:00 [DBG] Connection id "0HN6NMP9N9IGI", Request id "0HN6NMP9N9IGI:0000000B": started reading request body.
2024-09-18 14:49:10.382 +07:00 [DBG] Connection id "0HN6NMP9N9IGI", Request id "0HN6NMP9N9IGI:0000000B": done reading request body.
2024-09-18 14:49:10.382 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:49:10.383 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:49:10.384 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:49:10.384 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:49:10.420 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:49:10.445 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-18 14:49:10.589 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-18 14:49:10.608 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:49:10.609 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 14:49:10.610 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:49:10.613 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:49:10.614 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:49:10.614 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:49:10.615 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:49:10.615 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 14:49:10.627 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 14:49:10.638 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:49:10.651 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:49:10.652 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 24ms reading results.
2024-09-18 14:49:10.654 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:49:10.655 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:49:14.173 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:49:14.177 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:49:14.184 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:49:14.185 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:49:14.185 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:49:14.191 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:49:14.192 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:49:14.194 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:49:14.195 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:49:14.195 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:49:14.196 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:49:14.196 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:49:14.204 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:49:14.205 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:49:14.205 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-09-18 14:49:14.206 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:49:14.206 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:49:14.208 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:49:14.209 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 14:49:14.209 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 14:49:14.211 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 14:49:14.211 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 14:49:14.211 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 14:49:14.212 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 14:49:14.212 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:49:14.213 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 3837.0362ms
2024-09-18 14:49:14.214 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 14:49:14.215 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:49:14.216 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:49:14.217 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 14:49:14.217 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 126 application/json; charset=utf-8 3854.9088ms
2024-09-18 14:54:46.702 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 14:54:46.773 +07:00 [DBG] Hosting starting
2024-09-18 14:54:46.791 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 14:54:46.797 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 14:54:46.801 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 14:54:46.804 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 14:54:46.807 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 14:54:46.811 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 14:54:46.813 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:54:46.815 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 14:54:46.816 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:54:46.819 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 14:54:46.820 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 14:54:46.822 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 14:54:46.823 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 14:54:46.932 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 14:54:46.933 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 14:54:46.933 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 14:54:46.933 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 14:54:46.934 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 14:54:46.934 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 14:54:46.970 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 14:54:46.971 +07:00 [INF] Hosting environment: Development
2024-09-18 14:54:46.971 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 14:54:46.971 +07:00 [DBG] Hosting started
2024-09-18 14:55:21.436 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 14:55:21.521 +07:00 [DBG] Hosting starting
2024-09-18 14:55:21.544 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 14:55:21.553 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 14:55:21.561 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 14:55:21.565 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 14:55:21.569 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 14:55:21.573 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 14:55:21.576 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:55:21.578 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 14:55:21.579 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:55:21.583 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 14:55:21.584 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 14:55:21.585 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 14:55:21.586 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 14:55:21.742 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 14:55:21.742 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 14:55:21.743 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 14:55:21.743 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 14:55:21.743 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 14:55:21.744 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 14:55:21.791 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 14:55:21.792 +07:00 [INF] Hosting environment: Development
2024-09-18 14:55:21.793 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 14:55:21.793 +07:00 [DBG] Hosting started
2024-09-18 14:55:23.562 +07:00 [DBG] Connection id "0HN6NMT02VFOI" accepted.
2024-09-18 14:55:23.564 +07:00 [DBG] Connection id "0HN6NMT02VFOI" started.
2024-09-18 14:55:23.602 +07:00 [DBG] Connection 0HN6NMT02VFOI established using the following protocol: "Tls13"
2024-09-18 14:55:23.633 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 14:55:23.698 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 14:55:23.750 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 14:55:23.751 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 14:55:23.764 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 14:55:23.765 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 14:55:23.768 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 137.4151ms
2024-09-18 14:55:23.776 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 14:55:23.783 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 6.5837ms
2024-09-18 14:55:23.837 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 14:55:23.874 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.14ms
2024-09-18 14:55:24.119 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 14:55:24.246 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 127.0065ms
2024-09-18 14:55:27.847 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - null 0
2024-09-18 14:55:27.850 +07:00 [DBG] POST requests are not supported
2024-09-18 14:55:27.871 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/SendMail'
2024-09-18 14:55:27.874 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)' with route pattern 'api/Appointment/SendMail' is valid for the request path '/api/Appointment/SendMail'
2024-09-18 14:55:27.879 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 14:55:27.917 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:55:27.919 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 14:55:27.935 +07:00 [INF] Route matched with {action = "SendMail", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMail() on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:55:27.938 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:55:27.938 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:55:27.939 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:55:27.940 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:55:27.941 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:55:27.943 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:55:28.033 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 14:55:28.046 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:55:31.001 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-18 14:55:31.006 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API) in 3061.6789ms
2024-09-18 14:55:31.008 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 14:55:31.011 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - 200 0 null 3165.2435ms
2024-09-18 14:58:20.681 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 14:58:20.757 +07:00 [DBG] Hosting starting
2024-09-18 14:58:20.778 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 14:58:20.785 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 14:58:20.789 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 14:58:20.792 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 14:58:20.795 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 14:58:20.798 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 14:58:20.801 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:58:20.803 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 14:58:20.804 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 14:58:20.808 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 14:58:20.809 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 14:58:20.811 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 14:58:20.812 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 14:58:20.932 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 14:58:20.933 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 14:58:20.933 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 14:58:20.934 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 14:58:20.934 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 14:58:20.935 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 14:58:20.975 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 14:58:20.976 +07:00 [INF] Hosting environment: Development
2024-09-18 14:58:20.976 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 14:58:20.976 +07:00 [DBG] Hosting started
2024-09-18 14:58:21.194 +07:00 [DBG] Connection id "0HN6NMUL106RN" accepted.
2024-09-18 14:58:21.196 +07:00 [DBG] Connection id "0HN6NMUL106RN" started.
2024-09-18 14:58:21.232 +07:00 [DBG] Connection 0HN6NMUL106RN established using the following protocol: "Tls13"
2024-09-18 14:58:21.261 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 14:58:21.321 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 14:58:21.366 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 14:58:21.368 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 14:58:21.384 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 14:58:21.386 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 14:58:21.390 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 131.5557ms
2024-09-18 14:58:21.394 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 14:58:21.397 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 14:58:21.413 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 14.5344ms
2024-09-18 14:58:21.433 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.0416ms
2024-09-18 14:58:21.508 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 14:58:21.611 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 103.1318ms
2024-09-18 14:58:25.205 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - application/json-patch+json 137
2024-09-18 14:58:25.209 +07:00 [DBG] POST requests are not supported
2024-09-18 14:58:25.225 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/SendMail'
2024-09-18 14:58:25.228 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)' with route pattern 'api/Appointment/SendMail' is valid for the request path '/api/Appointment/SendMail'
2024-09-18 14:58:25.233 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 14:58:25.265 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:58:25.267 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 14:58:25.283 +07:00 [INF] Route matched with {action = "SendMail", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMail(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:58:25.285 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:58:25.286 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:58:25.287 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:58:25.288 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:58:25.289 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:58:25.290 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:58:25.356 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 14:58:25.368 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:58:25.373 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:58:25.375 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:58:25.376 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:58:25.377 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:58:25.382 +07:00 [DBG] Connection id "0HN6NMUL106RN", Request id "0HN6NMUL106RN:00000009": started reading request body.
2024-09-18 14:58:25.383 +07:00 [DBG] Connection id "0HN6NMUL106RN", Request id "0HN6NMUL106RN:00000009": done reading request body.
2024-09-18 14:58:25.439 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:58:25.440 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:58:25.441 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:58:25.446 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:58:25.950 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:58:25.979 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:58:26.022 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:58:26.028 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:58:26.032 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:58:26.040 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:58:26.097 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:58:26.135 +07:00 [DBG] Created DbConnection. (36ms).
2024-09-18 14:58:26.138 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:58:26.366 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:58:26.373 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:58:26.378 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-18 14:58:26.386 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2024-09-18 14:58:26.393 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:58:26.444 +07:00 [ERR] Failed executing DbCommand (54ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:58:26.450 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:58:26.457 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2024-09-18 14:58:26.505 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.DoctorManagementContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Appoitment". The conflict occurred in database "DoctorDatabase", table "dbo.Patient", column 'PatientId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:457103c8-f555-4f48-8e31-b63f2db592a0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Appoitment". The conflict occurred in database "DoctorDatabase", table "dbo.Patient", column 'PatientId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:457103c8-f555-4f48-8e31-b63f2db592a0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-09-18 14:58:26.616 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API) in 1324.7925ms
2024-09-18 14:58:26.618 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 14:58:26.621 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Appoitment". The conflict occurred in database "DoctorDatabase", table "dbo.Patient", column 'PatientId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:457103c8-f555-4f48-8e31-b63f2db592a0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CityInfo.API.Services.AppointmentRespository.Add(AppointmentModelForAdd appointment) in C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API\Services\AppointmentRespository.cs:line 131
   at CityInfo.API.Controllers.AppointmentController.SendMail(AppointmentModelForAdd appointment) in C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API\Controllers\AppointmentController.cs:line 99
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-18 14:58:26.642 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:58:26.644 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:58:26.647 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-18 14:58:26.648 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - 500 null text/plain; charset=utf-8 1443.0873ms
2024-09-18 14:59:28.202 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - application/json-patch+json 137
2024-09-18 14:59:28.210 +07:00 [DBG] POST requests are not supported
2024-09-18 14:59:28.211 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/SendMail'
2024-09-18 14:59:28.212 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)' with route pattern 'api/Appointment/SendMail' is valid for the request path '/api/Appointment/SendMail'
2024-09-18 14:59:28.214 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 14:59:28.215 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:59:28.216 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 14:59:28.217 +07:00 [INF] Route matched with {action = "SendMail", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMail(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:59:28.218 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:59:28.218 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:59:28.219 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:59:28.220 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:59:28.221 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:59:28.222 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:59:28.224 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:59:28.225 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:59:28.225 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:59:28.226 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:59:28.227 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:59:28.228 +07:00 [DBG] Connection id "0HN6NMUL106RN", Request id "0HN6NMUL106RN:0000000B": started reading request body.
2024-09-18 14:59:28.228 +07:00 [DBG] Connection id "0HN6NMUL106RN", Request id "0HN6NMUL106RN:0000000B": done reading request body.
2024-09-18 14:59:28.229 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:59:28.230 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:59:28.230 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:59:28.231 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:59:28.264 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:59:28.267 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:59:28.268 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:59:28.269 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:59:28.270 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:59:28.271 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:59:28.272 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:59:28.272 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 14:59:28.273 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:59:28.274 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:59:28.274 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:59:28.275 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:59:28.276 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-18 14:59:28.277 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:59:28.287 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:59:28.291 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:59:28.294 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-09-18 14:59:28.295 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:59:28.295 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:59:28.301 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:59:28.302 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 14:59:28.304 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-18 14:59:28.305 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API) in 82.7589ms
2024-09-18 14:59:28.306 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 14:59:28.306 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:59:28.307 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:59:28.307 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-18 14:59:28.308 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - 200 0 null 109.4042ms
2024-09-18 14:59:38.484 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - application/json-patch+json 140
2024-09-18 14:59:38.486 +07:00 [DBG] POST requests are not supported
2024-09-18 14:59:38.486 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/SendMail'
2024-09-18 14:59:38.487 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)' with route pattern 'api/Appointment/SendMail' is valid for the request path '/api/Appointment/SendMail'
2024-09-18 14:59:38.488 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 14:59:38.491 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 14:59:38.492 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 14:59:38.493 +07:00 [INF] Route matched with {action = "SendMail", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMail(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 14:59:38.494 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 14:59:38.495 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 14:59:38.496 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:59:38.496 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 14:59:38.497 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 14:59:38.498 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:59:38.505 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 14:59:38.506 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:59:38.507 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 14:59:38.509 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:59:38.510 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 14:59:38.511 +07:00 [DBG] Connection id "0HN6NMUL106RN", Request id "0HN6NMUL106RN:0000000D": started reading request body.
2024-09-18 14:59:38.512 +07:00 [DBG] Connection id "0HN6NMUL106RN", Request id "0HN6NMUL106RN:0000000D": done reading request body.
2024-09-18 14:59:38.514 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:59:38.515 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:59:38.515 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 14:59:38.516 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 14:59:38.527 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 14:59:38.528 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:59:38.530 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:59:38.531 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 14:59:38.534 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 14:59:38.536 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 14:59:38.537 +07:00 [DBG] Creating DbConnection.
2024-09-18 14:59:38.538 +07:00 [DBG] Created DbConnection. (0ms).
2024-09-18 14:59:38.538 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:59:38.539 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:59:38.540 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 14:59:38.541 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 14:59:38.542 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-18 14:59:38.543 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:59:38.546 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 14:59:38.548 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:59:38.549 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-09-18 14:59:38.550 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:59:38.551 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 14:59:38.552 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 14:59:38.553 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 14:59:38.555 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-18 14:59:38.556 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API) in 57.1249ms
2024-09-18 14:59:38.556 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 14:59:38.558 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 14:59:38.560 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 14:59:38.562 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-18 14:59:38.562 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - 200 0 null 78.8154ms
2024-09-18 15:00:24.390 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 15:00:24.477 +07:00 [DBG] Hosting starting
2024-09-18 15:00:24.499 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 15:00:24.506 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 15:00:24.509 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 15:00:24.512 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 15:00:24.515 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 15:00:24.521 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 15:00:24.523 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 15:00:24.525 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 15:00:24.527 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 15:00:24.530 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 15:00:24.532 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 15:00:24.534 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 15:00:24.535 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 15:00:24.637 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 15:00:24.637 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 15:00:24.638 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 15:00:24.638 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 15:00:24.639 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 15:00:24.639 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 15:00:24.681 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 15:00:24.682 +07:00 [INF] Hosting environment: Development
2024-09-18 15:00:24.683 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 15:00:24.683 +07:00 [DBG] Hosting started
2024-09-18 15:00:26.950 +07:00 [DBG] Connection id "0HN6NMVQG9V5J" accepted.
2024-09-18 15:00:26.952 +07:00 [DBG] Connection id "0HN6NMVQG9V5J" started.
2024-09-18 15:00:26.990 +07:00 [DBG] Connection 0HN6NMVQG9V5J established using the following protocol: "Tls13"
2024-09-18 15:00:27.019 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 15:00:27.075 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 15:00:27.117 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 15:00:27.119 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 15:00:27.130 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 15:00:27.131 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 15:00:27.134 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 118.1159ms
2024-09-18 15:00:27.140 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 15:00:27.140 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 15:00:27.154 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 14.0113ms
2024-09-18 15:00:27.173 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.1617ms
2024-09-18 15:00:27.404 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 15:00:27.532 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 128.7957ms
2024-09-18 15:00:41.167 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - application/json-patch+json 140
2024-09-18 15:00:41.171 +07:00 [DBG] POST requests are not supported
2024-09-18 15:00:41.190 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/SendMail'
2024-09-18 15:00:41.194 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)' with route pattern 'api/Appointment/SendMail' is valid for the request path '/api/Appointment/SendMail'
2024-09-18 15:00:41.200 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 15:00:41.231 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 15:00:41.233 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 15:00:41.248 +07:00 [INF] Route matched with {action = "SendMail", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMail(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 15:00:41.250 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 15:00:41.251 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 15:00:41.252 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 15:00:41.253 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 15:00:41.254 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 15:00:41.255 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 15:00:41.323 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 15:00:41.335 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 15:00:41.339 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 15:00:41.341 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 15:00:41.342 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 15:00:41.343 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 15:00:41.346 +07:00 [DBG] Connection id "0HN6NMVQG9V5J", Request id "0HN6NMVQG9V5J:00000009": started reading request body.
2024-09-18 15:00:41.347 +07:00 [DBG] Connection id "0HN6NMVQG9V5J", Request id "0HN6NMVQG9V5J:00000009": done reading request body.
2024-09-18 15:00:41.393 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 15:00:41.394 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 15:00:41.395 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 15:00:41.400 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 15:00:45.121 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 15:00:45.160 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-18 15:00:45.298 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-18 15:00:45.320 +07:00 [DBG] Creating DbConnection.
2024-09-18 15:00:45.335 +07:00 [DBG] Created DbConnection. (13ms).
2024-09-18 15:00:45.337 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:00:45.513 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:00:45.518 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 15:00:45.525 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-09-18 15:00:45.534 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2024-09-18 15:00:45.545 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 15:00:45.579 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 15:00:45.607 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:00:45.627 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:00:45.634 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 49ms reading results.
2024-09-18 15:00:45.638 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:00:45.648 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (9ms).
2024-09-18 15:00:45.671 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:00:45.701 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:00:45.717 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:00:45.722 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 15:00:45.726 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 15:00:45.745 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 15:00:45.797 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:00:45.800 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:00:45.806 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 15:00:45.807 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 15:00:45.808 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-18 15:00:45.810 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 15:00:45.825 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 15:00:45.830 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:00:45.832 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 5ms reading results.
2024-09-18 15:00:45.835 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:00:45.835 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 15:00:45.843 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:00:45.846 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 15:00:45.849 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-18 15:00:45.853 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API) in 4596.6784ms
2024-09-18 15:00:45.854 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 15:00:45.858 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 15:00:45.861 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:00:45.862 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-18 15:00:45.863 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - 200 0 null 4696.2106ms
2024-09-18 15:01:49.197 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 15:01:49.276 +07:00 [DBG] Hosting starting
2024-09-18 15:01:49.294 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 15:01:49.300 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 15:01:49.304 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 15:01:49.306 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 15:01:49.309 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 15:01:49.312 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 15:01:49.315 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 15:01:49.317 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 15:01:49.318 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 15:01:49.322 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 15:01:49.323 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 15:01:49.324 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 15:01:49.325 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 15:01:49.450 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 15:01:49.451 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 15:01:49.452 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 15:01:49.452 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 15:01:49.453 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 15:01:49.453 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 15:01:49.495 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 15:01:49.496 +07:00 [INF] Hosting environment: Development
2024-09-18 15:01:49.497 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 15:01:49.497 +07:00 [DBG] Hosting started
2024-09-18 15:01:53.944 +07:00 [DBG] Connection id "0HN6NN0KDUE1G" accepted.
2024-09-18 15:01:53.946 +07:00 [DBG] Connection id "0HN6NN0KDUE1G" started.
2024-09-18 15:01:53.981 +07:00 [DBG] Connection 0HN6NN0KDUE1G established using the following protocol: "Tls13"
2024-09-18 15:01:54.010 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 15:01:54.065 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 15:01:54.106 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 15:01:54.108 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 15:01:54.120 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 15:01:54.120 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 15:01:54.123 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 116.3684ms
2024-09-18 15:01:54.127 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 15:01:54.129 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 15:01:54.138 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 9.0328ms
2024-09-18 15:01:54.157 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.4763ms
2024-09-18 15:01:54.235 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 15:01:54.339 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 104.8952ms
2024-09-18 15:02:06.839 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - application/json-patch+json 140
2024-09-18 15:02:06.842 +07:00 [DBG] POST requests are not supported
2024-09-18 15:02:06.861 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/SendMail'
2024-09-18 15:02:06.864 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)' with route pattern 'api/Appointment/SendMail' is valid for the request path '/api/Appointment/SendMail'
2024-09-18 15:02:06.869 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 15:02:06.901 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 15:02:06.903 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 15:02:06.918 +07:00 [INF] Route matched with {action = "SendMail", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMail(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 15:02:06.920 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 15:02:06.921 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 15:02:06.922 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 15:02:06.923 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 15:02:06.924 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 15:02:06.926 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 15:02:06.995 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 15:02:07.008 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 15:02:07.012 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 15:02:07.014 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 15:02:07.015 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 15:02:07.016 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 15:02:07.020 +07:00 [DBG] Connection id "0HN6NN0KDUE1G", Request id "0HN6NN0KDUE1G:00000009": started reading request body.
2024-09-18 15:02:07.021 +07:00 [DBG] Connection id "0HN6NN0KDUE1G", Request id "0HN6NN0KDUE1G:00000009": done reading request body.
2024-09-18 15:02:07.070 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 15:02:07.071 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 15:02:07.071 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 15:02:07.077 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 15:02:07.521 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 15:02:07.556 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-18 15:02:07.706 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-18 15:02:07.737 +07:00 [DBG] Creating DbConnection.
2024-09-18 15:02:07.755 +07:00 [DBG] Created DbConnection. (16ms).
2024-09-18 15:02:07.756 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:02:07.931 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:02:07.934 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 15:02:07.939 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-18 15:02:07.945 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-09-18 15:02:07.951 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 15:02:07.986 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 15:02:08.012 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:02:08.033 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:02:08.039 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 48ms reading results.
2024-09-18 15:02:08.041 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:02:08.046 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2024-09-18 15:02:10.983 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:02:11.002 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:02:11.011 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:02:11.014 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 15:02:11.016 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 15:02:11.027 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 15:02:11.071 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:02:11.074 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:02:11.078 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 15:02:11.079 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 15:02:11.081 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-18 15:02:11.082 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 15:02:11.100 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 15:02:11.104 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:02:11.106 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 5ms reading results.
2024-09-18 15:02:11.109 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:02:11.110 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-09-18 15:02:11.116 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:02:11.118 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 15:02:11.121 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-18 15:02:11.124 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API) in 4196.9356ms
2024-09-18 15:02:11.124 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 15:02:11.128 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 15:02:11.133 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:02:11.134 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-18 15:02:11.135 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - 200 0 null 4296.6811ms
2024-09-18 15:04:22.675 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 15:04:22.750 +07:00 [DBG] Hosting starting
2024-09-18 15:04:22.768 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 15:04:22.773 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 15:04:22.777 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 15:04:22.780 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 15:04:22.782 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 15:04:22.786 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 15:04:22.788 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 15:04:22.790 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 15:04:22.792 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 15:04:22.796 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 15:04:22.797 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 15:04:22.798 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 15:04:22.799 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 15:04:22.907 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 15:04:22.907 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 15:04:22.908 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 15:04:22.908 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 15:04:22.909 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 15:04:22.909 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 15:04:22.944 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 15:04:22.946 +07:00 [INF] Hosting environment: Development
2024-09-18 15:04:22.946 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 15:04:22.947 +07:00 [DBG] Hosting started
2024-09-18 15:04:26.463 +07:00 [DBG] Connection id "0HN6NN21SFESR" accepted.
2024-09-18 15:04:26.464 +07:00 [DBG] Connection id "0HN6NN21SFESR" started.
2024-09-18 15:04:26.500 +07:00 [DBG] Connection 0HN6NN21SFESR established using the following protocol: "Tls13"
2024-09-18 15:04:26.530 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 15:04:26.586 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 15:04:26.628 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 15:04:26.630 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 15:04:26.643 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 15:04:26.645 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 15:04:26.653 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 120.3225ms
2024-09-18 15:04:26.653 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 15:04:26.653 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 15:04:26.664 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 11.2381ms
2024-09-18 15:04:26.681 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.1102ms
2024-09-18 15:04:26.927 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 15:04:27.044 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 117.5035ms
2024-09-18 15:04:42.303 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - application/json-patch+json 140
2024-09-18 15:04:42.311 +07:00 [DBG] POST requests are not supported
2024-09-18 15:04:42.334 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/SendMail'
2024-09-18 15:04:42.338 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)' with route pattern 'api/Appointment/SendMail' is valid for the request path '/api/Appointment/SendMail'
2024-09-18 15:04:42.343 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 15:04:42.377 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 15:04:42.378 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 15:04:42.395 +07:00 [INF] Route matched with {action = "SendMail", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendMail(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 15:04:42.398 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 15:04:42.399 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 15:04:42.400 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 15:04:42.401 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 15:04:42.402 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 15:04:42.403 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 15:04:42.474 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 15:04:42.488 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 15:04:42.492 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 15:04:42.493 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 15:04:42.495 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 15:04:42.495 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 15:04:42.499 +07:00 [DBG] Connection id "0HN6NN21SFESR", Request id "0HN6NN21SFESR:00000009": started reading request body.
2024-09-18 15:04:42.501 +07:00 [DBG] Connection id "0HN6NN21SFESR", Request id "0HN6NN21SFESR:00000009": done reading request body.
2024-09-18 15:04:42.549 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 15:04:42.551 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 15:04:42.552 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 15:04:42.557 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 15:04:43.012 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 15:04:43.050 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-18 15:04:43.207 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-18 15:04:43.235 +07:00 [DBG] Creating DbConnection.
2024-09-18 15:04:43.251 +07:00 [DBG] Created DbConnection. (14ms).
2024-09-18 15:04:43.255 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:04:43.463 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:04:43.467 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 15:04:43.472 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-09-18 15:04:43.478 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-09-18 15:04:43.485 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 15:04:43.518 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 15:04:43.544 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:04:43.565 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:04:43.572 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 49ms reading results.
2024-09-18 15:04:43.574 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:04:43.579 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2024-09-18 15:04:46.789 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:04:46.804 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:04:46.813 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:04:46.816 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 15:04:46.818 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 15:04:46.830 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 15:04:46.872 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:04:46.876 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:04:46.879 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 15:04:46.880 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 15:04:46.881 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-18 15:04:46.882 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 15:04:46.900 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 15:04:46.904 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:04:46.906 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-09-18 15:04:46.909 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:04:46.910 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-18 15:04:46.915 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 15:04:46.918 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 15:04:46.921 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-09-18 15:04:46.924 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API) in 4519.7151ms
2024-09-18 15:04:46.925 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.SendMail (CityInfo.API)'
2024-09-18 15:04:46.928 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 15:04:46.931 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 15:04:46.933 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-18 15:04:46.934 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment/SendMail - 200 0 null 4631.0224ms
2024-09-18 15:04:48.205 +07:00 [DBG] Connection id "0HN6NN21SFESR" received FIN.
2024-09-18 15:04:48.209 +07:00 [DBG] Connection id "0HN6NN21SFESR" is closed. The last processed stream ID was 9.
2024-09-18 15:04:48.210 +07:00 [DBG] The connection queue processing loop for 0HN6NN21SFESR completed.
2024-09-18 15:04:48.211 +07:00 [DBG] Connection id "0HN6NN21SFESR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-18 15:04:48.229 +07:00 [DBG] Connection id "0HN6NN21SFESR" stopped.
2024-09-18 16:32:28.580 +07:00 [DBG] Connection id "0HN6NN21SFESS" accepted.
2024-09-18 16:32:28.582 +07:00 [DBG] Connection id "0HN6NN21SFESS" started.
2024-09-18 16:32:28.591 +07:00 [DBG] Connection 0HN6NN21SFESS established using the following protocol: "Tls13"
2024-09-18 16:32:28.638 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 16:32:28.652 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 13.9337ms
2024-09-18 16:32:28.717 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 16:32:28.751 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.9702ms
2024-09-18 16:32:28.974 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 16:32:29.001 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 27.1242ms
2024-09-18 17:44:01.432 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 17:44:01.619 +07:00 [DBG] Hosting starting
2024-09-18 17:44:01.653 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 17:44:01.666 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 17:44:01.682 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 17:44:01.694 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 17:44:01.712 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 17:44:01.724 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 17:44:01.733 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 17:44:01.736 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 17:44:01.740 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 17:44:01.749 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 17:44:01.753 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 17:44:01.758 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 17:44:01.760 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 17:44:02.052 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 17:44:02.053 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 17:44:02.053 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 17:44:02.053 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 17:44:02.054 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 17:44:02.054 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 17:44:02.109 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 17:44:02.110 +07:00 [INF] Hosting environment: Development
2024-09-18 17:44:02.110 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 17:44:02.111 +07:00 [DBG] Hosting started
2024-09-18 17:44:09.610 +07:00 [DBG] Connection id "0HN6NPR9SFQEN" accepted.
2024-09-18 17:44:09.612 +07:00 [DBG] Connection id "0HN6NPR9SFQEN" started.
2024-09-18 17:44:09.666 +07:00 [DBG] Connection 0HN6NPR9SFQEN established using the following protocol: "Tls13"
2024-09-18 17:44:09.708 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 17:44:09.820 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 17:44:09.897 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 17:44:09.899 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 17:44:09.916 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 17:44:09.918 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 17:44:09.922 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 217.3699ms
2024-09-18 17:44:09.936 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 17:44:09.936 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 17:44:09.959 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 23.102ms
2024-09-18 17:44:10.038 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 101.9065ms
2024-09-18 17:44:10.095 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 17:44:10.270 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 175.028ms
2024-09-18 17:44:11.375 +07:00 [DBG] Connection id "0HN6NPR9SFQEN" received FIN.
2024-09-18 17:44:11.380 +07:00 [DBG] The connection queue processing loop for 0HN6NPR9SFQEN completed.
2024-09-18 17:44:11.383 +07:00 [DBG] Connection id "0HN6NPR9SFQEN" is closed. The last processed stream ID was 7.
2024-09-18 17:44:11.385 +07:00 [DBG] Connection id "0HN6NPR9SFQEN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-18 17:44:11.392 +07:00 [DBG] Connection id "0HN6NPR9SFQEN" stopped.
2024-09-18 17:44:25.125 +07:00 [DBG] Connection id "0HN6NPR9SFQEO" accepted.
2024-09-18 17:44:25.126 +07:00 [DBG] Connection id "0HN6NPR9SFQEO" started.
2024-09-18 17:44:25.131 +07:00 [DBG] Connection 0HN6NPR9SFQEO established using the following protocol: "Tls13"
2024-09-18 17:44:25.135 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-18 17:44:25.138 +07:00 [DBG] POST requests are not supported
2024-09-18 17:44:25.164 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 17:44:25.167 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 17:44:25.176 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 17:44:25.230 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 17:44:25.234 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 17:44:25.264 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 17:44:25.267 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 17:44:25.269 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 17:44:25.270 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 17:44:25.272 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 17:44:25.274 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 17:44:25.277 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 17:44:25.410 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 17:44:25.430 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 17:44:25.436 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 17:44:25.440 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 17:44:25.442 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 17:44:25.443 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 17:44:25.450 +07:00 [DBG] Connection id "0HN6NPR9SFQEO", Request id "0HN6NPR9SFQEO:00000001": started reading request body.
2024-09-18 17:44:25.452 +07:00 [DBG] Connection id "0HN6NPR9SFQEO", Request id "0HN6NPR9SFQEO:00000001": done reading request body.
2024-09-18 17:44:25.521 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 17:44:25.522 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 17:44:25.523 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 17:44:25.535 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 17:44:26.224 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 17:44:26.287 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-18 17:44:26.493 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-18 17:44:26.521 +07:00 [DBG] Creating DbConnection.
2024-09-18 17:44:26.547 +07:00 [DBG] Created DbConnection. (25ms).
2024-09-18 17:44:26.551 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:44:26.810 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:44:26.813 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 17:44:26.818 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-09-18 17:44:26.825 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-09-18 17:44:26.835 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 17:44:26.881 +07:00 [INF] Executed DbCommand (47ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 17:44:26.919 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 17:44:26.950 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:44:26.958 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 71ms reading results.
2024-09-18 17:44:26.961 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:44:26.967 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (6ms).
2024-09-18 17:44:31.666 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 17:44:31.695 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 17:44:31.711 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 17:44:31.718 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 17:44:31.722 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 17:44:31.744 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 17:44:31.811 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:44:31.816 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:44:31.820 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 17:44:31.821 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 17:44:31.823 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-18 17:44:31.824 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 17:44:31.851 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 17:44:31.856 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:44:31.858 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 5ms reading results.
2024-09-18 17:44:31.861 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:44:31.863 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-09-18 17:44:31.870 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 17:44:31.872 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 17:44:31.881 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 17:44:31.885 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 17:44:31.886 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 17:44:31.886 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 17:44:31.887 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 17:44:31.888 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 17:44:31.927 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 6648.367ms
2024-09-18 17:44:31.929 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 17:44:31.933 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 17:44:31.937 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:44:31.939 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-09-18 17:44:31.942 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 126 application/json; charset=utf-8 6806.3822ms
2024-09-18 17:44:41.398 +07:00 [DBG] Connection id "0HN6NPR9SFQEO" received FIN.
2024-09-18 17:44:41.399 +07:00 [DBG] Connection id "0HN6NPR9SFQEO" is closed. The last processed stream ID was 1.
2024-09-18 17:44:41.400 +07:00 [DBG] The connection queue processing loop for 0HN6NPR9SFQEO completed.
2024-09-18 17:44:41.400 +07:00 [DBG] Connection id "0HN6NPR9SFQEO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-18 17:44:41.411 +07:00 [DBG] Connection id "0HN6NPR9SFQEO" stopped.
2024-09-18 17:48:15.856 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-18 17:48:15.963 +07:00 [DBG] Hosting starting
2024-09-18 17:48:15.987 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-18 17:48:15.998 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-09-18 17:48:16.003 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-09-18 17:48:16.007 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-09-18 17:48:16.010 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-09-18 17:48:16.015 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-09-18 17:48:16.019 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 17:48:16.021 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-18 17:48:16.023 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-18 17:48:16.027 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-18 17:48:16.029 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-18 17:48:16.031 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-09-18 17:48:16.033 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-09-18 17:48:16.176 +07:00 [INF] Now listening on: https://localhost:7169
2024-09-18 17:48:16.177 +07:00 [INF] Now listening on: http://localhost:5169
2024-09-18 17:48:16.177 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-09-18 17:48:16.178 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-09-18 17:48:16.178 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-18 17:48:16.179 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-18 17:48:16.224 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-18 17:48:16.225 +07:00 [INF] Hosting environment: Development
2024-09-18 17:48:16.226 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\CityInfo.API
2024-09-18 17:48:16.226 +07:00 [DBG] Hosting started
2024-09-18 17:48:39.303 +07:00 [DBG] Connection id "0HN6NPTQ8FS3N" accepted.
2024-09-18 17:48:39.305 +07:00 [DBG] Connection id "0HN6NPTQ8FS3N" started.
2024-09-18 17:48:39.352 +07:00 [DBG] Connection 0HN6NPTQ8FS3N established using the following protocol: "Tls13"
2024-09-18 17:48:39.385 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-09-18 17:48:39.454 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-18 17:48:39.515 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-18 17:48:39.517 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-18 17:48:39.540 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-18 17:48:39.542 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-18 17:48:39.544 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 162.4689ms
2024-09-18 17:48:39.700 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-09-18 17:48:39.700 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-09-18 17:48:39.719 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 15.2986ms
2024-09-18 17:48:39.748 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.9015ms
2024-09-18 17:48:39.853 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-09-18 17:48:40.016 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 163.0205ms
2024-09-18 17:48:46.714 +07:00 [DBG] Connection id "0HN6NPTQ8FS3N" received FIN.
2024-09-18 17:48:46.715 +07:00 [DBG] Connection id "0HN6NPTQ8FS3N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-18 17:48:46.720 +07:00 [DBG] Connection id "0HN6NPTQ8FS3N" is closed. The last processed stream ID was 7.
2024-09-18 17:48:46.722 +07:00 [DBG] The connection queue processing loop for 0HN6NPTQ8FS3N completed.
2024-09-18 17:48:46.725 +07:00 [DBG] Connection id "0HN6NPTQ8FS3N" stopped.
2024-09-18 17:48:56.469 +07:00 [DBG] Connection id "0HN6NPTQ8FS3O" accepted.
2024-09-18 17:48:56.470 +07:00 [DBG] Connection id "0HN6NPTQ8FS3O" started.
2024-09-18 17:48:56.474 +07:00 [DBG] Connection 0HN6NPTQ8FS3O established using the following protocol: "Tls13"
2024-09-18 17:48:56.476 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Appointment - application/json-patch+json 140
2024-09-18 17:48:56.479 +07:00 [DBG] POST requests are not supported
2024-09-18 17:48:56.504 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-09-18 17:48:56.507 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-09-18 17:48:56.513 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 17:48:56.552 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-18 17:48:56.555 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 17:48:56.576 +07:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(CityInfo.API.Models.AppointmentModelForAdd) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-09-18 17:48:56.579 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-18 17:48:56.580 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-18 17:48:56.581 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 17:48:56.582 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-18 17:48:56.583 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-09-18 17:48:56.585 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 17:48:56.669 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-18 17:48:56.685 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-09-18 17:48:56.690 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 17:48:56.692 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' using the name '' in request data ...
2024-09-18 17:48:56.694 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 17:48:56.694 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-09-18 17:48:56.700 +07:00 [DBG] Connection id "0HN6NPTQ8FS3O", Request id "0HN6NPTQ8FS3O:00000001": started reading request body.
2024-09-18 17:48:56.701 +07:00 [DBG] Connection id "0HN6NPTQ8FS3O", Request id "0HN6NPTQ8FS3O:00000001": done reading request body.
2024-09-18 17:48:56.760 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 17:48:56.761 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 17:48:56.762 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd' ...
2024-09-18 17:48:56.770 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 17:48:57.334 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-09-18 17:48:57.380 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-09-18 17:48:57.544 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-18 17:48:57.575 +07:00 [DBG] Creating DbConnection.
2024-09-18 17:48:57.598 +07:00 [DBG] Created DbConnection. (21ms).
2024-09-18 17:48:57.601 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:48:57.825 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:48:57.829 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 17:48:57.833 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-09-18 17:48:57.840 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-09-18 17:48:57.849 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 17:48:57.886 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-09-18 17:48:57.918 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 17:48:57.943 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:48:57.949 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 58ms reading results.
2024-09-18 17:48:57.953 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:48:57.958 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (6ms).
2024-09-18 17:49:00.891 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Appointment.AppoitmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 17:49:00.908 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 17:49:00.921 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 17:49:00.925 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-09-18 17:49:00.928 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-09-18 17:49:00.944 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-09-18 17:49:00.999 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:49:01.005 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:49:01.012 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-18 17:49:01.012 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-18 17:49:01.014 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-09-18 17:49:01.015 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 17:49:01.034 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointment] ([AppoitmentId], [AppoitmentStatus], [AppoitmentTime], [PatientId])
VALUES (@p0, @p1, @p2, @p3);
2024-09-18 17:49:01.039 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:49:01.041 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 6ms reading results.
2024-09-18 17:49:01.044 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:49:01.045 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-09-18 17:49:01.051 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-18 17:49:01.054 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-09-18 17:49:01.061 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-09-18 17:49:01.064 +07:00 [DBG] No information found on request to perform content negotiation.
2024-09-18 17:49:01.064 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-18 17:49:01.065 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-18 17:49:01.066 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-18 17:49:01.067 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModelForAdd'.
2024-09-18 17:49:01.094 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API) in 4507.9062ms
2024-09-18 17:49:01.096 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Add (CityInfo.API)'
2024-09-18 17:49:01.099 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-09-18 17:49:01.103 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-09-18 17:49:01.104 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-09-18 17:49:01.106 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Appointment - 200 127 application/json; charset=utf-8 4629.7911ms
2024-09-18 17:49:06.722 +07:00 [DBG] Connection id "0HN6NPTQ8FS3O" received FIN.
2024-09-18 17:49:06.723 +07:00 [DBG] Connection id "0HN6NPTQ8FS3O" is closed. The last processed stream ID was 1.
2024-09-18 17:49:06.723 +07:00 [DBG] The connection queue processing loop for 0HN6NPTQ8FS3O completed.
2024-09-18 17:49:06.724 +07:00 [DBG] Connection id "0HN6NPTQ8FS3O" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-18 17:49:06.738 +07:00 [DBG] Connection id "0HN6NPTQ8FS3O" stopped.
