2024-11-07 00:31:49.824 +07:00 [DBG] Connection id "0HN7U869HR51I" accepted.
2024-11-07 00:31:49.882 +07:00 [DBG] Connection id "0HN7U869HR51I" started.
2024-11-07 00:31:49.887 +07:00 [DBG] Connection id "0HN7U869HR51J" accepted.
2024-11-07 00:31:49.888 +07:00 [DBG] Connection id "0HN7U869HR51J" started.
2024-11-07 00:31:49.921 +07:00 [DBG] Connection id "0HN7U869HR51J" received FIN.
2024-11-07 00:31:49.922 +07:00 [DBG] Connection 0HN7U869HR51J established using the following protocol: "Tls13"
2024-11-07 00:31:49.922 +07:00 [DBG] Connection 0HN7U869HR51I established using the following protocol: "Tls13"
2024-11-07 00:31:49.958 +07:00 [DBG] Connection id "0HN7U869HR51J" is closed. The last processed stream ID was 0.
2024-11-07 00:31:49.960 +07:00 [DBG] Connection id "0HN7U869HR51J" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 00:31:49.962 +07:00 [DBG] The connection queue processing loop for 0HN7U869HR51J completed.
2024-11-07 00:31:49.964 +07:00 [DBG] Connection id "0HN7U869HR51J" stopped.
2024-11-07 00:31:49.966 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-07 00:31:50.178 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:31:50.180 +07:00 [DBG] No candidates found for the request path '/'
2024-11-07 00:31:50.182 +07:00 [DBG] Request did not match any endpoints
2024-11-07 00:31:50.186 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:31:50.191 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 227.0319ms
2024-11-07 00:31:50.194 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-07 00:31:52.428 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-07 00:31:52.437 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:31:52.438 +07:00 [DBG] No candidates found for the request path '/'
2024-11-07 00:31:52.439 +07:00 [DBG] Request did not match any endpoints
2024-11-07 00:31:52.439 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:31:52.440 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 12.1547ms
2024-11-07 00:31:52.441 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-07 00:32:02.660 +07:00 [DBG] Connection id "0HN7U869HR51K" accepted.
2024-11-07 00:32:02.661 +07:00 [DBG] Connection id "0HN7U869HR51K" started.
2024-11-07 00:32:02.662 +07:00 [DBG] Connection id "0HN7U869HR51L" accepted.
2024-11-07 00:32:02.663 +07:00 [DBG] Connection id "0HN7U869HR51L" started.
2024-11-07 00:32:02.674 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5169/ - null null
2024-11-07 00:32:02.683 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:32:02.693 +07:00 [DBG] Https port '7169' loaded from configuration.
2024-11-07 00:32:02.701 +07:00 [DBG] Redirecting to 'https://localhost:7169/'.
2024-11-07 00:32:02.709 +07:00 [DBG] Connection id "0HN7U869HR51K" completed keep alive response.
2024-11-07 00:32:02.710 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5169/ - 307 0 null 35.9238ms
2024-11-07 00:32:02.711 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-07 00:32:02.715 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:32:02.715 +07:00 [DBG] No candidates found for the request path '/'
2024-11-07 00:32:02.716 +07:00 [DBG] Request did not match any endpoints
2024-11-07 00:32:02.716 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:32:02.717 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 5.6756ms
2024-11-07 00:32:02.719 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-07 00:32:04.172 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-07 00:32:04.177 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:32:04.177 +07:00 [DBG] No candidates found for the request path '/'
2024-11-07 00:32:04.178 +07:00 [DBG] Request did not match any endpoints
2024-11-07 00:32:04.178 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:32:04.179 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 6.7912ms
2024-11-07 00:32:04.180 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-07 00:32:04.601 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-07 00:32:04.604 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:32:04.605 +07:00 [DBG] No candidates found for the request path '/'
2024-11-07 00:32:04.606 +07:00 [DBG] Request did not match any endpoints
2024-11-07 00:32:04.606 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:32:04.606 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 6.0871ms
2024-11-07 00:32:04.608 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-07 00:32:04.786 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-07 00:32:04.790 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:32:04.791 +07:00 [DBG] No candidates found for the request path '/'
2024-11-07 00:32:04.791 +07:00 [DBG] Request did not match any endpoints
2024-11-07 00:32:04.792 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:32:04.793 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 6.8636ms
2024-11-07 00:32:04.794 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-07 00:32:06.516 +07:00 [DBG] Connection id "0HN7U869HR51M" accepted.
2024-11-07 00:32:06.517 +07:00 [DBG] Connection id "0HN7U869HR51M" started.
2024-11-07 00:32:06.519 +07:00 [DBG] Connection 0HN7U869HR51M established using the following protocol: "Tls13"
2024-11-07 00:32:06.521 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 00:32:06.523 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 00:32:06.523 +07:00 [INF] CORS policy execution successful.
2024-11-07 00:32:06.524 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:32:06.526 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 00:32:06.528 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 00:32:06.531 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:32:06.532 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:32:06.534 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:32:06.539 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 00:32:06.540 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:32:06.541 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:32:06.544 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:32:06.545 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:32:06.545 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:32:06.547 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:32:06.555 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:32:06.556 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 00:32:06.558 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 00:32:06.559 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 00:32:06.560 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:32:06.560 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:32:06.561 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 00:32:06.561 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 00:32:06.562 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:32:06.562 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 00:32:06.563 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:06.564 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:06.564 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:06.565 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:32:06.565 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:06.566 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 00:32:06.566 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 00:32:06.567 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:32:06.568 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:32:06.568 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 00:32:06.569 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 00:32:06.569 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:32:06.570 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 00:32:06.570 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:32:06.571 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:32:06.571 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:32:06.572 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:32:06.582 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:32:06.592 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:32:06.594 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-07 00:32:06.595 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:06.609 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:06.612 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:32:06.612 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-07 00:32:06.613 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-07 00:32:06.617 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:32:06.627 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:32:06.629 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:06.629 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 00:32:06.631 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:06.631 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:32:06.634 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 00:32:06.635 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 00:32:06.636 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 00:32:06.636 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 00:32:06.637 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 00:32:06.638 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 00:32:06.640 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 94.2109ms
2024-11-07 00:32:06.641 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:32:06.641 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:32:06.642 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:06.642 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 00:32:06.643 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 2394 application/json; charset=utf-8 122.4105ms
2024-11-07 00:32:07.354 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 00:32:07.356 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 00:32:07.356 +07:00 [INF] CORS policy execution successful.
2024-11-07 00:32:07.357 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:32:07.358 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 00:32:07.358 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 00:32:07.359 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:32:07.360 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:32:07.360 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:32:07.361 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 00:32:07.361 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:32:07.362 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:32:07.363 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:32:07.363 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:32:07.364 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:32:07.365 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:32:07.366 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:32:07.367 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 00:32:07.367 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 00:32:07.369 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 00:32:07.370 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:32:07.371 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:32:07.372 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 00:32:07.373 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 00:32:07.374 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:32:07.375 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 00:32:07.375 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:07.376 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:07.378 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:07.378 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:32:07.379 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:07.380 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 00:32:07.381 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 00:32:07.382 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:32:07.382 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:32:07.383 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 00:32:07.383 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 00:32:07.384 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:32:07.384 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 00:32:07.385 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:32:07.385 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:32:07.386 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:32:07.386 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:32:07.388 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:32:07.390 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:32:07.391 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 00:32:07.391 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:07.394 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:07.394 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:32:07.395 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:32:07.396 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 00:32:07.397 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:32:07.399 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:32:07.400 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:07.401 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 00:32:07.402 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:07.402 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:32:07.403 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 00:32:07.404 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 00:32:07.405 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 00:32:07.405 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 00:32:07.405 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 00:32:07.406 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 00:32:07.407 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.5055ms
2024-11-07 00:32:07.407 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:32:07.408 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:32:07.409 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:07.410 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 00:32:07.411 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 2394 application/json; charset=utf-8 57.1815ms
2024-11-07 00:32:22.041 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-07 00:32:22.119 +07:00 [DBG] Hosting starting
2024-11-07 00:32:22.143 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-07 00:32:22.151 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-11-07 00:32:22.159 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-11-07 00:32:22.163 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-11-07 00:32:22.167 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-11-07 00:32:22.171 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-11-07 00:32:22.174 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-07 00:32:22.175 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-07 00:32:22.176 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-07 00:32:22.180 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-07 00:32:22.181 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-07 00:32:22.182 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-11-07 00:32:22.183 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-11-07 00:32:22.316 +07:00 [INF] Now listening on: https://localhost:7169
2024-11-07 00:32:22.316 +07:00 [INF] Now listening on: http://localhost:5169
2024-11-07 00:32:22.317 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-11-07 00:32:22.317 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-11-07 00:32:22.318 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-11-07 00:32:22.318 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-11-07 00:32:22.364 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-07 00:32:22.365 +07:00 [INF] Hosting environment: Development
2024-11-07 00:32:22.365 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\api\CityInfo.API
2024-11-07 00:32:22.366 +07:00 [DBG] Hosting started
2024-11-07 00:32:32.735 +07:00 [DBG] Connection id "0HN7UH3VGBS0L" accepted.
2024-11-07 00:32:32.737 +07:00 [DBG] Connection id "0HN7UH3VGBS0L" started.
2024-11-07 00:32:32.776 +07:00 [DBG] Connection 0HN7UH3VGBS0L established using the following protocol: "Tls13"
2024-11-07 00:32:32.806 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 00:32:32.811 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-07 00:32:32.814 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 00:32:32.815 +07:00 [INF] CORS policy execution successful.
2024-11-07 00:32:32.833 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:32:32.849 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 00:32:32.851 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 00:32:32.859 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:32:32.895 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:32:32.899 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:32:32.914 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 00:32:32.916 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:32:32.917 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:32:32.918 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:32:32.919 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:32:32.919 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:32:32.921 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:32:32.997 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-07 00:32:33.012 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:32:33.016 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 00:32:33.018 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 00:32:33.019 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 00:32:33.020 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:32:33.021 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:32:33.021 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 00:32:33.022 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 00:32:33.024 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:32:33.024 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 00:32:33.025 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:33.026 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:33.026 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:33.027 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:32:33.027 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:33.028 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 00:32:33.028 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 00:32:33.029 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:32:33.030 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:32:33.030 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 00:32:33.031 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 00:32:33.032 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:32:33.033 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 00:32:33.033 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:32:33.034 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:32:33.034 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:32:33.035 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:32:33.426 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:32:33.481 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .OrderBy(pt => pt.AppointmentTime)
    .Skip(__p_0)
    .Take(__p_1)
    .Select(ap => new AppointmentModel{ 
        AppointmentTime = ap.AppointmentTime, 
        AppointmentStatus = ap.AppointmentStatus, 
        AppointmentComment = ap.AppointmentComment, 
        PatientId = ap.PatientId, 
        DoctorId = ap.DoctorId, 
        Gender = ap.Patient.Gender, 
        Avatar = ap.Patient.Avatar, 
        FullName = ap.Patient.FullName, 
        Date = ap.Patient.Date, 
        Age = DateTime.Now.Year - ap.Patient.Date.Year - DateTime.Now < ap.Patient.Date.AddYears(DateTime.Now.Year - ap.Patient.Date.Year) ? 1 : 0 
    }
    )'
2024-11-07 00:32:33.628 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppointmentModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            AppointmentTime -> 0
            AppointmentStatus -> 1
            AppointmentComment -> 2
            PatientId -> 3
            DoctorId -> 4
            Gender -> 5
            Avatar -> 6
            FullName -> 7
            Date -> 8
            Age -> 9
        SELECT t.AppointmentTime, t.AppointmentStatus, t.AppointmentComment, t.PatientId, t.DoctorId, p.Gender, p.Avatar, p.FullName, p.Date, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM 
        (
            SELECT a.AppointmentComment, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId
            FROM Appointment AS a
            ORDER BY a.AppointmentTime ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        INNER JOIN Patient AS p ON t.PatientId == p.PatientId
        ORDER BY t.AppointmentTime ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppointmentModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-11-07 00:32:33.653 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:32:33.668 +07:00 [DBG] Created DbConnection. (14ms).
2024-11-07 00:32:33.672 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:33.869 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:33.872 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:32:33.876 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-07 00:32:33.882 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-11-07 00:32:33.888 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:32:33.917 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:32:33.926 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:33.931 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 10ms reading results.
2024-11-07 00:32:33.933 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:33.936 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (3ms).
2024-11-07 00:32:33.939 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 00:32:33.942 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 00:32:33.943 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 00:32:33.943 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 00:32:33.944 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 00:32:33.945 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 00:32:34.000 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 1078.4684ms
2024-11-07 00:32:34.002 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:32:34.006 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:32:34.010 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:34.015 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-11-07 00:32:34.021 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 2394 application/json; charset=utf-8 1217.7044ms
2024-11-07 00:32:34.287 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 00:32:34.289 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 00:32:34.290 +07:00 [INF] CORS policy execution successful.
2024-11-07 00:32:34.291 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:32:34.293 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 00:32:34.293 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 00:32:34.294 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:32:34.296 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:32:34.297 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:32:34.297 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 00:32:34.298 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:32:34.299 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:32:34.300 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:32:34.301 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:32:34.301 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:32:34.303 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:32:34.305 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:32:34.306 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 00:32:34.307 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 00:32:34.308 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 00:32:34.309 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:32:34.310 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:32:34.311 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 00:32:34.311 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 00:32:34.312 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:32:34.312 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 00:32:34.313 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:34.314 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:34.314 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:34.315 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:32:34.315 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 00:32:34.316 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 00:32:34.316 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 00:32:34.317 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:32:34.318 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:32:34.319 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 00:32:34.319 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 00:32:34.320 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:32:34.320 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 00:32:34.321 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:32:34.321 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:32:34.322 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:32:34.322 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:32:34.331 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:32:34.336 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:32:34.336 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 00:32:34.337 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:34.339 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:34.339 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:32:34.340 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:32:34.340 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 00:32:34.341 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:32:34.343 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:32:34.344 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:34.345 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 00:32:34.346 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:34.346 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:32:34.347 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 00:32:34.349 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 00:32:34.349 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 00:32:34.350 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 00:32:34.350 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 00:32:34.351 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 00:32:34.353 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.2554ms
2024-11-07 00:32:34.354 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:32:34.354 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:32:34.355 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:32:34.356 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 00:32:34.356 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 2394 application/json; charset=utf-8 69.9487ms
2024-11-07 00:32:40.954 +07:00 [DBG] Connection id "0HN7UH3VGBS0M" accepted.
2024-11-07 00:32:40.956 +07:00 [DBG] Connection id "0HN7UH3VGBS0M" started.
2024-11-07 00:32:40.960 +07:00 [DBG] Connection 0HN7UH3VGBS0M established using the following protocol: "Tls13"
2024-11-07 00:32:40.962 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-07 00:32:41.031 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:32:41.032 +07:00 [DBG] No candidates found for the request path '/'
2024-11-07 00:32:41.033 +07:00 [DBG] Request did not match any endpoints
2024-11-07 00:32:41.035 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:32:41.037 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 75.3929ms
2024-11-07 00:32:41.039 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-07 00:33:18.080 +07:00 [DBG] Connection id "0HN7UH3VGBS0N" accepted.
2024-11-07 00:33:18.081 +07:00 [DBG] Connection id "0HN7UH3VGBS0N" started.
2024-11-07 00:33:18.082 +07:00 [DBG] Connection id "0HN7UH3VGBS0O" accepted.
2024-11-07 00:33:18.088 +07:00 [DBG] Connection id "0HN7UH3VGBS0O" started.
2024-11-07 00:33:18.091 +07:00 [DBG] Connection 0HN7UH3VGBS0N established using the following protocol: "Tls13"
2024-11-07 00:33:18.091 +07:00 [DBG] Connection 0HN7UH3VGBS0O established using the following protocol: "Tls13"
2024-11-07 00:33:18.091 +07:00 [DBG] Connection id "0HN7UH3VGBS0O" received FIN.
2024-11-07 00:33:18.101 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger - null null
2024-11-07 00:33:18.103 +07:00 [DBG] Connection id "0HN7UH3VGBS0O" is closed. The last processed stream ID was 0.
2024-11-07 00:33:18.104 +07:00 [DBG] Connection id "0HN7UH3VGBS0O" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 00:33:18.105 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS0O completed.
2024-11-07 00:33:18.108 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger - 301 0 null 7.9363ms
2024-11-07 00:33:18.109 +07:00 [DBG] Connection id "0HN7UH3VGBS0O" stopped.
2024-11-07 00:33:18.111 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-11-07 00:33:18.146 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-11-07 00:33:18.147 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-11-07 00:33:18.160 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-11-07 00:33:18.161 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-11-07 00:33:18.162 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 50.9678ms
2024-11-07 00:33:18.172 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - null null
2024-11-07 00:33:18.172 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui.css - null null
2024-11-07 00:33:18.172 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-11-07 00:33:18.172 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - null null
2024-11-07 00:33:18.181 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 9.2752ms
2024-11-07 00:33:18.205 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-11-07 00:33:18.205 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-11-07 00:33:18.210 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 38.0296ms
2024-11-07 00:33:18.210 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui.css - 200 143943 text/css 37.9588ms
2024-11-07 00:33:18.213 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-11-07 00:33:18.215 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 43.8151ms
2024-11-07 00:33:18.354 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-11-07 00:33:18.419 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.3752ms
2024-11-07 00:33:18.442 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/favicon-32x32.png - null null
2024-11-07 00:33:18.443 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-11-07 00:33:18.444 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/favicon-32x32.png - 200 628 image/png 2.3432ms
2024-11-07 00:33:18.563 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-11-07 00:33:18.686 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 123.2213ms
2024-11-07 00:33:59.355 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Patient/5a291664-d4a6-4f6b-a4ba-08dcf00bc5d5 - null null
2024-11-07 00:33:59.357 +07:00 [DBG] The request has an origin header: 'https://localhost:7169'.
2024-11-07 00:33:59.357 +07:00 [INF] CORS policy execution failed.
2024-11-07 00:33:59.358 +07:00 [INF] Request origin https://localhost:7169 does not have permission to access the resource.
2024-11-07 00:33:59.359 +07:00 [DBG] DELETE requests are not supported
2024-11-07 00:33:59.359 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/5a291664-d4a6-4f6b-a4ba-08dcf00bc5d5'
2024-11-07 00:33:59.360 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.Delete (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/5a291664-d4a6-4f6b-a4ba-08dcf00bc5d5'
2024-11-07 00:33:59.361 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.Delete (CityInfo.API)'
2024-11-07 00:33:59.361 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:33:59.362 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.Delete (CityInfo.API)'
2024-11-07 00:33:59.365 +07:00 [INF] Route matched with {action = "Delete", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-07 00:33:59.366 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:33:59.366 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:33:59.367 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:33:59.368 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:33:59.368 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:33:59.369 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-07 00:33:59.371 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-07 00:33:59.372 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-07 00:33:59.372 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-07 00:33:59.373 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-07 00:33:59.374 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-07 00:33:59.374 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-07 00:33:59.375 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-07 00:33:59.413 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:33:59.415 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __id_0)'
2024-11-07 00:33:59.443 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-11-07 00:33:59.445 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:33:59.445 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 00:33:59.446 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:33:59.447 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:33:59.447 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:33:59.448 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:33:59.448 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:33:59.449 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__id_0
2024-11-07 00:33:59.458 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__id_0
2024-11-07 00:33:59.479 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-07 00:33:59.504 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:33:59.504 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 45ms reading results.
2024-11-07 00:33:59.505 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:33:59.506 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:33:59.513 +07:00 [DBG] An entity of type 'Patient' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-07 00:33:59.519 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-11-07 00:33:59.520 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-11-07 00:33:59.533 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-11-07 00:33:59.573 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:33:59.574 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:33:59.576 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:33:59.576 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:33:59.577 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 00:33:59.578 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Patient]
OUTPUT 1
WHERE [PatientId] = @p0;
2024-11-07 00:33:59.591 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Patient]
OUTPUT 1
WHERE [PatientId] = @p0;
2024-11-07 00:33:59.594 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:33:59.595 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-07 00:33:59.596 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:33:59.597 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:33:59.601 +07:00 [DBG] An entity of type 'Patient' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-07 00:33:59.602 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-11-07 00:33:59.603 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-11-07 00:33:59.604 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.Delete (CityInfo.API) in 234.8539ms
2024-11-07 00:33:59.604 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.Delete (CityInfo.API)'
2024-11-07 00:33:59.605 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:33:59.605 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:33:59.606 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 00:33:59.607 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Patient/5a291664-d4a6-4f6b-a4ba-08dcf00bc5d5 - 200 0 null 252.2445ms
2024-11-07 00:34:04.871 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7169/api/Patient/5bae7df7-3f00-4a4f-a4bc-08dcf00bc5d5 - null null
2024-11-07 00:34:04.872 +07:00 [DBG] The request has an origin header: 'https://localhost:7169'.
2024-11-07 00:34:04.873 +07:00 [INF] CORS policy execution failed.
2024-11-07 00:34:04.874 +07:00 [INF] Request origin https://localhost:7169 does not have permission to access the resource.
2024-11-07 00:34:04.874 +07:00 [DBG] DELETE requests are not supported
2024-11-07 00:34:04.875 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/5bae7df7-3f00-4a4f-a4bc-08dcf00bc5d5'
2024-11-07 00:34:04.875 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.Delete (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/5bae7df7-3f00-4a4f-a4bc-08dcf00bc5d5'
2024-11-07 00:34:04.876 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.Delete (CityInfo.API)'
2024-11-07 00:34:04.877 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:34:04.877 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.Delete (CityInfo.API)'
2024-11-07 00:34:04.878 +07:00 [INF] Route matched with {action = "Delete", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Delete(System.Guid) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-07 00:34:04.879 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:34:04.880 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:34:04.880 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:34:04.881 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:34:04.882 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:34:04.883 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-07 00:34:04.884 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-07 00:34:04.885 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-07 00:34:04.885 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-07 00:34:04.886 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-07 00:34:04.887 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-07 00:34:04.887 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-07 00:34:04.888 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-07 00:34:04.889 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:34:04.890 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:34:04.890 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 00:34:04.891 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:34:04.892 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:34:04.892 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:34:04.893 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:34:04.893 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:34:04.894 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__id_0
2024-11-07 00:34:04.895 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__id_0
2024-11-07 00:34:04.896 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-07 00:34:04.897 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:34:04.897 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 00:34:04.898 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:34:04.899 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:34:04.900 +07:00 [DBG] An entity of type 'Patient' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-07 00:34:04.900 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-11-07 00:34:04.901 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-11-07 00:34:04.901 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-11-07 00:34:04.902 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:34:04.903 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:34:04.903 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:34:04.904 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:34:04.904 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:34:04.905 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Patient]
OUTPUT 1
WHERE [PatientId] = @p0;
2024-11-07 00:34:04.906 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Patient]
OUTPUT 1
WHERE [PatientId] = @p0;
2024-11-07 00:34:04.907 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:34:04.908 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 00:34:04.908 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:34:04.909 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:34:04.910 +07:00 [DBG] An entity of type 'Patient' tracked by 'DoctorManagementContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-07 00:34:04.910 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-11-07 00:34:04.911 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-11-07 00:34:04.911 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.Delete (CityInfo.API) in 28.7555ms
2024-11-07 00:34:04.912 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.Delete (CityInfo.API)'
2024-11-07 00:34:04.913 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:34:04.913 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:34:04.914 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 00:34:04.914 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7169/api/Patient/5bae7df7-3f00-4a4f-a4bc-08dcf00bc5d5 - 200 0 null 43.4684ms
2024-11-07 00:34:18.305 +07:00 [DBG] Connection id "0HN7UH3VGBS0N" received FIN.
2024-11-07 00:34:18.306 +07:00 [DBG] Connection id "0HN7UH3VGBS0L" received FIN.
2024-11-07 00:34:18.306 +07:00 [DBG] Connection id "0HN7UH3VGBS0M" received FIN.
2024-11-07 00:34:18.316 +07:00 [DBG] Connection id "0HN7UH3VGBS0L" is closed. The last processed stream ID was 3.
2024-11-07 00:34:18.317 +07:00 [DBG] Connection id "0HN7UH3VGBS0M" is closed. The last processed stream ID was 1.
2024-11-07 00:34:18.324 +07:00 [DBG] Connection id "0HN7UH3VGBS0L" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 00:34:18.310 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS0N completed.
2024-11-07 00:34:18.308 +07:00 [DBG] Connection id "0HN7UH3VGBS0N" is closed. The last processed stream ID was 21.
2024-11-07 00:34:18.330 +07:00 [DBG] Connection id "0HN7UH3VGBS0M" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 00:34:18.336 +07:00 [DBG] Connection id "0HN7UH3VGBS0N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 00:34:18.317 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS0M completed.
2024-11-07 00:34:18.326 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS0L completed.
2024-11-07 00:34:18.340 +07:00 [DBG] Connection id "0HN7UH3VGBS0M" stopped.
2024-11-07 00:34:18.340 +07:00 [DBG] Connection id "0HN7UH3VGBS0L" stopped.
2024-11-07 00:34:18.348 +07:00 [DBG] Connection id "0HN7UH3VGBS0N" stopped.
2024-11-07 00:54:47.942 +07:00 [DBG] Connection id "0HN7UH3VGBS0P" accepted.
2024-11-07 00:54:47.947 +07:00 [DBG] Connection id "0HN7UH3VGBS0P" started.
2024-11-07 00:54:47.971 +07:00 [DBG] Connection 0HN7UH3VGBS0P established using the following protocol: "Tls13"
2024-11-07 00:54:47.984 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 00:54:47.992 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 00:54:47.994 +07:00 [INF] CORS policy execution successful.
2024-11-07 00:54:47.998 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:54:48.000 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 00:54:48.001 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 00:54:48.005 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:54:48.008 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:54:48.012 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:54:48.016 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 00:54:48.018 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:54:48.019 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:54:48.020 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:54:48.021 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:54:48.022 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:54:48.023 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:54:48.038 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:54:48.039 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 00:54:48.041 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 00:54:48.042 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 00:54:48.042 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:54:48.043 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:54:48.044 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 00:54:48.044 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 00:54:48.045 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:54:48.046 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 00:54:48.047 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 00:54:48.047 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:54:48.048 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:54:48.049 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:54:48.049 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 00:54:48.050 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 00:54:48.050 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 00:54:48.051 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:54:48.052 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:54:48.053 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 00:54:48.053 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 00:54:48.054 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:54:48.054 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 00:54:48.055 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:54:48.056 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:54:48.056 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:54:48.057 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:54:48.068 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:54:48.081 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:54:48.083 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-07 00:54:48.083 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:54:48.098 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:54:48.099 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:54:48.100 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:54:48.101 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-07 00:54:48.103 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:54:48.112 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:54:48.113 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:54:48.114 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 00:54:48.115 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:54:48.116 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:54:48.118 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 00:54:48.119 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 00:54:48.120 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 00:54:48.120 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 00:54:48.120 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 00:54:48.121 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 00:54:48.124 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 101.07ms
2024-11-07 00:54:48.125 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:54:48.126 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:54:48.126 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:54:48.127 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 00:54:48.128 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 147.4061ms
2024-11-07 00:54:49.425 +07:00 [DBG] Connection id "0HN7UH3VGBS0P" received FIN.
2024-11-07 00:54:49.428 +07:00 [DBG] Connection id "0HN7UH3VGBS0P" is closed. The last processed stream ID was 1.
2024-11-07 00:54:49.430 +07:00 [DBG] Connection id "0HN7UH3VGBS0P" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 00:54:49.429 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS0P completed.
2024-11-07 00:54:49.432 +07:00 [DBG] Connection id "0HN7UH3VGBS0P" stopped.
2024-11-07 00:55:55.005 +07:00 [DBG] Connection id "0HN7UH3VGBS0Q" accepted.
2024-11-07 00:55:55.006 +07:00 [DBG] Connection id "0HN7UH3VGBS0Q" started.
2024-11-07 00:55:55.014 +07:00 [DBG] Connection 0HN7UH3VGBS0Q established using the following protocol: "Tls13"
2024-11-07 00:55:55.020 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-07 00:55:55.026 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 00:55:55.027 +07:00 [INF] CORS policy execution successful.
2024-11-07 00:55:55.027 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:55:55.028 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 00:55:55.029 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 00:55:55.030 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:55:55.030 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:55:55.031 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:55:55.032 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 00:55:55.033 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:55:55.033 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:55:55.034 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:55:55.035 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:55:55.036 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:55:55.037 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:55:55.038 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:55:55.039 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 00:55:55.040 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 00:55:55.041 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 00:55:55.042 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:55:55.043 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:55:55.043 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 00:55:55.044 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 00:55:55.045 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:55:55.045 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 00:55:55.046 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 00:55:55.047 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:55:55.047 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:55:55.048 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:55:55.049 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 00:55:55.049 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 00:55:55.050 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 00:55:55.051 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:55:55.051 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:55:55.052 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 00:55:55.053 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 00:55:55.053 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:55:55.054 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 00:55:55.055 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:55:55.055 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:55:55.056 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:55:55.057 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:55:55.058 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:55:55.066 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .OrderBy(pt => pt.AppointmentTime)
    .Select(ap => new AppointmentModel{ 
        AppointmentTime = ap.AppointmentTime, 
        AppointmentStatus = ap.AppointmentStatus, 
        AppointmentComment = ap.AppointmentComment, 
        PatientId = ap.PatientId, 
        DoctorId = ap.DoctorId, 
        Gender = ap.Patient.Gender, 
        Avatar = ap.Patient.Avatar, 
        FullName = ap.Patient.FullName, 
        Date = ap.Patient.Date, 
        Age = DateTime.Now.Year - ap.Patient.Date.Year - DateTime.Now < ap.Patient.Date.AddYears(DateTime.Now.Year - ap.Patient.Date.Year) ? 1 : 0 
    }
    )'
2024-11-07 00:55:55.167 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppointmentModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            AppointmentTime -> 0
            AppointmentStatus -> 1
            AppointmentComment -> 2
            PatientId -> 3
            DoctorId -> 4
            Gender -> 5
            Avatar -> 6
            FullName -> 7
            Date -> 8
            Age -> 9
        SELECT a.AppointmentTime, a.AppointmentStatus, a.AppointmentComment, a.PatientId, a.DoctorId, p.Gender, p.Avatar, p.FullName, p.Date, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM Appointment AS a
        INNER JOIN Patient AS p ON a.PatientId == p.PatientId
        ORDER BY a.AppointmentTime ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppointmentModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-11-07 00:55:55.171 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:55:55.172 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-07 00:55:55.173 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:55:55.173 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:55:55.174 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:55:55.175 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:55:55.175 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 00:55:55.177 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-07 00:55:55.188 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-07 00:55:55.190 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:55:55.191 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 00:55:55.191 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:55:55.192 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:55:55.193 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 00:55:55.194 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 00:55:55.194 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 00:55:55.195 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 00:55:55.195 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 00:55:55.196 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 00:55:55.214 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 177.0089ms
2024-11-07 00:55:55.215 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:55:55.215 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:55:55.216 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:55:55.217 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 00:55:55.219 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 6741 application/json; charset=utf-8 197.4365ms
2024-11-07 00:56:41.632 +07:00 [DBG] Connection id "0HN7UH3VGBS0R" accepted.
2024-11-07 00:56:41.633 +07:00 [DBG] Connection id "0HN7UH3VGBS0R" started.
2024-11-07 00:56:41.641 +07:00 [DBG] Connection 0HN7UH3VGBS0R established using the following protocol: "Tls13"
2024-11-07 00:56:41.645 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0 - null null
2024-11-07 00:56:41.647 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:56:41.648 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-07 00:56:41.649 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-07 00:56:41.650 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-07 00:56:41.650 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:56:41.651 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-07 00:56:41.660 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-07 00:56:41.661 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:56:41.661 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:56:41.662 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:56:41.663 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:56:41.664 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:56:41.665 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-07 00:56:41.666 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-07 00:56:41.667 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 00:56:41.668 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 00:56:41.668 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 00:56:41.669 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:56:41.670 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:56:41.670 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 00:56:41.672 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 00:56:41.674 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:56:41.675 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 00:56:41.675 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 00:56:41.676 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:56:41.676 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:56:41.677 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:56:41.677 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 00:56:41.678 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 00:56:41.679 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 00:56:41.679 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:56:41.680 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:56:41.680 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 00:56:41.681 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 00:56:41.682 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:56:41.682 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 00:56:41.683 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:56:41.684 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:56:41.684 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:56:41.685 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:56:41.689 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:56:41.693 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .OrderBy(pt => pt.FullName)
    .Select(pt => new PatientModel{ 
        Status = pt.Status, 
        Gender = pt.Gender, 
        Avatar = pt.Avatar, 
        FullName = pt.FullName, 
        Date = pt.Date, 
        Location = pt.Location, 
        Email = pt.Email, 
        PhoneNumber = pt.PhoneNumber, 
        Diseases = pt.Diseases, 
        PaymentId = pt.PaymentId, 
        Age = DateTime.Now.Year - pt.Date.Year - DateTime.Now < pt.Date.AddYears(DateTime.Now.Year - pt.Date.Year) ? 1 : 0 
    }
    )'
2024-11-07 00:56:41.697 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PatientModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Status -> 0
            Gender -> 1
            Avatar -> 2
            FullName -> 3
            Date -> 4
            Location -> 5
            Email -> 6
            PhoneNumber -> 7
            Diseases -> 8
            PaymentId -> 9
            Age -> 10
        SELECT p.Status, p.Gender, p.Avatar, p.FullName, p.Date, p.Location, p.Email, p.PhoneNumber, p.Diseases, p.PaymentId, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM Patient AS p
        ORDER BY p.FullName ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PatientModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-11-07 00:56:41.699 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:56:41.699 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 00:56:41.700 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:56:41.700 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:56:41.701 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:56:41.701 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:56:41.702 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:56:41.702 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
2024-11-07 00:56:41.706 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
2024-11-07 00:56:41.708 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:56:41.709 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 00:56:41.710 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:56:41.710 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:56:41.711 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 00:56:41.712 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 00:56:41.712 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 00:56:41.713 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 00:56:41.713 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 00:56:41.714 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 00:56:41.762 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 97.2271ms
2024-11-07 00:56:41.763 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-07 00:56:41.763 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:56:41.764 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:56:41.765 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 00:56:41.765 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0 - 200 21965 application/json; charset=utf-8 120.7096ms
2024-11-07 00:57:34.214 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 00:57:34.216 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 00:57:34.220 +07:00 [INF] CORS policy execution successful.
2024-11-07 00:57:34.220 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:57:34.221 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 00:57:34.221 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 00:57:34.222 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:57:34.223 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:57:34.223 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:57:34.223 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 00:57:34.224 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:57:34.225 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:57:34.226 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:57:34.227 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:57:34.228 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:57:34.229 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:57:34.230 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:57:34.230 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 00:57:34.231 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 00:57:34.231 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 00:57:34.232 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:57:34.233 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:57:34.233 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 00:57:34.234 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 00:57:34.235 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:57:34.236 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 00:57:34.236 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 00:57:34.237 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:57:34.238 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:57:34.238 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:57:34.239 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 00:57:34.239 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 00:57:34.240 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 00:57:34.241 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:57:34.242 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:57:34.243 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 00:57:34.244 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 00:57:34.244 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:57:34.245 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 00:57:34.246 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:57:34.246 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:57:34.247 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:57:34.247 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:57:34.249 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:57:34.251 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:57:34.251 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 00:57:34.252 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:57:34.253 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:57:34.253 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:57:34.254 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:57:34.254 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 00:57:34.255 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:57:34.260 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:57:34.261 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:57:34.261 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 00:57:34.262 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:57:34.263 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-07 00:57:34.264 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 00:57:34.265 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 00:57:34.265 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 00:57:34.266 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 00:57:34.266 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 00:57:34.266 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 00:57:34.267 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.3426ms
2024-11-07 00:57:34.268 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:57:34.268 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:57:34.270 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:57:34.275 +07:00 [DBG] Disposed connection to database '' on server '' (4ms).
2024-11-07 00:57:34.276 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 62.0926ms
2024-11-07 00:58:09.757 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 00:58:09.763 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 00:58:09.764 +07:00 [INF] CORS policy execution successful.
2024-11-07 00:58:09.765 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:58:09.765 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 00:58:09.766 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 00:58:09.767 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:58:09.767 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:58:09.768 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:58:09.768 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 00:58:09.769 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:58:09.770 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:58:09.771 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:58:09.772 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:58:09.772 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:58:09.773 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:58:09.774 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:58:09.775 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 00:58:09.776 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 00:58:09.777 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 00:58:09.778 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:58:09.779 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:58:09.780 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 00:58:09.781 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 00:58:09.781 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:58:09.782 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 00:58:09.783 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 00:58:09.784 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:58:09.784 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:58:09.785 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:58:09.785 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 00:58:09.786 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 00:58:09.787 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 00:58:09.787 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:58:09.788 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:58:09.788 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 00:58:09.789 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 00:58:09.789 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:58:09.790 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 00:58:09.791 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:58:09.792 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:58:09.793 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:58:09.793 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:58:09.795 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:58:09.797 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:58:09.798 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 00:58:09.798 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:09.799 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:09.800 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:58:09.800 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:58:09.801 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 00:58:09.801 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:58:09.806 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:58:09.808 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:09.808 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 00:58:09.809 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:09.810 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:58:09.810 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 00:58:09.812 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 00:58:09.812 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 00:58:09.812 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 00:58:09.813 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 00:58:09.813 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 00:58:09.814 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.1212ms
2024-11-07 00:58:09.815 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:58:09.816 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:58:09.816 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:09.817 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 00:58:09.818 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 61.0556ms
2024-11-07 00:58:21.632 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 00:58:21.635 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 00:58:21.635 +07:00 [INF] CORS policy execution successful.
2024-11-07 00:58:21.636 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:58:21.637 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 00:58:21.638 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 00:58:21.638 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:58:21.639 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:58:21.640 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:58:21.640 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 00:58:21.641 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:58:21.642 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:58:21.643 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:58:21.645 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:58:21.645 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:58:21.647 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:58:21.648 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:58:21.648 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 00:58:21.649 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 00:58:21.649 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 00:58:21.650 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:58:21.651 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:58:21.651 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 00:58:21.652 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 00:58:21.652 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:58:21.653 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 00:58:21.654 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 00:58:21.654 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:58:21.655 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:58:21.655 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:58:21.656 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 00:58:21.656 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 00:58:21.657 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 00:58:21.658 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:58:21.658 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:58:21.659 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 00:58:21.660 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 00:58:21.660 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:58:21.661 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 00:58:21.662 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:58:21.662 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:58:21.663 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:58:21.664 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:58:21.665 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:58:21.667 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:58:21.668 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 00:58:21.668 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:21.669 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:21.670 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:58:21.670 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:58:21.671 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:58:21.671 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:58:21.677 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:58:21.678 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:21.679 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 00:58:21.680 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:21.680 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:58:21.681 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 00:58:21.682 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 00:58:21.682 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 00:58:21.682 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 00:58:21.683 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 00:58:21.683 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 00:58:21.684 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.9451ms
2024-11-07 00:58:21.685 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:58:21.686 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:58:21.686 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:21.687 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 00:58:21.688 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 55.189ms
2024-11-07 00:58:34.406 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 00:58:34.408 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 00:58:34.409 +07:00 [INF] CORS policy execution successful.
2024-11-07 00:58:34.409 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:58:34.411 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 00:58:34.412 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 00:58:34.413 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:58:34.413 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:58:34.414 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:58:34.415 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 00:58:34.416 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:58:34.416 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:58:34.417 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:58:34.418 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:58:34.418 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:58:34.419 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:58:34.420 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:58:34.421 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 00:58:34.423 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 00:58:34.424 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 00:58:34.425 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:58:34.425 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:58:34.426 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 00:58:34.427 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 00:58:34.427 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:58:34.428 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 00:58:34.428 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 00:58:34.429 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:58:34.430 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:58:34.430 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:58:34.431 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 00:58:34.431 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 00:58:34.432 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 00:58:34.432 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:58:34.433 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:58:34.433 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 00:58:34.434 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 00:58:34.434 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:58:34.435 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 00:58:34.435 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:58:34.436 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:58:34.436 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:58:34.437 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:58:34.439 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:58:34.441 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:58:34.441 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 00:58:34.441 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:34.442 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:34.443 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:58:34.443 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:58:34.444 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 00:58:34.444 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:58:34.449 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:58:34.450 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:34.451 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 00:58:34.451 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:34.452 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:58:34.452 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 00:58:34.454 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 00:58:34.454 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 00:58:34.454 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 00:58:34.455 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 00:58:34.455 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 00:58:34.456 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.7565ms
2024-11-07 00:58:34.457 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:58:34.458 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:58:34.458 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:58:34.459 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 00:58:34.459 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 53.4714ms
2024-11-07 00:59:14.792 +07:00 [DBG] Connection id "0HN7UH3VGBS0R" received FIN.
2024-11-07 00:59:14.793 +07:00 [DBG] Connection id "0HN7UH3VGBS0Q" received FIN.
2024-11-07 00:59:14.794 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS0R completed.
2024-11-07 00:59:14.794 +07:00 [DBG] Connection id "0HN7UH3VGBS0R" is closed. The last processed stream ID was 1.
2024-11-07 00:59:14.824 +07:00 [DBG] Connection id "0HN7UH3VGBS0Q" is closed. The last processed stream ID was 9.
2024-11-07 00:59:14.829 +07:00 [DBG] Connection id "0HN7UH3VGBS0R" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 00:59:14.826 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS0Q completed.
2024-11-07 00:59:14.831 +07:00 [DBG] Connection id "0HN7UH3VGBS0Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 00:59:14.833 +07:00 [DBG] Connection id "0HN7UH3VGBS0R" stopped.
2024-11-07 00:59:14.837 +07:00 [DBG] Connection id "0HN7UH3VGBS0Q" stopped.
2024-11-07 00:59:53.407 +07:00 [DBG] Connection id "0HN7UH3VGBS0S" accepted.
2024-11-07 00:59:53.412 +07:00 [DBG] Connection id "0HN7UH3VGBS0S" started.
2024-11-07 00:59:53.416 +07:00 [DBG] Connection 0HN7UH3VGBS0S established using the following protocol: "Tls13"
2024-11-07 00:59:53.422 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 00:59:53.426 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 00:59:53.427 +07:00 [INF] CORS policy execution successful.
2024-11-07 00:59:53.427 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 00:59:53.428 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 00:59:53.429 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 00:59:53.429 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:59:53.430 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 00:59:53.431 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:59:53.432 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 00:59:53.433 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 00:59:53.433 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 00:59:53.434 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:59:53.439 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 00:59:53.439 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 00:59:53.440 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:59:53.441 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 00:59:53.442 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 00:59:53.442 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 00:59:53.443 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 00:59:53.444 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:59:53.445 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 00:59:53.445 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 00:59:53.446 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 00:59:53.447 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:59:53.448 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 00:59:53.448 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 00:59:53.449 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:59:53.449 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 00:59:53.450 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 00:59:53.450 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 00:59:53.451 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 00:59:53.452 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 00:59:53.452 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:59:53.453 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 00:59:53.453 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 00:59:53.454 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 00:59:53.455 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:59:53.455 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 00:59:53.456 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:59:53.456 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:59:53.457 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 00:59:53.457 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 00:59:53.460 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 00:59:53.462 +07:00 [DBG] Creating DbConnection.
2024-11-07 00:59:53.463 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 00:59:53.463 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:59:53.464 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:59:53.465 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 00:59:53.466 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 00:59:53.467 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 00:59:53.467 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:59:53.477 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 00:59:53.479 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:59:53.479 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 00:59:53.480 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:59:53.480 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 00:59:53.481 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 00:59:53.482 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 00:59:53.483 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 00:59:53.484 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 00:59:53.484 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 00:59:53.485 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 00:59:53.486 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 45.7483ms
2024-11-07 00:59:53.487 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 00:59:53.487 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 00:59:53.488 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 00:59:53.489 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 00:59:53.490 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 68.0019ms
2024-11-07 00:59:54.845 +07:00 [DBG] Connection id "0HN7UH3VGBS0S" received FIN.
2024-11-07 00:59:54.846 +07:00 [DBG] Connection id "0HN7UH3VGBS0S" is closed. The last processed stream ID was 1.
2024-11-07 00:59:54.846 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS0S completed.
2024-11-07 00:59:54.847 +07:00 [DBG] Connection id "0HN7UH3VGBS0S" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 00:59:54.858 +07:00 [DBG] Connection id "0HN7UH3VGBS0S" stopped.
2024-11-07 01:00:21.027 +07:00 [DBG] Connection id "0HN7UH3VGBS0T" accepted.
2024-11-07 01:00:21.028 +07:00 [DBG] Connection id "0HN7UH3VGBS0T" started.
2024-11-07 01:00:21.038 +07:00 [DBG] Connection 0HN7UH3VGBS0T established using the following protocol: "Tls13"
2024-11-07 01:00:21.047 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:00:21.050 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:00:21.051 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:00:21.052 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:00:21.053 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:00:21.054 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:00:21.056 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:00:21.058 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:00:21.059 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:00:21.061 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:00:21.062 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:00:21.063 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:00:21.065 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:00:21.067 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:00:21.068 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:00:21.069 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:00:21.070 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:00:21.072 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:00:21.073 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:00:21.074 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:00:21.075 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:00:21.075 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:00:21.076 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:00:21.078 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:00:21.079 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:00:21.080 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:00:21.081 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:21.081 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:21.083 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:21.084 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:00:21.085 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:21.086 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:00:21.087 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:00:21.087 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:00:21.088 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:00:21.089 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:00:21.089 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:00:21.090 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:00:21.090 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:00:21.091 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:00:21.092 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:00:21.093 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:00:21.094 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:00:21.095 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:00:21.097 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:00:21.097 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:00:21.098 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:21.100 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:21.101 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:00:21.102 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:00:21.102 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:00:21.103 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:00:21.119 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:00:21.121 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:21.122 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 01:00:21.122 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:21.123 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:00:21.124 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:00:21.125 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:00:21.126 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:00:21.126 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:00:21.127 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:00:21.128 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:00:21.129 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 59.302ms
2024-11-07 01:00:21.129 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:00:21.130 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:00:21.131 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:21.132 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:00:21.132 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 86.798ms
2024-11-07 01:00:24.569 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:00:24.572 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:00:24.572 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:00:24.573 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:00:24.574 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:00:24.574 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:00:24.575 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:00:24.576 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:00:24.577 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:00:24.578 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:00:24.579 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:00:24.580 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:00:24.581 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:00:24.583 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:00:24.584 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:00:24.586 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:00:24.589 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:00:24.590 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:00:24.591 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:00:24.592 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:00:24.593 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:00:24.594 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:00:24.594 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:00:24.595 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:00:24.596 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:00:24.596 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:00:24.597 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:24.598 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:24.598 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:24.599 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:00:24.600 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:24.600 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:00:24.601 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:00:24.602 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:00:24.603 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:00:24.603 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:00:24.604 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:00:24.605 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:00:24.606 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:00:24.607 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:00:24.608 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:00:24.608 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:00:24.609 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:00:24.610 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:00:24.612 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:00:24.613 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:00:24.613 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:24.615 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:24.616 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:00:24.616 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:00:24.617 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:00:24.618 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:00:24.624 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:00:24.626 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:24.627 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 01:00:24.627 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:24.628 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:00:24.629 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:00:24.630 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:00:24.630 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:00:24.631 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:00:24.631 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:00:24.632 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:00:24.633 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 46.8054ms
2024-11-07 01:00:24.634 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:00:24.634 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:00:24.635 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:24.636 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:00:24.637 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 68.1446ms
2024-11-07 01:00:24.868 +07:00 [DBG] Connection id "0HN7UH3VGBS0T" received FIN.
2024-11-07 01:00:24.870 +07:00 [DBG] Connection id "0HN7UH3VGBS0T" is closed. The last processed stream ID was 3.
2024-11-07 01:00:24.870 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS0T completed.
2024-11-07 01:00:24.870 +07:00 [DBG] Connection id "0HN7UH3VGBS0T" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 01:00:24.881 +07:00 [DBG] Connection id "0HN7UH3VGBS0T" stopped.
2024-11-07 01:00:49.500 +07:00 [DBG] Connection id "0HN7UH3VGBS0U" accepted.
2024-11-07 01:00:49.504 +07:00 [DBG] Connection id "0HN7UH3VGBS0U" started.
2024-11-07 01:00:49.509 +07:00 [DBG] Connection 0HN7UH3VGBS0U established using the following protocol: "Tls13"
2024-11-07 01:00:49.514 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:00:49.520 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:00:49.521 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:00:49.521 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:00:49.522 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:00:49.523 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:00:49.524 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:00:49.525 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:00:49.526 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:00:49.527 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:00:49.528 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:00:49.528 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:00:49.529 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:00:49.530 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:00:49.531 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:00:49.532 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:00:49.533 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:00:49.534 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:00:49.535 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:00:49.536 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:00:49.537 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:00:49.538 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:00:49.539 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:00:49.540 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:00:49.541 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:00:49.542 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:00:49.543 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:49.545 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:49.546 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:49.548 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:00:49.548 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:49.549 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:00:49.550 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:00:49.551 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:00:49.552 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:00:49.554 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:00:49.555 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:00:49.556 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:00:49.558 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:00:49.559 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:00:49.560 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:00:49.561 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:00:49.561 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:00:49.563 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:00:49.566 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:00:49.567 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:00:49.568 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:49.569 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:49.570 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:00:49.570 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:00:49.571 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:00:49.572 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:00:49.578 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:00:49.580 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:49.581 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 01:00:49.582 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:49.583 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:00:49.584 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:00:49.586 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:00:49.586 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:00:49.587 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:00:49.587 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:00:49.588 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:00:49.589 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 56.7281ms
2024-11-07 01:00:49.590 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:00:49.590 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:00:49.591 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:49.592 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:00:49.593 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 79.2088ms
2024-11-07 01:00:58.020 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:00:58.025 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:00:58.028 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:00:58.031 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:00:58.032 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:00:58.033 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:00:58.035 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:00:58.037 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:00:58.038 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:00:58.039 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:00:58.040 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:00:58.041 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:00:58.043 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:00:58.046 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:00:58.048 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:00:58.051 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:00:58.053 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:00:58.055 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:00:58.055 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:00:58.057 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:00:58.058 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:00:58.059 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:00:58.060 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:00:58.061 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:00:58.062 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:00:58.063 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:00:58.064 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:58.065 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:58.065 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:58.066 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:00:58.066 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:00:58.067 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:00:58.068 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:00:58.068 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:00:58.069 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:00:58.069 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:00:58.070 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:00:58.071 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:00:58.071 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:00:58.072 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:00:58.072 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:00:58.073 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:00:58.074 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:00:58.075 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:00:58.078 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:00:58.078 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:00:58.079 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:58.080 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:58.082 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:00:58.082 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:00:58.083 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:00:58.084 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:00:58.092 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:00:58.094 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:58.094 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 01:00:58.095 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:58.096 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:00:58.097 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:00:58.099 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:00:58.099 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:00:58.100 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:00:58.100 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:00:58.101 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:00:58.102 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.3805ms
2024-11-07 01:00:58.102 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:00:58.103 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:00:58.104 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:00:58.104 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:00:58.106 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 85.9766ms
2024-11-07 01:01:22.397 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:01:22.412 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:01:22.413 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:01:22.414 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:01:22.415 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:01:22.417 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:01:22.418 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:01:22.419 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:01:22.421 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:01:22.421 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:01:22.424 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:01:22.425 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:01:22.427 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:01:22.428 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:01:22.429 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:01:22.431 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:01:22.432 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:01:22.433 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:01:22.434 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:01:22.435 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:01:22.436 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:01:22.437 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:01:22.438 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:01:22.439 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:01:22.440 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:01:22.441 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:01:22.443 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:01:22.443 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:01:22.444 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:01:22.444 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:01:22.445 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:01:22.446 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:01:22.447 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:01:22.448 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:01:22.449 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:01:22.450 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:01:22.451 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:01:22.453 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:01:22.454 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:01:22.455 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:01:22.456 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:01:22.457 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:01:22.458 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:01:22.460 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:01:22.462 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:01:22.463 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:01:22.464 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:22.465 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:22.466 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:01:22.467 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:01:22.468 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-07 01:01:22.468 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:01:22.475 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:01:22.477 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:22.477 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 01:01:22.478 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:22.479 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:01:22.480 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:01:22.481 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:01:22.482 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:01:22.482 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:01:22.483 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:01:22.484 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:01:22.485 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 53.5777ms
2024-11-07 01:01:22.485 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:01:22.487 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:01:22.488 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:22.488 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:01:22.489 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 92.8019ms
2024-11-07 01:01:27.935 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:01:27.940 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:01:27.941 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:01:27.943 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:01:27.945 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:01:27.946 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:01:27.947 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:01:27.948 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:01:27.949 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:01:27.952 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:01:27.954 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:01:27.956 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:01:27.958 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:01:27.960 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:01:27.961 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:01:27.962 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:01:27.963 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:01:27.964 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:01:27.966 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:01:27.967 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:01:27.968 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:01:27.969 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:01:27.970 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:01:27.970 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:01:27.971 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:01:27.972 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:01:27.973 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:01:27.974 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:01:27.975 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:01:27.975 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:01:27.976 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:01:27.976 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:01:27.977 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:01:27.978 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:01:27.978 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:01:27.979 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:01:27.980 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:01:27.981 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:01:27.981 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:01:27.983 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:01:27.984 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:01:27.984 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:01:27.985 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:01:27.987 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:01:27.989 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:01:27.989 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:01:27.990 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:27.991 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:27.992 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:01:27.992 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:01:27.993 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:01:27.994 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:01:28.002 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:01:28.004 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:28.005 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 01:01:28.006 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:28.007 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:01:28.008 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:01:28.009 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:01:28.010 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:01:28.010 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:01:28.011 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:01:28.012 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:01:28.013 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 51.6244ms
2024-11-07 01:01:28.015 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:01:28.016 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:01:28.017 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:28.018 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 01:01:28.019 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 85.3158ms
2024-11-07 01:01:42.315 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:01:42.316 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:01:42.317 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:01:42.318 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:01:42.318 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:01:42.319 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:01:42.320 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:01:42.321 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:01:42.321 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:01:42.322 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:01:42.323 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:01:42.323 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:01:42.324 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:01:42.325 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:01:42.326 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:01:42.327 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:01:42.328 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:01:42.329 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:01:42.330 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:01:42.331 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:01:42.332 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:01:42.332 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:01:42.333 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:01:42.334 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:01:42.334 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:01:42.335 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:01:42.336 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:01:42.336 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:01:42.337 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:01:42.338 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:01:42.338 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:01:42.339 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:01:42.340 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:01:42.341 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:01:42.342 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:01:42.343 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:01:42.344 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:01:42.344 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:01:42.345 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:01:42.345 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:01:42.347 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:01:42.347 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:01:42.348 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:01:42.349 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:01:42.351 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:01:42.351 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:01:42.351 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:42.352 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:42.353 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:01:42.353 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:01:42.354 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:01:42.355 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:01:42.358 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:01:42.359 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:42.359 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 01:01:42.360 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:42.361 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:01:42.361 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:01:42.362 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:01:42.363 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:01:42.363 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:01:42.364 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:01:42.364 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:01:42.365 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.4765ms
2024-11-07 01:01:42.366 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:01:42.366 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:01:42.367 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:01:42.368 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:01:42.368 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 53.8634ms
2024-11-07 01:02:00.757 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:02:00.758 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:02:00.759 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:02:00.759 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:02:00.760 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:02:00.760 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:02:00.761 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:02:00.762 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:02:00.762 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:02:00.763 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:02:00.763 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:02:00.764 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:02:00.765 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:02:00.766 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:02:00.766 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:02:00.767 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:02:00.768 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:02:00.768 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:02:00.769 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:02:00.770 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:02:00.771 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:02:00.771 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:02:00.772 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:02:00.773 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:02:00.773 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:02:00.774 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:02:00.775 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:00.775 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:00.776 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:00.776 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:02:00.777 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:00.778 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:02:00.778 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:02:00.779 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:02:00.779 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:02:00.780 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:02:00.781 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:02:00.781 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:02:00.782 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:02:00.782 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:02:00.783 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:02:00.783 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:02:00.784 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:02:00.785 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:02:00.787 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:02:00.788 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:02:00.789 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:00.789 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:00.790 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:02:00.791 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:02:00.791 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:02:00.792 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:02:00.798 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:02:00.799 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:00.800 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 01:02:00.801 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:00.801 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:02:00.802 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:02:00.803 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:02:00.803 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:02:00.804 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:02:00.804 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:02:00.805 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:02:00.806 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.5523ms
2024-11-07 01:02:00.806 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:02:00.807 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:02:00.807 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:00.808 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:02:00.809 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 52.1936ms
2024-11-07 01:02:09.973 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:02:09.974 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:02:09.975 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:02:09.975 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:02:09.977 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:02:09.977 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:02:09.979 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:02:09.980 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:02:09.981 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:02:09.981 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:02:09.982 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:02:09.983 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:02:09.983 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:02:09.984 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:02:09.985 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:02:09.986 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:02:09.987 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:02:09.988 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:02:09.988 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:02:09.989 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:02:09.989 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:02:09.990 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:02:09.991 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:02:09.991 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:02:09.992 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:02:09.993 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:02:09.993 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:09.994 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:09.994 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:09.995 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:02:09.996 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:09.996 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:02:09.997 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:02:09.997 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:02:09.998 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:02:09.999 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:02:10.000 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:02:10.000 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:02:10.001 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:02:10.002 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:02:10.003 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:02:10.005 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:02:10.006 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:02:10.008 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:02:10.009 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:02:10.010 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:02:10.010 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:10.011 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:10.012 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:02:10.012 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:02:10.013 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:02:10.014 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:02:10.016 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:02:10.017 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:10.018 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 01:02:10.019 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:10.020 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:02:10.020 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:02:10.021 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:02:10.022 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:02:10.022 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:02:10.022 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:02:10.023 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:02:10.024 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.8473ms
2024-11-07 01:02:10.024 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:02:10.025 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:02:10.026 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:10.027 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:02:10.027 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 55.114ms
2024-11-07 01:02:21.701 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:02:21.707 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:02:21.709 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:02:21.711 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:02:21.711 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:02:21.712 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:02:21.714 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:02:21.716 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:02:21.717 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:02:21.718 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:02:21.720 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:02:21.721 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:02:21.724 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:02:21.727 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:02:21.729 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:02:21.730 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:02:21.731 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:02:21.732 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:02:21.734 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:02:21.735 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:02:21.736 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:02:21.738 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:02:21.739 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:02:21.741 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:02:21.742 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:02:21.743 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:02:21.745 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:21.746 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:21.746 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:21.747 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:02:21.749 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:21.750 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:02:21.750 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:02:21.751 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:02:21.752 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:02:21.753 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:02:21.754 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:02:21.755 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:02:21.756 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:02:21.756 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:02:21.757 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:02:21.758 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:02:21.759 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:02:21.760 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:02:21.763 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:02:21.763 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:02:21.764 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:21.765 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:21.766 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:02:21.767 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:02:21.767 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:02:21.768 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:02:21.774 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:02:21.776 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:21.777 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 01:02:21.778 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:21.778 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:02:21.779 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:02:21.780 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:02:21.781 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:02:21.781 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:02:21.782 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:02:21.782 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:02:21.783 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 53.1155ms
2024-11-07 01:02:21.784 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:02:21.785 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:02:21.786 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:21.786 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:02:21.787 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 86.0915ms
2024-11-07 01:02:59.825 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:02:59.840 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:02:59.841 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:02:59.842 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:02:59.843 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:02:59.844 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:02:59.846 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:02:59.848 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:02:59.849 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:02:59.849 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:02:59.850 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:02:59.851 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:02:59.852 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:02:59.854 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:02:59.855 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:02:59.856 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:02:59.857 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:02:59.858 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:02:59.860 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:02:59.861 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:02:59.861 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:02:59.862 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:02:59.863 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:02:59.863 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:02:59.864 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:02:59.864 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:02:59.865 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:59.866 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:59.867 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:59.869 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:02:59.869 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:02:59.870 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:02:59.871 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:02:59.872 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:02:59.872 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:02:59.873 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:02:59.874 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:02:59.874 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:02:59.875 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:02:59.876 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:02:59.877 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:02:59.877 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:02:59.878 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:02:59.880 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:02:59.882 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:02:59.883 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:02:59.883 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:59.884 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:59.885 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:02:59.885 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:02:59.886 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:02:59.887 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:02:59.901 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:02:59.902 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:59.903 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 01:02:59.904 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:59.905 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:02:59.906 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:02:59.907 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:02:59.908 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:02:59.908 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:02:59.908 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:02:59.909 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:02:59.910 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 53.9798ms
2024-11-07 01:02:59.911 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:02:59.917 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:02:59.919 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:02:59.920 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:02:59.921 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 96.1333ms
2024-11-07 01:03:14.088 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:03:14.090 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:03:14.091 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:03:14.092 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:03:14.092 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:03:14.093 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:03:14.095 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:03:14.095 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:03:14.096 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:03:14.097 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:03:14.098 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:03:14.100 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:03:14.101 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:03:14.103 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:03:14.104 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:03:14.105 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:03:14.106 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:03:14.107 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:03:14.109 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:03:14.110 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:03:14.111 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:03:14.112 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:03:14.113 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:03:14.113 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:03:14.114 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:03:14.114 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:03:14.115 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:03:14.116 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:03:14.116 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:03:14.117 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:03:14.117 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:03:14.118 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:03:14.119 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:03:14.119 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:03:14.120 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:03:14.120 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:03:14.121 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:03:14.121 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:03:14.122 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:03:14.123 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:03:14.123 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:03:14.124 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:03:14.125 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:03:14.126 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:03:14.128 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:03:14.128 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:03:14.129 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:03:14.130 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:03:14.130 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:03:14.131 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:03:14.131 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:03:14.132 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:03:14.138 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:03:14.139 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:03:14.140 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 01:03:14.141 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:03:14.141 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:03:14.142 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:03:14.144 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:03:14.145 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:03:14.145 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:03:14.146 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:03:14.146 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:03:14.148 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.4073ms
2024-11-07 01:03:14.148 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:03:14.149 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:03:14.150 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:03:14.151 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:03:14.152 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 64.1344ms
2024-11-07 01:03:24.445 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:03:24.447 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:03:24.448 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:03:24.448 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:03:24.449 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:03:24.450 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:03:24.451 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:03:24.451 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:03:24.452 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:03:24.453 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:03:24.454 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:03:24.454 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:03:24.455 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:03:24.456 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:03:24.457 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:03:24.458 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:03:24.459 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:03:24.460 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:03:24.461 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:03:24.462 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:03:24.463 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:03:24.464 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:03:24.465 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:03:24.466 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:03:24.466 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:03:24.467 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:03:24.468 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:03:24.469 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:03:24.470 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:03:24.471 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:03:24.472 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:03:24.472 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:03:24.473 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:03:24.474 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:03:24.474 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:03:24.475 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:03:24.476 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:03:24.477 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:03:24.478 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:03:24.479 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:03:24.480 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:03:24.481 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:03:24.481 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:03:24.483 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:03:24.484 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:03:24.485 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:03:24.486 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:03:24.487 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:03:24.487 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:03:24.488 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:03:24.489 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:03:24.490 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:03:24.495 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:03:24.498 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:03:24.498 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 01:03:24.499 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:03:24.500 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:03:24.501 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:03:24.503 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:03:24.503 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:03:24.503 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:03:24.504 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:03:24.505 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:03:24.505 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 46.9557ms
2024-11-07 01:03:24.506 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:03:24.507 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:03:24.508 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:03:24.509 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:03:24.510 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 64.9585ms
2024-11-07 01:03:40.119 +07:00 [DBG] Connection id "0HN7UH3VGBS0U" received FIN.
2024-11-07 01:03:40.120 +07:00 [DBG] Connection id "0HN7UH3VGBS0U" is closed. The last processed stream ID was 21.
2024-11-07 01:03:40.121 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS0U completed.
2024-11-07 01:03:40.121 +07:00 [DBG] Connection id "0HN7UH3VGBS0U" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 01:03:40.133 +07:00 [DBG] Connection id "0HN7UH3VGBS0U" stopped.
2024-11-07 01:04:00.328 +07:00 [DBG] Connection id "0HN7UH3VGBS0V" accepted.
2024-11-07 01:04:00.332 +07:00 [DBG] Connection id "0HN7UH3VGBS0V" started.
2024-11-07 01:04:00.343 +07:00 [DBG] Connection 0HN7UH3VGBS0V established using the following protocol: "Tls13"
2024-11-07 01:04:00.349 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 01:04:00.355 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 01:04:00.355 +07:00 [INF] CORS policy execution successful.
2024-11-07 01:04:00.356 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 01:04:00.357 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 01:04:00.357 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 01:04:00.358 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:04:00.359 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 01:04:00.359 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:04:00.360 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 01:04:00.361 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 01:04:00.362 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 01:04:00.363 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:04:00.364 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 01:04:00.365 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 01:04:00.366 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:04:00.367 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 01:04:00.367 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 01:04:00.368 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 01:04:00.369 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 01:04:00.370 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:04:00.371 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 01:04:00.371 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 01:04:00.372 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 01:04:00.373 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:04:00.374 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 01:04:00.375 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 01:04:00.376 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:04:00.377 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 01:04:00.378 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 01:04:00.378 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 01:04:00.379 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 01:04:00.380 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 01:04:00.381 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:04:00.382 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 01:04:00.383 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 01:04:00.384 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 01:04:00.385 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:04:00.386 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 01:04:00.387 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:04:00.388 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:04:00.388 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 01:04:00.389 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 01:04:00.391 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 01:04:00.393 +07:00 [DBG] Creating DbConnection.
2024-11-07 01:04:00.394 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 01:04:00.394 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:04:00.395 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:04:00.396 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 01:04:00.397 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 01:04:00.397 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 01:04:00.398 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:04:00.405 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 01:04:00.407 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:04:00.408 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 01:04:00.409 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:04:00.410 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 01:04:00.411 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 01:04:00.412 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 01:04:00.413 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 01:04:00.413 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 01:04:00.414 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 01:04:00.414 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 01:04:00.416 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.0461ms
2024-11-07 01:04:00.417 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 01:04:00.417 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 01:04:00.418 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 01:04:00.419 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 01:04:00.420 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 71.64ms
2024-11-07 01:04:30.179 +07:00 [DBG] Connection id "0HN7UH3VGBS0V" received FIN.
2024-11-07 01:04:30.180 +07:00 [DBG] Connection id "0HN7UH3VGBS0V" is closed. The last processed stream ID was 1.
2024-11-07 01:04:30.180 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS0V completed.
2024-11-07 01:04:30.181 +07:00 [DBG] Connection id "0HN7UH3VGBS0V" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 01:04:30.192 +07:00 [DBG] Connection id "0HN7UH3VGBS0V" stopped.
2024-11-07 15:35:17.769 +07:00 [DBG] Connection id "0HN7UH3VGBS10" accepted.
2024-11-07 15:35:17.786 +07:00 [DBG] Connection id "0HN7UH3VGBS10" started.
2024-11-07 15:35:17.916 +07:00 [DBG] Connection 0HN7UH3VGBS10 established using the following protocol: "Tls13"
2024-11-07 15:35:17.942 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:35:17.950 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:35:17.952 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:35:17.957 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:35:17.961 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:35:17.964 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:35:17.972 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:17.978 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:35:17.979 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:17.985 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:35:17.988 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:35:17.988 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:35:17.990 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:17.992 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:35:17.993 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:17.994 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:18.009 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:18.014 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:35:18.015 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:18.016 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.017 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.017 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.018 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:35:18.018 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.019 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:18.020 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:18.020 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.021 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.021 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.022 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:18.022 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.023 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:18.024 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:35:18.025 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:18.025 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:18.026 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:18.027 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:18.028 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:18.028 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:35:18.029 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:18.029 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:18.030 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:18.031 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:18.049 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:35:18.060 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:35:18.065 +07:00 [DBG] Created DbConnection. (5ms).
2024-11-07 15:35:18.065 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.117 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.119 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:35:18.120 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-07 15:35:18.123 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-07 15:35:18.125 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:18.200 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:18.202 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.203 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:35:18.204 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.205 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:35:18.208 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:35:18.209 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:35:18.209 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:35:18.210 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:35:18.210 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:35:18.211 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:35:18.215 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 220.89ms
2024-11-07 15:35:18.216 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:35:18.217 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:18.218 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:35:18.218 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:35:18.219 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:35:18.219 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.220 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:35:18.220 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 15:35:18.221 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:35:18.222 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 284.624ms
2024-11-07 15:35:18.222 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:35:18.225 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:18.226 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:35:18.227 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:18.228 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:35:18.233 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:35:18.234 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:35:18.235 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:18.236 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:35:18.237 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:18.238 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:18.239 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:18.240 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:35:18.241 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:18.242 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.243 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.243 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.244 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:35:18.245 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.246 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:18.246 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:18.247 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.248 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.249 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.250 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:18.250 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.251 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:18.252 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:35:18.253 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:18.254 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:18.254 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:18.255 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:18.256 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:18.257 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:35:18.258 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:18.259 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:18.259 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:18.260 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:18.262 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:35:18.264 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:35:18.264 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:35:18.265 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.268 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.268 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:35:18.269 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:35:18.270 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:35:18.271 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:18.278 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:18.280 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.281 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 15:35:18.282 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.283 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:35:18.284 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:35:18.285 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:35:18.286 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:35:18.286 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:35:18.287 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:35:18.288 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:35:18.289 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.8889ms
2024-11-07 15:35:18.290 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:18.290 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:35:18.291 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:35:18.291 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.293 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:35:18.293 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-07 15:35:18.294 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:35:18.295 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 78.5182ms
2024-11-07 15:35:18.295 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:35:18.297 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:35:18.298 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:35:18.299 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:18.300 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:35:18.300 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:18.301 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:35:18.302 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:35:18.303 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:35:18.304 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:18.305 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:35:18.306 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:18.307 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:18.308 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:18.309 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:35:18.310 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:18.311 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.312 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.312 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.313 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:35:18.314 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.315 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:18.315 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:18.316 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.317 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.319 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.319 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:18.320 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.321 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:18.322 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:35:18.322 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:18.323 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:18.324 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:18.325 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:18.325 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:18.326 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:35:18.327 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:18.328 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:18.328 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:18.329 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:18.330 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:35:18.333 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:35:18.334 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:35:18.335 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.336 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.337 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:35:18.337 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:35:18.338 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:35:18.340 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:18.346 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:18.347 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.348 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:35:18.349 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.350 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:35:18.351 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:35:18.352 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:35:18.352 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:35:18.352 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:35:18.353 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:35:18.354 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:35:18.354 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 46.8913ms
2024-11-07 15:35:18.355 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:18.356 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:35:18.356 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:35:18.357 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:35:18.358 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.358 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:35:18.359 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 15:35:18.359 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:35:18.360 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 69.0318ms
2024-11-07 15:35:18.360 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:35:18.362 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:35:18.363 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:18.364 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:35:18.365 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:18.366 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:35:18.367 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:35:18.368 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:35:18.368 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:18.370 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:35:18.370 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:18.371 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:18.372 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:18.373 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:35:18.374 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:18.375 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.376 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.376 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.377 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:35:18.378 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:35:18.378 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:18.379 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:18.380 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.382 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.383 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.383 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:18.384 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:18.384 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:18.385 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:35:18.386 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:18.386 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:18.387 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:18.387 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:18.388 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:18.388 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:35:18.389 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:18.390 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:18.390 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:18.391 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:18.392 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:35:18.393 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:35:18.393 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:35:18.394 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.395 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.395 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:35:18.396 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:35:18.396 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:35:18.397 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:18.402 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:18.403 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.404 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:35:18.405 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.405 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:35:18.406 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:35:18.407 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:35:18.408 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:35:18.409 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:35:18.409 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:35:18.410 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:35:18.411 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.3897ms
2024-11-07 15:35:18.412 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:18.412 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:35:18.413 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:18.414 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:35:18.414 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 58.7802ms
2024-11-07 15:35:19.356 +07:00 [DBG] Connection id "0HN7UH3VGBS10" received FIN.
2024-11-07 15:35:19.358 +07:00 [DBG] Connection id "0HN7UH3VGBS10" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:35:19.358 +07:00 [DBG] Connection id "0HN7UH3VGBS10" is closed. The last processed stream ID was 7.
2024-11-07 15:35:19.361 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS10 completed.
2024-11-07 15:35:19.363 +07:00 [DBG] Connection id "0HN7UH3VGBS10" stopped.
2024-11-07 15:35:44.208 +07:00 [DBG] Connection id "0HN7UH3VGBS11" accepted.
2024-11-07 15:35:44.217 +07:00 [DBG] Connection id "0HN7UH3VGBS11" started.
2024-11-07 15:35:44.230 +07:00 [DBG] Connection 0HN7UH3VGBS11 established using the following protocol: "Tls13"
2024-11-07 15:35:44.236 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:35:44.240 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:35:44.241 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:35:44.243 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:35:44.250 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:35:44.252 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:35:44.255 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:44.258 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:35:44.260 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:44.262 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:35:44.264 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:35:44.265 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:35:44.265 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:44.268 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:35:44.269 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:44.271 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:44.276 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:44.278 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:35:44.279 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:44.280 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:35:44.280 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:44.281 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:44.282 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:35:44.283 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:35:44.284 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:44.285 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:44.286 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:44.286 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:44.287 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:44.288 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:44.289 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:44.289 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:44.290 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:35:44.291 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:44.291 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:44.292 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:44.293 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:44.293 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:44.294 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:35:44.295 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:44.295 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:44.296 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:44.297 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:44.301 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:35:44.305 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:35:44.305 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:35:44.306 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:44.307 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:44.307 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:35:44.308 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:35:44.308 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:35:44.309 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:44.321 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:44.322 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:44.323 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:35:44.324 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:44.325 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:35:44.328 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:35:44.330 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:35:44.331 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:35:44.332 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:35:44.332 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:35:44.333 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:35:44.336 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 64.6524ms
2024-11-07 15:35:44.336 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:44.338 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:35:44.339 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:44.341 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-07 15:35:44.342 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 106.6109ms
2024-11-07 15:35:44.390 +07:00 [DBG] Connection id "0HN7UH3VGBS11" received FIN.
2024-11-07 15:35:44.392 +07:00 [DBG] Connection id "0HN7UH3VGBS11" is closed. The last processed stream ID was 1.
2024-11-07 15:35:44.392 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS11 completed.
2024-11-07 15:35:44.393 +07:00 [DBG] Connection id "0HN7UH3VGBS11" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:35:44.403 +07:00 [DBG] Connection id "0HN7UH3VGBS11" stopped.
2024-11-07 15:35:51.832 +07:00 [DBG] Connection id "0HN7UH3VGBS12" accepted.
2024-11-07 15:35:51.833 +07:00 [DBG] Connection id "0HN7UH3VGBS12" started.
2024-11-07 15:35:51.837 +07:00 [DBG] Connection 0HN7UH3VGBS12 established using the following protocol: "Tls13"
2024-11-07 15:35:51.839 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:35:51.844 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:35:51.845 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:35:51.846 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:35:51.846 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:35:51.848 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:35:51.849 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:51.849 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:35:51.850 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:51.852 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:35:51.853 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:35:51.854 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:35:51.854 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:51.855 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:35:51.856 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:51.856 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:51.857 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:51.858 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:35:51.859 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:51.859 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:35:51.860 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:51.860 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:51.861 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:35:51.861 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:35:51.862 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:51.862 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:51.863 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:51.864 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:51.864 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:51.865 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:51.865 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:51.866 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:51.866 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:35:51.867 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:51.867 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:51.868 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:51.869 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:51.870 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:51.870 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:35:51.871 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:51.872 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:51.872 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:51.873 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:51.875 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:35:51.877 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:35:51.878 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:35:51.878 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:51.880 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:51.880 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:35:51.881 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:35:51.881 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:35:51.882 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:51.893 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:51.894 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:51.895 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:35:51.896 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:51.896 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:35:51.897 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:35:51.898 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:35:51.898 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:35:51.898 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:35:51.899 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:35:51.899 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:35:51.902 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 45.1265ms
2024-11-07 15:35:51.902 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:51.903 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:35:51.903 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:51.904 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:35:51.905 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 65.7807ms
2024-11-07 15:35:54.418 +07:00 [DBG] Connection id "0HN7UH3VGBS12" received FIN.
2024-11-07 15:35:54.419 +07:00 [DBG] Connection id "0HN7UH3VGBS12" is closed. The last processed stream ID was 1.
2024-11-07 15:35:54.420 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS12 completed.
2024-11-07 15:35:54.420 +07:00 [DBG] Connection id "0HN7UH3VGBS12" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:35:54.437 +07:00 [DBG] Connection id "0HN7UH3VGBS12" stopped.
2024-11-07 15:35:56.514 +07:00 [DBG] Connection id "0HN7UH3VGBS13" accepted.
2024-11-07 15:35:56.515 +07:00 [DBG] Connection id "0HN7UH3VGBS13" started.
2024-11-07 15:35:56.520 +07:00 [DBG] Connection 0HN7UH3VGBS13 established using the following protocol: "Tls13"
2024-11-07 15:35:56.522 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:35:56.524 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:35:56.525 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:35:56.527 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:35:56.527 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:35:56.528 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:35:56.529 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:56.530 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:35:56.531 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:56.531 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:35:56.533 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:35:56.533 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:35:56.535 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:56.536 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:35:56.537 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:35:56.538 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:56.539 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:35:56.540 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:35:56.541 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:56.541 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:35:56.542 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:56.543 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:35:56.543 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:35:56.544 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:35:56.545 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:56.546 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:35:56.547 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:56.548 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:56.549 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:56.549 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:35:56.550 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:35:56.551 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:56.551 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:35:56.553 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:56.554 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:56.554 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:35:56.556 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:35:56.556 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:56.557 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:35:56.558 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:56.558 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:56.559 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:35:56.559 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:35:56.561 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:35:56.563 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:35:56.564 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:35:56.564 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:56.565 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:56.566 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:35:56.566 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:35:56.567 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:35:56.568 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:56.589 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:35:56.591 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:56.593 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 15:35:56.594 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:56.595 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-07 15:35:56.596 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:35:56.597 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:35:56.598 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:35:56.598 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:35:56.598 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:35:56.599 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:35:56.601 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 62.9464ms
2024-11-07 15:35:56.601 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:35:56.602 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:35:56.603 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:35:56.603 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:35:56.604 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 81.9451ms
2024-11-07 15:35:59.426 +07:00 [DBG] Connection id "0HN7UH3VGBS13" received FIN.
2024-11-07 15:35:59.427 +07:00 [DBG] Connection id "0HN7UH3VGBS13" is closed. The last processed stream ID was 1.
2024-11-07 15:35:59.427 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS13 completed.
2024-11-07 15:35:59.427 +07:00 [DBG] Connection id "0HN7UH3VGBS13" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:35:59.444 +07:00 [DBG] Connection id "0HN7UH3VGBS13" stopped.
2024-11-07 15:36:01.240 +07:00 [DBG] Connection id "0HN7UH3VGBS14" accepted.
2024-11-07 15:36:01.241 +07:00 [DBG] Connection id "0HN7UH3VGBS14" started.
2024-11-07 15:36:01.246 +07:00 [DBG] Connection 0HN7UH3VGBS14 established using the following protocol: "Tls13"
2024-11-07 15:36:01.249 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:36:01.250 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:36:01.251 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:36:01.251 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:36:01.252 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:36:01.252 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:36:01.254 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:01.254 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:36:01.255 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:01.259 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:36:01.260 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:36:01.261 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:36:01.262 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:01.263 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:36:01.264 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:01.265 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:01.265 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:01.266 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:36:01.267 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:01.267 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:36:01.269 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:01.269 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:01.270 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:36:01.271 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:36:01.271 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:01.272 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:01.273 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:01.273 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:01.274 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:01.275 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:01.275 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:01.276 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:01.277 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:36:01.277 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:01.278 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:01.279 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:01.279 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:01.280 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:01.280 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:36:01.281 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:01.282 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:01.282 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:01.283 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:01.284 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:36:01.286 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:36:01.287 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:36:01.287 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:01.288 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:01.288 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:36:01.289 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:36:01.290 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:36:01.290 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:01.304 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:01.306 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:01.306 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:36:01.307 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:01.308 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:36:01.309 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:36:01.310 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:36:01.311 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:36:01.311 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:36:01.312 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:36:01.313 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:36:01.314 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 49.521ms
2024-11-07 15:36:01.315 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:01.316 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:36:01.316 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:01.317 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 15:36:01.318 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 69.9234ms
2024-11-07 15:36:04.378 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:36:04.381 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:36:04.381 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:36:04.382 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:36:04.383 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:36:04.383 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:36:04.384 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:04.384 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:36:04.385 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:04.385 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:36:04.387 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:36:04.388 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:36:04.389 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:04.390 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:36:04.391 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:04.392 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:04.392 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:04.394 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:36:04.396 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:04.397 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:36:04.398 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:04.398 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:04.399 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:36:04.400 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:36:04.400 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:04.401 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:04.402 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:04.403 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:04.404 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:04.404 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:04.405 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:04.405 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:04.406 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:36:04.407 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:04.408 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:04.409 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:04.410 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:04.410 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:04.411 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:36:04.412 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:04.413 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:04.413 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:04.414 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:04.415 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:36:04.417 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:36:04.418 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:36:04.418 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:04.419 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:04.420 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:36:04.420 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:36:04.421 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:36:04.421 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:04.433 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:04.435 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:04.435 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:36:04.436 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:04.437 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:36:04.437 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:36:04.438 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:36:04.439 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:36:04.439 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:36:04.439 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:36:04.440 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:36:04.440 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 48.8967ms
2024-11-07 15:36:04.441 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:04.442 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:36:04.442 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:04.443 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:36:04.443 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 65.5226ms
2024-11-07 15:36:06.598 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:36:06.599 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:36:06.599 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:36:06.600 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:36:06.600 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:36:06.601 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:36:06.601 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:06.602 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:36:06.603 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:06.603 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:36:06.604 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:36:06.604 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:36:06.605 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:06.606 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:36:06.607 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:06.607 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:06.608 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:06.609 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:36:06.609 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:06.610 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:36:06.611 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:06.611 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:06.612 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:36:06.612 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:36:06.613 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:06.613 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:06.614 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:06.615 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:06.615 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:06.616 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:06.617 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:06.617 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:06.618 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:36:06.618 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:06.619 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:06.619 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:06.620 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:06.620 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:06.621 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:36:06.621 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:06.622 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:06.623 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:06.623 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:06.625 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:36:06.626 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:36:06.627 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:36:06.627 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:06.628 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:06.628 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:36:06.629 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:36:06.629 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:36:06.630 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:06.635 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:06.636 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:06.637 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:36:06.637 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:06.638 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:36:06.638 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:36:06.640 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:36:06.640 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:36:06.640 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:36:06.641 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:36:06.641 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:36:06.642 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.4076ms
2024-11-07 15:36:06.642 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:06.643 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:36:06.644 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:06.644 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:36:06.645 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 47.6786ms
2024-11-07 15:36:09.159 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:36:09.160 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:36:09.161 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:36:09.161 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:36:09.162 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:36:09.162 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:36:09.163 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:09.164 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:36:09.165 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:09.166 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:36:09.167 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:36:09.167 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:36:09.168 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:09.169 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:36:09.170 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:09.171 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:09.172 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:09.173 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:36:09.174 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:09.175 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:36:09.176 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:09.176 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:09.177 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:36:09.178 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:36:09.179 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:09.179 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:09.180 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:09.181 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:09.181 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:09.182 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:09.183 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:09.183 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:09.184 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:36:09.184 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:09.185 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:09.186 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:09.187 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:09.187 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:09.188 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:36:09.188 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:09.189 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:09.190 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:09.190 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:09.191 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:36:09.193 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:36:09.194 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:36:09.194 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:09.195 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:09.196 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:36:09.196 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:36:09.197 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:36:09.198 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:09.209 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:09.211 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:09.212 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:36:09.213 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:09.213 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:36:09.214 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:36:09.215 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:36:09.216 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:36:09.216 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:36:09.217 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:36:09.217 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:36:09.218 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 46.9699ms
2024-11-07 15:36:09.219 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:09.220 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:36:09.221 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:09.221 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:36:09.222 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 63.9035ms
2024-11-07 15:36:15.513 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:36:15.514 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:36:15.515 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:36:15.515 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:36:15.516 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:36:15.516 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:36:15.518 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:15.518 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:36:15.519 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:15.520 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:36:15.520 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:36:15.521 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:36:15.522 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:15.523 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:36:15.523 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:15.524 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:15.525 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:15.526 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:36:15.526 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:15.527 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:36:15.528 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:15.528 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:15.529 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:36:15.529 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:36:15.530 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:15.531 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:15.531 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:15.532 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:15.533 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:15.534 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:15.535 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:15.535 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:15.536 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:36:15.537 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:15.537 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:15.538 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:15.538 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:15.539 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:15.540 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:36:15.541 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:15.541 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:15.542 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:15.542 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:15.543 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:36:15.544 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:36:15.545 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:36:15.546 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:15.547 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:15.548 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:36:15.548 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:36:15.549 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:36:15.549 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:15.561 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:15.562 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:15.563 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:36:15.564 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:15.564 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:36:15.565 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:36:15.566 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:36:15.566 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:36:15.567 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:36:15.567 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:36:15.568 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:36:15.569 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.7506ms
2024-11-07 15:36:15.570 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:15.571 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:36:15.571 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:15.572 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:36:15.573 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 61.211ms
2024-11-07 15:36:19.456 +07:00 [DBG] Connection id "0HN7UH3VGBS14" received FIN.
2024-11-07 15:36:19.456 +07:00 [DBG] Connection id "0HN7UH3VGBS14" is closed. The last processed stream ID was 9.
2024-11-07 15:36:19.457 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS14 completed.
2024-11-07 15:36:19.457 +07:00 [DBG] Connection id "0HN7UH3VGBS14" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:36:19.462 +07:00 [DBG] Connection id "0HN7UH3VGBS14" stopped.
2024-11-07 15:36:36.755 +07:00 [DBG] Connection id "0HN7UH3VGBS15" accepted.
2024-11-07 15:36:36.757 +07:00 [DBG] Connection id "0HN7UH3VGBS15" started.
2024-11-07 15:36:36.761 +07:00 [DBG] Connection 0HN7UH3VGBS15 established using the following protocol: "Tls13"
2024-11-07 15:36:36.768 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:36:36.770 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:36:36.770 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:36:36.771 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:36:36.771 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:36:36.772 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:36:36.773 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:36.773 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:36:36.774 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:36.775 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:36:36.776 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:36:36.777 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:36:36.777 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:36.778 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:36:36.779 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:36.780 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:36.781 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:36.782 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:36:36.782 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:36.783 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:36:36.784 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:36.784 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:36.785 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:36:36.786 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:36:36.786 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:36.787 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:36.788 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:36.789 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:36.790 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:36.790 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:36.791 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:36.792 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:36.792 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:36:36.793 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:36.794 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:36.794 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:36.795 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:36.796 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:36.796 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:36:36.797 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:36.798 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:36.799 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:36.800 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:36.802 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:36:36.803 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:36:36.804 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:36:36.805 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:36.806 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:36.806 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:36:36.807 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:36:36.808 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:36:36.809 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:36.827 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:36.830 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:36.831 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 15:36:36.832 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:36.833 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:36:36.834 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:36:36.836 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:36:36.836 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:36:36.837 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:36:36.838 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:36:36.839 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:36:36.840 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 59.6243ms
2024-11-07 15:36:36.840 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:36.841 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:36:36.842 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:36.842 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:36:36.843 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 75.5061ms
2024-11-07 15:36:44.501 +07:00 [DBG] Connection id "0HN7UH3VGBS15" received FIN.
2024-11-07 15:36:44.502 +07:00 [DBG] Connection id "0HN7UH3VGBS15" is closed. The last processed stream ID was 1.
2024-11-07 15:36:44.503 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS15 completed.
2024-11-07 15:36:44.504 +07:00 [DBG] Connection id "0HN7UH3VGBS15" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:36:44.516 +07:00 [DBG] Connection id "0HN7UH3VGBS15" stopped.
2024-11-07 15:36:48.339 +07:00 [DBG] Connection id "0HN7UH3VGBS16" accepted.
2024-11-07 15:36:48.340 +07:00 [DBG] Connection id "0HN7UH3VGBS16" started.
2024-11-07 15:36:48.346 +07:00 [DBG] Connection 0HN7UH3VGBS16 established using the following protocol: "Tls13"
2024-11-07 15:36:48.348 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:36:48.356 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:36:48.356 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:36:48.357 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:36:48.358 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:36:48.358 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:36:48.359 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:48.360 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:36:48.361 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:48.362 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:36:48.363 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:36:48.364 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:36:48.365 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:48.366 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:36:48.367 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:36:48.369 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:48.370 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:36:48.370 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:36:48.371 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:48.372 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:36:48.373 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:48.374 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:36:48.375 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:36:48.376 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:36:48.377 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:48.377 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:36:48.378 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:48.379 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:48.380 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:48.381 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:36:48.381 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:36:48.382 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:48.384 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:36:48.385 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:48.386 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:48.386 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:36:48.387 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:36:48.388 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:48.389 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:36:48.389 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:48.390 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:48.391 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:36:48.392 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:36:48.393 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:36:48.395 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:36:48.395 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:36:48.396 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:48.397 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:48.398 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:36:48.398 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:36:48.399 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:36:48.400 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:48.409 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:36:48.411 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:48.412 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:36:48.413 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:48.414 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:36:48.414 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:36:48.416 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:36:48.416 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:36:48.417 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:36:48.417 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:36:48.418 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:36:48.419 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.5036ms
2024-11-07 15:36:48.420 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:36:48.421 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:36:48.421 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:36:48.422 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:36:48.423 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 75.1987ms
2024-11-07 15:36:49.505 +07:00 [DBG] Connection id "0HN7UH3VGBS16" received FIN.
2024-11-07 15:36:49.506 +07:00 [DBG] Connection id "0HN7UH3VGBS16" is closed. The last processed stream ID was 1.
2024-11-07 15:36:49.506 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS16 completed.
2024-11-07 15:36:49.506 +07:00 [DBG] Connection id "0HN7UH3VGBS16" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:36:49.511 +07:00 [DBG] Connection id "0HN7UH3VGBS16" stopped.
2024-11-07 15:37:22.873 +07:00 [DBG] Connection id "0HN7UH3VGBS17" accepted.
2024-11-07 15:37:22.876 +07:00 [DBG] Connection id "0HN7UH3VGBS17" started.
2024-11-07 15:37:22.882 +07:00 [DBG] Connection 0HN7UH3VGBS17 established using the following protocol: "Tls13"
2024-11-07 15:37:22.889 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:37:22.895 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:37:22.896 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:37:22.896 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:37:22.897 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:37:22.898 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:37:22.899 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:37:22.899 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:37:22.900 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:37:22.901 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:37:22.902 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:37:22.903 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:37:22.903 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:37:22.905 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:37:22.906 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:37:22.907 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:37:22.908 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:37:22.909 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:37:22.910 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:37:22.911 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:37:22.912 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:37:22.913 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:37:22.914 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:37:22.915 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:37:22.915 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:37:22.916 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:37:22.918 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:22.919 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:22.921 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:22.923 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:37:22.924 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:22.925 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:37:22.925 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:37:22.926 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:37:22.927 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:37:22.929 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:37:22.929 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:37:22.930 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:37:22.931 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:37:22.932 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:37:22.933 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:37:22.933 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:37:22.934 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:37:22.936 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:37:22.938 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:37:22.939 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:37:22.939 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:22.941 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:22.942 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:37:22.943 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:37:22.945 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-07 15:37:22.946 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:37:22.959 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:37:22.961 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:22.962 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:37:22.963 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:22.964 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:37:22.965 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:37:22.966 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:37:22.966 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:37:22.967 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:37:22.967 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:37:22.968 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:37:22.969 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 61.9235ms
2024-11-07 15:37:22.970 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:37:22.971 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:37:22.971 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:22.972 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:37:22.972 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 83.6574ms
2024-11-07 15:37:24.576 +07:00 [DBG] Connection id "0HN7UH3VGBS17" received FIN.
2024-11-07 15:37:24.577 +07:00 [DBG] Connection id "0HN7UH3VGBS17" is closed. The last processed stream ID was 1.
2024-11-07 15:37:24.577 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS17 completed.
2024-11-07 15:37:24.578 +07:00 [DBG] Connection id "0HN7UH3VGBS17" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:37:24.593 +07:00 [DBG] Connection id "0HN7UH3VGBS17" stopped.
2024-11-07 15:37:27.063 +07:00 [DBG] Connection id "0HN7UH3VGBS18" accepted.
2024-11-07 15:37:27.064 +07:00 [DBG] Connection id "0HN7UH3VGBS18" started.
2024-11-07 15:37:27.071 +07:00 [DBG] Connection 0HN7UH3VGBS18 established using the following protocol: "Tls13"
2024-11-07 15:37:27.074 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:37:27.075 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:37:27.077 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:37:27.078 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:37:27.079 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:37:27.080 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:37:27.080 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:37:27.082 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:37:27.082 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:37:27.083 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:37:27.084 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:37:27.084 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:37:27.085 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:37:27.086 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:37:27.088 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:37:27.089 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:37:27.089 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:37:27.090 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:37:27.091 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:37:27.091 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:37:27.093 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:37:27.093 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:37:27.094 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:37:27.095 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:37:27.095 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:37:27.096 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:37:27.096 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:27.097 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:27.098 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:27.098 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:37:27.099 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:27.099 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:37:27.100 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:37:27.100 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:37:27.101 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:37:27.102 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:37:27.102 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:37:27.103 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:37:27.103 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:37:27.104 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:37:27.105 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:37:27.105 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:37:27.106 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:37:27.107 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:37:27.109 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:37:27.109 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:37:27.109 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:27.110 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:27.111 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:37:27.111 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:37:27.112 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:37:27.112 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:37:27.122 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:37:27.123 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:27.123 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:37:27.124 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:27.125 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:37:27.125 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:37:27.126 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:37:27.127 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:37:27.127 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:37:27.128 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:37:27.128 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:37:27.129 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.2873ms
2024-11-07 15:37:27.130 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:37:27.130 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:37:27.131 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:27.131 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:37:27.132 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 58.5782ms
2024-11-07 15:37:34.600 +07:00 [DBG] Connection id "0HN7UH3VGBS18" received FIN.
2024-11-07 15:37:34.601 +07:00 [DBG] Connection id "0HN7UH3VGBS18" is closed. The last processed stream ID was 1.
2024-11-07 15:37:34.602 +07:00 [DBG] Connection id "0HN7UH3VGBS18" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:37:34.602 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS18 completed.
2024-11-07 15:37:34.603 +07:00 [DBG] Connection id "0HN7UH3VGBS18" stopped.
2024-11-07 15:37:42.002 +07:00 [DBG] Connection id "0HN7UH3VGBS19" accepted.
2024-11-07 15:37:42.003 +07:00 [DBG] Connection id "0HN7UH3VGBS19" started.
2024-11-07 15:37:42.008 +07:00 [DBG] Connection 0HN7UH3VGBS19 established using the following protocol: "Tls13"
2024-11-07 15:37:42.011 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:37:42.013 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:37:42.013 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:37:42.014 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:37:42.015 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:37:42.015 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:37:42.017 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:37:42.018 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:37:42.018 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:37:42.019 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:37:42.020 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:37:42.021 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:37:42.023 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:37:42.024 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:37:42.025 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:37:42.026 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:37:42.027 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:37:42.028 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:37:42.029 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:37:42.030 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:37:42.031 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:37:42.032 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:37:42.033 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:37:42.034 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:37:42.035 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:37:42.035 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:37:42.036 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:42.037 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:42.039 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:42.040 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:37:42.041 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:42.041 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:37:42.042 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:37:42.043 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:37:42.044 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:37:42.045 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:37:42.046 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:37:42.047 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:37:42.048 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:37:42.048 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:37:42.049 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:37:42.050 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:37:42.051 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:37:42.053 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:37:42.055 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:37:42.056 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:37:42.057 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:42.058 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:42.059 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:37:42.059 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:37:42.060 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:37:42.061 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:37:42.069 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:37:42.070 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:42.072 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 15:37:42.073 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:42.074 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-07 15:37:42.075 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:37:42.077 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:37:42.077 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:37:42.078 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:37:42.079 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:37:42.080 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:37:42.081 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 54.8097ms
2024-11-07 15:37:42.082 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:37:42.082 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:37:42.083 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:42.084 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:37:42.085 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 74.5647ms
2024-11-07 15:37:44.620 +07:00 [DBG] Connection id "0HN7UH3VGBS19" received FIN.
2024-11-07 15:37:44.621 +07:00 [DBG] Connection id "0HN7UH3VGBS19" is closed. The last processed stream ID was 1.
2024-11-07 15:37:44.622 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS19 completed.
2024-11-07 15:37:44.623 +07:00 [DBG] Connection id "0HN7UH3VGBS19" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:37:44.633 +07:00 [DBG] Connection id "0HN7UH3VGBS19" stopped.
2024-11-07 15:37:53.590 +07:00 [DBG] Connection id "0HN7UH3VGBS1A" accepted.
2024-11-07 15:37:53.591 +07:00 [DBG] Connection id "0HN7UH3VGBS1A" started.
2024-11-07 15:37:53.600 +07:00 [DBG] Connection 0HN7UH3VGBS1A established using the following protocol: "Tls13"
2024-11-07 15:37:53.603 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:37:53.605 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:37:53.607 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:37:53.607 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:37:53.608 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:37:53.609 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:37:53.610 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:37:53.611 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:37:53.611 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:37:53.612 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:37:53.614 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:37:53.614 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:37:53.615 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:37:53.616 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:37:53.617 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:37:53.618 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:37:53.619 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:37:53.620 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:37:53.622 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:37:53.623 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:37:53.623 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:37:53.624 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:37:53.625 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:37:53.626 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:37:53.627 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:37:53.628 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:37:53.629 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:53.630 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:53.630 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:53.631 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:37:53.632 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:37:53.632 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:37:53.634 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:37:53.635 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:37:53.635 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:37:53.636 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:37:53.637 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:37:53.638 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:37:53.638 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:37:53.639 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:37:53.640 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:37:53.641 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:37:53.642 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:37:53.644 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:37:53.645 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:37:53.646 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:37:53.646 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:53.647 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:53.648 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:37:53.649 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:37:53.649 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:37:53.650 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:37:53.657 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:37:53.659 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:53.659 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:37:53.660 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:53.661 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:37:53.662 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:37:53.664 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:37:53.664 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:37:53.664 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:37:53.665 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:37:53.665 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:37:53.666 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.7596ms
2024-11-07 15:37:53.667 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:37:53.667 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:37:53.668 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:37:53.669 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:37:53.670 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 67.1638ms
2024-11-07 15:37:54.624 +07:00 [DBG] Connection id "0HN7UH3VGBS1A" received FIN.
2024-11-07 15:37:54.627 +07:00 [DBG] Connection id "0HN7UH3VGBS1A" is closed. The last processed stream ID was 1.
2024-11-07 15:37:54.627 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1A completed.
2024-11-07 15:37:54.629 +07:00 [DBG] Connection id "0HN7UH3VGBS1A" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:37:54.638 +07:00 [DBG] Connection id "0HN7UH3VGBS1A" stopped.
2024-11-07 15:39:09.415 +07:00 [DBG] Connection id "0HN7UH3VGBS1B" accepted.
2024-11-07 15:39:09.421 +07:00 [DBG] Connection id "0HN7UH3VGBS1B" started.
2024-11-07 15:39:09.428 +07:00 [DBG] Connection 0HN7UH3VGBS1B established using the following protocol: "Tls13"
2024-11-07 15:39:09.435 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:39:09.440 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:39:09.441 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:39:09.442 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:39:09.442 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:39:09.443 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:39:09.444 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:39:09.445 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:39:09.445 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:39:09.446 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:39:09.447 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:39:09.448 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:39:09.449 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:39:09.450 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:39:09.451 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:39:09.452 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:39:09.453 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:39:09.454 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:39:09.455 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:39:09.456 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:39:09.456 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:39:09.457 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:39:09.458 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:39:09.458 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:39:09.459 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:39:09.459 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:39:09.460 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:09.461 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:09.461 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:09.462 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:39:09.462 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:09.463 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:39:09.463 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:39:09.464 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:39:09.465 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:39:09.466 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:39:09.466 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:39:09.467 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:39:09.467 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:39:09.468 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:39:09.468 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:39:09.469 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:39:09.469 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:39:09.472 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:39:09.474 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:39:09.474 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:39:09.475 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:09.476 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:09.476 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:39:09.476 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:39:09.477 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:39:09.478 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:39:09.487 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:39:09.488 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:09.489 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:39:09.490 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:09.490 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:39:09.491 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:39:09.492 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:39:09.493 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:39:09.493 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:39:09.494 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:39:09.494 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:39:09.495 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.4633ms
2024-11-07 15:39:09.496 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:39:09.496 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:39:09.497 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:09.497 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:39:09.498 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 63.9941ms
2024-11-07 15:39:09.726 +07:00 [DBG] Connection id "0HN7UH3VGBS1B" received FIN.
2024-11-07 15:39:09.729 +07:00 [DBG] Connection id "0HN7UH3VGBS1B" is closed. The last processed stream ID was 1.
2024-11-07 15:39:09.730 +07:00 [DBG] Connection id "0HN7UH3VGBS1B" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:39:09.730 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1B completed.
2024-11-07 15:39:09.732 +07:00 [DBG] Connection id "0HN7UH3VGBS1B" stopped.
2024-11-07 15:39:23.485 +07:00 [DBG] Connection id "0HN7UH3VGBS1C" accepted.
2024-11-07 15:39:23.486 +07:00 [DBG] Connection id "0HN7UH3VGBS1C" started.
2024-11-07 15:39:23.493 +07:00 [DBG] Connection 0HN7UH3VGBS1C established using the following protocol: "Tls13"
2024-11-07 15:39:23.496 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:39:23.498 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:39:23.499 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:39:23.500 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:39:23.501 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:39:23.502 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:39:23.503 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:39:23.504 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:39:23.504 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:39:23.505 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:39:23.507 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:39:23.508 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:39:23.509 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:39:23.511 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:39:23.512 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:39:23.513 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:39:23.514 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:39:23.515 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:39:23.515 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:39:23.516 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:39:23.517 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:39:23.518 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:39:23.519 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:39:23.520 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:39:23.521 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:39:23.522 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:39:23.523 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:23.524 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:23.524 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:23.525 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:39:23.526 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:23.527 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:39:23.527 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:39:23.528 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:39:23.529 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:39:23.530 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:39:23.531 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:39:23.531 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:39:23.532 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:39:23.533 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:39:23.534 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:39:23.535 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:39:23.536 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:39:23.537 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:39:23.540 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:39:23.541 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-07 15:39:23.542 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:23.543 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:23.544 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:39:23.544 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:39:23.545 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:39:23.546 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:39:23.553 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:39:23.555 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:23.556 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 15:39:23.557 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:23.559 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-07 15:39:23.559 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:39:23.561 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:39:23.561 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:39:23.562 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:39:23.562 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:39:23.563 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:39:23.564 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.6035ms
2024-11-07 15:39:23.564 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:39:23.565 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:39:23.566 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:23.566 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:39:23.567 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 71.9344ms
2024-11-07 15:39:24.751 +07:00 [DBG] Connection id "0HN7UH3VGBS1C" received FIN.
2024-11-07 15:39:24.753 +07:00 [DBG] Connection id "0HN7UH3VGBS1C" is closed. The last processed stream ID was 1.
2024-11-07 15:39:24.753 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1C completed.
2024-11-07 15:39:24.754 +07:00 [DBG] Connection id "0HN7UH3VGBS1C" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:39:24.765 +07:00 [DBG] Connection id "0HN7UH3VGBS1C" stopped.
2024-11-07 15:39:29.758 +07:00 [DBG] Connection id "0HN7UH3VGBS1D" accepted.
2024-11-07 15:39:29.759 +07:00 [DBG] Connection id "0HN7UH3VGBS1D" started.
2024-11-07 15:39:29.762 +07:00 [DBG] Connection 0HN7UH3VGBS1D established using the following protocol: "Tls13"
2024-11-07 15:39:29.764 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:39:29.766 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:39:29.767 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:39:29.767 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:39:29.768 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:39:29.769 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:39:29.770 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:39:29.771 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:39:29.772 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:39:29.773 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:39:29.774 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:39:29.775 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:39:29.776 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:39:29.777 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:39:29.778 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:39:29.780 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:39:29.780 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:39:29.781 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:39:29.782 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:39:29.782 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:39:29.784 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:39:29.784 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:39:29.785 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:39:29.786 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:39:29.786 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:39:29.787 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:39:29.788 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:29.788 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:29.789 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:29.789 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:39:29.790 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:29.791 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:39:29.791 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:39:29.792 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:39:29.793 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:39:29.793 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:39:29.794 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:39:29.794 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:39:29.795 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:39:29.795 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:39:29.796 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:39:29.796 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:39:29.797 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:39:29.799 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:39:29.800 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:39:29.801 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:39:29.801 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:29.802 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:29.802 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:39:29.803 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:39:29.803 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:39:29.804 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:39:29.809 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:39:29.811 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:29.811 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:39:29.812 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:29.813 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:39:29.814 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:39:29.815 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:39:29.815 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:39:29.816 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:39:29.816 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:39:29.817 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:39:29.819 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.0216ms
2024-11-07 15:39:29.820 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:39:29.821 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:39:29.821 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:29.822 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:39:29.822 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 58.5175ms
2024-11-07 15:39:34.758 +07:00 [DBG] Connection id "0HN7UH3VGBS1D" received FIN.
2024-11-07 15:39:34.759 +07:00 [DBG] Connection id "0HN7UH3VGBS1D" is closed. The last processed stream ID was 1.
2024-11-07 15:39:34.759 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1D completed.
2024-11-07 15:39:34.759 +07:00 [DBG] Connection id "0HN7UH3VGBS1D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:39:34.762 +07:00 [DBG] Connection id "0HN7UH3VGBS1D" stopped.
2024-11-07 15:39:48.123 +07:00 [DBG] Connection id "0HN7UH3VGBS1E" accepted.
2024-11-07 15:39:48.124 +07:00 [DBG] Connection id "0HN7UH3VGBS1E" started.
2024-11-07 15:39:48.129 +07:00 [DBG] Connection 0HN7UH3VGBS1E established using the following protocol: "Tls13"
2024-11-07 15:39:48.130 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:39:48.136 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:39:48.138 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:39:48.138 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:39:48.139 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:39:48.140 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:39:48.141 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:39:48.142 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:39:48.143 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:39:48.144 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:39:48.145 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:39:48.146 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:39:48.148 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:39:48.149 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:39:48.150 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:39:48.151 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:39:48.151 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:39:48.152 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:39:48.153 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:39:48.154 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:39:48.155 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:39:48.155 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:39:48.156 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:39:48.157 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:39:48.158 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:39:48.159 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:39:48.159 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:48.160 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:48.161 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:48.162 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:39:48.162 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:39:48.163 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:39:48.164 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:39:48.165 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:39:48.166 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:39:48.167 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:39:48.168 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:39:48.169 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:39:48.170 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:39:48.171 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:39:48.171 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:39:48.172 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:39:48.173 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:39:48.174 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:39:48.176 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:39:48.176 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:39:48.177 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:48.178 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:48.179 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:39:48.179 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:39:48.180 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:39:48.181 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:39:48.187 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:39:48.189 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:48.190 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:39:48.191 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:48.191 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:39:48.193 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:39:48.194 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:39:48.195 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:39:48.195 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:39:48.196 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:39:48.197 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:39:48.198 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.0432ms
2024-11-07 15:39:48.198 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:39:48.199 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:39:48.200 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:39:48.201 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:39:48.202 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 71.374ms
2024-11-07 15:39:54.860 +07:00 [DBG] Connection id "0HN7UH3VGBS1E" received FIN.
2024-11-07 15:39:54.862 +07:00 [DBG] Connection id "0HN7UH3VGBS1E" is closed. The last processed stream ID was 1.
2024-11-07 15:39:54.862 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1E completed.
2024-11-07 15:39:54.863 +07:00 [DBG] Connection id "0HN7UH3VGBS1E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:39:54.874 +07:00 [DBG] Connection id "0HN7UH3VGBS1E" stopped.
2024-11-07 15:40:02.798 +07:00 [DBG] Connection id "0HN7UH3VGBS1F" accepted.
2024-11-07 15:40:02.798 +07:00 [DBG] Connection id "0HN7UH3VGBS1F" started.
2024-11-07 15:40:02.802 +07:00 [DBG] Connection 0HN7UH3VGBS1F established using the following protocol: "Tls13"
2024-11-07 15:40:02.804 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:40:02.806 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:40:02.806 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:40:02.807 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:40:02.807 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:40:02.808 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:40:02.809 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:40:02.810 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:40:02.811 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:40:02.812 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:40:02.813 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:40:02.814 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:40:02.814 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:40:02.815 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:40:02.816 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:40:02.817 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:40:02.819 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:40:02.820 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:40:02.820 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:40:02.821 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:40:02.822 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:40:02.823 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:40:02.824 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:40:02.824 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:40:02.825 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:40:02.826 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:40:02.827 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:40:02.828 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:40:02.828 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:40:02.829 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:40:02.829 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:40:02.830 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:40:02.831 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:40:02.832 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:40:02.833 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:40:02.834 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:40:02.834 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:40:02.835 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:40:02.836 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:40:02.837 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:40:02.837 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:40:02.838 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:40:02.839 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:40:02.841 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:40:02.843 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:40:02.844 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:40:02.844 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:02.845 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:02.846 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:40:02.846 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:40:02.848 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:40:02.849 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:40:02.859 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:40:02.861 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:02.861 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:40:02.862 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:02.863 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:40:02.866 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:40:02.868 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:40:02.868 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:40:02.868 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:40:02.869 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:40:02.870 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:40:02.871 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 53.1041ms
2024-11-07 15:40:02.871 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:40:02.872 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:40:02.873 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:02.874 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 15:40:02.875 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 72.2926ms
2024-11-07 15:40:09.793 +07:00 [DBG] Connection id "0HN7UH3VGBS1F" received FIN.
2024-11-07 15:40:09.794 +07:00 [DBG] Connection id "0HN7UH3VGBS1F" is closed. The last processed stream ID was 1.
2024-11-07 15:40:09.794 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1F completed.
2024-11-07 15:40:09.795 +07:00 [DBG] Connection id "0HN7UH3VGBS1F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:40:09.808 +07:00 [DBG] Connection id "0HN7UH3VGBS1F" stopped.
2024-11-07 15:40:09.818 +07:00 [DBG] Connection id "0HN7UH3VGBS1G" accepted.
2024-11-07 15:40:09.819 +07:00 [DBG] Connection id "0HN7UH3VGBS1G" started.
2024-11-07 15:40:09.822 +07:00 [DBG] Connection 0HN7UH3VGBS1G established using the following protocol: "Tls13"
2024-11-07 15:40:09.824 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:40:09.826 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:40:09.827 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:40:09.827 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:40:09.828 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:40:09.829 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:40:09.830 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:40:09.830 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:40:09.831 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:40:09.832 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:40:09.833 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:40:09.834 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:40:09.835 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:40:09.836 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:40:09.837 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:40:09.839 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:40:09.840 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:40:09.841 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:40:09.842 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:40:09.843 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:40:09.843 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:40:09.844 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:40:09.845 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:40:09.846 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:40:09.847 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:40:09.848 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:40:09.849 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:40:09.849 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:40:09.850 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:40:09.850 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:40:09.851 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:40:09.852 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:40:09.852 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:40:09.853 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:40:09.854 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:40:09.855 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:40:09.855 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:40:09.856 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:40:09.856 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:40:09.857 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:40:09.857 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:40:09.858 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:40:09.859 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:40:09.861 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:40:09.862 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:40:09.863 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:40:09.863 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:09.864 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:09.864 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:40:09.865 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:40:09.866 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:40:09.867 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:40:09.872 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:40:09.873 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:09.874 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:40:09.875 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:09.876 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:40:09.877 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:40:09.878 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:40:09.878 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:40:09.879 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:40:09.879 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:40:09.880 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:40:09.881 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.0892ms
2024-11-07 15:40:09.881 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:40:09.882 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:40:09.883 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:09.883 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:40:09.884 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 60.4438ms
2024-11-07 15:40:19.812 +07:00 [DBG] Connection id "0HN7UH3VGBS1G" received FIN.
2024-11-07 15:40:19.814 +07:00 [DBG] Connection id "0HN7UH3VGBS1G" is closed. The last processed stream ID was 1.
2024-11-07 15:40:19.814 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1G completed.
2024-11-07 15:40:19.815 +07:00 [DBG] Connection id "0HN7UH3VGBS1G" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:40:19.826 +07:00 [DBG] Connection id "0HN7UH3VGBS1G" stopped.
2024-11-07 15:40:49.908 +07:00 [DBG] Connection id "0HN7UH3VGBS1H" accepted.
2024-11-07 15:40:49.909 +07:00 [DBG] Connection id "0HN7UH3VGBS1H" started.
2024-11-07 15:40:49.915 +07:00 [DBG] Connection 0HN7UH3VGBS1H established using the following protocol: "Tls13"
2024-11-07 15:40:49.920 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:40:49.924 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:40:49.925 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:40:49.925 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:40:49.926 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:40:49.926 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:40:49.927 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:40:49.928 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:40:49.928 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:40:49.929 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:40:49.930 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:40:49.930 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:40:49.931 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:40:49.932 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:40:49.933 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:40:49.934 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:40:49.935 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:40:49.935 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:40:49.936 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:40:49.937 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:40:49.938 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:40:49.939 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:40:49.939 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:40:49.940 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:40:49.941 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:40:49.942 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:40:49.942 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:40:49.943 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:40:49.943 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:40:49.944 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:40:49.945 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:40:49.945 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:40:49.946 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:40:49.947 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:40:49.947 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:40:49.948 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:40:49.949 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:40:49.949 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:40:49.950 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:40:49.951 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:40:49.951 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:40:49.952 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:40:49.953 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:40:49.955 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:40:49.956 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:40:49.957 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:40:49.957 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:49.958 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:49.959 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:40:49.959 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:40:49.960 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:40:49.961 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:40:49.973 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:40:49.975 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:49.975 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:40:49.976 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:49.977 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:40:49.978 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:40:49.979 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:40:49.979 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:40:49.980 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:40:49.980 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:40:49.981 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:40:49.982 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 48.3854ms
2024-11-07 15:40:49.983 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:40:49.984 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:40:49.985 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:40:49.986 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:40:49.987 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 67.185ms
2024-11-07 15:40:54.861 +07:00 [DBG] Connection id "0HN7UH3VGBS1H" received FIN.
2024-11-07 15:40:54.862 +07:00 [DBG] Connection id "0HN7UH3VGBS1H" is closed. The last processed stream ID was 1.
2024-11-07 15:40:54.862 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1H completed.
2024-11-07 15:40:54.863 +07:00 [DBG] Connection id "0HN7UH3VGBS1H" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:40:54.876 +07:00 [DBG] Connection id "0HN7UH3VGBS1H" stopped.
2024-11-07 15:49:25.662 +07:00 [DBG] Connection id "0HN7UH3VGBS1I" accepted.
2024-11-07 15:49:25.667 +07:00 [DBG] Connection id "0HN7UH3VGBS1I" started.
2024-11-07 15:49:25.745 +07:00 [DBG] Connection 0HN7UH3VGBS1I established using the following protocol: "Tls13"
2024-11-07 15:49:25.751 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:49:25.754 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:49:25.756 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:49:25.757 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:49:25.758 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:49:25.759 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:49:25.761 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:25.763 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:49:25.765 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:25.767 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:49:25.768 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:49:25.768 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:49:25.769 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:49:25.771 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:49:25.772 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:49:25.773 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:49:25.777 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:49:25.778 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:49:25.778 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:49:25.779 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:49:25.780 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:49:25.781 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:49:25.781 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:49:25.782 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:49:25.783 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:49:25.783 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:49:25.784 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:25.784 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:25.785 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:25.786 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:49:25.786 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:25.787 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:49:25.787 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:49:25.788 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:25.789 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:25.790 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:49:25.790 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:25.791 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:49:25.792 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:49:25.793 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:25.793 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:25.794 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:49:25.795 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:25.800 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:49:25.804 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:49:25.809 +07:00 [DBG] Created DbConnection. (5ms).
2024-11-07 15:49:25.810 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:25.837 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:25.839 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:49:25.839 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:49:25.840 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:49:25.841 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:49:25.862 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:49:25.863 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:25.863 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:49:25.864 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:25.864 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:49:25.865 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:49:25.867 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:49:25.867 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:49:25.868 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:49:25.868 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:49:25.869 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:49:25.870 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 97.6621ms
2024-11-07 15:49:25.871 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:25.871 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:49:25.872 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:25.873 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:49:25.874 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 123.9791ms
2024-11-07 15:49:34.677 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:49:34.679 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:49:34.680 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:49:34.681 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:49:34.681 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:49:34.682 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:49:34.683 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:34.683 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:49:34.684 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:34.685 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:49:34.686 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:49:34.687 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:49:34.688 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:49:34.689 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:49:34.690 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:49:34.691 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:49:34.692 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:49:34.693 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:49:34.693 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:49:34.694 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:49:34.695 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:49:34.695 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:49:34.696 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:49:34.697 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:49:34.697 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:49:34.698 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:49:34.699 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:34.700 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:34.700 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:34.701 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:49:34.702 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:34.702 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:49:34.703 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:49:34.704 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:34.704 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:34.705 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:49:34.706 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:34.707 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:49:34.707 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:49:34.708 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:34.709 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:34.709 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:49:34.710 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:34.711 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:49:34.712 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:49:34.713 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:49:34.713 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:34.714 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:34.715 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:49:34.715 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:49:34.716 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:49:34.716 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:49:34.726 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:49:34.727 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:34.728 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:49:34.728 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:34.729 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:49:34.729 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:49:34.730 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:49:34.731 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:49:34.731 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:49:34.732 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:49:34.732 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:49:34.733 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.0096ms
2024-11-07 15:49:34.733 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:34.734 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:49:34.735 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:34.736 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:49:34.736 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 60.2818ms
2024-11-07 15:49:35.608 +07:00 [DBG] Connection id "0HN7UH3VGBS1I" received FIN.
2024-11-07 15:49:35.609 +07:00 [DBG] Connection id "0HN7UH3VGBS1I" is closed. The last processed stream ID was 3.
2024-11-07 15:49:35.609 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1I completed.
2024-11-07 15:49:35.610 +07:00 [DBG] Connection id "0HN7UH3VGBS1I" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:49:35.622 +07:00 [DBG] Connection id "0HN7UH3VGBS1I" stopped.
2024-11-07 15:49:42.445 +07:00 [DBG] Connection id "0HN7UH3VGBS1J" accepted.
2024-11-07 15:49:42.447 +07:00 [DBG] Connection id "0HN7UH3VGBS1J" started.
2024-11-07 15:49:42.452 +07:00 [DBG] Connection 0HN7UH3VGBS1J established using the following protocol: "Tls13"
2024-11-07 15:49:42.453 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:49:42.455 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:49:42.455 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:49:42.456 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:49:42.457 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:49:42.457 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:49:42.458 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:42.458 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:49:42.459 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:42.459 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:49:42.460 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:49:42.461 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:49:42.462 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:49:42.463 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:49:42.463 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:49:42.464 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:49:42.465 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:49:42.466 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:49:42.467 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:49:42.467 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:49:42.468 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:49:42.469 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:49:42.469 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:49:42.470 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:49:42.471 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:49:42.471 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:49:42.472 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:42.472 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:42.473 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:42.474 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:49:42.474 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:42.475 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:49:42.475 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:49:42.476 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:42.477 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:42.477 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:49:42.478 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:42.478 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:49:42.479 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:49:42.479 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:42.480 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:42.480 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:49:42.481 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:42.483 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:49:42.484 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:49:42.485 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:49:42.485 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:42.486 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:42.487 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:49:42.487 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:49:42.488 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:49:42.488 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:49:42.500 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:49:42.502 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:42.502 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:49:42.503 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:42.504 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:49:42.505 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:49:42.506 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:49:42.507 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:49:42.507 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:49:42.507 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:49:42.508 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:49:42.509 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.8616ms
2024-11-07 15:49:42.510 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:42.511 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:49:42.512 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:42.513 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:49:42.513 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 60.1321ms
2024-11-07 15:49:45.636 +07:00 [DBG] Connection id "0HN7UH3VGBS1J" received FIN.
2024-11-07 15:49:45.638 +07:00 [DBG] Connection id "0HN7UH3VGBS1J" is closed. The last processed stream ID was 1.
2024-11-07 15:49:45.638 +07:00 [DBG] Connection id "0HN7UH3VGBS1J" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:49:45.639 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1J completed.
2024-11-07 15:49:45.640 +07:00 [DBG] Connection id "0HN7UH3VGBS1J" stopped.
2024-11-07 15:49:47.460 +07:00 [DBG] Connection id "0HN7UH3VGBS1K" accepted.
2024-11-07 15:49:47.461 +07:00 [DBG] Connection id "0HN7UH3VGBS1K" started.
2024-11-07 15:49:47.464 +07:00 [DBG] Connection 0HN7UH3VGBS1K established using the following protocol: "Tls13"
2024-11-07 15:49:47.466 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:49:47.467 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:49:47.468 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:49:47.469 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:49:47.469 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:49:47.470 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:49:47.471 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:47.472 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:49:47.472 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:47.473 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:49:47.474 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:49:47.474 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:49:47.475 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:49:47.476 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:49:47.477 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:49:47.478 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:49:47.478 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:49:47.479 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:49:47.480 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:49:47.480 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:49:47.481 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:49:47.482 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:49:47.482 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:49:47.483 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:49:47.483 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:49:47.484 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:49:47.485 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:47.485 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:47.486 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:47.487 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:49:47.487 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:47.488 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:49:47.489 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:49:47.489 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:47.490 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:47.491 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:49:47.491 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:47.492 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:49:47.493 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:49:47.493 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:47.494 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:47.494 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:49:47.495 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:47.496 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:49:47.497 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:49:47.498 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:49:47.498 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:47.499 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:47.500 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:49:47.500 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:49:47.501 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:49:47.501 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:49:47.512 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:49:47.513 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:47.513 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:49:47.514 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:47.514 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:49:47.515 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:49:47.517 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:49:47.517 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:49:47.518 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:49:47.518 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:49:47.519 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:49:47.520 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.0691ms
2024-11-07 15:49:47.520 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:47.521 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:49:47.521 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:47.522 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:49:47.522 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 56.698ms
2024-11-07 15:49:50.638 +07:00 [DBG] Connection id "0HN7UH3VGBS1K" received FIN.
2024-11-07 15:49:50.639 +07:00 [DBG] Connection id "0HN7UH3VGBS1K" is closed. The last processed stream ID was 1.
2024-11-07 15:49:50.639 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1K completed.
2024-11-07 15:49:50.640 +07:00 [DBG] Connection id "0HN7UH3VGBS1K" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:49:50.642 +07:00 [DBG] Connection id "0HN7UH3VGBS1K" stopped.
2024-11-07 15:49:51.859 +07:00 [DBG] Connection id "0HN7UH3VGBS1L" accepted.
2024-11-07 15:49:51.861 +07:00 [DBG] Connection id "0HN7UH3VGBS1L" started.
2024-11-07 15:49:51.866 +07:00 [DBG] Connection 0HN7UH3VGBS1L established using the following protocol: "Tls13"
2024-11-07 15:49:51.870 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:49:51.871 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:49:51.874 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:49:51.875 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:49:51.876 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:49:51.876 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:49:51.877 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:51.879 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:49:51.880 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:51.881 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:49:51.882 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:49:51.883 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:49:51.884 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:49:51.885 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:49:51.887 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:49:51.888 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:49:51.889 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:49:51.890 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:49:51.891 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:49:51.891 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:49:51.892 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:49:51.893 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:49:51.894 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:49:51.894 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:49:51.895 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:49:51.895 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:49:51.896 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:51.897 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:51.897 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:51.898 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:49:51.898 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:51.899 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:49:51.900 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:49:51.901 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:51.901 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:51.902 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:49:51.902 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:51.903 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:49:51.904 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:49:51.904 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:51.905 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:51.905 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:49:51.906 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:51.908 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:49:51.909 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:49:51.910 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:49:51.910 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:51.911 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:51.912 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:49:51.912 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:49:51.913 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:49:51.913 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:49:51.927 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:49:51.929 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:51.929 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 15:49:51.930 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:51.931 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:49:51.931 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:49:51.933 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:49:51.933 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:49:51.933 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:49:51.934 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:49:51.935 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:49:51.936 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.595ms
2024-11-07 15:49:51.936 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:51.937 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:49:51.937 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:51.938 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:49:51.939 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 69.3473ms
2024-11-07 15:49:55.641 +07:00 [DBG] Connection id "0HN7UH3VGBS1L" received FIN.
2024-11-07 15:49:55.642 +07:00 [DBG] Connection id "0HN7UH3VGBS1L" is closed. The last processed stream ID was 1.
2024-11-07 15:49:55.642 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1L completed.
2024-11-07 15:49:55.643 +07:00 [DBG] Connection id "0HN7UH3VGBS1L" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:49:55.655 +07:00 [DBG] Connection id "0HN7UH3VGBS1L" stopped.
2024-11-07 15:49:56.896 +07:00 [DBG] Connection id "0HN7UH3VGBS1M" accepted.
2024-11-07 15:49:56.897 +07:00 [DBG] Connection id "0HN7UH3VGBS1M" started.
2024-11-07 15:49:56.903 +07:00 [DBG] Connection 0HN7UH3VGBS1M established using the following protocol: "Tls13"
2024-11-07 15:49:56.906 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 15:49:56.908 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 15:49:56.909 +07:00 [INF] CORS policy execution successful.
2024-11-07 15:49:56.909 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 15:49:56.910 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 15:49:56.911 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 15:49:56.913 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:56.913 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 15:49:56.914 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:56.915 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 15:49:56.916 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 15:49:56.916 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 15:49:56.917 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:49:56.918 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 15:49:56.919 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 15:49:56.920 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:49:56.922 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 15:49:56.922 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 15:49:56.923 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 15:49:56.924 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 15:49:56.925 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:49:56.925 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 15:49:56.926 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 15:49:56.927 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 15:49:56.927 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:49:56.928 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 15:49:56.929 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:56.929 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:56.930 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:56.931 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 15:49:56.931 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 15:49:56.932 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 15:49:56.933 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 15:49:56.934 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:56.935 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:56.935 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 15:49:56.936 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 15:49:56.937 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:49:56.937 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 15:49:56.938 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:56.938 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:56.939 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 15:49:56.939 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 15:49:56.941 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 15:49:56.942 +07:00 [DBG] Creating DbConnection.
2024-11-07 15:49:56.943 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 15:49:56.943 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:56.944 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:56.945 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 15:49:56.945 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 15:49:56.946 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 15:49:56.947 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:49:56.975 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 15:49:56.977 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:56.978 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 15:49:56.979 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:56.979 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 15:49:56.980 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 15:49:56.981 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 15:49:56.982 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 15:49:56.982 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 15:49:56.983 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 15:49:56.983 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 15:49:56.986 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 65.5389ms
2024-11-07 15:49:56.986 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 15:49:56.987 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 15:49:56.988 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 15:49:56.989 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 15:49:56.990 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 84.4961ms
2024-11-07 15:50:00.655 +07:00 [DBG] Connection id "0HN7UH3VGBS1M" received FIN.
2024-11-07 15:50:00.656 +07:00 [DBG] Connection id "0HN7UH3VGBS1M" is closed. The last processed stream ID was 1.
2024-11-07 15:50:00.656 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1M completed.
2024-11-07 15:50:00.657 +07:00 [DBG] Connection id "0HN7UH3VGBS1M" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 15:50:00.668 +07:00 [DBG] Connection id "0HN7UH3VGBS1M" stopped.
2024-11-07 22:30:03.488 +07:00 [DBG] Connection id "0HN7UH3VGBS1N" accepted.
2024-11-07 22:30:03.499 +07:00 [DBG] Connection id "0HN7UH3VGBS1N" started.
2024-11-07 22:30:03.566 +07:00 [DBG] Connection 0HN7UH3VGBS1N established using the following protocol: "Tls13"
2024-11-07 22:30:03.602 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:30:03.604 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:30:03.606 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:30:03.607 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:30:03.609 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:30:03.610 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:30:03.612 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:30:03.614 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:30:03.615 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:30:03.616 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:30:03.617 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:30:03.618 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:30:03.619 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:30:03.621 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:30:03.622 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:30:03.623 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:30:03.628 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:30:03.629 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:30:03.630 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:30:03.631 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:30:03.632 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:30:03.632 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:30:03.633 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:30:03.633 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:30:03.634 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:30:03.634 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:30:03.635 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:30:03.636 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:30:03.636 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:30:03.637 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:30:03.638 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:30:03.638 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:30:03.639 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:30:03.640 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:30:03.640 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:30:03.641 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:30:03.641 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:30:03.642 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:30:03.643 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:30:03.643 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:30:03.644 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:30:03.644 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:30:03.645 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:30:03.654 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:30:03.661 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:30:03.664 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-07 22:30:03.665 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:30:03.695 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:30:03.697 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:30:03.698 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-07 22:30:03.698 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-07 22:30:03.700 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:30:03.743 +07:00 [INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:30:03.745 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:30:03.746 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 22:30:03.748 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:30:03.750 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-07 22:30:03.752 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:30:03.753 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:30:03.753 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:30:03.754 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:30:03.754 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:30:03.755 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:30:03.757 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 133.9383ms
2024-11-07 22:30:03.758 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:30:03.759 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:30:03.759 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:30:03.760 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:30:03.761 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 159.8884ms
2024-11-07 22:30:03.850 +07:00 [DBG] Connection id "0HN7UH3VGBS1N" received FIN.
2024-11-07 22:30:03.850 +07:00 [DBG] Connection id "0HN7UH3VGBS1N" is closed. The last processed stream ID was 1.
2024-11-07 22:30:03.851 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1N completed.
2024-11-07 22:30:03.852 +07:00 [DBG] Connection id "0HN7UH3VGBS1N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:30:03.863 +07:00 [DBG] Connection id "0HN7UH3VGBS1N" stopped.
2024-11-07 22:41:35.674 +07:00 [DBG] Connection id "0HN7UH3VGBS1O" accepted.
2024-11-07 22:41:35.694 +07:00 [DBG] Connection id "0HN7UH3VGBS1O" started.
2024-11-07 22:41:35.819 +07:00 [DBG] Connection 0HN7UH3VGBS1O established using the following protocol: "Tls13"
2024-11-07 22:41:35.835 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:41:35.844 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:41:35.847 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:41:35.851 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:41:35.861 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:41:35.862 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:41:35.876 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:41:35.884 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:41:35.887 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:41:35.896 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:41:35.897 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:41:35.898 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:41:35.901 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:41:35.903 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:41:35.904 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:41:35.905 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:41:35.926 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:41:35.928 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:41:35.930 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:41:35.930 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:41:35.931 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:41:35.932 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:41:35.932 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:41:35.933 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:41:35.933 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:41:35.934 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:41:35.935 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:41:35.935 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:41:35.937 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:41:35.937 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:41:35.938 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:41:35.939 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:41:35.939 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:41:35.941 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:41:35.941 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:41:35.942 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:41:35.942 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:41:35.943 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:41:35.944 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:41:35.945 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:41:35.945 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:41:35.946 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:41:35.947 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:41:35.989 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:41:36.028 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:41:36.044 +07:00 [DBG] Created DbConnection. (14ms).
2024-11-07 22:41:36.047 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:41:36.147 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:41:36.149 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:41:36.150 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-07 22:41:36.153 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-07 22:41:36.156 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:41:36.270 +07:00 [INF] Executed DbCommand (112ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:41:36.271 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:41:36.272 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 22:41:36.274 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:41:36.275 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:41:36.278 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:41:36.281 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:41:36.281 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:41:36.281 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:41:36.282 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:41:36.283 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:41:36.293 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 385.5555ms
2024-11-07 22:41:36.294 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:41:36.294 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:41:36.295 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:41:36.296 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:41:36.298 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 466.3793ms
2024-11-07 22:41:39.676 +07:00 [DBG] Connection id "0HN7UH3VGBS1O" received FIN.
2024-11-07 22:41:39.677 +07:00 [DBG] Connection id "0HN7UH3VGBS1O" is closed. The last processed stream ID was 1.
2024-11-07 22:41:39.678 +07:00 [DBG] Connection id "0HN7UH3VGBS1O" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:41:39.679 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1O completed.
2024-11-07 22:41:39.680 +07:00 [DBG] Connection id "0HN7UH3VGBS1O" stopped.
2024-11-07 22:42:31.439 +07:00 [DBG] Connection id "0HN7UH3VGBS1P" accepted.
2024-11-07 22:42:31.442 +07:00 [DBG] Connection id "0HN7UH3VGBS1P" started.
2024-11-07 22:42:31.513 +07:00 [DBG] Connection 0HN7UH3VGBS1P established using the following protocol: "Tls13"
2024-11-07 22:42:31.527 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:42:31.528 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:42:31.529 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:42:31.530 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:42:31.535 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:42:31.536 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:42:31.537 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:42:31.542 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:42:31.543 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:42:31.544 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:42:31.545 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:42:31.546 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:42:31.547 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:42:31.548 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:42:31.549 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:42:31.549 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:42:31.553 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:42:31.554 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:42:31.555 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:42:31.555 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:42:31.556 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:42:31.557 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:42:31.557 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:42:31.558 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:42:31.558 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:42:31.559 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:42:31.560 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:42:31.560 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:42:31.561 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:42:31.562 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:42:31.562 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:42:31.563 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:42:31.563 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:42:31.564 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:42:31.565 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:42:31.565 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:42:31.566 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:42:31.567 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:42:31.567 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:42:31.568 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:42:31.568 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:42:31.569 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:42:31.570 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:42:31.575 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:42:31.580 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:42:31.581 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:42:31.582 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:42:31.585 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:42:31.587 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:42:31.588 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-07 22:42:31.589 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-07 22:42:31.591 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:42:31.639 +07:00 [INF] Executed DbCommand (49ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:42:31.641 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:42:31.642 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 22:42:31.643 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:42:31.644 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-07 22:42:31.646 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:42:31.648 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:42:31.648 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:42:31.649 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:42:31.649 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:42:31.651 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:42:31.652 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 102.8889ms
2024-11-07 22:42:31.653 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:42:31.654 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:42:31.654 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:42:31.655 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:42:31.656 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 130.9288ms
2024-11-07 22:42:34.756 +07:00 [DBG] Connection id "0HN7UH3VGBS1P" received FIN.
2024-11-07 22:42:34.757 +07:00 [DBG] Connection id "0HN7UH3VGBS1P" is closed. The last processed stream ID was 1.
2024-11-07 22:42:34.758 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1P completed.
2024-11-07 22:42:34.758 +07:00 [DBG] Connection id "0HN7UH3VGBS1P" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:42:34.769 +07:00 [DBG] Connection id "0HN7UH3VGBS1P" stopped.
2024-11-07 22:44:40.422 +07:00 [DBG] Connection id "0HN7UH3VGBS1Q" accepted.
2024-11-07 22:44:40.425 +07:00 [DBG] Connection id "0HN7UH3VGBS1Q" started.
2024-11-07 22:44:40.432 +07:00 [DBG] Connection 0HN7UH3VGBS1Q established using the following protocol: "Tls13"
2024-11-07 22:44:40.442 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:44:40.447 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:44:40.448 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:44:40.449 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:44:40.452 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:44:40.453 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:44:40.455 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:44:40.457 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:44:40.458 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:44:40.460 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:44:40.461 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:44:40.462 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:44:40.463 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:44:40.464 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:44:40.465 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:44:40.466 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:44:40.471 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:44:40.472 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:44:40.482 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:44:40.483 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:44:40.483 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:44:40.484 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:44:40.485 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:44:40.486 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:44:40.486 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:44:40.487 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:44:40.488 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:44:40.489 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:44:40.490 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:44:40.491 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:44:40.492 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:44:40.493 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:44:40.494 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:44:40.495 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:44:40.496 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:44:40.497 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:44:40.498 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:44:40.498 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:44:40.499 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:44:40.500 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:44:40.501 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:44:40.502 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:44:40.502 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:44:40.509 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:44:40.511 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:44:40.512 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:44:40.513 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:44:40.518 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:44:40.519 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:44:40.519 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:44:40.520 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 22:44:40.520 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:44:40.536 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:44:40.538 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:44:40.538 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 22:44:40.539 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:44:40.540 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:44:40.541 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:44:40.542 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:44:40.543 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:44:40.543 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:44:40.543 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:44:40.544 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:44:40.545 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 78.394ms
2024-11-07 22:44:40.545 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:44:40.546 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:44:40.547 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:44:40.547 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:44:40.548 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 106.0209ms
2024-11-07 22:44:44.430 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:44:44.433 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:44:44.434 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:44:44.435 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:44:44.436 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:44:44.437 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:44:44.440 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:44:44.441 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:44:44.441 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:44:44.443 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:44:44.445 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:44:44.446 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:44:44.447 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:44:44.449 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:44:44.449 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:44:44.451 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:44:44.453 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:44:44.457 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:44:44.458 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:44:44.459 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:44:44.460 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:44:44.461 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:44:44.461 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:44:44.462 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:44:44.463 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:44:44.464 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:44:44.465 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:44:44.466 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:44:44.466 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:44:44.467 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:44:44.468 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:44:44.468 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:44:44.469 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:44:44.470 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:44:44.470 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:44:44.472 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:44:44.472 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:44:44.473 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:44:44.474 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:44:44.475 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:44:44.475 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:44:44.476 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:44:44.477 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:44:44.485 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:44:44.489 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:44:44.490 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:44:44.491 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:44:44.492 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:44:44.493 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:44:44.493 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:44:44.494 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 22:44:44.495 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:44:44.511 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:44:44.513 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:44:44.513 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 22:44:44.514 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:44:44.515 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:44:44.515 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:44:44.517 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:44:44.517 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:44:44.517 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:44:44.518 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:44:44.519 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:44:44.520 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 68.4608ms
2024-11-07 22:44:44.520 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:44:44.521 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:44:44.523 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:44:44.524 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:44:44.525 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 95.6142ms
2024-11-07 22:44:44.974 +07:00 [DBG] Connection id "0HN7UH3VGBS1Q" received FIN.
2024-11-07 22:44:44.975 +07:00 [DBG] Connection id "0HN7UH3VGBS1Q" is closed. The last processed stream ID was 3.
2024-11-07 22:44:44.975 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1Q completed.
2024-11-07 22:44:44.976 +07:00 [DBG] Connection id "0HN7UH3VGBS1Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:44:44.988 +07:00 [DBG] Connection id "0HN7UH3VGBS1Q" stopped.
2024-11-07 22:45:51.427 +07:00 [DBG] Connection id "0HN7UH3VGBS1R" accepted.
2024-11-07 22:45:51.428 +07:00 [DBG] Connection id "0HN7UH3VGBS1R" started.
2024-11-07 22:45:51.495 +07:00 [DBG] Connection 0HN7UH3VGBS1R established using the following protocol: "Tls13"
2024-11-07 22:45:51.513 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:45:51.515 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:45:51.515 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:45:51.518 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:45:51.519 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:45:51.520 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:45:51.521 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:45:51.522 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:45:51.523 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:45:51.523 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:45:51.524 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:45:51.525 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:45:51.527 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:45:51.528 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:45:51.529 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:45:51.529 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:45:51.531 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:45:51.531 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:45:51.533 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:45:51.534 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:45:51.535 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:45:51.535 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:45:51.536 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:45:51.536 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:45:51.537 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:45:51.537 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:45:51.538 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:45:51.539 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:45:51.539 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:45:51.540 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:45:51.540 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:45:51.541 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:45:51.542 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:45:51.542 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:45:51.543 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:45:51.543 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:45:51.544 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:45:51.545 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:45:51.545 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:45:51.546 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:45:51.547 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:45:51.547 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:45:51.548 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:45:51.552 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:45:51.557 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:45:51.557 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:45:51.557 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:45:51.559 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:45:51.560 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:45:51.560 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:45:51.561 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 22:45:51.563 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:45:51.580 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:45:51.581 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:45:51.582 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 22:45:51.583 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:45:51.583 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:45:51.584 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:45:51.586 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:45:51.586 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:45:51.587 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:45:51.587 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:45:51.587 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:45:51.590 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 60.2175ms
2024-11-07 22:45:51.590 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:45:51.591 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:45:51.591 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:45:51.592 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:45:51.593 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 79.5752ms
2024-11-07 22:45:55.080 +07:00 [DBG] Connection id "0HN7UH3VGBS1R" received FIN.
2024-11-07 22:45:55.081 +07:00 [DBG] Connection id "0HN7UH3VGBS1R" is closed. The last processed stream ID was 1.
2024-11-07 22:45:55.082 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1R completed.
2024-11-07 22:45:55.082 +07:00 [DBG] Connection id "0HN7UH3VGBS1R" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:45:55.095 +07:00 [DBG] Connection id "0HN7UH3VGBS1R" stopped.
2024-11-07 22:46:05.413 +07:00 [DBG] Connection id "0HN7UH3VGBS1S" accepted.
2024-11-07 22:46:05.414 +07:00 [DBG] Connection id "0HN7UH3VGBS1S" started.
2024-11-07 22:46:05.417 +07:00 [DBG] Connection 0HN7UH3VGBS1S established using the following protocol: "Tls13"
2024-11-07 22:46:05.419 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:46:05.421 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:46:05.421 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:46:05.422 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:46:05.423 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:46:05.423 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:46:05.424 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:46:05.425 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:46:05.425 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:46:05.434 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:46:05.440 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:46:05.440 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:46:05.441 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:46:05.443 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:46:05.443 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:46:05.444 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:46:05.445 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:46:05.446 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:46:05.447 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:46:05.447 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:46:05.448 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:46:05.449 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:46:05.450 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:46:05.450 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:46:05.451 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:46:05.452 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:46:05.452 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:46:05.453 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:46:05.454 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:46:05.455 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:46:05.455 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:46:05.456 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:46:05.457 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:46:05.457 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:46:05.458 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:46:05.459 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:46:05.459 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:46:05.460 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:46:05.461 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:46:05.461 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:46:05.462 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:46:05.463 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:46:05.463 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:46:05.464 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:46:05.466 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:46:05.467 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:46:05.467 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:46:05.468 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:46:05.469 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:46:05.470 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:46:05.471 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 22:46:05.472 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:46:05.486 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:46:05.487 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:46:05.488 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 22:46:05.489 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:46:05.489 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:46:05.490 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:46:05.492 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:46:05.492 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:46:05.493 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:46:05.495 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:46:05.495 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:46:05.496 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 51.824ms
2024-11-07 22:46:05.497 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:46:05.498 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:46:05.499 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:46:05.500 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:46:05.501 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 81.8911ms
2024-11-07 22:46:10.108 +07:00 [DBG] Connection id "0HN7UH3VGBS1S" received FIN.
2024-11-07 22:46:10.109 +07:00 [DBG] Connection id "0HN7UH3VGBS1S" is closed. The last processed stream ID was 1.
2024-11-07 22:46:10.109 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1S completed.
2024-11-07 22:46:10.109 +07:00 [DBG] Connection id "0HN7UH3VGBS1S" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:46:10.117 +07:00 [DBG] Connection id "0HN7UH3VGBS1S" stopped.
2024-11-07 22:47:22.382 +07:00 [DBG] Connection id "0HN7UH3VGBS1T" accepted.
2024-11-07 22:47:22.390 +07:00 [DBG] Connection id "0HN7UH3VGBS1T" started.
2024-11-07 22:47:22.442 +07:00 [DBG] Connection 0HN7UH3VGBS1T established using the following protocol: "Tls13"
2024-11-07 22:47:22.477 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:47:22.482 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:47:22.484 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:47:22.487 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:47:22.490 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:47:22.492 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:47:22.498 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:47:22.501 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:47:22.502 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:47:22.508 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:47:22.510 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:47:22.511 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:47:22.513 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:47:22.517 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:47:22.518 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:47:22.520 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:47:22.534 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:47:22.535 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:47:22.536 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:47:22.537 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:47:22.539 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:47:22.539 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:47:22.540 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:47:22.541 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:47:22.542 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:47:22.542 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:47:22.543 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:22.544 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:22.545 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:22.545 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:47:22.546 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:22.547 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:47:22.548 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:47:22.549 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:47:22.549 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:47:22.550 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:47:22.551 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:47:22.551 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:47:22.552 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:47:22.553 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:47:22.553 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:47:22.554 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:47:22.554 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:47:22.577 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:47:22.595 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:47:22.597 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-07 22:47:22.597 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:22.603 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:22.606 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:47:22.608 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-07 22:47:22.609 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-07 22:47:22.614 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:47:22.683 +07:00 [INF] Executed DbCommand (72ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:47:22.685 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:22.686 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 22:47:22.687 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:22.688 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:47:22.693 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:47:22.694 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:47:22.695 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:47:22.695 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:47:22.696 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:47:22.697 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:47:22.699 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 179.6757ms
2024-11-07 22:47:22.700 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:47:22.701 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:47:22.702 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:22.703 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:47:22.704 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 230.3457ms
2024-11-07 22:47:24.059 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:47:24.060 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:47:24.060 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:47:24.061 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:47:24.061 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:47:24.062 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:47:24.062 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:47:24.063 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:47:24.063 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:47:24.064 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:47:24.065 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:47:24.065 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:47:24.066 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:47:24.067 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:47:24.068 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:47:24.069 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:47:24.069 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:47:24.070 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:47:24.071 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:47:24.071 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:47:24.072 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:47:24.072 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:47:24.073 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:47:24.074 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:47:24.074 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:47:24.075 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:47:24.075 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:24.076 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:24.076 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:24.077 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:47:24.077 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:24.078 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:47:24.078 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:47:24.079 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:47:24.079 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:47:24.080 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:47:24.081 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:47:24.081 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:47:24.082 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:47:24.082 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:47:24.083 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:47:24.083 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:47:24.084 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:47:24.086 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:47:24.090 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:47:24.091 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:47:24.091 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:24.092 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:24.093 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:47:24.093 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:47:24.094 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 22:47:24.095 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:47:24.103 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:47:24.105 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:24.106 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 22:47:24.107 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:24.107 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:47:24.108 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:47:24.110 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:47:24.110 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:47:24.110 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:47:24.111 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:47:24.112 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:47:24.113 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.8621ms
2024-11-07 22:47:24.114 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:47:24.115 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:47:24.115 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:24.116 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:47:24.117 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 58.2902ms
2024-11-07 22:47:25.197 +07:00 [DBG] Connection id "0HN7UH3VGBS1T" received FIN.
2024-11-07 22:47:25.198 +07:00 [DBG] Connection id "0HN7UH3VGBS1T" is closed. The last processed stream ID was 3.
2024-11-07 22:47:25.199 +07:00 [DBG] Connection id "0HN7UH3VGBS1T" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:47:25.199 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1T completed.
2024-11-07 22:47:25.200 +07:00 [DBG] Connection id "0HN7UH3VGBS1T" stopped.
2024-11-07 22:47:45.474 +07:00 [DBG] Connection id "0HN7UH3VGBS1U" accepted.
2024-11-07 22:47:45.475 +07:00 [DBG] Connection id "0HN7UH3VGBS1U" started.
2024-11-07 22:47:45.479 +07:00 [DBG] Connection 0HN7UH3VGBS1U established using the following protocol: "Tls13"
2024-11-07 22:47:45.488 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:47:45.494 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:47:45.495 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:47:45.495 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:47:45.496 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:47:45.497 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:47:45.498 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:47:45.498 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:47:45.499 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:47:45.500 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:47:45.501 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:47:45.502 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:47:45.503 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:47:45.504 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:47:45.505 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:47:45.506 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:47:45.507 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:47:45.508 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:47:45.509 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:47:45.510 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:47:45.511 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:47:45.511 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:47:45.512 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:47:45.513 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:47:45.513 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:47:45.514 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:47:45.515 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:45.516 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:45.516 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:45.517 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:47:45.518 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:45.519 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:47:45.520 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:47:45.521 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:47:45.521 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:47:45.522 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:47:45.523 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:47:45.524 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:47:45.524 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:47:45.525 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:47:45.525 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:47:45.526 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:47:45.526 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:47:45.527 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:47:45.529 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:47:45.529 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:47:45.530 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:45.531 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:45.531 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:47:45.532 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:47:45.532 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 22:47:45.533 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:47:45.545 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:47:45.546 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:45.547 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 22:47:45.548 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:45.548 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:47:45.549 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:47:45.550 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:47:45.551 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:47:45.551 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:47:45.552 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:47:45.552 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:47:45.553 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.0599ms
2024-11-07 22:47:45.554 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:47:45.555 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:47:45.555 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:45.556 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:47:45.557 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 68.5501ms
2024-11-07 22:47:55.255 +07:00 [DBG] Connection id "0HN7UH3VGBS1U" received FIN.
2024-11-07 22:47:55.256 +07:00 [DBG] Connection id "0HN7UH3VGBS1U" is closed. The last processed stream ID was 1.
2024-11-07 22:47:55.256 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1U completed.
2024-11-07 22:47:55.256 +07:00 [DBG] Connection id "0HN7UH3VGBS1U" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:47:55.261 +07:00 [DBG] Connection id "0HN7UH3VGBS1U" stopped.
2024-11-07 22:47:58.408 +07:00 [DBG] Connection id "0HN7UH3VGBS1V" accepted.
2024-11-07 22:47:58.409 +07:00 [DBG] Connection id "0HN7UH3VGBS1V" started.
2024-11-07 22:47:58.416 +07:00 [DBG] Connection 0HN7UH3VGBS1V established using the following protocol: "Tls13"
2024-11-07 22:47:58.418 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:47:58.419 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:47:58.420 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:47:58.420 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:47:58.421 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:47:58.421 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:47:58.422 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:47:58.423 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:47:58.424 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:47:58.425 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:47:58.426 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:47:58.427 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:47:58.428 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:47:58.433 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:47:58.434 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:47:58.435 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:47:58.436 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:47:58.436 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:47:58.437 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:47:58.438 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:47:58.438 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:47:58.439 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:47:58.440 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:47:58.440 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:47:58.441 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:47:58.442 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:47:58.442 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:58.443 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:58.444 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:58.444 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:47:58.445 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:47:58.445 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:47:58.446 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:47:58.447 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:47:58.447 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:47:58.448 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:47:58.448 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:47:58.449 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:47:58.449 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:47:58.450 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:47:58.451 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:47:58.451 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:47:58.452 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:47:58.453 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:47:58.455 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:47:58.455 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:47:58.456 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:58.457 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:58.458 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:47:58.459 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:47:58.459 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 22:47:58.460 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:47:58.466 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:47:58.467 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:58.468 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 22:47:58.469 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:58.469 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:47:58.474 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:47:58.475 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:47:58.476 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:47:58.476 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:47:58.476 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:47:58.477 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:47:58.478 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.4789ms
2024-11-07 22:47:58.478 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:47:58.479 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:47:58.479 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:47:58.480 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:47:58.480 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 63.2342ms
2024-11-07 22:48:04.838 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:48:04.840 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:48:04.841 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:48:04.841 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:48:04.842 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:48:04.842 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:48:04.843 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:48:04.844 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:48:04.845 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:48:04.845 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:48:04.847 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:48:04.848 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:48:04.849 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:48:04.850 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:48:04.851 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:48:04.852 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:48:04.853 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:48:04.854 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:48:04.855 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:48:04.856 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:48:04.857 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:48:04.858 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:48:04.858 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:48:04.859 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:48:04.860 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:48:04.860 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:48:04.861 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:04.862 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:04.863 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:04.864 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:48:04.864 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:04.865 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:48:04.865 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:48:04.866 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:48:04.867 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:48:04.868 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:48:04.869 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:48:04.870 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:48:04.871 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:48:04.872 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:48:04.872 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:48:04.873 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:48:04.873 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:48:04.875 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:48:04.877 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:48:04.877 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:48:04.877 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:04.878 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:04.879 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:48:04.879 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:48:04.880 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 22:48:04.881 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:48:04.886 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:48:04.888 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:04.888 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 22:48:04.889 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:04.890 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:48:04.891 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:48:04.892 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:48:04.892 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:48:04.893 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:48:04.893 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:48:04.894 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:48:04.895 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.0461ms
2024-11-07 22:48:04.896 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:48:04.896 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:48:04.897 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:04.898 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:48:04.898 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 60.3304ms
2024-11-07 22:48:05.262 +07:00 [DBG] Connection id "0HN7UH3VGBS1V" received FIN.
2024-11-07 22:48:05.263 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS1V completed.
2024-11-07 22:48:05.263 +07:00 [DBG] Connection id "0HN7UH3VGBS1V" is closed. The last processed stream ID was 3.
2024-11-07 22:48:05.264 +07:00 [DBG] Connection id "0HN7UH3VGBS1V" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:48:05.270 +07:00 [DBG] Connection id "0HN7UH3VGBS1V" stopped.
2024-11-07 22:48:18.576 +07:00 [DBG] Connection id "0HN7UH3VGBS20" accepted.
2024-11-07 22:48:18.577 +07:00 [DBG] Connection id "0HN7UH3VGBS20" started.
2024-11-07 22:48:18.580 +07:00 [DBG] Connection 0HN7UH3VGBS20 established using the following protocol: "Tls13"
2024-11-07 22:48:18.587 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:48:18.589 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:48:18.589 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:48:18.590 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:48:18.591 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:48:18.591 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:48:18.592 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:48:18.593 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:48:18.594 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:48:18.594 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:48:18.595 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:48:18.595 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:48:18.596 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:48:18.597 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:48:18.598 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:48:18.598 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:48:18.599 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:48:18.600 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:48:18.600 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:48:18.601 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:48:18.602 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:48:18.602 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:48:18.603 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:48:18.603 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:48:18.604 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:48:18.604 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:48:18.605 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:18.605 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:18.606 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:18.607 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:48:18.607 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:18.608 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:48:18.608 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:48:18.609 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:48:18.609 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:48:18.610 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:48:18.610 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:48:18.611 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:48:18.611 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:48:18.612 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:48:18.613 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:48:18.613 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:48:18.614 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:48:18.615 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:48:18.617 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:48:18.617 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:48:18.617 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:18.618 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:18.619 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:48:18.619 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:48:18.620 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:48:18.620 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:48:18.625 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:48:18.626 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:18.626 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 22:48:18.627 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:18.628 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:48:18.628 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:48:18.629 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:48:18.630 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:48:18.630 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:48:18.630 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:48:18.631 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:48:18.632 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.3464ms
2024-11-07 22:48:18.632 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:48:18.633 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:48:18.633 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:18.634 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:48:18.635 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 47.8909ms
2024-11-07 22:48:25.296 +07:00 [DBG] Connection id "0HN7UH3VGBS20" received FIN.
2024-11-07 22:48:25.296 +07:00 [DBG] Connection id "0HN7UH3VGBS20" is closed. The last processed stream ID was 1.
2024-11-07 22:48:25.297 +07:00 [DBG] Connection id "0HN7UH3VGBS20" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:48:25.341 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS20 completed.
2024-11-07 22:48:25.342 +07:00 [DBG] Connection id "0HN7UH3VGBS20" stopped.
2024-11-07 22:48:30.086 +07:00 [DBG] Connection id "0HN7UH3VGBS21" accepted.
2024-11-07 22:48:30.086 +07:00 [DBG] Connection id "0HN7UH3VGBS21" started.
2024-11-07 22:48:30.092 +07:00 [DBG] Connection 0HN7UH3VGBS21 established using the following protocol: "Tls13"
2024-11-07 22:48:30.095 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:48:30.097 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:48:30.097 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:48:30.098 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:48:30.098 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:48:30.099 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:48:30.100 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:48:30.101 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:48:30.102 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:48:30.103 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:48:30.104 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:48:30.105 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:48:30.106 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:48:30.107 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:48:30.108 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:48:30.109 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:48:30.110 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:48:30.110 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:48:30.111 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:48:30.112 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:48:30.113 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:48:30.113 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:48:30.114 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:48:30.115 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:48:30.116 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:48:30.116 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:48:30.117 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:30.118 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:30.119 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:30.120 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:48:30.121 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:30.122 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:48:30.123 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:48:30.123 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:48:30.124 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:48:30.125 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:48:30.126 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:48:30.126 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:48:30.127 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:48:30.128 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:48:30.129 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:48:30.129 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:48:30.130 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:48:30.135 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:48:30.137 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:48:30.137 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:48:30.138 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:30.138 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:30.139 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:48:30.139 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:48:30.140 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:48:30.140 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:48:30.145 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:48:30.146 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:30.147 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 22:48:30.148 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:30.148 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:48:30.149 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:48:30.150 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:48:30.151 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:48:30.151 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:48:30.151 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:48:30.153 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:48:30.154 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.8624ms
2024-11-07 22:48:30.154 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:48:30.155 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:48:30.156 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:30.156 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:48:30.157 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 61.928ms
2024-11-07 22:48:35.310 +07:00 [DBG] Connection id "0HN7UH3VGBS21" received FIN.
2024-11-07 22:48:35.310 +07:00 [DBG] Connection id "0HN7UH3VGBS21" is closed. The last processed stream ID was 1.
2024-11-07 22:48:35.311 +07:00 [DBG] Connection id "0HN7UH3VGBS21" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:48:35.319 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS21 completed.
2024-11-07 22:48:35.320 +07:00 [DBG] Connection id "0HN7UH3VGBS21" stopped.
2024-11-07 22:48:37.474 +07:00 [DBG] Connection id "0HN7UH3VGBS22" accepted.
2024-11-07 22:48:37.475 +07:00 [DBG] Connection id "0HN7UH3VGBS22" started.
2024-11-07 22:48:37.479 +07:00 [DBG] Connection 0HN7UH3VGBS22 established using the following protocol: "Tls13"
2024-11-07 22:48:37.481 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:48:37.482 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:48:37.483 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:48:37.483 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:48:37.483 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:48:37.484 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:48:37.485 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:48:37.485 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:48:37.486 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:48:37.486 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:48:37.487 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:48:37.488 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:48:37.489 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:48:37.490 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:48:37.490 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:48:37.491 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:48:37.492 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:48:37.493 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:48:37.493 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:48:37.494 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:48:37.495 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:48:37.495 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:48:37.496 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:48:37.497 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:48:37.497 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:48:37.498 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:48:37.498 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:37.499 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:37.499 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:37.500 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:48:37.500 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:48:37.501 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:48:37.502 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:48:37.503 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:48:37.503 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:48:37.504 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:48:37.504 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:48:37.505 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:48:37.505 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:48:37.506 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:48:37.506 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:48:37.507 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:48:37.508 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:48:37.509 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:48:37.511 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:48:37.511 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:48:37.512 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:37.512 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:37.513 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:48:37.513 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:48:37.514 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 22:48:37.514 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:48:37.520 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:48:37.521 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:37.522 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 22:48:37.523 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:37.523 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:48:37.524 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:48:37.525 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:48:37.526 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:48:37.526 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:48:37.526 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:48:37.527 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:48:37.528 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.5708ms
2024-11-07 22:48:37.528 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:48:37.529 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:48:37.530 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:48:37.531 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 22:48:37.531 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 50.7272ms
2024-11-07 22:48:45.328 +07:00 [DBG] Connection id "0HN7UH3VGBS22" received FIN.
2024-11-07 22:48:45.329 +07:00 [DBG] Connection id "0HN7UH3VGBS22" is closed. The last processed stream ID was 1.
2024-11-07 22:48:45.329 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS22 completed.
2024-11-07 22:48:45.330 +07:00 [DBG] Connection id "0HN7UH3VGBS22" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:48:45.337 +07:00 [DBG] Connection id "0HN7UH3VGBS22" stopped.
2024-11-07 22:49:02.201 +07:00 [DBG] Connection id "0HN7UH3VGBS23" accepted.
2024-11-07 22:49:02.202 +07:00 [DBG] Connection id "0HN7UH3VGBS23" started.
2024-11-07 22:49:02.207 +07:00 [DBG] Connection 0HN7UH3VGBS23 established using the following protocol: "Tls13"
2024-11-07 22:49:02.210 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:49:02.211 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:49:02.212 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:49:02.212 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:49:02.213 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:49:02.215 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:49:02.218 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:49:02.224 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:49:02.225 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:49:02.226 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:49:02.227 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:49:02.228 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:49:02.229 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:49:02.231 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:49:02.232 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:49:02.232 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:49:02.234 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:49:02.235 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:49:02.236 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:49:02.237 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:49:02.238 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:49:02.239 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:49:02.240 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:49:02.241 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:49:02.242 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:49:02.243 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:49:02.244 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:49:02.244 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:49:02.245 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:49:02.246 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:49:02.246 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:49:02.247 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:49:02.248 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:49:02.249 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:49:02.250 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:49:02.251 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:49:02.251 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:49:02.252 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:49:02.252 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:49:02.253 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:49:02.254 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:49:02.255 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:49:02.255 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:49:02.257 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:49:02.259 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:49:02.261 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-07 22:49:02.261 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:49:02.262 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:49:02.264 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:49:02.266 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-07 22:49:02.266 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-07 22:49:02.268 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:49:02.274 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:49:02.276 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:49:02.277 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 22:49:02.277 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:49:02.278 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 22:49:02.279 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:49:02.281 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:49:02.281 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:49:02.282 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:49:02.282 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:49:02.283 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:49:02.284 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 51.407ms
2024-11-07 22:49:02.284 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:49:02.285 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:49:02.286 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:49:02.286 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:49:02.287 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 77.4795ms
2024-11-07 22:49:05.466 +07:00 [DBG] Connection id "0HN7UH3VGBS23" received FIN.
2024-11-07 22:49:05.467 +07:00 [DBG] Connection id "0HN7UH3VGBS23" is closed. The last processed stream ID was 1.
2024-11-07 22:49:05.467 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS23 completed.
2024-11-07 22:49:05.468 +07:00 [DBG] Connection id "0HN7UH3VGBS23" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:49:05.475 +07:00 [DBG] Connection id "0HN7UH3VGBS23" stopped.
2024-11-07 22:49:19.663 +07:00 [DBG] Connection id "0HN7UH3VGBS24" accepted.
2024-11-07 22:49:19.664 +07:00 [DBG] Connection id "0HN7UH3VGBS24" started.
2024-11-07 22:49:19.681 +07:00 [DBG] Connection 0HN7UH3VGBS24 established using the following protocol: "Tls13"
2024-11-07 22:49:19.684 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 22:49:19.686 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 22:49:19.686 +07:00 [INF] CORS policy execution successful.
2024-11-07 22:49:19.687 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 22:49:19.688 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 22:49:19.689 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 22:49:19.690 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:49:19.690 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 22:49:19.691 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:49:19.692 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 22:49:19.699 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 22:49:19.700 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 22:49:19.701 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:49:19.702 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 22:49:19.703 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 22:49:19.704 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:49:19.707 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 22:49:19.709 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 22:49:19.710 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 22:49:19.711 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 22:49:19.712 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:49:19.712 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 22:49:19.713 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 22:49:19.714 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 22:49:19.715 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:49:19.716 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 22:49:19.717 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 22:49:19.718 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:49:19.718 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 22:49:19.719 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 22:49:19.720 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 22:49:19.721 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 22:49:19.721 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 22:49:19.722 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:49:19.724 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 22:49:19.725 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 22:49:19.726 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 22:49:19.726 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:49:19.727 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 22:49:19.728 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:49:19.728 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:49:19.729 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 22:49:19.730 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 22:49:19.731 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 22:49:19.733 +07:00 [DBG] Creating DbConnection.
2024-11-07 22:49:19.734 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 22:49:19.734 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:49:19.735 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:49:19.736 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 22:49:19.736 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 22:49:19.737 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 22:49:19.738 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:49:19.745 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 22:49:19.747 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:49:19.748 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 22:49:19.749 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:49:19.762 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (12ms).
2024-11-07 22:49:19.763 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 22:49:19.765 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 22:49:19.766 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 22:49:19.766 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 22:49:19.767 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 22:49:19.768 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 22:49:19.769 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 64.8405ms
2024-11-07 22:49:19.770 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 22:49:19.773 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 22:49:19.774 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 22:49:19.775 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 22:49:19.777 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 93.1842ms
2024-11-07 22:49:20.390 +07:00 [DBG] Connection id "0HN7UH3VGBS24" received FIN.
2024-11-07 22:49:20.398 +07:00 [DBG] Connection id "0HN7UH3VGBS24" is closed. The last processed stream ID was 1.
2024-11-07 22:49:20.398 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS24 completed.
2024-11-07 22:49:20.506 +07:00 [DBG] Connection id "0HN7UH3VGBS24" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 22:49:20.727 +07:00 [DBG] Connection id "0HN7UH3VGBS24" stopped.
2024-11-07 23:06:38.254 +07:00 [DBG] Connection id "0HN7UH3VGBS25" accepted.
2024-11-07 23:06:38.262 +07:00 [DBG] Connection id "0HN7UH3VGBS25" started.
2024-11-07 23:06:38.288 +07:00 [DBG] Connection 0HN7UH3VGBS25 established using the following protocol: "Tls13"
2024-11-07 23:06:38.301 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:06:38.307 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:06:38.308 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:06:38.310 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:06:38.311 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:06:38.311 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:06:38.314 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:06:38.317 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:06:38.318 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:06:38.320 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:06:38.322 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:06:38.322 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:06:38.324 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:06:38.326 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:06:38.327 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:06:38.329 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:06:38.336 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:06:38.337 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:06:38.338 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:06:38.338 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:06:38.339 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:06:38.339 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:06:38.340 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:06:38.340 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:06:38.341 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:06:38.342 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:06:38.342 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:06:38.343 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:06:38.343 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:06:38.344 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:06:38.344 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:06:38.345 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:06:38.345 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:06:38.346 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:06:38.346 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:06:38.347 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:06:38.348 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:06:38.349 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:06:38.349 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:06:38.350 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:06:38.351 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:06:38.351 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:06:38.352 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:06:38.365 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:06:38.372 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:06:38.379 +07:00 [DBG] Created DbConnection. (6ms).
2024-11-07 23:06:38.380 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:06:38.426 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:06:38.429 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:06:38.429 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-07 23:06:38.430 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-07 23:06:38.435 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:06:38.494 +07:00 [INF] Executed DbCommand (63ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:06:38.496 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:06:38.497 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:06:38.498 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:06:38.499 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:06:38.500 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:06:38.502 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:06:38.502 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:06:38.502 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:06:38.503 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:06:38.504 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:06:38.506 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 177.2481ms
2024-11-07 23:06:38.506 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:06:38.507 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:06:38.508 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:06:38.508 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:06:38.509 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 208.409ms
2024-11-07 23:06:42.472 +07:00 [DBG] Connection id "0HN7UH3VGBS25" received FIN.
2024-11-07 23:06:42.473 +07:00 [DBG] Connection id "0HN7UH3VGBS25" is closed. The last processed stream ID was 1.
2024-11-07 23:06:42.474 +07:00 [DBG] Connection id "0HN7UH3VGBS25" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:06:42.474 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS25 completed.
2024-11-07 23:06:42.477 +07:00 [DBG] Connection id "0HN7UH3VGBS25" stopped.
2024-11-07 23:07:03.460 +07:00 [DBG] Connection id "0HN7UH3VGBS26" accepted.
2024-11-07 23:07:03.460 +07:00 [DBG] Connection id "0HN7UH3VGBS26" started.
2024-11-07 23:07:03.464 +07:00 [DBG] Connection 0HN7UH3VGBS26 established using the following protocol: "Tls13"
2024-11-07 23:07:03.475 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:07:03.480 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:07:03.481 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:07:03.481 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:07:03.482 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:07:03.482 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:07:03.483 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:07:03.484 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:07:03.484 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:07:03.485 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:07:03.486 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:07:03.486 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:07:03.487 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:07:03.489 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:07:03.489 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:07:03.490 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:07:03.491 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:07:03.492 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:07:03.492 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:07:03.493 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:07:03.494 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:07:03.495 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:07:03.495 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:07:03.496 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:07:03.496 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:07:03.497 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:07:03.498 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:07:03.498 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:07:03.499 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:07:03.500 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:07:03.500 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:07:03.501 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:07:03.502 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:07:03.502 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:07:03.503 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:07:03.504 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:07:03.504 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:07:03.505 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:07:03.505 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:07:03.506 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:07:03.507 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:07:03.508 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:07:03.508 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:07:03.509 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:07:03.510 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:07:03.511 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:07:03.511 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:07:03.512 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:07:03.513 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:07:03.513 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:07:03.514 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:07:03.515 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:07:03.525 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:07:03.526 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:07:03.527 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:07:03.528 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:07:03.528 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:07:03.529 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:07:03.530 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:07:03.531 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:07:03.531 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:07:03.531 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:07:03.532 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:07:03.533 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.4003ms
2024-11-07 23:07:03.533 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:07:03.534 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:07:03.534 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:07:03.535 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:07:03.536 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 61.3493ms
2024-11-07 23:07:07.532 +07:00 [DBG] Connection id "0HN7UH3VGBS26" received FIN.
2024-11-07 23:07:07.533 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS26 completed.
2024-11-07 23:07:07.533 +07:00 [DBG] Connection id "0HN7UH3VGBS26" is closed. The last processed stream ID was 1.
2024-11-07 23:07:07.535 +07:00 [DBG] Connection id "0HN7UH3VGBS26" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:07:07.548 +07:00 [DBG] Connection id "0HN7UH3VGBS26" stopped.
2024-11-07 23:08:01.511 +07:00 [DBG] Connection id "0HN7UH3VGBS27" accepted.
2024-11-07 23:08:01.518 +07:00 [DBG] Connection id "0HN7UH3VGBS27" started.
2024-11-07 23:08:01.529 +07:00 [DBG] Connection 0HN7UH3VGBS27 established using the following protocol: "Tls13"
2024-11-07 23:08:01.539 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:08:01.545 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:08:01.546 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:08:01.546 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:08:01.547 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:08:01.547 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:08:01.548 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:08:01.549 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:08:01.550 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:08:01.551 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:08:01.552 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:08:01.553 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:08:01.554 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:08:01.555 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:08:01.555 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:08:01.556 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:08:01.558 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:08:01.558 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:08:01.559 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:08:01.560 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:08:01.561 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:08:01.562 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:08:01.562 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:08:01.563 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:08:01.564 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:08:01.565 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:08:01.566 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:08:01.567 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:08:01.567 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:08:01.568 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:08:01.569 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:08:01.570 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:08:01.570 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:08:01.571 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:08:01.572 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:08:01.573 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:08:01.573 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:08:01.574 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:08:01.575 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:08:01.576 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:08:01.577 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:08:01.578 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:08:01.578 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:08:01.582 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:08:01.585 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:08:01.586 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:08:01.587 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:01.588 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:01.589 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:08:01.590 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:08:01.591 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:08:01.592 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:08:01.615 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:08:01.617 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:01.618 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:08:01.619 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:01.620 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:08:01.621 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:08:01.622 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:08:01.622 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:08:01.623 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:08:01.624 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:08:01.625 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:08:01.626 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 69.6721ms
2024-11-07 23:08:01.627 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:08:01.627 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:08:01.628 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:01.629 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:08:01.629 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 90.9507ms
2024-11-07 23:08:02.685 +07:00 [DBG] Connection id "0HN7UH3VGBS27" received FIN.
2024-11-07 23:08:02.686 +07:00 [DBG] Connection id "0HN7UH3VGBS27" is closed. The last processed stream ID was 1.
2024-11-07 23:08:02.686 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS27 completed.
2024-11-07 23:08:02.687 +07:00 [DBG] Connection id "0HN7UH3VGBS27" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:08:02.697 +07:00 [DBG] Connection id "0HN7UH3VGBS27" stopped.
2024-11-07 23:08:20.014 +07:00 [DBG] Connection id "0HN7UH3VGBS28" accepted.
2024-11-07 23:08:20.015 +07:00 [DBG] Connection id "0HN7UH3VGBS28" started.
2024-11-07 23:08:20.021 +07:00 [DBG] Connection 0HN7UH3VGBS28 established using the following protocol: "Tls13"
2024-11-07 23:08:20.023 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:08:20.024 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:08:20.025 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:08:20.025 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:08:20.026 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:08:20.027 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:08:20.032 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:08:20.032 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:08:20.034 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:08:20.035 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:08:20.041 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:08:20.044 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:08:20.045 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:08:20.047 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:08:20.048 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:08:20.050 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:08:20.051 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:08:20.052 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:08:20.053 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:08:20.055 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:08:20.056 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:08:20.057 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:08:20.058 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:08:20.058 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:08:20.059 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:08:20.060 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:08:20.062 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:08:20.063 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:08:20.064 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:08:20.065 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:08:20.066 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:08:20.067 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:08:20.068 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:08:20.070 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:08:20.071 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:08:20.072 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:08:20.072 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:08:20.073 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:08:20.074 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:08:20.075 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:08:20.076 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:08:20.076 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:08:20.078 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:08:20.079 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:08:20.080 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:08:20.080 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:08:20.081 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:20.082 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:20.083 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:08:20.084 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:08:20.084 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:08:20.085 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:08:20.099 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:08:20.100 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:20.101 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:08:20.102 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:20.102 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:08:20.103 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:08:20.105 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:08:20.105 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:08:20.106 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:08:20.106 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:08:20.107 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:08:20.107 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 57.0124ms
2024-11-07 23:08:20.108 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:08:20.109 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:08:20.109 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:20.110 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:08:20.111 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 88.492ms
2024-11-07 23:08:22.743 +07:00 [DBG] Connection id "0HN7UH3VGBS28" received FIN.
2024-11-07 23:08:22.744 +07:00 [DBG] Connection id "0HN7UH3VGBS28" is closed. The last processed stream ID was 1.
2024-11-07 23:08:22.744 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS28 completed.
2024-11-07 23:08:22.744 +07:00 [DBG] Connection id "0HN7UH3VGBS28" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:08:22.757 +07:00 [DBG] Connection id "0HN7UH3VGBS28" stopped.
2024-11-07 23:08:57.507 +07:00 [DBG] Connection id "0HN7UH3VGBS29" accepted.
2024-11-07 23:08:57.514 +07:00 [DBG] Connection id "0HN7UH3VGBS29" started.
2024-11-07 23:08:57.522 +07:00 [DBG] Connection 0HN7UH3VGBS29 established using the following protocol: "Tls13"
2024-11-07 23:08:57.523 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:08:57.524 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:08:57.525 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:08:57.525 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:08:57.526 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:08:57.527 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:08:57.537 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:08:57.538 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:08:57.539 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:08:57.540 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:08:57.541 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:08:57.541 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:08:57.542 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:08:57.543 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:08:57.544 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:08:57.545 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:08:57.546 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:08:57.547 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:08:57.548 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:08:57.549 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:08:57.550 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:08:57.550 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:08:57.551 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:08:57.552 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:08:57.553 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:08:57.554 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:08:57.554 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:08:57.555 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:08:57.556 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:08:57.556 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:08:57.557 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:08:57.558 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:08:57.558 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:08:57.560 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:08:57.561 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:08:57.561 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:08:57.562 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:08:57.563 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:08:57.564 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:08:57.565 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:08:57.565 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:08:57.567 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:08:57.568 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:08:57.569 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:08:57.570 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:08:57.571 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:08:57.571 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:57.572 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:57.573 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:08:57.573 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:08:57.574 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:08:57.575 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:08:57.584 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:08:57.585 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:57.586 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:08:57.588 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:57.588 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:08:57.589 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:08:57.591 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:08:57.591 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:08:57.591 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:08:57.592 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:08:57.592 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:08:57.593 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 48.2262ms
2024-11-07 23:08:57.594 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:08:57.596 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:08:57.596 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:08:57.597 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:08:57.598 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 75.2385ms
2024-11-07 23:08:57.788 +07:00 [DBG] Connection id "0HN7UH3VGBS29" received FIN.
2024-11-07 23:08:57.789 +07:00 [DBG] Connection id "0HN7UH3VGBS29" is closed. The last processed stream ID was 1.
2024-11-07 23:08:57.790 +07:00 [DBG] Connection id "0HN7UH3VGBS29" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:08:57.852 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS29 completed.
2024-11-07 23:08:57.853 +07:00 [DBG] Connection id "0HN7UH3VGBS29" stopped.
2024-11-07 23:09:04.766 +07:00 [DBG] Connection id "0HN7UH3VGBS2A" accepted.
2024-11-07 23:09:04.767 +07:00 [DBG] Connection id "0HN7UH3VGBS2A" started.
2024-11-07 23:09:04.772 +07:00 [DBG] Connection 0HN7UH3VGBS2A established using the following protocol: "Tls13"
2024-11-07 23:09:04.774 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:09:04.776 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:09:04.777 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:09:04.778 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:09:04.778 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:09:04.779 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:09:04.780 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:09:04.782 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:09:04.782 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:09:04.783 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:09:04.785 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:09:04.786 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:09:04.789 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:09:04.792 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:09:04.793 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:09:04.795 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:09:04.796 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:09:04.798 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:09:04.799 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:09:04.800 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:09:04.801 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:09:04.803 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:09:04.804 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:09:04.805 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:09:04.806 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:09:04.807 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:09:04.808 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:09:04.809 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:09:04.810 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:09:04.811 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:09:04.813 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:09:04.813 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:09:04.814 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:09:04.815 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:09:04.816 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:09:04.821 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:09:04.822 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:09:04.823 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:09:04.823 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:09:04.824 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:09:04.825 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:09:04.825 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:09:04.826 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:09:04.827 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:09:04.829 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:09:04.829 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:09:04.830 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:04.831 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:04.831 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:09:04.832 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:09:04.832 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:09:04.833 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:09:04.840 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:09:04.841 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:04.842 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:09:04.843 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:04.843 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:09:04.844 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:09:04.845 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:09:04.846 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:09:04.846 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:09:04.847 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:09:04.847 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:09:04.848 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 53.4867ms
2024-11-07 23:09:04.849 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:09:04.849 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:09:04.850 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:04.851 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:09:04.852 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 78.0972ms
2024-11-07 23:09:18.689 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:09:18.691 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:09:18.692 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:09:18.692 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:09:18.693 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:09:18.693 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:09:18.694 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:09:18.695 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:09:18.695 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:09:18.696 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:09:18.696 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:09:18.697 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:09:18.698 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:09:18.699 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:09:18.699 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:09:18.700 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:09:18.701 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:09:18.702 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:09:18.702 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:09:18.703 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:09:18.704 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:09:18.705 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:09:18.706 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:09:18.706 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:09:18.707 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:09:18.707 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:09:18.708 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:09:18.709 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:09:18.709 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:09:18.710 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:09:18.710 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:09:18.711 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:09:18.712 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:09:18.712 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:09:18.713 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:09:18.714 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:09:18.714 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:09:18.715 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:09:18.715 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:09:18.716 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:09:18.716 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:09:18.717 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:09:18.717 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:09:18.719 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:09:18.720 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:09:18.721 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:09:18.721 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:18.722 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:18.723 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:09:18.724 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:09:18.724 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:09:18.725 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:09:18.731 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:09:18.732 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:18.733 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:09:18.734 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:18.735 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:09:18.736 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:09:18.737 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:09:18.737 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:09:18.738 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:09:18.738 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:09:18.739 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:09:18.740 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.3633ms
2024-11-07 23:09:18.741 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:09:18.742 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:09:18.743 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:18.744 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:09:18.744 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 55.1493ms
2024-11-07 23:09:24.160 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:09:24.162 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:09:24.162 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:09:24.163 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:09:24.163 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:09:24.164 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:09:24.165 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:09:24.165 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:09:24.166 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:09:24.166 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:09:24.167 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:09:24.168 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:09:24.168 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:09:24.169 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:09:24.170 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:09:24.171 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:09:24.171 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:09:24.172 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:09:24.173 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:09:24.173 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:09:24.174 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:09:24.174 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:09:24.175 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:09:24.176 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:09:24.176 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:09:24.177 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:09:24.178 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:09:24.178 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:09:24.179 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:09:24.180 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:09:24.180 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:09:24.181 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:09:24.181 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:09:24.182 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:09:24.183 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:09:24.183 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:09:24.184 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:09:24.184 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:09:24.185 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:09:24.186 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:09:24.186 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:09:24.187 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:09:24.187 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:09:24.188 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:09:24.189 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:09:24.190 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:09:24.190 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:24.191 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:24.191 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:09:24.192 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:09:24.192 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:09:24.193 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:09:24.198 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:09:24.199 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:24.199 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:09:24.200 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:24.201 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:09:24.201 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:09:24.202 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:09:24.203 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:09:24.203 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:09:24.203 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:09:24.204 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:09:24.205 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.1172ms
2024-11-07 23:09:24.205 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:09:24.206 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:09:24.207 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:09:24.207 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:09:24.208 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 48.2184ms
2024-11-07 23:09:32.836 +07:00 [DBG] Connection id "0HN7UH3VGBS2A" received FIN.
2024-11-07 23:09:32.836 +07:00 [DBG] Connection id "0HN7UH3VGBS2A" is closed. The last processed stream ID was 5.
2024-11-07 23:09:32.836 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2A completed.
2024-11-07 23:09:32.837 +07:00 [DBG] Connection id "0HN7UH3VGBS2A" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:09:32.850 +07:00 [DBG] Connection id "0HN7UH3VGBS2A" stopped.
2024-11-07 23:10:26.956 +07:00 [DBG] Connection id "0HN7UH3VGBS2B" accepted.
2024-11-07 23:10:26.959 +07:00 [DBG] Connection id "0HN7UH3VGBS2B" started.
2024-11-07 23:10:26.965 +07:00 [DBG] Connection 0HN7UH3VGBS2B established using the following protocol: "Tls13"
2024-11-07 23:10:26.967 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:10:26.971 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:10:26.975 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:10:26.977 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:10:26.984 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:10:26.987 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:10:26.988 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:10:26.989 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:10:26.989 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:10:26.990 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:10:26.991 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:10:26.992 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:10:26.993 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:10:26.994 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:10:26.995 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:10:26.996 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:10:26.997 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:10:26.998 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:10:26.998 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:10:26.999 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:10:27.000 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:10:27.001 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:10:27.002 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:10:27.003 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:10:27.003 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:10:27.004 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:10:27.005 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:10:27.005 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:10:27.006 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:10:27.007 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:10:27.007 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:10:27.008 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:10:27.009 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:10:27.010 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:10:27.011 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:10:27.011 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:10:27.012 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:10:27.013 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:10:27.013 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:10:27.014 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:10:27.015 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:10:27.016 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:10:27.017 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:10:27.019 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:10:27.020 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:10:27.020 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:10:27.021 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:27.022 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:27.023 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:10:27.023 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:10:27.024 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:10:27.025 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:10:27.060 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:10:27.061 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:27.062 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:10:27.063 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:27.063 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:10:27.064 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:10:27.066 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:10:27.066 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:10:27.066 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:10:27.067 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:10:27.068 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:10:27.068 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 72.1847ms
2024-11-07 23:10:27.069 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:10:27.070 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:10:27.071 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:27.072 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:10:27.073 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 105.5494ms
2024-11-07 23:10:27.939 +07:00 [DBG] Connection id "0HN7UH3VGBS2B" received FIN.
2024-11-07 23:10:27.940 +07:00 [DBG] Connection id "0HN7UH3VGBS2B" is closed. The last processed stream ID was 1.
2024-11-07 23:10:27.941 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2B completed.
2024-11-07 23:10:27.941 +07:00 [DBG] Connection id "0HN7UH3VGBS2B" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:10:27.953 +07:00 [DBG] Connection id "0HN7UH3VGBS2B" stopped.
2024-11-07 23:10:53.720 +07:00 [DBG] Connection id "0HN7UH3VGBS2C" accepted.
2024-11-07 23:10:53.725 +07:00 [DBG] Connection id "0HN7UH3VGBS2C" started.
2024-11-07 23:10:53.789 +07:00 [DBG] Connection 0HN7UH3VGBS2C established using the following protocol: "Tls13"
2024-11-07 23:10:53.810 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:10:53.812 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:10:53.814 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:10:53.815 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:10:53.817 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:10:53.817 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:10:53.826 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:10:53.830 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:10:53.836 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:10:53.840 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:10:53.843 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:10:53.844 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:10:53.847 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:10:53.851 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:10:53.852 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:10:53.853 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:10:53.856 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:10:53.857 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:10:53.858 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:10:53.858 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:10:53.859 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:10:53.860 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:10:53.861 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:10:53.861 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:10:53.863 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:10:53.864 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:10:53.865 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:10:53.866 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:10:53.866 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:10:53.867 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:10:53.868 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:10:53.869 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:10:53.869 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:10:53.870 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:10:53.871 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:10:53.872 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:10:53.872 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:10:53.873 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:10:53.874 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:10:53.875 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:10:53.876 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:10:53.877 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:10:53.877 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:10:53.883 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:10:53.888 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:10:53.888 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:10:53.889 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:53.893 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:53.896 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:10:53.896 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-07 23:10:53.897 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-07 23:10:53.901 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:10:54.025 +07:00 [INF] Executed DbCommand (127ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:10:54.027 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:54.027 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:10:54.028 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:54.029 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:10:54.031 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:10:54.033 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:10:54.033 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:10:54.034 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:10:54.034 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:10:54.036 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:10:54.037 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 184.8558ms
2024-11-07 23:10:54.038 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:10:54.039 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:10:54.040 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:54.040 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:10:54.041 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 231.5335ms
2024-11-07 23:10:54.043 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:10:54.047 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:10:54.047 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:10:54.048 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:10:54.048 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:10:54.049 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:10:54.050 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:10:54.050 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:10:54.051 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:10:54.051 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:10:54.052 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:10:54.053 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:10:54.054 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:10:54.055 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:10:54.055 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:10:54.056 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:10:54.057 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:10:54.057 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:10:54.058 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:10:54.059 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:10:54.059 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:10:54.060 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:10:54.061 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:10:54.061 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:10:54.062 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:10:54.062 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:10:54.063 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:10:54.064 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:10:54.065 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:10:54.066 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:10:54.066 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:10:54.067 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:10:54.068 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:10:54.069 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:10:54.069 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:10:54.070 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:10:54.070 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:10:54.071 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:10:54.072 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:10:54.072 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:10:54.073 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:10:54.074 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:10:54.074 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:10:54.076 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:10:54.078 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:10:54.078 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:10:54.080 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:54.080 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:54.081 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:10:54.081 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:10:54.082 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:10:54.083 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:10:54.085 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:10:54.087 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:54.087 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:10:54.088 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:54.089 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:10:54.090 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:10:54.091 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:10:54.092 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:10:54.092 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:10:54.092 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:10:54.093 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:10:54.096 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.6287ms
2024-11-07 23:10:54.097 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:10:54.097 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:10:54.098 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:10:54.099 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:10:54.100 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 57.2592ms
2024-11-07 23:11:07.997 +07:00 [DBG] Connection id "0HN7UH3VGBS2C" received FIN.
2024-11-07 23:11:07.999 +07:00 [DBG] Connection id "0HN7UH3VGBS2C" is closed. The last processed stream ID was 3.
2024-11-07 23:11:07.999 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2C completed.
2024-11-07 23:11:07.999 +07:00 [DBG] Connection id "0HN7UH3VGBS2C" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:11:08.012 +07:00 [DBG] Connection id "0HN7UH3VGBS2C" stopped.
2024-11-07 23:11:33.693 +07:00 [DBG] Connection id "0HN7UH3VGBS2D" accepted.
2024-11-07 23:11:33.694 +07:00 [DBG] Connection id "0HN7UH3VGBS2D" started.
2024-11-07 23:11:33.704 +07:00 [DBG] Connection 0HN7UH3VGBS2D established using the following protocol: "Tls13"
2024-11-07 23:11:33.706 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:11:33.708 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:11:33.708 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:11:33.709 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:11:33.710 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:11:33.710 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:11:33.712 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:11:33.712 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:11:33.713 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:11:33.714 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:11:33.717 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:11:33.727 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:11:33.728 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:11:33.729 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:11:33.731 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:11:33.733 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:11:33.734 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:11:33.735 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:11:33.736 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:11:33.737 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:11:33.738 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:11:33.739 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:11:33.740 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:11:33.741 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:11:33.742 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:11:33.743 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:11:33.744 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:11:33.746 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:11:33.747 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:11:33.747 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:11:33.748 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:11:33.749 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:11:33.750 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:11:33.751 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:11:33.751 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:11:33.752 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:11:33.753 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:11:33.753 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:11:33.754 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:11:33.755 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:11:33.756 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:11:33.756 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:11:33.757 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:11:33.770 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:11:33.773 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:11:33.773 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:11:33.774 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:33.774 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:33.775 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:11:33.775 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:11:33.776 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:11:33.777 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:11:33.795 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:11:33.797 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:33.797 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:11:33.798 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:33.799 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:11:33.800 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:11:33.801 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:11:33.801 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:11:33.802 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:11:33.802 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:11:33.803 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:11:33.803 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 70.8769ms
2024-11-07 23:11:33.804 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:11:33.805 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:11:33.806 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:33.807 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:11:33.807 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 101.9467ms
2024-11-07 23:11:37.598 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:11:37.600 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:11:37.600 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:11:37.601 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:11:37.601 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:11:37.602 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:11:37.602 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:11:37.603 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:11:37.604 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:11:37.604 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:11:37.605 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:11:37.606 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:11:37.606 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:11:37.607 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:11:37.608 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:11:37.609 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:11:37.609 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:11:37.610 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:11:37.611 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:11:37.611 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:11:37.612 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:11:37.613 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:11:37.613 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:11:37.614 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:11:37.615 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:11:37.616 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:11:37.617 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:11:37.617 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:11:37.618 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:11:37.619 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:11:37.620 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:11:37.621 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:11:37.621 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:11:37.622 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:11:37.623 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:11:37.624 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:11:37.625 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:11:37.625 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:11:37.626 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:11:37.627 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:11:37.628 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:11:37.629 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:11:37.629 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:11:37.632 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:11:37.636 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:11:37.637 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:11:37.637 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:37.640 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:37.640 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:11:37.641 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:11:37.642 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:11:37.643 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:11:37.659 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:11:37.662 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:37.662 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:11:37.663 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:37.664 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:11:37.665 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:11:37.667 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:11:37.667 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:11:37.668 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:11:37.668 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:11:37.669 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:11:37.670 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 61.1924ms
2024-11-07 23:11:37.671 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:11:37.671 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:11:37.672 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:37.673 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 23:11:37.674 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 76.4974ms
2024-11-07 23:11:38.052 +07:00 [DBG] Connection id "0HN7UH3VGBS2D" received FIN.
2024-11-07 23:11:38.053 +07:00 [DBG] Connection id "0HN7UH3VGBS2D" is closed. The last processed stream ID was 3.
2024-11-07 23:11:38.054 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2D completed.
2024-11-07 23:11:38.054 +07:00 [DBG] Connection id "0HN7UH3VGBS2D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:11:38.062 +07:00 [DBG] Connection id "0HN7UH3VGBS2D" stopped.
2024-11-07 23:11:44.463 +07:00 [DBG] Connection id "0HN7UH3VGBS2E" accepted.
2024-11-07 23:11:44.463 +07:00 [DBG] Connection id "0HN7UH3VGBS2E" started.
2024-11-07 23:11:44.470 +07:00 [DBG] Connection 0HN7UH3VGBS2E established using the following protocol: "Tls13"
2024-11-07 23:11:44.471 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:11:44.473 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:11:44.474 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:11:44.474 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:11:44.475 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:11:44.475 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:11:44.476 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:11:44.477 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:11:44.477 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:11:44.478 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:11:44.479 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:11:44.480 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:11:44.481 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:11:44.483 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:11:44.488 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:11:44.489 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:11:44.490 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:11:44.490 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:11:44.491 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:11:44.492 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:11:44.493 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:11:44.493 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:11:44.494 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:11:44.495 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:11:44.495 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:11:44.496 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:11:44.497 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:11:44.497 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:11:44.498 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:11:44.498 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:11:44.499 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:11:44.500 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:11:44.500 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:11:44.501 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:11:44.502 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:11:44.503 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:11:44.503 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:11:44.504 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:11:44.504 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:11:44.505 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:11:44.506 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:11:44.506 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:11:44.507 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:11:44.509 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:11:44.510 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:11:44.511 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:11:44.511 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:44.512 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:44.512 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:11:44.513 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:11:44.514 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:11:44.514 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:11:44.521 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:11:44.522 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:44.522 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:11:44.523 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:44.524 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:11:44.524 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:11:44.525 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:11:44.526 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:11:44.526 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:11:44.526 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:11:44.527 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:11:44.528 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.5094ms
2024-11-07 23:11:44.529 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:11:44.529 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:11:44.530 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:11:44.530 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:11:44.531 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 60.1794ms
2024-11-07 23:11:48.067 +07:00 [DBG] Connection id "0HN7UH3VGBS2E" received FIN.
2024-11-07 23:11:48.068 +07:00 [DBG] Connection id "0HN7UH3VGBS2E" is closed. The last processed stream ID was 1.
2024-11-07 23:11:48.069 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2E completed.
2024-11-07 23:11:48.069 +07:00 [DBG] Connection id "0HN7UH3VGBS2E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:11:48.082 +07:00 [DBG] Connection id "0HN7UH3VGBS2E" stopped.
2024-11-07 23:12:37.279 +07:00 [DBG] Connection id "0HN7UH3VGBS2F" accepted.
2024-11-07 23:12:37.285 +07:00 [DBG] Connection id "0HN7UH3VGBS2F" started.
2024-11-07 23:12:37.303 +07:00 [DBG] Connection 0HN7UH3VGBS2F established using the following protocol: "Tls13"
2024-11-07 23:12:37.304 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:12:37.306 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:12:37.306 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:12:37.307 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:12:37.307 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:12:37.308 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:12:37.309 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:12:37.309 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:12:37.310 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:12:37.311 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:12:37.311 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:12:37.312 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:12:37.313 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:12:37.314 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:12:37.315 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:12:37.320 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:12:37.321 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:12:37.322 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:12:37.322 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:12:37.323 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:12:37.323 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:12:37.324 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:12:37.324 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:12:37.325 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:12:37.325 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:12:37.326 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:12:37.327 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:12:37.327 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:12:37.328 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:12:37.328 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:12:37.329 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:12:37.329 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:12:37.330 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:12:37.330 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:12:37.331 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:12:37.332 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:12:37.332 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:12:37.333 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:12:37.333 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:12:37.334 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:12:37.335 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:12:37.335 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:12:37.336 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:12:37.337 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:12:37.338 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:12:37.339 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:12:37.339 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:12:37.340 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:12:37.340 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:12:37.341 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:12:37.341 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:12:37.342 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:12:37.349 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:12:37.350 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:12:37.351 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:12:37.352 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:12:37.353 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:12:37.353 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:12:37.355 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:12:37.355 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:12:37.356 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:12:37.356 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:12:37.357 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:12:37.357 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.1612ms
2024-11-07 23:12:37.358 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:12:37.359 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:12:37.359 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:12:37.360 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:12:37.361 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 56.8399ms
2024-11-07 23:12:49.836 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:12:49.838 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:12:49.838 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:12:49.839 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:12:49.839 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:12:49.840 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:12:49.841 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:12:49.841 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:12:49.842 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:12:49.842 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:12:49.843 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:12:49.844 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:12:49.845 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:12:49.846 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:12:49.847 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:12:49.848 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:12:49.849 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:12:49.850 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:12:49.850 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:12:49.851 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:12:49.852 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:12:49.853 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:12:49.854 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:12:49.855 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:12:49.856 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:12:49.856 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:12:49.857 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:12:49.857 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:12:49.858 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:12:49.859 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:12:49.859 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:12:49.860 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:12:49.861 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:12:49.861 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:12:49.862 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:12:49.863 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:12:49.863 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:12:49.864 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:12:49.865 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:12:49.866 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:12:49.867 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:12:49.867 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:12:49.868 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:12:49.869 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:12:49.871 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:12:49.871 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:12:49.871 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:12:49.872 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:12:49.873 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:12:49.873 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:12:49.874 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:12:49.875 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:12:49.880 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:12:49.881 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:12:49.882 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:12:49.882 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:12:49.883 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:12:49.884 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:12:49.884 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:12:49.885 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:12:49.885 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:12:49.885 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:12:49.886 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:12:49.887 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.113ms
2024-11-07 23:12:49.888 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:12:49.889 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:12:49.889 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:12:49.890 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:12:49.891 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 55.0763ms
2024-11-07 23:13:23.077 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:13:23.079 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:13:23.079 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:13:23.080 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:13:23.089 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:13:23.089 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:13:23.090 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:13:23.097 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:13:23.099 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:13:23.100 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:13:23.101 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:13:23.102 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:13:23.103 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:13:23.104 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:13:23.105 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:13:23.106 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:13:23.107 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:13:23.107 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:13:23.108 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:13:23.109 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:13:23.110 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:13:23.111 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:13:23.111 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:13:23.112 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:13:23.113 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:13:23.114 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:13:23.115 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:13:23.116 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:13:23.117 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:13:23.118 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:13:23.118 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:13:23.119 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:13:23.120 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:13:23.121 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:13:23.122 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:13:23.123 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:13:23.123 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:13:23.124 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:13:23.125 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:13:23.126 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:13:23.126 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:13:23.127 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:13:23.127 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:13:23.129 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:13:23.133 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:13:23.133 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:13:23.134 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:13:23.135 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:13:23.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:13:23.136 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:13:23.137 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:13:23.138 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:13:23.151 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:13:23.153 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:13:23.154 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:13:23.155 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:13:23.156 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:13:23.157 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:13:23.158 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:13:23.159 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:13:23.160 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:13:23.160 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:13:23.161 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:13:23.162 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 56.4555ms
2024-11-07 23:13:23.163 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:13:23.164 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:13:23.164 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:13:23.165 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:13:23.166 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 88.6628ms
2024-11-07 23:13:23.180 +07:00 [DBG] Connection id "0HN7UH3VGBS2F" received FIN.
2024-11-07 23:13:23.183 +07:00 [DBG] Connection id "0HN7UH3VGBS2F" is closed. The last processed stream ID was 5.
2024-11-07 23:13:23.183 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2F completed.
2024-11-07 23:13:23.183 +07:00 [DBG] Connection id "0HN7UH3VGBS2F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:13:23.193 +07:00 [DBG] Connection id "0HN7UH3VGBS2F" stopped.
2024-11-07 23:14:21.815 +07:00 [DBG] Connection id "0HN7UH3VGBS2G" accepted.
2024-11-07 23:14:21.819 +07:00 [DBG] Connection id "0HN7UH3VGBS2G" started.
2024-11-07 23:14:21.829 +07:00 [DBG] Connection 0HN7UH3VGBS2G established using the following protocol: "Tls13"
2024-11-07 23:14:21.831 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:14:21.833 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:14:21.833 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:14:21.834 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:14:21.834 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:14:21.835 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:14:21.836 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:14:21.837 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:14:21.838 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:14:21.838 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:14:21.839 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:14:21.840 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:14:21.847 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:14:21.851 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:14:21.853 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:14:21.854 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:14:21.855 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:14:21.858 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:14:21.859 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:14:21.860 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:14:21.861 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:14:21.861 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:14:21.862 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:14:21.863 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:14:21.864 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:14:21.865 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:14:21.866 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:14:21.866 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:14:21.867 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:14:21.868 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:14:21.869 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:14:21.869 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:14:21.870 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:14:21.871 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:14:21.872 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:14:21.873 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:14:21.873 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:14:21.874 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:14:21.874 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:14:21.875 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:14:21.876 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:14:21.876 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:14:21.877 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:14:21.878 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:14:21.880 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:14:21.881 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:14:21.881 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:21.882 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:21.882 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:14:21.883 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:14:21.884 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:14:21.885 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:14:21.898 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:14:21.901 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:21.902 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:14:21.903 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:21.904 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:14:21.904 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:14:21.906 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:14:21.906 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:14:21.907 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:14:21.907 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:14:21.908 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:14:21.908 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 54.9288ms
2024-11-07 23:14:21.909 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:14:21.910 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:14:21.910 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:21.911 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:14:21.912 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 81.1274ms
2024-11-07 23:14:23.284 +07:00 [DBG] Connection id "0HN7UH3VGBS2G" received FIN.
2024-11-07 23:14:23.285 +07:00 [DBG] Connection id "0HN7UH3VGBS2G" is closed. The last processed stream ID was 1.
2024-11-07 23:14:23.286 +07:00 [DBG] Connection id "0HN7UH3VGBS2G" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:14:23.287 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2G completed.
2024-11-07 23:14:23.288 +07:00 [DBG] Connection id "0HN7UH3VGBS2G" stopped.
2024-11-07 23:14:31.228 +07:00 [DBG] Connection id "0HN7UH3VGBS2H" accepted.
2024-11-07 23:14:31.236 +07:00 [DBG] Connection id "0HN7UH3VGBS2H" started.
2024-11-07 23:14:31.270 +07:00 [DBG] Connection 0HN7UH3VGBS2H established using the following protocol: "Tls13"
2024-11-07 23:14:31.282 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:14:31.284 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:14:31.284 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:14:31.285 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:14:31.286 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:14:31.288 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:14:31.289 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:14:31.290 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:14:31.290 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:14:31.291 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:14:31.292 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:14:31.292 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:14:31.294 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:14:31.295 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:14:31.296 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:14:31.297 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:14:31.298 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:14:31.299 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:14:31.299 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:14:31.300 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:14:31.302 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:14:31.303 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:14:31.303 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:14:31.304 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:14:31.305 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:14:31.306 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:14:31.306 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:14:31.308 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:14:31.309 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:14:31.309 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:14:31.310 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:14:31.310 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:14:31.311 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:14:31.312 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:14:31.312 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:14:31.313 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:14:31.314 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:14:31.314 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:14:31.315 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:14:31.316 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:14:31.316 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:14:31.317 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:14:31.318 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:14:31.319 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:14:31.322 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:14:31.322 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:14:31.323 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:31.324 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:31.324 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:14:31.325 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:14:31.326 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:14:31.326 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:14:31.336 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:14:31.337 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:31.338 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:14:31.338 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:31.339 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:14:31.340 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:14:31.341 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:14:31.341 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:14:31.342 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:14:31.342 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:14:31.343 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:14:31.344 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.2313ms
2024-11-07 23:14:31.345 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:14:31.346 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:14:31.347 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:31.348 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:14:31.349 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 66.9167ms
2024-11-07 23:14:33.309 +07:00 [DBG] Connection id "0HN7UH3VGBS2H" received FIN.
2024-11-07 23:14:33.310 +07:00 [DBG] Connection id "0HN7UH3VGBS2H" is closed. The last processed stream ID was 1.
2024-11-07 23:14:33.310 +07:00 [DBG] Connection id "0HN7UH3VGBS2H" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:14:33.312 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2H completed.
2024-11-07 23:14:33.320 +07:00 [DBG] Connection id "0HN7UH3VGBS2H" stopped.
2024-11-07 23:14:35.869 +07:00 [DBG] Connection id "0HN7UH3VGBS2I" accepted.
2024-11-07 23:14:35.870 +07:00 [DBG] Connection id "0HN7UH3VGBS2I" started.
2024-11-07 23:14:35.873 +07:00 [DBG] Connection 0HN7UH3VGBS2I established using the following protocol: "Tls13"
2024-11-07 23:14:35.875 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:14:35.876 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:14:35.877 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:14:35.877 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:14:35.878 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:14:35.878 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:14:35.879 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:14:35.879 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:14:35.880 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:14:35.880 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:14:35.881 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:14:35.882 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:14:35.882 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:14:35.884 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:14:35.885 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:14:35.886 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:14:35.887 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:14:35.887 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:14:35.888 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:14:35.888 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:14:35.889 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:14:35.889 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:14:35.890 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:14:35.891 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:14:35.891 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:14:35.892 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:14:35.893 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:14:35.893 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:14:35.894 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:14:35.895 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:14:35.895 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:14:35.896 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:14:35.896 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:14:35.897 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:14:35.898 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:14:35.898 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:14:35.899 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:14:35.900 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:14:35.900 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:14:35.901 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:14:35.901 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:14:35.902 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:14:35.902 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:14:35.904 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:14:35.907 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:14:35.908 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:14:35.908 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:35.909 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:35.910 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:14:35.910 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:14:35.911 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:14:35.912 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:14:35.918 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:14:35.920 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:35.921 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:14:35.921 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:35.922 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:14:35.923 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:14:35.924 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:14:35.924 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:14:35.924 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:14:35.925 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:14:35.926 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:14:35.927 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.9229ms
2024-11-07 23:14:35.927 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:14:35.928 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:14:35.929 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:14:35.929 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:14:35.930 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 55.4394ms
2024-11-07 23:14:43.316 +07:00 [DBG] Connection id "0HN7UH3VGBS2I" received FIN.
2024-11-07 23:14:43.317 +07:00 [DBG] Connection id "0HN7UH3VGBS2I" is closed. The last processed stream ID was 1.
2024-11-07 23:14:43.317 +07:00 [DBG] Connection id "0HN7UH3VGBS2I" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:14:43.324 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2I completed.
2024-11-07 23:14:43.325 +07:00 [DBG] Connection id "0HN7UH3VGBS2I" stopped.
2024-11-07 23:15:31.888 +07:00 [DBG] Connection id "0HN7UH3VGBS2J" accepted.
2024-11-07 23:15:31.889 +07:00 [DBG] Connection id "0HN7UH3VGBS2J" started.
2024-11-07 23:15:31.899 +07:00 [DBG] Connection 0HN7UH3VGBS2J established using the following protocol: "Tls13"
2024-11-07 23:15:31.904 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:15:31.905 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:15:31.905 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:15:31.906 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:15:31.906 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:15:31.907 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:15:31.908 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:15:31.909 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:15:31.909 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:15:31.910 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:15:31.910 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:15:31.911 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:15:31.912 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:15:31.914 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:15:31.918 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:15:31.919 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:15:31.920 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:15:31.921 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:15:31.922 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:15:31.923 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:15:31.924 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:15:31.924 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:15:31.925 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:15:31.925 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:15:31.926 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:15:31.926 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:15:31.927 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:15:31.928 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:15:31.928 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:15:31.929 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:15:31.929 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:15:31.930 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:15:31.930 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:15:31.931 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:15:31.932 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:15:31.932 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:15:31.933 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:15:31.934 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:15:31.934 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:15:31.935 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:15:31.936 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:15:31.937 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:15:31.937 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:15:31.967 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:15:31.969 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:15:31.970 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:15:31.971 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:31.971 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:31.972 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:15:31.973 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:15:31.974 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:15:31.975 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:15:31.984 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:15:31.985 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:31.985 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:15:31.986 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:31.987 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:15:31.988 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:15:31.989 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:15:31.989 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:15:31.990 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:15:31.990 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:15:31.990 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:15:31.991 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 72.4151ms
2024-11-07 23:15:31.992 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:15:31.992 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:15:31.993 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:31.994 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:15:31.995 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 91.1071ms
2024-11-07 23:15:33.410 +07:00 [DBG] Connection id "0HN7UH3VGBS2J" received FIN.
2024-11-07 23:15:33.411 +07:00 [DBG] Connection id "0HN7UH3VGBS2J" is closed. The last processed stream ID was 1.
2024-11-07 23:15:33.411 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2J completed.
2024-11-07 23:15:33.412 +07:00 [DBG] Connection id "0HN7UH3VGBS2J" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:15:33.423 +07:00 [DBG] Connection id "0HN7UH3VGBS2J" stopped.
2024-11-07 23:15:43.588 +07:00 [DBG] Connection id "0HN7UH3VGBS2K" accepted.
2024-11-07 23:15:43.588 +07:00 [DBG] Connection id "0HN7UH3VGBS2K" started.
2024-11-07 23:15:43.591 +07:00 [DBG] Connection 0HN7UH3VGBS2K established using the following protocol: "Tls13"
2024-11-07 23:15:43.592 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:15:43.594 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:15:43.594 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:15:43.595 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:15:43.595 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:15:43.596 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:15:43.597 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:15:43.598 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:15:43.598 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:15:43.599 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:15:43.600 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:15:43.601 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:15:43.602 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:15:43.608 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:15:43.609 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:15:43.610 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:15:43.611 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:15:43.612 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:15:43.613 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:15:43.614 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:15:43.615 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:15:43.616 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:15:43.616 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:15:43.617 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:15:43.618 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:15:43.618 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:15:43.619 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:15:43.620 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:15:43.621 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:15:43.622 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:15:43.623 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:15:43.623 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:15:43.624 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:15:43.625 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:15:43.625 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:15:43.626 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:15:43.626 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:15:43.627 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:15:43.627 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:15:43.628 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:15:43.629 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:15:43.629 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:15:43.630 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:15:43.631 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:15:43.632 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:15:43.633 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:15:43.633 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:43.635 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:43.635 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:15:43.636 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:15:43.636 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:15:43.637 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:15:43.643 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:15:43.644 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:43.645 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:15:43.646 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:43.647 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:15:43.648 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:15:43.649 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:15:43.649 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:15:43.650 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:15:43.650 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:15:43.651 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:15:43.652 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.18ms
2024-11-07 23:15:43.653 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:15:43.653 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:15:43.654 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:43.655 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:15:43.655 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 63.2698ms
2024-11-07 23:15:53.431 +07:00 [DBG] Connection id "0HN7UH3VGBS2K" received FIN.
2024-11-07 23:15:53.432 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2K completed.
2024-11-07 23:15:53.432 +07:00 [DBG] Connection id "0HN7UH3VGBS2K" is closed. The last processed stream ID was 1.
2024-11-07 23:15:53.433 +07:00 [DBG] Connection id "0HN7UH3VGBS2K" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:15:53.445 +07:00 [DBG] Connection id "0HN7UH3VGBS2K" stopped.
2024-11-07 23:15:55.209 +07:00 [DBG] Connection id "0HN7UH3VGBS2L" accepted.
2024-11-07 23:15:55.210 +07:00 [DBG] Connection id "0HN7UH3VGBS2L" started.
2024-11-07 23:15:55.213 +07:00 [DBG] Connection 0HN7UH3VGBS2L established using the following protocol: "Tls13"
2024-11-07 23:15:55.215 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:15:55.216 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:15:55.217 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:15:55.217 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:15:55.218 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:15:55.218 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:15:55.219 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:15:55.220 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:15:55.221 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:15:55.221 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:15:55.222 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:15:55.223 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:15:55.224 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:15:55.226 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:15:55.227 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:15:55.228 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:15:55.229 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:15:55.229 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:15:55.230 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:15:55.231 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:15:55.232 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:15:55.232 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:15:55.233 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:15:55.234 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:15:55.234 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:15:55.235 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:15:55.236 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:15:55.237 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:15:55.238 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:15:55.238 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:15:55.239 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:15:55.240 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:15:55.241 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:15:55.241 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:15:55.242 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:15:55.243 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:15:55.244 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:15:55.244 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:15:55.245 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:15:55.246 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:15:55.246 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:15:55.247 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:15:55.248 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:15:55.249 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:15:55.251 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:15:55.251 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:15:55.252 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:55.253 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:55.253 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:15:55.254 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:15:55.255 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:15:55.255 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:15:55.262 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:15:55.263 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:55.264 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:15:55.265 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:55.266 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:15:55.267 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:15:55.268 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:15:55.269 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:15:55.269 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:15:55.270 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:15:55.270 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:15:55.272 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.0342ms
2024-11-07 23:15:55.273 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:15:55.274 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:15:55.274 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:15:55.275 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:15:55.276 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 61.5715ms
2024-11-07 23:16:03.176 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:16:03.178 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:16:03.179 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:16:03.179 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:16:03.181 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:16:03.181 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:16:03.182 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:16:03.183 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:16:03.184 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:16:03.184 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:16:03.186 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:16:03.187 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:16:03.187 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:16:03.188 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:16:03.189 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:16:03.190 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:16:03.191 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:16:03.191 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:16:03.192 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:16:03.193 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:16:03.194 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:16:03.195 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:16:03.196 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:16:03.197 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:16:03.198 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:16:03.198 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:16:03.199 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:16:03.200 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:16:03.201 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:16:03.202 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:16:03.203 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:16:03.203 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:16:03.204 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:16:03.205 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:16:03.206 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:16:03.207 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:16:03.208 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:16:03.208 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:16:03.209 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:16:03.210 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:16:03.211 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:16:03.211 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:16:03.212 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:16:03.214 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:16:03.216 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:16:03.217 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:16:03.217 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:03.218 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:03.219 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:16:03.220 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:16:03.220 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:16:03.221 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:16:03.229 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:16:03.231 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:03.231 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:16:03.232 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:03.233 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:16:03.234 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:16:03.236 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:16:03.236 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:16:03.237 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:16:03.237 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:16:03.238 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:16:03.239 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 49.3334ms
2024-11-07 23:16:03.240 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:16:03.241 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:16:03.242 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:03.242 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:16:03.243 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 67.1915ms
2024-11-07 23:16:03.446 +07:00 [DBG] Connection id "0HN7UH3VGBS2L" received FIN.
2024-11-07 23:16:03.457 +07:00 [DBG] Connection id "0HN7UH3VGBS2L" is closed. The last processed stream ID was 3.
2024-11-07 23:16:03.460 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2L completed.
2024-11-07 23:16:03.478 +07:00 [DBG] Connection id "0HN7UH3VGBS2L" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:16:03.489 +07:00 [DBG] Connection id "0HN7UH3VGBS2L" stopped.
2024-11-07 23:16:27.065 +07:00 [DBG] Connection id "0HN7UH3VGBS2M" accepted.
2024-11-07 23:16:27.066 +07:00 [DBG] Connection id "0HN7UH3VGBS2M" started.
2024-11-07 23:16:27.077 +07:00 [DBG] Connection 0HN7UH3VGBS2M established using the following protocol: "Tls13"
2024-11-07 23:16:27.086 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:16:27.088 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:16:27.088 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:16:27.089 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:16:27.089 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:16:27.090 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:16:27.090 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:16:27.091 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:16:27.091 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:16:27.092 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:16:27.093 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:16:27.093 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:16:27.094 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:16:27.095 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:16:27.096 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:16:27.101 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:16:27.103 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:16:27.104 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:16:27.105 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:16:27.105 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:16:27.106 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:16:27.107 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:16:27.107 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:16:27.108 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:16:27.108 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:16:27.109 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:16:27.110 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:16:27.111 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:16:27.112 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:16:27.113 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:16:27.113 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:16:27.114 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:16:27.114 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:16:27.115 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:16:27.116 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:16:27.116 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:16:27.117 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:16:27.118 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:16:27.119 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:16:27.119 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:16:27.120 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:16:27.121 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:16:27.121 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:16:27.122 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:16:27.124 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:16:27.125 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:16:27.125 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:27.126 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:27.127 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:16:27.128 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:16:27.129 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:16:27.130 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:16:27.135 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:16:27.136 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:27.137 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:16:27.138 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:27.139 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-07 23:16:27.140 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:16:27.142 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:16:27.142 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:16:27.142 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:16:27.143 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:16:27.143 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:16:27.144 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 45.6223ms
2024-11-07 23:16:27.145 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:16:27.146 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:16:27.146 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:27.147 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:16:27.148 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 62.0731ms
2024-11-07 23:16:33.500 +07:00 [DBG] Connection id "0HN7UH3VGBS2M" received FIN.
2024-11-07 23:16:33.501 +07:00 [DBG] Connection id "0HN7UH3VGBS2M" is closed. The last processed stream ID was 1.
2024-11-07 23:16:33.501 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2M completed.
2024-11-07 23:16:33.501 +07:00 [DBG] Connection id "0HN7UH3VGBS2M" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:16:33.506 +07:00 [DBG] Connection id "0HN7UH3VGBS2M" stopped.
2024-11-07 23:16:57.091 +07:00 [DBG] Connection id "0HN7UH3VGBS2N" accepted.
2024-11-07 23:16:57.094 +07:00 [DBG] Connection id "0HN7UH3VGBS2N" started.
2024-11-07 23:16:57.143 +07:00 [DBG] Connection 0HN7UH3VGBS2N established using the following protocol: "Tls13"
2024-11-07 23:16:57.166 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:16:57.180 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:16:57.180 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:16:57.181 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:16:57.182 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:16:57.183 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:16:57.184 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:16:57.184 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:16:57.186 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:16:57.186 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:16:57.188 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:16:57.189 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:16:57.190 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:16:57.191 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:16:57.192 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:16:57.194 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:16:57.195 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:16:57.196 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:16:57.197 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:16:57.197 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:16:57.198 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:16:57.199 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:16:57.200 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:16:57.201 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:16:57.203 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:16:57.204 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:16:57.204 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:16:57.205 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:16:57.206 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:16:57.207 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:16:57.208 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:16:57.208 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:16:57.209 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:16:57.210 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:16:57.211 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:16:57.212 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:16:57.212 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:16:57.213 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:16:57.214 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:16:57.215 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:16:57.216 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:16:57.218 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:16:57.219 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:16:57.221 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:16:57.223 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:16:57.224 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:16:57.224 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:57.225 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:57.226 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:16:57.226 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:16:57.227 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:16:57.228 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:16:57.238 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:16:57.281 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:57.282 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:16:57.283 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:57.284 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:16:57.285 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:16:57.286 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:16:57.286 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:16:57.286 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:16:57.287 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:16:57.287 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:16:57.288 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 94.3075ms
2024-11-07 23:16:57.289 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:16:57.290 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:16:57.290 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:16:57.291 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:16:57.292 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 125.7503ms
2024-11-07 23:16:58.517 +07:00 [DBG] Connection id "0HN7UH3VGBS2N" received FIN.
2024-11-07 23:16:58.518 +07:00 [DBG] Connection id "0HN7UH3VGBS2N" is closed. The last processed stream ID was 1.
2024-11-07 23:16:58.518 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2N completed.
2024-11-07 23:16:58.518 +07:00 [DBG] Connection id "0HN7UH3VGBS2N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:16:58.522 +07:00 [DBG] Connection id "0HN7UH3VGBS2N" stopped.
2024-11-07 23:17:02.771 +07:00 [DBG] Connection id "0HN7UH3VGBS2O" accepted.
2024-11-07 23:17:02.772 +07:00 [DBG] Connection id "0HN7UH3VGBS2O" started.
2024-11-07 23:17:02.776 +07:00 [DBG] Connection 0HN7UH3VGBS2O established using the following protocol: "Tls13"
2024-11-07 23:17:02.778 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:17:02.779 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:17:02.780 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:17:02.780 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:17:02.781 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:17:02.781 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:17:02.782 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:17:02.783 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:17:02.784 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:17:02.784 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:17:02.785 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:17:02.786 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:17:02.787 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:17:02.788 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:17:02.789 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:17:02.791 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:17:02.792 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:17:02.792 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:17:02.793 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:17:02.794 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:17:02.795 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:17:02.795 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:17:02.796 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:17:02.797 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:17:02.798 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:17:02.799 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:17:02.800 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:17:02.800 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:17:02.801 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:17:02.802 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:17:02.802 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:17:02.803 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:17:02.804 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:17:02.805 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:17:02.805 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:17:02.806 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:17:02.807 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:17:02.807 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:17:02.808 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:17:02.809 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:17:02.809 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:17:02.810 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:17:02.811 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:17:02.812 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:17:02.813 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:17:02.813 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:17:02.814 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:02.815 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:02.815 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:17:02.816 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:17:02.816 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:17:02.817 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:17:02.825 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:17:02.826 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:02.827 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:17:02.828 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:02.828 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:17:02.829 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:17:02.830 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:17:02.831 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:17:02.831 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:17:02.831 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:17:02.832 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:17:02.833 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.3982ms
2024-11-07 23:17:02.833 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:17:02.834 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:17:02.835 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:02.835 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:17:02.836 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 58.4693ms
2024-11-07 23:17:03.550 +07:00 [DBG] Connection id "0HN7UH3VGBS2O" received FIN.
2024-11-07 23:17:03.550 +07:00 [DBG] Connection id "0HN7UH3VGBS2O" is closed. The last processed stream ID was 1.
2024-11-07 23:17:03.550 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2O completed.
2024-11-07 23:17:03.551 +07:00 [DBG] Connection id "0HN7UH3VGBS2O" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:17:03.562 +07:00 [DBG] Connection id "0HN7UH3VGBS2O" stopped.
2024-11-07 23:17:07.368 +07:00 [DBG] Connection id "0HN7UH3VGBS2P" accepted.
2024-11-07 23:17:07.369 +07:00 [DBG] Connection id "0HN7UH3VGBS2P" started.
2024-11-07 23:17:07.374 +07:00 [DBG] Connection 0HN7UH3VGBS2P established using the following protocol: "Tls13"
2024-11-07 23:17:07.375 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:17:07.377 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:17:07.377 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:17:07.378 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:17:07.378 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:17:07.379 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:17:07.380 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:17:07.381 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:17:07.381 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:17:07.382 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:17:07.384 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:17:07.386 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:17:07.387 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:17:07.389 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:17:07.390 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:17:07.391 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:17:07.392 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:17:07.392 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:17:07.393 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:17:07.395 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:17:07.396 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:17:07.397 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:17:07.397 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:17:07.398 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:17:07.399 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:17:07.399 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:17:07.401 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:17:07.403 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:17:07.404 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:17:07.404 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:17:07.405 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:17:07.406 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:17:07.407 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:17:07.409 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:17:07.410 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:17:07.411 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:17:07.411 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:17:07.412 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:17:07.413 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:17:07.413 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:17:07.414 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:17:07.416 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:17:07.417 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:17:07.426 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:17:07.428 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:17:07.429 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:17:07.430 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:07.431 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:07.431 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:17:07.432 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:17:07.433 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:17:07.434 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:17:07.442 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:17:07.444 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:07.445 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:17:07.446 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:07.446 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:17:07.447 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:17:07.449 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:17:07.449 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:17:07.450 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:17:07.451 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:17:07.451 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:17:07.452 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 61.5374ms
2024-11-07 23:17:07.453 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:17:07.455 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:17:07.455 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:07.457 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 23:17:07.458 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 83.0677ms
2024-11-07 23:17:08.519 +07:00 [DBG] Connection id "0HN7UH3VGBS2P" received FIN.
2024-11-07 23:17:08.520 +07:00 [DBG] Connection id "0HN7UH3VGBS2P" is closed. The last processed stream ID was 1.
2024-11-07 23:17:08.520 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2P completed.
2024-11-07 23:17:08.521 +07:00 [DBG] Connection id "0HN7UH3VGBS2P" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:17:08.525 +07:00 [DBG] Connection id "0HN7UH3VGBS2P" stopped.
2024-11-07 23:17:36.960 +07:00 [DBG] Connection id "0HN7UH3VGBS2Q" accepted.
2024-11-07 23:17:36.961 +07:00 [DBG] Connection id "0HN7UH3VGBS2Q" started.
2024-11-07 23:17:36.998 +07:00 [DBG] Connection 0HN7UH3VGBS2Q established using the following protocol: "Tls13"
2024-11-07 23:17:37.013 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:17:37.019 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:17:37.019 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:17:37.020 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:17:37.021 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:17:37.021 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:17:37.022 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:17:37.023 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:17:37.024 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:17:37.024 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:17:37.026 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:17:37.027 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:17:37.028 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:17:37.029 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:17:37.029 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:17:37.030 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:17:37.031 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:17:37.032 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:17:37.033 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:17:37.034 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:17:37.035 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:17:37.036 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:17:37.036 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:17:37.037 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:17:37.037 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:17:37.038 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:17:37.039 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:17:37.040 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:17:37.040 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:17:37.041 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:17:37.042 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:17:37.042 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:17:37.043 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:17:37.044 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:17:37.045 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:17:37.046 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:17:37.046 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:17:37.047 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:17:37.048 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:17:37.048 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:17:37.049 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:17:37.050 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:17:37.051 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:17:37.052 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:17:37.054 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:17:37.055 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:17:37.056 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:37.056 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:37.057 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:17:37.058 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:17:37.058 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:17:37.059 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:17:37.071 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:17:37.073 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:37.074 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:17:37.076 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:37.076 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:17:37.077 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:17:37.079 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:17:37.080 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:17:37.080 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:17:37.081 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:17:37.082 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:17:37.083 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 52.6587ms
2024-11-07 23:17:37.084 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:17:37.084 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:17:37.086 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:17:37.086 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:17:37.088 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 76.27ms
2024-11-07 23:17:38.551 +07:00 [DBG] Connection id "0HN7UH3VGBS2Q" received FIN.
2024-11-07 23:17:38.552 +07:00 [DBG] Connection id "0HN7UH3VGBS2Q" is closed. The last processed stream ID was 1.
2024-11-07 23:17:38.553 +07:00 [DBG] Connection id "0HN7UH3VGBS2Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:17:38.563 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2Q completed.
2024-11-07 23:17:38.569 +07:00 [DBG] Connection id "0HN7UH3VGBS2Q" stopped.
2024-11-07 23:19:45.001 +07:00 [DBG] Connection id "0HN7UH3VGBS2R" accepted.
2024-11-07 23:19:45.007 +07:00 [DBG] Connection id "0HN7UH3VGBS2R" started.
2024-11-07 23:19:45.017 +07:00 [DBG] Connection 0HN7UH3VGBS2R established using the following protocol: "Tls13"
2024-11-07 23:19:45.024 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:19:45.025 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:19:45.025 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:19:45.026 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:19:45.026 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:19:45.026 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:19:45.027 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:19:45.028 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:19:45.028 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:19:45.029 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:19:45.030 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:19:45.031 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:19:45.031 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:19:45.032 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:19:45.034 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:19:45.039 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:19:45.040 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:19:45.040 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:19:45.041 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:19:45.042 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:19:45.042 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:19:45.043 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:19:45.044 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:19:45.044 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:19:45.045 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:19:45.045 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:19:45.046 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:19:45.047 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:19:45.047 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:19:45.048 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:19:45.048 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:19:45.049 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:19:45.050 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:19:45.050 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:19:45.051 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:19:45.051 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:19:45.052 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:19:45.053 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:19:45.053 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:19:45.054 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:19:45.055 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:19:45.055 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:19:45.056 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:19:45.067 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:19:45.068 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:19:45.068 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:19:45.069 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:45.070 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:45.070 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:19:45.071 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:19:45.072 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:19:45.073 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:19:45.085 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:19:45.086 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:45.087 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:19:45.088 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:45.088 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:19:45.089 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:19:45.090 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:19:45.091 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:19:45.091 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:19:45.092 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:19:45.092 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:19:45.093 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 54.4618ms
2024-11-07 23:19:45.094 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:19:45.094 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:19:45.095 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:45.096 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:19:45.096 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 73.2092ms
2024-11-07 23:19:48.752 +07:00 [DBG] Connection id "0HN7UH3VGBS2R" received FIN.
2024-11-07 23:19:48.753 +07:00 [DBG] Connection id "0HN7UH3VGBS2R" is closed. The last processed stream ID was 1.
2024-11-07 23:19:48.753 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2R completed.
2024-11-07 23:19:48.754 +07:00 [DBG] Connection id "0HN7UH3VGBS2R" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:19:48.765 +07:00 [DBG] Connection id "0HN7UH3VGBS2R" stopped.
2024-11-07 23:19:51.754 +07:00 [DBG] Connection id "0HN7UH3VGBS2S" accepted.
2024-11-07 23:19:51.755 +07:00 [DBG] Connection id "0HN7UH3VGBS2S" started.
2024-11-07 23:19:51.764 +07:00 [DBG] Connection 0HN7UH3VGBS2S established using the following protocol: "Tls13"
2024-11-07 23:19:51.765 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:19:51.767 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:19:51.767 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:19:51.768 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:19:51.768 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:19:51.769 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:19:51.770 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:19:51.771 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:19:51.772 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:19:51.772 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:19:51.773 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:19:51.774 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:19:51.775 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:19:51.776 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:19:51.777 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:19:51.784 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:19:51.785 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:19:51.786 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:19:51.787 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:19:51.788 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:19:51.788 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:19:51.789 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:19:51.789 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:19:51.790 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:19:51.791 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:19:51.791 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:19:51.792 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:19:51.793 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:19:51.793 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:19:51.794 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:19:51.795 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:19:51.796 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:19:51.797 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:19:51.798 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:19:51.799 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:19:51.800 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:19:51.800 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:19:51.801 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:19:51.802 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:19:51.803 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:19:51.803 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:19:51.804 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:19:51.804 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:19:51.808 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:19:51.818 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:19:51.819 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:19:51.819 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:51.820 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:51.821 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:19:51.821 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:19:51.822 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:19:51.823 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:19:51.830 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:19:51.831 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:51.832 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:19:51.833 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:51.834 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:19:51.835 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:19:51.836 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:19:51.836 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:19:51.836 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:19:51.837 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:19:51.837 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:19:51.839 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 54.7878ms
2024-11-07 23:19:51.839 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:19:51.840 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:19:51.841 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:51.842 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 23:19:51.843 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 77.8602ms
2024-11-07 23:19:53.757 +07:00 [DBG] Connection id "0HN7UH3VGBS2S" received FIN.
2024-11-07 23:19:53.758 +07:00 [DBG] Connection id "0HN7UH3VGBS2S" is closed. The last processed stream ID was 1.
2024-11-07 23:19:53.758 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2S completed.
2024-11-07 23:19:53.759 +07:00 [DBG] Connection id "0HN7UH3VGBS2S" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:19:53.768 +07:00 [DBG] Connection id "0HN7UH3VGBS2S" stopped.
2024-11-07 23:19:55.174 +07:00 [DBG] Connection id "0HN7UH3VGBS2T" accepted.
2024-11-07 23:19:55.175 +07:00 [DBG] Connection id "0HN7UH3VGBS2T" started.
2024-11-07 23:19:55.178 +07:00 [DBG] Connection 0HN7UH3VGBS2T established using the following protocol: "Tls13"
2024-11-07 23:19:55.180 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:19:55.181 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:19:55.182 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:19:55.183 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:19:55.183 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:19:55.184 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:19:55.184 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:19:55.185 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:19:55.185 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:19:55.186 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:19:55.187 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:19:55.188 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:19:55.189 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:19:55.190 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:19:55.191 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:19:55.192 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:19:55.193 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:19:55.193 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:19:55.194 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:19:55.195 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:19:55.196 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:19:55.196 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:19:55.197 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:19:55.198 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:19:55.198 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:19:55.199 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:19:55.199 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:19:55.200 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:19:55.201 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:19:55.202 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:19:55.202 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:19:55.203 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:19:55.204 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:19:55.205 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:19:55.205 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:19:55.206 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:19:55.207 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:19:55.207 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:19:55.208 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:19:55.209 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:19:55.209 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:19:55.210 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:19:55.211 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:19:55.212 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:19:55.213 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:19:55.213 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:19:55.214 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:55.215 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:55.216 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:19:55.217 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:19:55.217 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:19:55.218 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:19:55.224 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:19:55.225 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:55.226 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:19:55.227 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:55.227 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:19:55.228 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:19:55.230 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:19:55.230 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:19:55.231 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:19:55.231 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:19:55.232 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:19:55.232 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.6306ms
2024-11-07 23:19:55.233 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:19:55.234 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:19:55.235 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:19:55.235 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:19:55.236 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 56.8244ms
2024-11-07 23:19:58.765 +07:00 [DBG] Connection id "0HN7UH3VGBS2T" received FIN.
2024-11-07 23:19:58.766 +07:00 [DBG] Connection id "0HN7UH3VGBS2T" is closed. The last processed stream ID was 1.
2024-11-07 23:19:58.766 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2T completed.
2024-11-07 23:19:58.767 +07:00 [DBG] Connection id "0HN7UH3VGBS2T" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:19:58.774 +07:00 [DBG] Connection id "0HN7UH3VGBS2T" stopped.
2024-11-07 23:20:02.590 +07:00 [DBG] Connection id "0HN7UH3VGBS2U" accepted.
2024-11-07 23:20:02.591 +07:00 [DBG] Connection id "0HN7UH3VGBS2U" started.
2024-11-07 23:20:02.596 +07:00 [DBG] Connection 0HN7UH3VGBS2U established using the following protocol: "Tls13"
2024-11-07 23:20:02.598 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:20:02.600 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:20:02.600 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:20:02.601 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:20:02.601 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:20:02.602 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:20:02.603 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:02.604 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:20:02.604 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:02.605 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:20:02.606 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:20:02.607 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:20:02.607 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:02.609 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:20:02.609 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:02.611 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:02.611 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:02.612 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:20:02.613 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:02.614 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:20:02.615 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:02.615 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:02.616 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:20:02.617 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:20:02.618 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:02.618 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:02.619 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:02.620 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:02.621 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:02.622 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:02.623 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:02.623 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:02.624 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:20:02.626 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:02.626 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:02.627 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:02.628 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:02.629 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:02.629 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:20:02.630 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:02.631 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:02.632 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:02.632 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:02.634 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:20:02.635 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:20:02.635 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:20:02.636 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:02.637 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:02.637 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:20:02.638 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:20:02.639 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:20:02.639 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:02.647 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:02.648 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:02.649 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:20:02.649 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:02.650 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:20:02.651 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:20:02.652 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:20:02.652 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:20:02.652 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:20:02.653 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:20:02.653 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:20:02.654 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.5227ms
2024-11-07 23:20:02.655 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:02.655 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:20:02.656 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:02.656 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:20:02.657 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 59.2534ms
2024-11-07 23:20:03.765 +07:00 [DBG] Connection id "0HN7UH3VGBS2U" received FIN.
2024-11-07 23:20:03.765 +07:00 [DBG] Connection id "0HN7UH3VGBS2U" is closed. The last processed stream ID was 1.
2024-11-07 23:20:03.765 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2U completed.
2024-11-07 23:20:03.766 +07:00 [DBG] Connection id "0HN7UH3VGBS2U" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:20:03.768 +07:00 [DBG] Connection id "0HN7UH3VGBS2U" stopped.
2024-11-07 23:20:05.758 +07:00 [DBG] Connection id "0HN7UH3VGBS2V" accepted.
2024-11-07 23:20:05.760 +07:00 [DBG] Connection id "0HN7UH3VGBS2V" started.
2024-11-07 23:20:05.763 +07:00 [DBG] Connection 0HN7UH3VGBS2V established using the following protocol: "Tls13"
2024-11-07 23:20:05.765 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:20:05.766 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:20:05.767 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:20:05.767 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:20:05.768 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:20:05.769 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:20:05.770 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:05.770 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:20:05.771 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:05.772 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:20:05.774 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:20:05.775 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:20:05.780 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:05.781 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:20:05.782 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:05.783 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:05.784 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:05.785 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:20:05.785 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:05.786 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:20:05.787 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:05.788 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:05.788 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:20:05.789 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:20:05.790 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:05.791 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:05.792 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:05.793 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:05.793 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:05.795 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:05.795 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:05.796 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:05.797 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:20:05.797 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:05.798 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:05.799 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:05.800 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:05.801 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:05.801 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:20:05.802 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:05.803 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:05.804 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:05.805 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:05.807 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:20:05.808 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:20:05.808 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:20:05.809 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:05.810 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:05.811 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:20:05.811 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:20:05.812 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:20:05.813 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:05.818 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:05.820 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:05.821 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:20:05.822 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:05.823 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:20:05.823 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:20:05.825 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:20:05.825 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:20:05.826 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:20:05.826 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:20:05.827 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:20:05.828 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 45.2238ms
2024-11-07 23:20:05.829 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:05.829 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:20:05.830 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:05.831 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:20:05.831 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 67.0082ms
2024-11-07 23:20:07.125 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:20:07.126 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:20:07.127 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:20:07.127 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:20:07.128 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:20:07.129 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:20:07.130 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:07.130 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:20:07.130 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:07.131 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:20:07.132 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:20:07.133 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:20:07.133 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:07.134 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:20:07.135 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:07.135 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:07.136 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:07.137 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:20:07.138 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:07.138 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:20:07.139 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:07.140 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:07.140 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:20:07.141 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:20:07.141 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:07.142 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:07.142 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:07.143 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:07.144 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:07.144 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:07.145 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:07.145 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:07.146 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:20:07.147 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:07.147 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:07.148 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:07.148 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:07.149 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:07.149 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:20:07.150 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:07.150 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:07.151 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:07.152 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:07.153 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:20:07.155 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:20:07.155 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:20:07.155 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:07.156 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:07.156 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:20:07.157 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:20:07.157 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:20:07.158 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:07.163 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:07.164 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:07.165 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:20:07.166 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:07.166 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:20:07.167 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:20:07.169 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:20:07.169 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:20:07.169 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:20:07.170 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:20:07.170 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:20:07.171 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.5951ms
2024-11-07 23:20:07.172 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:07.172 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:20:07.173 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:07.174 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:20:07.175 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 49.8973ms
2024-11-07 23:20:08.779 +07:00 [DBG] Connection id "0HN7UH3VGBS2V" received FIN.
2024-11-07 23:20:08.780 +07:00 [DBG] Connection id "0HN7UH3VGBS2V" is closed. The last processed stream ID was 3.
2024-11-07 23:20:08.781 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS2V completed.
2024-11-07 23:20:08.781 +07:00 [DBG] Connection id "0HN7UH3VGBS2V" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:20:08.793 +07:00 [DBG] Connection id "0HN7UH3VGBS2V" stopped.
2024-11-07 23:20:11.200 +07:00 [DBG] Connection id "0HN7UH3VGBS30" accepted.
2024-11-07 23:20:11.201 +07:00 [DBG] Connection id "0HN7UH3VGBS30" started.
2024-11-07 23:20:11.204 +07:00 [DBG] Connection 0HN7UH3VGBS30 established using the following protocol: "Tls13"
2024-11-07 23:20:11.205 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:20:11.207 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:20:11.207 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:20:11.208 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:20:11.208 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:20:11.209 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:20:11.210 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:11.210 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:20:11.211 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:11.211 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:20:11.212 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:20:11.213 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:20:11.214 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:11.216 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:20:11.216 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:11.217 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:11.217 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:11.218 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:20:11.219 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:11.219 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:20:11.220 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:11.221 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:11.221 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:20:11.222 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:20:11.222 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:11.223 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:11.223 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:11.224 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:11.224 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:11.225 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:11.226 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:11.226 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:11.227 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:20:11.227 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:11.228 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:11.228 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:11.229 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:11.229 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:11.230 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:20:11.231 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:11.231 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:11.232 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:11.232 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:11.233 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:20:11.234 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:20:11.235 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:20:11.235 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:11.236 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:11.237 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:20:11.237 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:20:11.238 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:20:11.238 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:11.243 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:11.245 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:11.245 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:20:11.246 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:11.247 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:20:11.247 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:20:11.248 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:20:11.249 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:20:11.249 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:20:11.250 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:20:11.250 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:20:11.251 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.0709ms
2024-11-07 23:20:11.251 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:11.252 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:20:11.252 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:11.253 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:20:11.254 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 48.7578ms
2024-11-07 23:20:15.408 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:20:15.410 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:20:15.411 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:20:15.411 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:20:15.412 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:20:15.412 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:20:15.413 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:15.413 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:20:15.414 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:15.414 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:20:15.415 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:20:15.416 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:20:15.417 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:15.418 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:20:15.419 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:15.420 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:15.422 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:15.422 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:20:15.423 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:15.425 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:20:15.425 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:15.426 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:15.426 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:20:15.427 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:20:15.427 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:15.428 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:15.428 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:15.429 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:15.429 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:15.430 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:15.431 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:15.432 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:15.434 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:20:15.434 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:15.435 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:15.436 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:15.436 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:15.437 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:15.437 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:20:15.438 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:15.439 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:15.439 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:15.440 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:15.442 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:20:15.443 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:20:15.443 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:20:15.444 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:15.445 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:15.445 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:20:15.446 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:20:15.446 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:20:15.447 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:15.452 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:15.453 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:15.454 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:20:15.454 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:15.455 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:20:15.456 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:20:15.457 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:20:15.457 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:20:15.457 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:20:15.458 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:20:15.458 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:20:15.459 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.0046ms
2024-11-07 23:20:15.460 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:15.460 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:20:15.461 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:15.462 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:20:15.462 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 54.4437ms
2024-11-07 23:20:18.789 +07:00 [DBG] Connection id "0HN7UH3VGBS30" received FIN.
2024-11-07 23:20:18.789 +07:00 [DBG] Connection id "0HN7UH3VGBS30" is closed. The last processed stream ID was 3.
2024-11-07 23:20:18.789 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS30 completed.
2024-11-07 23:20:18.790 +07:00 [DBG] Connection id "0HN7UH3VGBS30" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:20:18.802 +07:00 [DBG] Connection id "0HN7UH3VGBS30" stopped.
2024-11-07 23:20:23.685 +07:00 [DBG] Connection id "0HN7UH3VGBS31" accepted.
2024-11-07 23:20:23.686 +07:00 [DBG] Connection id "0HN7UH3VGBS31" started.
2024-11-07 23:20:23.690 +07:00 [DBG] Connection 0HN7UH3VGBS31 established using the following protocol: "Tls13"
2024-11-07 23:20:23.692 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:20:23.693 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:20:23.693 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:20:23.694 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:20:23.694 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:20:23.695 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:20:23.695 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:23.696 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:20:23.696 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:23.697 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:20:23.698 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:20:23.698 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:20:23.699 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:23.700 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:20:23.701 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:23.701 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:23.702 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:23.703 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:20:23.703 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:23.704 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:20:23.705 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:23.705 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:23.706 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:20:23.706 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:20:23.707 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:23.707 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:23.708 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:23.709 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:23.709 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:23.710 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:23.710 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:23.711 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:23.711 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:20:23.712 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:23.712 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:23.713 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:23.713 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:23.714 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:23.714 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:20:23.715 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:23.716 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:23.716 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:23.717 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:23.719 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:20:23.720 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:20:23.720 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:20:23.721 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:23.721 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:23.722 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:20:23.722 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:20:23.723 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:20:23.724 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:23.728 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:23.730 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:23.730 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:20:23.731 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:23.731 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:20:23.732 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:20:23.733 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:20:23.733 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:20:23.734 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:20:23.734 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:20:23.735 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:20:23.736 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.0841ms
2024-11-07 23:20:23.736 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:23.737 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:20:23.737 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:23.738 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:20:23.738 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 46.9045ms
2024-11-07 23:20:23.791 +07:00 [DBG] Connection id "0HN7UH3VGBS31" received FIN.
2024-11-07 23:20:23.793 +07:00 [DBG] Connection id "0HN7UH3VGBS31" is closed. The last processed stream ID was 1.
2024-11-07 23:20:23.793 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS31 completed.
2024-11-07 23:20:23.795 +07:00 [DBG] Connection id "0HN7UH3VGBS31" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:20:23.803 +07:00 [DBG] Connection id "0HN7UH3VGBS31" stopped.
2024-11-07 23:20:38.643 +07:00 [DBG] Connection id "0HN7UH3VGBS32" accepted.
2024-11-07 23:20:38.644 +07:00 [DBG] Connection id "0HN7UH3VGBS32" started.
2024-11-07 23:20:38.647 +07:00 [DBG] Connection 0HN7UH3VGBS32 established using the following protocol: "Tls13"
2024-11-07 23:20:38.649 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:20:38.651 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:20:38.652 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:20:38.653 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:20:38.653 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:20:38.654 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:20:38.655 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:38.655 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:20:38.656 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:38.657 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:20:38.658 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:20:38.658 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:20:38.659 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:38.660 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:20:38.661 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:38.662 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:38.663 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:38.664 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:20:38.665 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:38.666 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:20:38.667 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:38.667 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:38.668 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:20:38.668 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:20:38.669 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:38.670 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:38.671 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:38.671 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:38.672 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:38.673 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:38.674 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:38.674 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:38.675 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:20:38.676 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:38.677 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:38.677 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:38.678 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:38.679 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:38.680 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:20:38.681 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:38.681 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:38.683 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:38.683 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:38.684 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:20:38.686 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:20:38.686 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:20:38.687 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:38.688 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:38.688 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:20:38.689 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:20:38.690 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:20:38.690 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:38.696 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:38.697 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:38.698 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:20:38.698 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:38.699 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:20:38.700 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:20:38.701 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:20:38.701 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:20:38.702 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:20:38.703 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:20:38.704 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:20:38.704 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.1316ms
2024-11-07 23:20:38.705 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:38.706 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:20:38.706 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:38.707 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:20:38.708 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 58.5076ms
2024-11-07 23:20:43.818 +07:00 [DBG] Connection id "0HN7UH3VGBS32" received FIN.
2024-11-07 23:20:43.819 +07:00 [DBG] Connection id "0HN7UH3VGBS32" is closed. The last processed stream ID was 1.
2024-11-07 23:20:43.819 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS32 completed.
2024-11-07 23:20:43.820 +07:00 [DBG] Connection id "0HN7UH3VGBS32" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:20:43.832 +07:00 [DBG] Connection id "0HN7UH3VGBS32" stopped.
2024-11-07 23:20:50.195 +07:00 [DBG] Connection id "0HN7UH3VGBS33" accepted.
2024-11-07 23:20:50.196 +07:00 [DBG] Connection id "0HN7UH3VGBS33" started.
2024-11-07 23:20:50.199 +07:00 [DBG] Connection 0HN7UH3VGBS33 established using the following protocol: "Tls13"
2024-11-07 23:20:50.201 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:20:50.202 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:20:50.203 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:20:50.203 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:20:50.204 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:20:50.205 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:20:50.205 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:50.206 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:20:50.207 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:50.208 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:20:50.209 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:20:50.210 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:20:50.210 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:50.212 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:20:50.213 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:20:50.214 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:50.215 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:20:50.216 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:20:50.217 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:50.217 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:20:50.218 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:50.219 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:20:50.220 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:20:50.221 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:20:50.221 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:50.222 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:20:50.223 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:50.224 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:50.225 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:50.225 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:20:50.226 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:20:50.226 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:50.227 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:20:50.228 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:50.229 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:50.229 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:20:50.230 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:20:50.231 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:50.231 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:20:50.232 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:50.233 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:50.234 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:20:50.235 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:20:50.237 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:20:50.239 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:20:50.239 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:20:50.240 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:50.241 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:50.241 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:20:50.242 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:20:50.243 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:20:50.243 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:50.250 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:20:50.252 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:50.252 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:20:50.253 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:50.254 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:20:50.254 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:20:50.256 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:20:50.256 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:20:50.257 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:20:50.257 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:20:50.257 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:20:50.258 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.7413ms
2024-11-07 23:20:50.259 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:20:50.259 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:20:50.260 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:20:50.261 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:20:50.261 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 61.0282ms
2024-11-07 23:20:53.845 +07:00 [DBG] Connection id "0HN7UH3VGBS33" received FIN.
2024-11-07 23:20:53.847 +07:00 [DBG] Connection id "0HN7UH3VGBS33" is closed. The last processed stream ID was 1.
2024-11-07 23:20:53.847 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS33 completed.
2024-11-07 23:20:53.848 +07:00 [DBG] Connection id "0HN7UH3VGBS33" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:20:53.859 +07:00 [DBG] Connection id "0HN7UH3VGBS33" stopped.
2024-11-07 23:21:17.009 +07:00 [DBG] Connection id "0HN7UH3VGBS34" accepted.
2024-11-07 23:21:17.010 +07:00 [DBG] Connection id "0HN7UH3VGBS34" started.
2024-11-07 23:21:17.020 +07:00 [DBG] Connection 0HN7UH3VGBS34 established using the following protocol: "Tls13"
2024-11-07 23:21:17.036 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:21:17.043 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:21:17.043 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:21:17.044 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:21:17.045 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:21:17.046 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:21:17.047 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:17.047 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:21:17.048 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:17.049 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:21:17.050 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:21:17.051 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:21:17.051 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:17.052 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:21:17.053 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:17.054 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:17.055 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:17.056 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:21:17.057 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:17.058 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:21:17.058 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:17.059 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:17.059 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:21:17.060 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:21:17.061 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:17.061 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:17.062 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:17.063 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:17.063 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:17.064 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:17.064 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:17.065 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:17.065 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:21:17.066 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:17.066 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:17.067 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:17.067 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:17.068 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:17.069 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:21:17.069 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:17.070 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:17.070 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:17.071 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:17.072 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:21:17.073 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:21:17.074 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:21:17.074 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:17.076 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:17.076 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:21:17.077 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:17.077 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:21:17.078 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:17.085 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:17.086 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:17.087 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:21:17.087 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:17.088 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:21:17.088 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:21:17.090 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:21:17.090 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:21:17.091 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:21:17.091 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:21:17.092 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:21:17.092 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.5538ms
2024-11-07 23:21:17.093 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:17.094 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:21:17.094 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:17.095 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:21:17.096 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 59.9997ms
2024-11-07 23:21:23.881 +07:00 [DBG] Connection id "0HN7UH3VGBS34" received FIN.
2024-11-07 23:21:23.882 +07:00 [DBG] Connection id "0HN7UH3VGBS34" is closed. The last processed stream ID was 1.
2024-11-07 23:21:23.882 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS34 completed.
2024-11-07 23:21:23.882 +07:00 [DBG] Connection id "0HN7UH3VGBS34" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:21:23.892 +07:00 [DBG] Connection id "0HN7UH3VGBS34" stopped.
2024-11-07 23:21:27.422 +07:00 [DBG] Connection id "0HN7UH3VGBS35" accepted.
2024-11-07 23:21:27.423 +07:00 [DBG] Connection id "0HN7UH3VGBS35" started.
2024-11-07 23:21:27.436 +07:00 [DBG] Connection 0HN7UH3VGBS35 established using the following protocol: "Tls13"
2024-11-07 23:21:27.463 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:21:27.473 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:21:27.474 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:21:27.475 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:21:27.475 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:21:27.476 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:21:27.478 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:27.478 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:21:27.479 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:27.480 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:21:27.481 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:21:27.482 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:21:27.484 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:27.485 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:21:27.486 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:27.487 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:27.487 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:27.488 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:21:27.489 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:27.490 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:21:27.490 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:27.491 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:27.492 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:21:27.492 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:21:27.493 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:27.493 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:27.494 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:27.495 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:27.495 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:27.496 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:27.497 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:27.497 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:27.498 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:21:27.499 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:27.500 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:27.500 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:27.501 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:27.501 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:27.502 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:21:27.503 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:27.503 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:27.504 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:27.505 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:27.506 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:21:27.508 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:21:27.508 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:21:27.509 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:27.509 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:27.510 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:21:27.511 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:27.511 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:21:27.512 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:27.520 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:27.521 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:27.522 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:21:27.523 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:27.523 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:21:27.524 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:21:27.525 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:21:27.526 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:21:27.526 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:21:27.527 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:21:27.527 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:21:27.528 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.2773ms
2024-11-07 23:21:27.529 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:27.529 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:21:27.530 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:27.531 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:21:27.531 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 69.5179ms
2024-11-07 23:21:28.885 +07:00 [DBG] Connection id "0HN7UH3VGBS35" received FIN.
2024-11-07 23:21:28.886 +07:00 [DBG] Connection id "0HN7UH3VGBS35" is closed. The last processed stream ID was 1.
2024-11-07 23:21:28.886 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS35 completed.
2024-11-07 23:21:28.887 +07:00 [DBG] Connection id "0HN7UH3VGBS35" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:21:28.899 +07:00 [DBG] Connection id "0HN7UH3VGBS35" stopped.
2024-11-07 23:21:30.370 +07:00 [DBG] Connection id "0HN7UH3VGBS36" accepted.
2024-11-07 23:21:30.371 +07:00 [DBG] Connection id "0HN7UH3VGBS36" started.
2024-11-07 23:21:30.374 +07:00 [DBG] Connection 0HN7UH3VGBS36 established using the following protocol: "Tls13"
2024-11-07 23:21:30.375 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:21:30.376 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:21:30.377 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:21:30.377 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:21:30.378 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:21:30.378 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:21:30.379 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:30.380 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:21:30.381 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:30.381 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:21:30.382 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:21:30.383 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:21:30.384 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:30.384 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:21:30.385 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:30.386 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:30.387 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:30.388 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:21:30.388 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:30.389 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:21:30.390 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:30.390 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:30.391 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:21:30.391 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:21:30.392 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:30.393 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:30.393 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:30.394 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:30.395 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:30.395 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:30.396 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:30.397 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:30.398 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:21:30.398 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:30.399 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:30.400 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:30.400 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:30.401 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:30.402 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:21:30.402 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:30.403 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:30.403 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:30.404 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:30.405 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:21:30.406 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:21:30.407 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:21:30.407 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:30.408 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:30.408 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:21:30.409 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:30.409 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:21:30.410 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:30.416 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:30.418 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:30.418 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:21:30.419 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:30.419 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:21:30.420 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:21:30.421 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:21:30.421 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:21:30.422 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:21:30.422 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:21:30.423 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:21:30.423 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.2204ms
2024-11-07 23:21:30.424 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:30.424 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:21:30.425 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:30.426 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:21:30.426 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 51.4077ms
2024-11-07 23:21:31.973 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:21:31.975 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:21:31.975 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:21:31.976 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:21:31.976 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:21:31.977 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:21:31.978 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:31.979 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:21:31.979 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:31.980 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:21:31.981 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:21:31.981 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:21:31.982 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:31.983 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:21:31.984 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:31.985 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:31.985 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:31.986 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:21:31.986 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:31.987 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:21:31.988 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:31.988 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:31.989 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:21:31.989 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:21:31.990 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:31.991 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:31.991 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:31.992 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:31.992 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:31.993 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:31.994 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:31.994 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:31.995 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:21:31.995 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:31.996 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:31.996 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:31.997 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:31.997 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:31.998 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:21:31.998 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:31.999 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:32.000 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:32.001 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:32.002 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:21:32.003 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:21:32.003 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:21:32.003 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:32.004 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:32.005 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:21:32.005 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:32.006 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:32.006 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:32.011 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:32.012 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:32.013 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:21:32.013 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:32.014 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:21:32.015 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:21:32.016 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:21:32.016 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:21:32.016 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:21:32.017 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:21:32.017 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:21:32.018 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.2273ms
2024-11-07 23:21:32.019 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:32.019 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:21:32.020 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:32.020 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:21:32.021 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 48.2951ms
2024-11-07 23:21:37.331 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:21:37.332 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:21:37.333 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:21:37.333 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:21:37.334 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:21:37.334 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:21:37.337 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:37.338 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:21:37.338 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:37.339 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:21:37.339 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:21:37.340 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:21:37.341 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:37.341 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:21:37.342 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:37.343 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:37.343 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:37.344 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:21:37.345 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:37.346 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:21:37.346 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:37.347 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:37.347 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:21:37.348 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:21:37.348 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:37.349 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:37.349 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:37.350 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:37.350 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:37.351 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:37.352 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:37.353 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:37.353 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:21:37.354 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:37.354 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:37.355 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:37.355 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:37.356 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:37.356 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:21:37.357 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:37.358 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:37.358 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:37.359 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:37.360 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:21:37.361 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:21:37.361 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:21:37.362 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:37.362 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:37.363 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:21:37.363 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:37.364 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:21:37.364 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:37.370 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:37.371 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:37.372 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:21:37.373 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:37.374 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:21:37.374 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:21:37.375 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:21:37.376 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:21:37.376 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:21:37.376 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:21:37.377 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:21:37.377 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.7659ms
2024-11-07 23:21:37.378 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:37.379 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:21:37.379 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:37.380 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:21:37.381 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 50.6179ms
2024-11-07 23:21:38.907 +07:00 [DBG] Connection id "0HN7UH3VGBS36" received FIN.
2024-11-07 23:21:38.908 +07:00 [DBG] Connection id "0HN7UH3VGBS36" is closed. The last processed stream ID was 5.
2024-11-07 23:21:38.909 +07:00 [DBG] Connection id "0HN7UH3VGBS36" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:21:38.954 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS36 completed.
2024-11-07 23:21:38.955 +07:00 [DBG] Connection id "0HN7UH3VGBS36" stopped.
2024-11-07 23:21:40.550 +07:00 [DBG] Connection id "0HN7UH3VGBS37" accepted.
2024-11-07 23:21:40.552 +07:00 [DBG] Connection id "0HN7UH3VGBS37" started.
2024-11-07 23:21:40.555 +07:00 [DBG] Connection 0HN7UH3VGBS37 established using the following protocol: "Tls13"
2024-11-07 23:21:40.557 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:21:40.558 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:21:40.558 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:21:40.559 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:21:40.559 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:21:40.560 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:21:40.561 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:40.561 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:21:40.562 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:40.562 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:21:40.563 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:21:40.563 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:21:40.564 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:40.565 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:21:40.566 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:40.566 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:40.567 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:40.568 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:21:40.568 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:40.569 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:21:40.570 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:40.570 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:40.571 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:21:40.571 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:21:40.572 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:40.572 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:40.573 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:40.573 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:40.574 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:40.574 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:40.575 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:40.576 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:40.576 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:21:40.577 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:40.577 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:40.578 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:40.578 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:40.579 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:40.579 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:21:40.580 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:40.581 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:40.581 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:40.582 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:40.583 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:21:40.584 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:21:40.584 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:21:40.585 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:40.585 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:40.586 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:21:40.586 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:40.587 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:40.587 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:40.592 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:40.594 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:40.595 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:21:40.595 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:40.596 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:21:40.597 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:21:40.597 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:21:40.598 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:21:40.598 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:21:40.598 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:21:40.599 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:21:40.600 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.1705ms
2024-11-07 23:21:40.600 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:40.601 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:21:40.602 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:40.602 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:21:40.603 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 46.9336ms
2024-11-07 23:21:44.691 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:21:44.693 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:21:44.694 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:21:44.695 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:21:44.695 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:21:44.696 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:21:44.697 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:44.697 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:21:44.698 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:44.698 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:21:44.699 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:21:44.700 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:21:44.700 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:44.702 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:21:44.702 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:44.703 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:44.704 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:44.705 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:21:44.705 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:44.706 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:21:44.707 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:44.708 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:44.708 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:21:44.709 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:21:44.709 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:44.710 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:44.710 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:44.711 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:44.711 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:44.712 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:44.713 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:44.713 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:44.714 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:21:44.715 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:44.716 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:44.716 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:44.717 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:44.717 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:44.718 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:21:44.719 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:44.719 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:44.720 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:44.721 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:44.722 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:21:44.723 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:21:44.723 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:21:44.724 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:44.724 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:44.725 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:21:44.725 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:44.726 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:21:44.727 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:44.732 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:44.734 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:44.735 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:21:44.735 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:44.736 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:21:44.737 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:21:44.738 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:21:44.739 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:21:44.739 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:21:44.739 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:21:44.740 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:21:44.742 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.3466ms
2024-11-07 23:21:44.742 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:44.743 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:21:44.744 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:44.744 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:21:44.745 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 54.5621ms
2024-11-07 23:21:47.837 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:21:47.839 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:21:47.840 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:21:47.840 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:21:47.841 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:21:47.842 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:21:47.843 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:47.843 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:21:47.844 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:47.844 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:21:47.846 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:21:47.847 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:21:47.847 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:47.849 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:21:47.849 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:47.851 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:47.852 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:47.852 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:21:47.853 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:47.854 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:21:47.854 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:47.855 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:47.856 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:21:47.856 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:21:47.857 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:47.858 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:47.859 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:47.860 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:47.861 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:47.861 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:47.862 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:47.863 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:47.863 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:21:47.864 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:47.865 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:47.865 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:47.866 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:47.867 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:47.867 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:21:47.868 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:47.868 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:47.869 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:47.870 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:47.871 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:21:47.881 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:21:47.882 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:21:47.883 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:47.884 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:47.885 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:21:47.885 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:47.886 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:21:47.887 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:47.895 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:47.897 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:47.898 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:21:47.899 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:47.900 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:21:47.900 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:21:47.902 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:21:47.902 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:21:47.903 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:21:47.903 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:21:47.904 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:21:47.905 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 54.4223ms
2024-11-07 23:21:47.906 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:47.907 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:21:47.908 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:47.908 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:21:47.910 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 73.0026ms
2024-11-07 23:21:49.400 +07:00 [DBG] Connection id "0HN7UH3VGBS37" received FIN.
2024-11-07 23:21:49.401 +07:00 [DBG] Connection id "0HN7UH3VGBS37" is closed. The last processed stream ID was 5.
2024-11-07 23:21:49.401 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS37 completed.
2024-11-07 23:21:49.402 +07:00 [DBG] Connection id "0HN7UH3VGBS37" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:21:49.418 +07:00 [DBG] Connection id "0HN7UH3VGBS37" stopped.
2024-11-07 23:21:50.618 +07:00 [DBG] Connection id "0HN7UH3VGBS38" accepted.
2024-11-07 23:21:50.619 +07:00 [DBG] Connection id "0HN7UH3VGBS38" started.
2024-11-07 23:21:50.623 +07:00 [DBG] Connection 0HN7UH3VGBS38 established using the following protocol: "Tls13"
2024-11-07 23:21:50.624 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:21:50.626 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:21:50.626 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:21:50.626 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:21:50.627 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:21:50.627 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:21:50.628 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:50.629 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:21:50.629 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:50.630 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:21:50.630 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:21:50.631 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:21:50.631 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:50.632 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:21:50.634 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:50.634 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:50.635 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:50.636 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:21:50.636 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:50.637 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:21:50.638 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:50.638 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:50.638 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:21:50.639 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:21:50.639 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:50.640 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:50.641 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:50.641 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:50.642 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:50.642 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:50.643 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:50.644 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:50.644 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:21:50.645 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:50.645 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:50.646 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:50.646 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:50.647 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:50.647 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:21:50.648 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:50.649 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:50.649 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:50.650 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:50.652 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:21:50.654 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:21:50.654 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:21:50.655 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:50.655 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:50.656 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:21:50.657 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:50.657 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:21:50.658 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:50.663 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:50.664 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:50.665 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:21:50.666 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:50.666 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:21:50.667 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:21:50.668 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:21:50.668 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:21:50.668 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:21:50.668 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:21:50.669 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:21:50.669 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.0567ms
2024-11-07 23:21:50.670 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:50.671 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:21:50.671 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:50.672 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:21:50.673 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 49.1374ms
2024-11-07 23:21:53.520 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:21:53.521 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:21:53.522 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:21:53.522 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:21:53.523 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:21:53.523 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:21:53.524 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:53.525 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:21:53.525 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:53.526 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:21:53.527 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:21:53.527 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:21:53.528 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:53.529 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:21:53.530 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:53.531 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:53.531 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:53.532 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:21:53.533 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:53.534 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:21:53.534 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:53.535 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:53.535 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:21:53.536 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:21:53.536 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:53.537 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:53.538 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:53.538 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:53.539 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:53.540 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:53.540 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:53.541 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:53.542 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:21:53.542 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:53.543 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:53.544 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:53.544 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:53.545 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:53.545 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:21:53.546 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:53.547 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:53.547 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:53.548 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:53.549 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:21:53.550 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:21:53.550 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:21:53.551 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:53.552 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:53.552 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:21:53.553 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:53.553 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:21:53.554 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:53.559 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:53.561 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:53.561 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:21:53.562 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:53.563 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:21:53.563 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:21:53.564 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:21:53.565 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:21:53.565 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:21:53.565 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:21:53.566 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:21:53.567 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.2646ms
2024-11-07 23:21:53.568 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:53.568 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:21:53.569 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:53.569 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:21:53.570 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 50.6856ms
2024-11-07 23:21:56.245 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:21:56.246 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:21:56.247 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:21:56.248 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:21:56.248 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:21:56.249 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:21:56.250 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:56.251 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:21:56.251 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:56.252 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:21:56.253 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:21:56.254 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:21:56.255 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:56.256 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:21:56.257 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:21:56.258 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:56.259 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:21:56.260 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:21:56.262 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:56.263 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:21:56.264 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:56.277 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:21:56.278 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:21:56.279 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:21:56.279 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:56.280 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:21:56.281 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:56.282 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:56.283 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:56.284 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:21:56.284 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:21:56.286 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:56.286 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:21:56.287 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:56.288 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:56.289 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:21:56.289 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:21:56.290 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:56.291 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:21:56.292 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:56.292 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:56.293 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:21:56.294 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:21:56.295 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:21:56.297 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:21:56.297 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:21:56.298 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:56.300 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:56.300 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:21:56.301 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:21:56.302 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:21:56.302 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:56.309 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:21:56.310 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:56.311 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:21:56.312 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:56.313 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:21:56.314 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:21:56.315 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:21:56.316 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:21:56.316 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:21:56.317 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:21:56.317 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:21:56.319 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 61.041ms
2024-11-07 23:21:56.319 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:21:56.320 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:21:56.321 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:21:56.322 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:21:56.322 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 78.0835ms
2024-11-07 23:21:58.937 +07:00 [DBG] Connection id "0HN7UH3VGBS38" received FIN.
2024-11-07 23:21:58.937 +07:00 [DBG] Connection id "0HN7UH3VGBS38" is closed. The last processed stream ID was 5.
2024-11-07 23:21:58.937 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS38 completed.
2024-11-07 23:21:58.938 +07:00 [DBG] Connection id "0HN7UH3VGBS38" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:21:58.950 +07:00 [DBG] Connection id "0HN7UH3VGBS38" stopped.
2024-11-07 23:22:40.323 +07:00 [DBG] Connection id "0HN7UH3VGBS39" accepted.
2024-11-07 23:22:40.326 +07:00 [DBG] Connection id "0HN7UH3VGBS39" started.
2024-11-07 23:22:40.343 +07:00 [DBG] Connection 0HN7UH3VGBS39 established using the following protocol: "Tls13"
2024-11-07 23:22:40.358 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:22:40.361 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:22:40.362 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:22:40.364 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:22:40.365 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:22:40.365 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:22:40.368 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:40.376 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:22:40.379 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:40.393 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:22:40.409 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:22:40.412 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:22:40.423 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:22:40.425 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:22:40.426 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:22:40.427 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:22:40.460 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:22:40.470 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:22:40.474 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:22:40.478 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:22:40.478 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:22:40.479 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:22:40.479 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:22:40.480 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:22:40.481 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:22:40.481 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:22:40.482 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:40.483 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:40.485 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:40.485 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:22:40.486 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:40.486 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:22:40.487 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:22:40.487 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:40.488 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:40.488 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:22:40.491 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:40.492 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:22:40.493 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:22:40.494 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:40.494 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:40.495 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:22:40.495 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:40.521 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:22:40.544 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:22:40.546 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-07 23:22:40.547 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:40.550 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:40.554 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:22:40.555 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-07 23:22:40.559 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-11-07 23:22:40.564 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:22:40.779 +07:00 [INF] Executed DbCommand (206ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:22:40.781 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:40.782 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:22:40.783 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:40.784 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:22:40.786 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:22:40.787 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:22:40.788 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:22:40.788 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:22:40.789 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:22:40.790 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:22:40.802 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 374.1933ms
2024-11-07 23:22:40.803 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:40.804 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:22:40.804 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:40.805 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:22:40.806 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 450.0736ms
2024-11-07 23:22:43.988 +07:00 [DBG] Connection id "0HN7UH3VGBS39" received FIN.
2024-11-07 23:22:43.989 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS39 completed.
2024-11-07 23:22:43.989 +07:00 [DBG] Connection id "0HN7UH3VGBS39" is closed. The last processed stream ID was 1.
2024-11-07 23:22:43.991 +07:00 [DBG] Connection id "0HN7UH3VGBS39" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:22:43.994 +07:00 [DBG] Connection id "0HN7UH3VGBS39" stopped.
2024-11-07 23:22:48.371 +07:00 [DBG] Connection id "0HN7UH3VGBS3A" accepted.
2024-11-07 23:22:48.373 +07:00 [DBG] Connection id "0HN7UH3VGBS3A" started.
2024-11-07 23:22:48.379 +07:00 [DBG] Connection 0HN7UH3VGBS3A established using the following protocol: "Tls13"
2024-11-07 23:22:48.380 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:22:48.382 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:22:48.382 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:22:48.383 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:22:48.383 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:22:48.384 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:22:48.385 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:48.385 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:22:48.386 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:48.387 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:22:48.387 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:22:48.388 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:22:48.389 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:22:48.390 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:22:48.391 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:22:48.392 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:22:48.394 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:22:48.398 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:22:48.399 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:22:48.399 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:22:48.400 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:22:48.401 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:22:48.401 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:22:48.402 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:22:48.403 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:22:48.404 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:22:48.404 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:48.405 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:48.406 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:48.406 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:22:48.407 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:48.407 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:22:48.408 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:22:48.409 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:48.409 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:48.410 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:22:48.411 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:48.411 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:22:48.412 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:22:48.412 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:48.413 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:48.414 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:22:48.416 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:48.417 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:22:48.419 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:22:48.419 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:22:48.420 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:48.420 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:48.421 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:22:48.422 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:22:48.422 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:22:48.423 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:22:48.430 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:22:48.431 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:48.433 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:22:48.434 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:48.434 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:22:48.437 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:22:48.439 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:22:48.439 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:22:48.439 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:22:48.440 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:22:48.440 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:22:48.441 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 49.0284ms
2024-11-07 23:22:48.442 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:48.442 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:22:48.443 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:48.444 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:22:48.444 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 64.346ms
2024-11-07 23:22:48.990 +07:00 [DBG] Connection id "0HN7UH3VGBS3A" received FIN.
2024-11-07 23:22:48.991 +07:00 [DBG] Connection id "0HN7UH3VGBS3A" is closed. The last processed stream ID was 1.
2024-11-07 23:22:48.991 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS3A completed.
2024-11-07 23:22:48.992 +07:00 [DBG] Connection id "0HN7UH3VGBS3A" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:22:49.005 +07:00 [DBG] Connection id "0HN7UH3VGBS3A" stopped.
2024-11-07 23:22:51.838 +07:00 [DBG] Connection id "0HN7UH3VGBS3B" accepted.
2024-11-07 23:22:51.839 +07:00 [DBG] Connection id "0HN7UH3VGBS3B" started.
2024-11-07 23:22:51.842 +07:00 [DBG] Connection 0HN7UH3VGBS3B established using the following protocol: "Tls13"
2024-11-07 23:22:51.844 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:22:51.846 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:22:51.846 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:22:51.847 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:22:51.847 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:22:51.848 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:22:51.849 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:51.850 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:22:51.850 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:51.851 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:22:51.852 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:22:51.852 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:22:51.853 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:22:51.854 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:22:51.854 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:22:51.855 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:22:51.856 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:22:51.857 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:22:51.857 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:22:51.858 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:22:51.859 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:22:51.859 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:22:51.859 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:22:51.860 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:22:51.860 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:22:51.861 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:22:51.861 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:51.862 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:51.862 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:51.863 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:22:51.864 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:51.865 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:22:51.865 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:22:51.866 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:51.867 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:51.867 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:22:51.868 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:51.869 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:22:51.869 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:22:51.870 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:51.871 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:51.871 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:22:51.872 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:51.873 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:22:51.875 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:22:51.875 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:22:51.876 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:51.877 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:51.878 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:22:51.878 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:22:51.879 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:22:51.879 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:22:51.884 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:22:51.886 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:51.886 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:22:51.887 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:51.888 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:22:51.888 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:22:51.890 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:22:51.890 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:22:51.890 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:22:51.891 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:22:51.891 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:22:51.892 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.0898ms
2024-11-07 23:22:51.893 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:51.894 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:22:51.894 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:51.895 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:22:51.896 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 52.2637ms
2024-11-07 23:22:55.269 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:22:55.271 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:22:55.272 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:22:55.273 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:22:55.274 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:22:55.275 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:22:55.276 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:55.277 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:22:55.277 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:55.278 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:22:55.279 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:22:55.280 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:22:55.282 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:22:55.284 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:22:55.285 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:22:55.286 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:22:55.287 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:22:55.288 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:22:55.289 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:22:55.290 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:22:55.292 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:22:55.292 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:22:55.293 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:22:55.294 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:22:55.295 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:22:55.296 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:22:55.297 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:55.298 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:55.298 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:55.299 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:22:55.300 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:55.301 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:22:55.302 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:22:55.303 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:55.304 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:55.305 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:22:55.306 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:55.306 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:22:55.308 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:22:55.310 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:55.311 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:55.312 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:22:55.312 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:55.314 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:22:55.316 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:22:55.317 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:22:55.318 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:55.319 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:55.320 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:22:55.320 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:22:55.321 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:22:55.322 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:22:55.327 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:22:55.328 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:55.329 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:22:55.330 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:55.330 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:22:55.331 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:22:55.332 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:22:55.332 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:22:55.333 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:22:55.333 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:22:55.334 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:22:55.334 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 48.4444ms
2024-11-07 23:22:55.335 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:55.335 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:22:55.336 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:55.337 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:22:55.337 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 68.3309ms
2024-11-07 23:22:58.053 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:22:58.055 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:22:58.056 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:22:58.057 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:22:58.058 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:22:58.059 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:22:58.060 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:58.061 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:22:58.061 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:58.062 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:22:58.063 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:22:58.064 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:22:58.064 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:22:58.066 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:22:58.066 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:22:58.067 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:22:58.068 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:22:58.069 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:22:58.069 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:22:58.070 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:22:58.071 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:22:58.071 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:22:58.072 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:22:58.072 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:22:58.073 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:22:58.074 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:22:58.074 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:58.075 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:58.075 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:58.076 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:22:58.076 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:22:58.077 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:22:58.077 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:22:58.078 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:58.079 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:58.080 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:22:58.081 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:22:58.082 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:22:58.083 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:22:58.084 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:58.085 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:58.085 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:22:58.086 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:22:58.087 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:22:58.088 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:22:58.089 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:22:58.089 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:58.090 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:58.090 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:22:58.091 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:22:58.091 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:22:58.092 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:22:58.097 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:22:58.098 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:58.099 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:22:58.100 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:58.100 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:22:58.101 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:22:58.103 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:22:58.103 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:22:58.103 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:22:58.104 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:22:58.105 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:22:58.105 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.0413ms
2024-11-07 23:22:58.106 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:22:58.107 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:22:58.107 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:22:58.108 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:22:58.109 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 55.8844ms
2024-11-07 23:22:59.007 +07:00 [DBG] Connection id "0HN7UH3VGBS3B" received FIN.
2024-11-07 23:22:59.008 +07:00 [DBG] Connection id "0HN7UH3VGBS3B" is closed. The last processed stream ID was 5.
2024-11-07 23:22:59.008 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS3B completed.
2024-11-07 23:22:59.009 +07:00 [DBG] Connection id "0HN7UH3VGBS3B" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:22:59.021 +07:00 [DBG] Connection id "0HN7UH3VGBS3B" stopped.
2024-11-07 23:23:00.686 +07:00 [DBG] Connection id "0HN7UH3VGBS3C" accepted.
2024-11-07 23:23:00.687 +07:00 [DBG] Connection id "0HN7UH3VGBS3C" started.
2024-11-07 23:23:00.692 +07:00 [DBG] Connection 0HN7UH3VGBS3C established using the following protocol: "Tls13"
2024-11-07 23:23:00.694 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:23:00.696 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:23:00.697 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:23:00.697 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:23:00.697 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:23:00.698 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:23:00.699 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:23:00.699 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:23:00.700 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:23:00.700 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:23:00.701 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:23:00.702 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:23:00.703 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:23:00.704 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:23:00.705 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:23:00.706 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:23:00.707 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:23:00.708 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:23:00.708 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:23:00.709 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:23:00.710 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:23:00.711 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:23:00.711 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:23:00.712 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:23:00.713 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:23:00.714 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:23:00.714 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:23:00.715 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:23:00.716 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:23:00.716 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:23:00.717 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:23:00.717 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:23:00.718 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:23:00.720 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:23:00.721 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:23:00.722 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:23:00.722 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:23:00.723 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:23:00.724 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:23:00.725 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:23:00.725 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:23:00.726 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:23:00.727 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:23:00.728 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:23:00.729 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:23:00.730 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:23:00.730 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:23:00.731 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:23:00.732 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:23:00.732 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:23:00.733 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:23:00.734 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:23:00.740 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:23:00.741 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:23:00.741 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:23:00.742 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:23:00.743 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:23:00.744 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:23:00.745 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:23:00.746 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:23:00.746 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:23:00.746 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:23:00.747 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:23:00.748 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.6047ms
2024-11-07 23:23:00.749 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:23:00.749 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:23:00.750 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:23:00.750 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:23:00.751 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 57.3927ms
2024-11-07 23:23:04.020 +07:00 [DBG] Connection id "0HN7UH3VGBS3C" received FIN.
2024-11-07 23:23:04.021 +07:00 [DBG] Connection id "0HN7UH3VGBS3C" is closed. The last processed stream ID was 1.
2024-11-07 23:23:04.021 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS3C completed.
2024-11-07 23:23:04.022 +07:00 [DBG] Connection id "0HN7UH3VGBS3C" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:23:04.034 +07:00 [DBG] Connection id "0HN7UH3VGBS3C" stopped.
2024-11-07 23:23:58.604 +07:00 [DBG] Connection id "0HN7UH3VGBS3D" accepted.
2024-11-07 23:23:58.607 +07:00 [DBG] Connection id "0HN7UH3VGBS3D" started.
2024-11-07 23:23:58.620 +07:00 [DBG] Connection 0HN7UH3VGBS3D established using the following protocol: "Tls13"
2024-11-07 23:23:58.627 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:23:58.629 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:23:58.629 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:23:58.630 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:23:58.631 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:23:58.631 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:23:58.632 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:23:58.633 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:23:58.634 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:23:58.634 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:23:58.635 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:23:58.636 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:23:58.637 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:23:58.638 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:23:58.640 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:23:58.647 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:23:58.651 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:23:58.651 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:23:58.652 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:23:58.653 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:23:58.654 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:23:58.655 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:23:58.655 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:23:58.656 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:23:58.657 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:23:58.657 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:23:58.658 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:23:58.659 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:23:58.660 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:23:58.660 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:23:58.661 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:23:58.662 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:23:58.663 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:23:58.664 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:23:58.664 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:23:58.665 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:23:58.666 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:23:58.666 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:23:58.667 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:23:58.668 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:23:58.669 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:23:58.669 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:23:58.670 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:23:58.671 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:23:58.673 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:23:58.673 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:23:58.674 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:23:58.675 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:23:58.675 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:23:58.676 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:23:58.677 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:23:58.678 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:23:58.685 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:23:58.686 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:23:58.687 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:23:58.687 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:23:58.688 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:23:58.689 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:23:58.690 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:23:58.690 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:23:58.691 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:23:58.691 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:23:58.692 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:23:58.694 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 51.7327ms
2024-11-07 23:23:58.695 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:23:58.695 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:23:58.696 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:23:58.697 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:23:58.697 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 70.0337ms
2024-11-07 23:23:59.086 +07:00 [DBG] Connection id "0HN7UH3VGBS3D" received FIN.
2024-11-07 23:23:59.088 +07:00 [DBG] Connection id "0HN7UH3VGBS3D" is closed. The last processed stream ID was 1.
2024-11-07 23:23:59.088 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS3D completed.
2024-11-07 23:23:59.088 +07:00 [DBG] Connection id "0HN7UH3VGBS3D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:23:59.100 +07:00 [DBG] Connection id "0HN7UH3VGBS3D" stopped.
2024-11-07 23:56:23.030 +07:00 [DBG] Connection id "0HN7UH3VGBS3E" accepted.
2024-11-07 23:56:23.072 +07:00 [DBG] Connection id "0HN7UH3VGBS3E" started.
2024-11-07 23:56:23.209 +07:00 [DBG] Connection 0HN7UH3VGBS3E established using the following protocol: "Tls13"
2024-11-07 23:56:23.257 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:23.277 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:23.282 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:23.300 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:23.306 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:23.312 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:23.335 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:23.347 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:23.350 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:23.365 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:23.369 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:23.370 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:23.378 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:23.384 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:23.385 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:23.390 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:23.434 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:23.436 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:23.439 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:23.440 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:23.441 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:23.442 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:23.443 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:23.444 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:23.445 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:23.446 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:23.447 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:23.448 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:23.450 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:23.451 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:23.452 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:23.453 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:23.454 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:23.458 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:23.459 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:23.460 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:23.461 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:23.462 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:23.463 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:23.465 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:23.466 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:23.467 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:23.468 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:23.535 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:23.573 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:23.592 +07:00 [DBG] Created DbConnection. (17ms).
2024-11-07 23:56:23.593 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:23.711 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:23.715 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:23.717 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-07 23:56:23.720 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-11-07 23:56:23.726 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:23.809 +07:00 [INF] Executed DbCommand (86ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:23.811 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:23.813 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:56:23.815 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:23.819 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (3ms).
2024-11-07 23:56:23.824 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:23.826 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:23.826 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:23.826 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:23.831 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:23.854 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:23.864 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 477.0469ms
2024-11-07 23:56:23.869 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:23.870 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:23.872 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:23.873 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:56:23.874 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 633.9291ms
2024-11-07 23:56:23.905 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:23.906 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:23.907 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:23.907 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:23.908 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:23.908 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:23.910 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:23.910 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:23.911 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:23.911 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:23.912 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:23.913 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:23.915 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:23.916 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:23.928 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:23.930 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:23.933 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:23.934 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:23.935 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:23.935 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:23.938 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:23.939 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:23.947 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:23.948 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:23.948 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:23.949 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:23.950 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:23.951 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:23.951 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:23.952 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:23.953 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:23.953 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:23.954 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:23.955 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:23.957 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:23.957 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:23.958 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:23.959 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:23.960 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:23.961 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:23.961 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:23.962 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:23.963 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:23.965 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:23.966 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:23.967 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:23.967 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:23.968 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:23.969 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:23.969 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:23.970 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:23.971 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:23.973 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:23.974 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:23.975 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:23.976 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:23.977 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:23.977 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:23.979 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:23.979 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:23.980 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:23.980 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:23.981 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:23.981 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 51.2276ms
2024-11-07 23:56:23.982 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:23.983 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:23.983 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:23.984 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:56:23.985 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 79.9841ms
2024-11-07 23:56:23.987 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:23.989 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:23.989 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:23.990 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:23.990 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:23.991 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:23.992 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:23.992 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:23.993 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:23.994 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:23.994 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:23.995 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:23.996 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:23.997 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:23.998 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:23.999 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.000 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.001 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.001 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.002 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.003 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.003 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.004 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.004 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.005 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.006 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.006 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.007 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.008 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.008 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.010 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.011 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.012 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.014 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.014 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.015 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.016 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.016 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.017 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.018 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.019 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.020 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.021 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.022 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.023 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.024 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.024 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.027 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.028 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.029 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.029 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.030 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.033 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.034 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.035 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:24.036 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.037 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.037 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.039 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.039 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.040 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.040 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.041 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.042 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.8298ms
2024-11-07 23:56:24.043 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.043 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.044 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.044 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:56:24.045 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.046 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 60.9218ms
2024-11-07 23:56:24.047 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.049 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.049 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.050 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.050 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.051 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.052 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.052 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.053 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.054 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.055 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.056 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.057 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.057 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.059 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.060 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.060 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.061 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.062 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.063 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.063 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.064 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.064 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.065 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.066 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.066 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.067 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.068 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.068 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.069 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.070 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.070 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.071 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.072 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.073 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.073 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.074 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.075 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.075 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.076 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.076 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.077 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.080 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.081 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.081 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.082 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.082 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.083 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.083 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.084 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.084 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.086 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.087 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.088 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:56:24.089 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.089 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.090 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.091 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.092 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.092 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.092 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.093 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.094 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.413ms
2024-11-07 23:56:24.095 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.094 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.096 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.097 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.097 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.098 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.098 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.098 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:56:24.099 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.099 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 54.8404ms
2024-11-07 23:56:24.100 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.102 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.102 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.103 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.103 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.104 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.105 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.105 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.106 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.107 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.108 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.109 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.110 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.110 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.111 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.112 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.113 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.113 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.114 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.114 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.115 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.116 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.116 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.117 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.118 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.118 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.119 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.119 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.120 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.120 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.121 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.121 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.122 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.123 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.123 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.124 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.125 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.125 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.128 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.129 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.130 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.130 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.131 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.131 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.132 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.133 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.134 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.135 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.136 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.137 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:24.137 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.138 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.139 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.140 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.141 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.141 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.142 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.142 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.143 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.0074ms
2024-11-07 23:56:24.143 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.144 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.145 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.145 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.146 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.146 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 23:56:24.147 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.147 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 52.3671ms
2024-11-07 23:56:24.148 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.149 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.150 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.151 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.151 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.152 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.152 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.153 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.154 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.155 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.156 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.157 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.157 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.158 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.159 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.160 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.160 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.161 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.162 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.162 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.163 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.163 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.164 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.165 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.166 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.166 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.167 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.167 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.168 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.169 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.169 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.170 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.171 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.171 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.172 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.172 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.173 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.174 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.174 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.175 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.176 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.179 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.180 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.180 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.181 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.182 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.182 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.183 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.183 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.185 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.186 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.187 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:24.188 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.188 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.190 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.191 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.191 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.192 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.192 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.193 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.193 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.1945ms
2024-11-07 23:56:24.194 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.195 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.195 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.195 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.196 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.197 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 23:56:24.197 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.198 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 53.5434ms
2024-11-07 23:56:24.198 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.200 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.200 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.201 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.202 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.202 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.203 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.204 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.205 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.206 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.207 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.207 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.211 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.213 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.215 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.216 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.216 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.217 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.218 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.218 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.219 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.219 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.220 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.221 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.222 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.222 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.223 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.223 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.224 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.224 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.225 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.226 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.226 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.227 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.227 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.228 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.229 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.229 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.230 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.231 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.232 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.234 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.238 +07:00 [DBG] Created DbConnection. (3ms).
2024-11-07 23:56:24.238 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.239 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.239 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.240 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.241 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.241 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.243 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.244 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.244 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:24.245 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.246 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.246 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.247 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.248 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.248 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.249 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.249 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.251 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.1287ms
2024-11-07 23:56:24.252 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.252 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.253 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.254 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:56:24.255 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 60.1186ms
2024-11-07 23:56:24.257 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.259 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.260 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.260 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.261 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.262 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.264 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.265 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.267 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.268 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.270 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.274 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.276 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.277 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.279 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.280 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.281 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.282 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.283 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.284 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.285 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.285 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.286 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.287 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.289 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.291 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.292 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.293 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.294 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.295 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.295 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.297 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.298 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.299 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.300 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.301 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.301 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.302 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.303 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.304 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.305 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.306 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.306 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.313 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.314 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.314 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.315 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.316 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.317 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.317 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.318 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.319 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.322 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.324 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.326 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-07 23:56:24.327 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.328 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.328 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.330 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.330 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.331 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.331 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.332 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.337 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 56.884ms
2024-11-07 23:56:24.338 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.339 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.339 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.341 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.341 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.341 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.342 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:56:24.342 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.343 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 87.341ms
2024-11-07 23:56:24.347 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.347 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.348 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.349 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.349 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.350 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.350 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.351 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.352 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.353 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.354 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.355 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.375 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.376 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.376 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.377 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.378 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.379 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.379 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.380 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.381 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.381 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.383 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.383 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.384 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.385 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.386 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.386 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.387 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.388 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.388 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.389 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.390 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.391 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.392 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.393 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.393 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.394 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.395 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.397 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.399 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.399 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.400 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.401 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.401 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.402 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.403 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.403 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.405 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.406 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.407 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:24.408 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.409 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.409 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.411 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.411 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.411 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.412 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.413 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.414 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 58.6071ms
2024-11-07 23:56:24.415 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.416 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.417 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.418 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:56:24.418 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.418 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 80.1277ms
2024-11-07 23:56:24.419 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.422 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.424 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.424 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.425 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.426 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.426 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.427 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.431 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.433 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.434 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.435 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.437 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.438 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.439 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.440 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.441 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.442 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.443 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.445 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.445 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.446 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.448 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.450 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.451 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.452 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.452 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.453 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.454 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.454 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.455 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.456 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.456 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.457 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.457 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.458 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.460 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.460 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.461 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.463 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.464 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.465 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.470 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.473 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.474 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.475 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.476 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.476 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.477 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.477 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.478 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.480 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.481 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.482 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:24.482 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.483 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.484 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.485 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.486 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.490 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.490 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.491 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.499 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 59.6618ms
2024-11-07 23:56:24.500 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.501 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.501 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.503 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.503 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.503 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.504 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 23:56:24.505 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.506 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 89.7323ms
2024-11-07 23:56:24.506 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.508 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.508 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.509 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.510 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.510 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.511 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.511 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.512 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.513 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.514 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.515 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.515 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.516 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.517 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.517 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.518 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.520 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.522 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.522 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.523 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.524 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.524 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.525 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.526 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.527 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.527 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.528 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.528 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.529 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.529 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.530 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.530 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.531 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.531 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.532 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.533 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.534 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.535 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.536 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.537 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.538 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.539 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.540 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.541 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.541 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.542 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.543 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.544 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.546 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.546 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:24.547 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.548 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.550 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.551 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.552 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.553 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.553 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.554 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.556 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.2583ms
2024-11-07 23:56:24.556 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.558 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.558 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.559 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.561 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.562 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.563 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-07 23:56:24.563 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.564 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 63.3808ms
2024-11-07 23:56:24.565 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.567 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.570 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.571 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.572 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.573 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.574 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.576 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.581 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.587 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.588 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.589 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.590 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.591 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.592 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.593 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.594 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.594 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.598 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.598 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.599 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.599 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.600 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.601 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.602 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.602 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.603 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.604 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.604 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.605 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.606 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.606 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.607 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.608 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.609 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.609 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.610 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.611 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.611 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.614 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.615 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.616 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.616 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.618 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.618 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.619 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.619 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.620 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.629 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.630 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.631 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:56:24.632 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.633 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.635 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.636 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.636 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.637 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.638 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.638 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.639 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.0066ms
2024-11-07 23:56:24.640 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.641 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.641 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.643 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 23:56:24.644 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 85.9012ms
2024-11-07 23:56:24.647 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.649 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.649 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.650 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.650 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.651 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.652 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.652 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.653 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.653 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.654 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.655 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.656 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.658 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.659 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.660 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.661 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.662 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.663 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.663 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.664 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.665 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.666 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.666 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.667 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.667 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.668 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.669 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.670 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.670 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.671 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.672 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.673 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.674 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.675 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.676 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.676 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.677 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.678 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.678 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.679 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.680 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.680 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.684 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.685 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.686 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.687 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.688 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.689 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.689 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.690 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.691 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.701 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.702 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.703 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:24.704 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.704 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.705 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.706 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.707 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.708 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.708 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.709 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.710 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.0733ms
2024-11-07 23:56:24.710 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.711 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.711 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.712 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.716 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.717 +07:00 [DBG] Disposed connection to database '' on server '' (4ms).
2024-11-07 23:56:24.717 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.718 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 71.0667ms
2024-11-07 23:56:24.718 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.722 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.722 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.723 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.724 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.725 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.725 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.727 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.728 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.729 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.731 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.731 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.732 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.735 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.736 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.737 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.738 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.738 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.739 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.740 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.741 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.742 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.743 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.743 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.744 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.745 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.745 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.746 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.747 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.747 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.748 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.749 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.750 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.750 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.751 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.753 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.754 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.755 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.756 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.756 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.758 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.759 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.760 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.761 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.762 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.762 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.763 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.764 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.765 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.774 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.776 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.778 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:56:24.779 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.781 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-11-07 23:56:24.782 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.784 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.785 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.785 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.786 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.786 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.787 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 55.0783ms
2024-11-07 23:56:24.788 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.789 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.791 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.791 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.794 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.794 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-11-07 23:56:24.796 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 84.7261ms
2024-11-07 23:56:24.797 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.798 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.799 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.799 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.800 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.801 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.802 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.802 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.803 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.804 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.805 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.806 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.807 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.808 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.809 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.810 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.810 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.811 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.812 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.813 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.813 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.815 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.815 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.818 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.819 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.820 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.822 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.823 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.824 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.824 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.826 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.826 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.827 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.828 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.829 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.829 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.830 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.835 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.836 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.837 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.838 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.844 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.848 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.849 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.849 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.850 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.851 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.852 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.853 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-07 23:56:24.855 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.863 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.865 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.867 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-07 23:56:24.868 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.869 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.869 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.871 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.872 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.872 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.873 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.875 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.877 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 68.6013ms
2024-11-07 23:56:24.878 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.878 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.882 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.882 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.884 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.884 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-07 23:56:24.885 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.886 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 96.064ms
2024-11-07 23:56:24.887 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.890 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.890 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.891 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.892 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.893 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.894 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.895 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.896 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.898 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.899 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.900 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.901 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.902 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.903 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.904 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.905 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.906 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.907 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.908 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.912 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:24.913 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.913 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:24.915 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.916 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.917 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.918 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:24.918 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:24.919 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.920 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:24.921 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.923 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.924 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:24.924 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:24.925 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.926 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:24.928 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.929 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.930 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:24.931 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:24.958 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:24.959 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:24.960 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:24.960 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.962 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.962 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:24.963 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:24.963 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:24.964 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.973 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:24.974 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.975 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:24.975 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.976 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:24.977 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:24.978 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:24.979 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:24.979 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:24.980 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:24.980 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:24.981 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 79.9423ms
2024-11-07 23:56:24.982 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.982 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:24.983 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:24.983 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:24.985 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:24.986 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-07 23:56:24.986 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:24.987 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 105.0883ms
2024-11-07 23:56:24.987 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:24.989 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:24.989 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:24.990 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.991 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:24.991 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:24.992 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:24.993 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:24.993 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:24.994 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.995 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:24.996 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:24.997 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.997 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:24.998 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:24.999 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:25.000 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:25.000 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:25.001 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:25.002 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:25.002 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:25.003 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:25.003 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:25.004 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:25.005 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:25.005 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:25.005 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:25.006 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:25.007 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:25.007 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:25.008 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:25.009 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:25.009 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:25.010 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:25.010 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:25.011 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:25.011 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:25.012 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:25.013 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:25.013 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:25.014 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:25.015 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:25.016 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:25.016 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.017 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.017 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:25.018 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:25.018 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:25.019 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:25.027 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:25.029 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.029 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:25.030 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.031 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:25.031 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:25.032 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:25.033 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:25.033 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:25.034 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:25.034 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:25.035 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.4717ms
2024-11-07 23:56:25.036 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:25.036 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:25.036 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:25.038 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:25.038 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.038 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:25.039 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:56:25.039 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:25.040 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 57.1703ms
2024-11-07 23:56:25.040 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:25.042 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:25.043 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:25.043 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:25.044 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:25.045 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:25.046 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:25.046 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:25.047 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:25.048 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:25.049 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:25.050 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:25.050 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:25.051 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:25.051 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:25.052 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:25.053 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:25.053 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:25.054 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:25.054 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:25.055 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:25.055 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:25.056 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:25.056 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:25.057 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:25.057 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:25.058 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:25.058 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:25.059 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:25.060 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:25.061 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:25.061 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:25.062 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:25.063 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:25.063 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:25.064 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:25.072 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:25.072 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:25.073 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:25.077 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:25.078 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:25.078 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:25.079 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.080 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.083 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:25.084 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:25.084 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:25.085 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:25.092 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:25.093 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.094 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:25.095 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.096 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:25.097 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:25.098 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:25.098 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:25.099 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:25.099 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:25.100 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:25.101 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 51.0344ms
2024-11-07 23:56:25.101 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:25.102 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:25.102 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:56:25.103 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.104 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:56:25.105 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 23:56:25.106 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:56:25.107 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 70.324ms
2024-11-07 23:56:25.107 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:56:25.109 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:56:25.109 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:56:25.110 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:25.111 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:56:25.112 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:25.112 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:56:25.113 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:56:25.114 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:56:25.115 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:25.116 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:56:25.116 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:56:25.117 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:25.118 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:56:25.119 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:56:25.120 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:25.120 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:56:25.121 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:25.122 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:56:25.123 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:56:25.124 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:56:25.125 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:25.125 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:56:25.126 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:25.127 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:25.128 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:25.128 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:56:25.129 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:56:25.130 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:25.131 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:56:25.131 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:25.132 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:25.133 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:56:25.133 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:56:25.134 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:25.135 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:56:25.136 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:25.136 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:25.137 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:56:25.138 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:56:25.139 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:56:25.140 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:56:25.141 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:56:25.142 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.142 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.143 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:56:25.144 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:56:25.144 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:56:25.145 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:25.156 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:56:25.157 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.158 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:56:25.159 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.160 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:56:25.161 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:56:25.162 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:56:25.163 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:56:25.163 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:56:25.163 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:56:25.164 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:56:25.165 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.5936ms
2024-11-07 23:56:25.166 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:56:25.166 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:56:25.167 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:56:25.168 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:56:25.169 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 66.6513ms
2024-11-07 23:56:26.417 +07:00 [DBG] Connection id "0HN7UH3VGBS3E" received FIN.
2024-11-07 23:56:26.418 +07:00 [DBG] Connection id "0HN7UH3VGBS3E" is closed. The last processed stream ID was 37.
2024-11-07 23:56:26.418 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS3E completed.
2024-11-07 23:56:26.419 +07:00 [DBG] Connection id "0HN7UH3VGBS3E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:56:26.429 +07:00 [DBG] Connection id "0HN7UH3VGBS3E" stopped.
2024-11-07 23:57:29.262 +07:00 [DBG] Connection id "0HN7UH3VGBS3F" accepted.
2024-11-07 23:57:29.318 +07:00 [DBG] Connection id "0HN7UH3VGBS3F" started.
2024-11-07 23:57:29.492 +07:00 [DBG] Connection 0HN7UH3VGBS3F established using the following protocol: "Tls13"
2024-11-07 23:57:29.503 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:57:29.509 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:57:29.511 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:57:29.512 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:57:29.515 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:57:29.516 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:57:29.520 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:57:29.521 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:57:29.521 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:57:29.524 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:57:29.529 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:57:29.529 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:57:29.532 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:57:29.534 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:57:29.535 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:57:29.536 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:57:29.539 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:57:29.540 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:57:29.541 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:57:29.542 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:57:29.542 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:57:29.543 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:57:29.544 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:57:29.545 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:57:29.545 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:57:29.546 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:57:29.547 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:57:29.547 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:57:29.548 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:57:29.549 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:57:29.549 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:57:29.550 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:57:29.551 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:57:29.552 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:57:29.553 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:57:29.553 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:57:29.554 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:57:29.555 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:57:29.555 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:57:29.556 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:57:29.559 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:57:29.560 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:57:29.561 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:57:29.574 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:57:29.583 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:57:29.584 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:57:29.584 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:57:29.588 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:57:29.590 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:57:29.591 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-07 23:57:29.595 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-07 23:57:29.597 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:57:29.780 +07:00 [INF] Executed DbCommand (184ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:57:29.781 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:57:29.782 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:57:29.782 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:57:29.783 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:57:29.785 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:57:29.787 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:57:29.788 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:57:29.788 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:57:29.789 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:57:29.789 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:57:29.791 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 255.8054ms
2024-11-07 23:57:29.792 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:57:29.793 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:57:29.794 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:57:29.795 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-07 23:57:29.797 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 299.0229ms
2024-11-07 23:57:36.526 +07:00 [DBG] Connection id "0HN7UH3VGBS3F" received FIN.
2024-11-07 23:57:36.527 +07:00 [DBG] Connection id "0HN7UH3VGBS3F" is closed. The last processed stream ID was 1.
2024-11-07 23:57:36.527 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS3F completed.
2024-11-07 23:57:36.527 +07:00 [DBG] Connection id "0HN7UH3VGBS3F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:57:36.539 +07:00 [DBG] Connection id "0HN7UH3VGBS3F" stopped.
2024-11-07 23:58:12.424 +07:00 [DBG] Connection id "0HN7UH3VGBS3G" accepted.
2024-11-07 23:58:12.425 +07:00 [DBG] Connection id "0HN7UH3VGBS3G" started.
2024-11-07 23:58:12.430 +07:00 [DBG] Connection 0HN7UH3VGBS3G established using the following protocol: "Tls13"
2024-11-07 23:58:12.440 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:58:12.445 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:58:12.446 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:58:12.446 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:58:12.447 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:58:12.447 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:58:12.448 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:58:12.448 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:58:12.449 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:58:12.449 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:58:12.450 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:58:12.451 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:58:12.452 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:58:12.453 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:58:12.454 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:58:12.454 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:58:12.455 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:58:12.456 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:58:12.456 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:58:12.457 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:58:12.458 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:58:12.458 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:58:12.459 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:58:12.459 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:58:12.460 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:58:12.460 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:58:12.461 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:58:12.462 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:58:12.462 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:58:12.463 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:58:12.463 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:58:12.464 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:58:12.464 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:58:12.465 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:58:12.465 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:58:12.466 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:58:12.467 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:58:12.467 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:58:12.468 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:58:12.469 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:58:12.470 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:58:12.470 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:58:12.471 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:58:12.474 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:58:12.475 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:58:12.476 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:58:12.476 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:58:12.477 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:58:12.477 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:58:12.478 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:58:12.478 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:58:12.479 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:58:12.487 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:58:12.488 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:58:12.489 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:58:12.490 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:58:12.490 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:58:12.491 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:58:12.492 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:58:12.493 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:58:12.493 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:58:12.493 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:58:12.494 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:58:12.495 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.7585ms
2024-11-07 23:58:12.496 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:58:12.497 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:58:12.497 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:58:12.498 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:58:12.499 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 59.1599ms
2024-11-07 23:58:16.865 +07:00 [DBG] Connection id "0HN7UH3VGBS3G" received FIN.
2024-11-07 23:58:16.866 +07:00 [DBG] Connection id "0HN7UH3VGBS3G" is closed. The last processed stream ID was 1.
2024-11-07 23:58:16.866 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS3G completed.
2024-11-07 23:58:16.867 +07:00 [DBG] Connection id "0HN7UH3VGBS3G" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:58:16.879 +07:00 [DBG] Connection id "0HN7UH3VGBS3G" stopped.
2024-11-07 23:58:38.856 +07:00 [DBG] Connection id "0HN7UH3VGBS3H" accepted.
2024-11-07 23:58:38.858 +07:00 [DBG] Connection id "0HN7UH3VGBS3H" started.
2024-11-07 23:58:38.876 +07:00 [DBG] Connection 0HN7UH3VGBS3H established using the following protocol: "Tls13"
2024-11-07 23:58:38.889 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:58:38.891 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:58:38.891 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:58:38.892 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:58:38.934 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:58:38.936 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:58:38.937 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:58:38.938 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:58:38.939 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:58:38.940 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:58:38.941 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:58:38.943 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:58:38.944 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:58:38.946 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:58:38.947 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:58:38.948 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:58:38.953 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:58:38.953 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:58:38.954 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:58:38.955 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:58:38.956 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:58:38.957 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:58:38.958 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:58:38.959 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:58:38.959 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:58:38.960 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:58:38.961 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:58:38.962 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:58:38.963 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:58:38.964 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:58:38.964 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:58:38.965 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:58:38.966 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:58:38.967 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:58:38.968 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:58:38.968 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:58:38.969 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:58:38.970 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:58:38.971 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:58:38.972 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:58:38.972 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:58:38.973 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:58:38.974 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:58:38.977 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:58:38.978 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:58:38.979 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:58:38.979 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:58:38.980 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:58:38.981 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:58:38.981 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:58:38.982 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:58:38.983 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:58:39.000 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:58:39.002 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:58:39.002 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:58:39.003 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:58:39.004 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:58:39.005 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:58:39.006 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:58:39.007 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:58:39.007 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:58:39.008 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:58:39.009 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:58:39.011 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 63.1585ms
2024-11-07 23:58:39.012 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:58:39.012 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:58:39.013 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:58:39.014 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:58:39.015 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 125.9637ms
2024-11-07 23:58:41.609 +07:00 [DBG] Connection id "0HN7UH3VGBS3H" received FIN.
2024-11-07 23:58:41.611 +07:00 [DBG] Connection id "0HN7UH3VGBS3H" is closed. The last processed stream ID was 1.
2024-11-07 23:58:41.611 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS3H completed.
2024-11-07 23:58:41.612 +07:00 [DBG] Connection id "0HN7UH3VGBS3H" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:58:41.623 +07:00 [DBG] Connection id "0HN7UH3VGBS3H" stopped.
2024-11-07 23:59:12.429 +07:00 [DBG] Connection id "0HN7UH3VGBS3I" accepted.
2024-11-07 23:59:12.431 +07:00 [DBG] Connection id "0HN7UH3VGBS3I" started.
2024-11-07 23:59:12.440 +07:00 [DBG] Connection 0HN7UH3VGBS3I established using the following protocol: "Tls13"
2024-11-07 23:59:12.446 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-07 23:59:12.448 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-07 23:59:12.449 +07:00 [INF] CORS policy execution successful.
2024-11-07 23:59:12.450 +07:00 [DBG] The request path  does not match the path filter
2024-11-07 23:59:12.450 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-07 23:59:12.451 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-07 23:59:12.452 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:59:12.453 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-07 23:59:12.453 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:59:12.454 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-07 23:59:12.455 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-07 23:59:12.459 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-07 23:59:12.461 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:59:12.462 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-07 23:59:12.462 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-07 23:59:12.464 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:59:12.464 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-07 23:59:12.465 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-07 23:59:12.466 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-07 23:59:12.467 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-07 23:59:12.468 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:59:12.469 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-07 23:59:12.469 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-07 23:59:12.470 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-07 23:59:12.471 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:59:12.471 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-07 23:59:12.472 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-07 23:59:12.473 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:59:12.473 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-07 23:59:12.474 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-07 23:59:12.475 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-07 23:59:12.475 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-07 23:59:12.476 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-07 23:59:12.477 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:59:12.478 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-07 23:59:12.478 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-07 23:59:12.479 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-07 23:59:12.480 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:59:12.480 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-07 23:59:12.481 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:59:12.482 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:59:12.483 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-07 23:59:12.484 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-07 23:59:12.486 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-07 23:59:12.488 +07:00 [DBG] Creating DbConnection.
2024-11-07 23:59:12.488 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-07 23:59:12.489 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:59:12.490 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:59:12.491 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-07 23:59:12.492 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-07 23:59:12.492 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-07 23:59:12.494 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:59:12.503 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-07 23:59:12.505 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:59:12.506 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-07 23:59:12.506 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:59:12.507 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-07 23:59:12.508 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-07 23:59:12.510 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-07 23:59:12.511 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-07 23:59:12.511 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-07 23:59:12.512 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-07 23:59:12.512 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-07 23:59:12.514 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.3718ms
2024-11-07 23:59:12.515 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-07 23:59:12.516 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-07 23:59:12.517 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-07 23:59:12.517 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-07 23:59:12.519 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3363 application/json; charset=utf-8 72.8978ms
2024-11-07 23:59:36.683 +07:00 [DBG] Connection id "0HN7UH3VGBS3I" received FIN.
2024-11-07 23:59:36.685 +07:00 [DBG] Connection id "0HN7UH3VGBS3I" is closed. The last processed stream ID was 1.
2024-11-07 23:59:36.686 +07:00 [DBG] Connection id "0HN7UH3VGBS3I" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-07 23:59:36.687 +07:00 [DBG] The connection queue processing loop for 0HN7UH3VGBS3I completed.
2024-11-07 23:59:36.688 +07:00 [DBG] Connection id "0HN7UH3VGBS3I" stopped.
