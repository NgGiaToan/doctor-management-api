2024-11-09 00:04:50.050 +07:00 [DBG] Connection id "0HN7VCUKSF7NV" accepted.
2024-11-09 00:04:50.334 +07:00 [DBG] Connection id "0HN7VCUKSF7NV" started.
2024-11-09 00:04:50.354 +07:00 [DBG] Connection 0HN7VCUKSF7NV established using the following protocol: "Tls13"
2024-11-09 00:04:50.367 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:04:50.372 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:04:50.373 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:04:50.375 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:04:50.377 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:04:50.378 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:04:50.381 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.384 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:04:50.385 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.388 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:04:50.389 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:04:50.390 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:04:50.393 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:04:50.395 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:04:50.396 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:04:50.397 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:04:50.406 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:04:50.408 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:04:50.409 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:04:50.410 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.411 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.411 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.412 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:04:50.413 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.414 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:04:50.415 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:04:50.416 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.418 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.419 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.419 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:04:50.420 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.421 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:04:50.422 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:04:50.424 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.424 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.425 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:04:50.426 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.427 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:04:50.427 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:04:50.429 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.430 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.431 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:04:50.431 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.448 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:04:50.456 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:04:50.462 +07:00 [DBG] Created DbConnection. (6ms).
2024-11-09 00:04:50.463 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.532 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.535 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:04:50.536 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:04:50.536 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 00:04:50.540 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:04:50.664 +07:00 [INF] Executed DbCommand (126ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:04:50.666 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.667 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:04:50.667 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.668 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:04:50.671 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:04:50.673 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:04:50.673 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:04:50.674 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:04:50.675 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:04:50.676 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:04:50.677 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 280.5381ms
2024-11-09 00:04:50.678 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.679 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:04:50.680 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.682 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:04:50.682 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:04:50.683 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 317.0615ms
2024-11-09 00:04:50.685 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:04:50.687 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:04:50.687 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:04:50.688 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:04:50.689 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:04:50.690 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.690 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:04:50.691 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.692 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:04:50.693 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:04:50.693 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:04:50.694 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:04:50.696 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:04:50.696 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:04:50.697 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:04:50.698 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:04:50.699 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:04:50.700 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:04:50.700 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.701 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.702 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.702 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:04:50.703 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.704 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:04:50.704 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:04:50.705 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.706 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.707 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.708 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:04:50.708 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.709 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:04:50.710 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:04:50.711 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.711 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.712 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:04:50.713 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.714 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:04:50.714 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:04:50.715 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.716 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.717 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:04:50.717 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.718 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:04:50.720 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:04:50.721 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:04:50.721 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.722 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.723 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:04:50.724 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:04:50.724 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:04:50.725 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:04:50.739 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:04:50.740 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.743 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-11-09 00:04:50.745 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.746 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:04:50.747 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:04:50.748 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:04:50.749 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:04:50.749 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:04:50.749 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:04:50.750 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:04:50.751 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 53.9371ms
2024-11-09 00:04:50.752 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.752 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:04:50.753 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:04:50.755 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:04:50.755 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.756 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:04:50.757 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:04:50.757 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:04:50.758 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 76.811ms
2024-11-09 00:04:50.759 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:04:50.761 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:04:50.762 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.763 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:04:50.763 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.764 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:04:50.765 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:04:50.766 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:04:50.767 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:04:50.768 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:04:50.769 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:04:50.770 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:04:50.771 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:04:50.772 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:04:50.772 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:04:50.773 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.774 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.775 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.775 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:04:50.776 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.777 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:04:50.777 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:04:50.778 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.778 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.779 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.779 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:04:50.780 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.780 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:04:50.781 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:04:50.782 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.782 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.783 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:04:50.783 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.784 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:04:50.785 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:04:50.785 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.786 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.786 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:04:50.787 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.788 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:04:50.789 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:04:50.790 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:04:50.790 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.791 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.792 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:04:50.792 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:04:50.793 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:04:50.793 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:04:50.799 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:04:50.801 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.801 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:04:50.802 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.803 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:04:50.803 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:04:50.804 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:04:50.805 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:04:50.805 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:04:50.806 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:04:50.806 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:04:50.807 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.2658ms
2024-11-09 00:04:50.808 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.808 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:04:50.808 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:04:50.809 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.810 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:04:50.811 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:04:50.811 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:04:50.812 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 59.6167ms
2024-11-09 00:04:50.812 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:04:50.816 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:04:50.818 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:04:50.819 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.820 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:04:50.821 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.821 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:04:50.822 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:04:50.823 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:04:50.823 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:04:50.824 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:04:50.825 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:04:50.826 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:04:50.826 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:04:50.827 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:04:50.828 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:04:50.828 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.829 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.830 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.830 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:04:50.831 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.831 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:04:50.832 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:04:50.832 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.833 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.834 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.834 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:04:50.835 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.836 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:04:50.836 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:04:50.837 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.838 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.838 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:04:50.839 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.839 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:04:50.840 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:04:50.840 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.841 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.841 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:04:50.842 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.843 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:04:50.845 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:04:50.845 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:04:50.846 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.847 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.848 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:04:50.848 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:04:50.849 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:04:50.849 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:04:50.851 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:04:50.853 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.853 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:04:50.854 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.855 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:04:50.856 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:04:50.857 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:04:50.857 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:04:50.858 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:04:50.858 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:04:50.859 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:04:50.861 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.3996ms
2024-11-09 00:04:50.862 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.863 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:04:50.863 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:04:50.864 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:04:50.865 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.866 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:04:50.866 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:04:50.867 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:04:50.867 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 59.1394ms
2024-11-09 00:04:50.868 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:04:50.870 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:04:50.871 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.872 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:04:50.872 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.873 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:04:50.874 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:04:50.875 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:04:50.876 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:04:50.877 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:04:50.878 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:04:50.879 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:04:50.880 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:04:50.881 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:04:50.882 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:04:50.883 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.884 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.884 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.885 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:04:50.886 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.887 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:04:50.887 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:04:50.888 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.889 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.890 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.891 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:04:50.891 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.892 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:04:50.893 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:04:50.894 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.894 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.895 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:04:50.896 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.897 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:04:50.897 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:04:50.898 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.899 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.900 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:04:50.901 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.902 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:04:50.904 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:04:50.904 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:04:50.905 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.906 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.907 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:04:50.907 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:04:50.909 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:04:50.910 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:04:50.918 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:04:50.919 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.920 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:04:50.921 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.922 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 00:04:50.923 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:04:50.924 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:04:50.925 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:04:50.926 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:04:50.926 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:04:50.927 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:04:50.928 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 48.8927ms
2024-11-09 00:04:50.929 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.930 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:04:50.930 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:04:50.932 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:04:50.932 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.933 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:04:50.933 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:04:50.934 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:04:50.935 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 72.3575ms
2024-11-09 00:04:50.935 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:04:50.939 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:04:50.940 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.940 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:04:50.941 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.942 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:04:50.943 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:04:50.943 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:04:50.944 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:04:50.945 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:04:50.946 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:04:50.947 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:04:50.948 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:04:50.949 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:04:50.950 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:04:50.951 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.951 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.952 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.953 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:04:50.954 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:04:50.954 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:04:50.955 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:04:50.956 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.957 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.958 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.959 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:04:50.960 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:04:50.960 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:04:50.961 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:04:50.962 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.963 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.964 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:04:50.965 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:04:50.965 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:04:50.966 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:04:50.967 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.968 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.969 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:04:50.970 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:04:50.972 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:04:50.974 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:04:50.975 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:04:50.976 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.977 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.977 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:04:50.978 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:04:50.979 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:04:50.980 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:04:50.986 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:04:50.988 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.989 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:04:50.990 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:50.991 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:04:50.992 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:04:50.994 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:04:50.994 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:04:50.995 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:04:50.995 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:04:50.996 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:04:50.997 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 49.3357ms
2024-11-09 00:04:50.998 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:04:50.999 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:04:51.000 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:04:51.000 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:04:51.002 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 71.3832ms
2024-11-09 00:04:54.200 +07:00 [DBG] Connection id "0HN7VCUKSF7NV" received FIN.
2024-11-09 00:04:54.201 +07:00 [DBG] Connection id "0HN7VCUKSF7NV" is closed. The last processed stream ID was 11.
2024-11-09 00:04:54.202 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7NV completed.
2024-11-09 00:04:54.203 +07:00 [DBG] Connection id "0HN7VCUKSF7NV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:04:54.217 +07:00 [DBG] Connection id "0HN7VCUKSF7NV" stopped.
2024-11-09 00:05:04.768 +07:00 [DBG] Connection id "0HN7VCUKSF7O0" accepted.
2024-11-09 00:05:04.770 +07:00 [DBG] Connection id "0HN7VCUKSF7O0" started.
2024-11-09 00:05:04.788 +07:00 [DBG] Connection 0HN7VCUKSF7O0 established using the following protocol: "Tls13"
2024-11-09 00:05:04.799 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:05:04.801 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:05:04.801 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:05:04.802 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:05:04.803 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:05:04.803 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:05:04.804 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:05:04.805 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:05:04.805 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:05:04.806 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:05:04.807 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:05:04.807 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:05:04.808 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:05:04.809 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:05:04.812 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:05:04.813 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:05:04.815 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:05:04.816 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:05:04.817 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:05:04.818 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:05:04.819 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:05:04.820 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:05:04.821 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:05:04.821 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:05:04.822 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:05:04.823 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:05:04.824 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:05:04.825 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:05:04.828 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:05:04.828 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:05:04.829 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:05:04.829 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:05:04.830 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:05:04.831 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:05:04.832 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:05:04.835 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:05:04.836 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:05:04.837 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:05:04.838 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:05:04.839 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:05:04.839 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:05:04.840 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:05:04.841 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:05:04.842 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:05:04.844 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:05:04.845 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:05:04.845 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:05:04.846 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:05:04.847 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:05:04.848 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:05:04.848 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:05:04.849 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:05:04.861 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:05:04.863 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:05:04.867 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-11-09 00:05:04.868 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:05:04.869 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:05:04.870 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:05:04.871 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:05:04.872 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:05:04.872 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:05:04.873 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:05:04.873 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:05:04.879 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 65.9822ms
2024-11-09 00:05:04.880 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:05:04.882 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:05:04.883 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:05:04.883 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:05:04.884 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 85.0775ms
2024-11-09 00:05:09.226 +07:00 [DBG] Connection id "0HN7VCUKSF7O0" received FIN.
2024-11-09 00:05:09.227 +07:00 [DBG] Connection id "0HN7VCUKSF7O0" is closed. The last processed stream ID was 1.
2024-11-09 00:05:09.227 +07:00 [DBG] Connection id "0HN7VCUKSF7O0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:05:09.228 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7O0 completed.
2024-11-09 00:05:09.239 +07:00 [DBG] Connection id "0HN7VCUKSF7O0" stopped.
2024-11-09 00:05:32.837 +07:00 [DBG] Connection id "0HN7VCUKSF7O1" accepted.
2024-11-09 00:05:32.843 +07:00 [DBG] Connection id "0HN7VCUKSF7O1" started.
2024-11-09 00:05:32.855 +07:00 [DBG] Connection 0HN7VCUKSF7O1 established using the following protocol: "Tls13"
2024-11-09 00:05:32.880 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:05:32.882 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:05:32.883 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:05:32.884 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:05:32.885 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:05:32.885 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:05:32.886 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:05:32.887 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:05:32.888 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:05:32.926 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:05:32.929 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:05:32.929 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:05:32.932 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:05:32.934 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:05:32.934 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:05:32.935 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:05:32.940 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:05:32.941 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:05:32.942 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:05:32.943 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:05:32.944 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:05:32.944 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:05:32.945 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:05:32.945 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:05:32.946 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:05:32.946 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:05:32.947 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:05:32.948 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:05:32.948 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:05:32.949 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:05:32.949 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:05:32.950 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:05:32.950 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:05:32.951 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:05:32.952 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:05:32.952 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:05:32.953 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:05:32.953 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:05:32.954 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:05:32.955 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:05:32.955 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:05:32.956 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:05:32.956 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:05:32.965 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:05:32.968 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:05:32.969 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:05:32.969 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:05:32.972 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:05:32.973 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:05:32.974 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:05:32.975 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:05:32.978 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:05:32.987 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:05:32.988 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:05:32.989 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:05:32.990 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:05:32.991 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:05:32.993 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:05:32.994 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:05:32.994 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:05:32.995 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:05:32.995 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:05:32.996 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:05:32.997 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 61.8069ms
2024-11-09 00:05:32.998 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:05:32.999 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:05:32.999 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:05:33.000 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:05:33.001 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 121.2089ms
2024-11-09 00:05:34.275 +07:00 [DBG] Connection id "0HN7VCUKSF7O1" received FIN.
2024-11-09 00:05:34.276 +07:00 [DBG] Connection id "0HN7VCUKSF7O1" is closed. The last processed stream ID was 1.
2024-11-09 00:05:34.277 +07:00 [DBG] Connection id "0HN7VCUKSF7O1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:05:34.279 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7O1 completed.
2024-11-09 00:05:34.284 +07:00 [DBG] Connection id "0HN7VCUKSF7O1" stopped.
2024-11-09 00:06:52.342 +07:00 [DBG] Connection id "0HN7VCUKSF7O2" accepted.
2024-11-09 00:06:52.347 +07:00 [DBG] Connection id "0HN7VCUKSF7O2" started.
2024-11-09 00:06:52.395 +07:00 [DBG] Connection 0HN7VCUKSF7O2 established using the following protocol: "Tls13"
2024-11-09 00:06:52.404 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:06:52.415 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:06:52.416 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:06:52.418 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:06:52.420 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:06:52.421 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:06:52.422 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:06:52.424 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:06:52.425 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:06:52.427 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:06:52.429 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:06:52.429 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:06:52.431 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:06:52.433 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:06:52.433 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:06:52.434 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:06:52.443 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:06:52.444 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:06:52.445 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:06:52.446 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:06:52.447 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:06:52.447 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:06:52.448 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:06:52.448 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:06:52.449 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:06:52.450 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:06:52.451 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:06:52.451 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:06:52.452 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:06:52.453 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:06:52.453 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:06:52.454 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:06:52.455 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:06:52.456 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:06:52.456 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:06:52.457 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:06:52.458 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:06:52.459 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:06:52.460 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:06:52.460 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:06:52.461 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:06:52.462 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:06:52.462 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:06:52.476 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:06:52.480 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:06:52.481 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:06:52.481 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:06:52.485 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:06:52.488 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:06:52.489 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-09 00:06:52.490 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-09 00:06:52.491 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:06:52.561 +07:00 [INF] Executed DbCommand (70ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:06:52.565 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:06:52.565 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 00:06:52.568 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:06:52.569 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:06:52.582 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:06:52.584 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:06:52.584 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:06:52.585 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:06:52.585 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:06:52.586 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:06:52.599 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 165.0398ms
2024-11-09 00:06:52.600 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:06:52.601 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:06:52.601 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:06:52.602 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:06:52.608 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 201.1416ms
2024-11-09 00:06:54.396 +07:00 [DBG] Connection id "0HN7VCUKSF7O2" received FIN.
2024-11-09 00:06:54.399 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7O2 completed.
2024-11-09 00:06:54.399 +07:00 [DBG] Connection id "0HN7VCUKSF7O2" is closed. The last processed stream ID was 1.
2024-11-09 00:06:54.400 +07:00 [DBG] Connection id "0HN7VCUKSF7O2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:06:54.413 +07:00 [DBG] Connection id "0HN7VCUKSF7O2" stopped.
2024-11-09 00:07:49.367 +07:00 [DBG] Connection id "0HN7VCUKSF7O3" accepted.
2024-11-09 00:07:49.372 +07:00 [DBG] Connection id "0HN7VCUKSF7O3" started.
2024-11-09 00:07:49.390 +07:00 [DBG] Connection 0HN7VCUKSF7O3 established using the following protocol: "Tls13"
2024-11-09 00:07:49.394 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:07:49.405 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:07:49.406 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:07:49.407 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:07:49.407 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:07:49.408 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:07:49.408 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:07:49.409 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:07:49.410 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:07:49.412 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:07:49.413 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:07:49.414 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:07:49.420 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:07:49.422 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:07:49.423 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:07:49.424 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:07:49.429 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:07:49.430 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:07:49.431 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:07:49.431 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:07:49.432 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:07:49.433 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:07:49.433 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:07:49.434 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:07:49.434 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:07:49.435 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:07:49.436 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:07:49.437 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:07:49.438 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:07:49.438 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:07:49.439 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:07:49.439 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:07:49.440 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:07:49.441 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:07:49.442 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:07:49.442 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:07:49.443 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:07:49.444 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:07:49.444 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:07:49.445 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:07:49.446 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:07:49.446 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:07:49.447 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:07:49.450 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:07:49.452 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:07:49.453 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:07:49.454 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:07:49.455 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:07:49.456 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:07:49.456 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:07:49.457 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:07:49.461 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:07:49.532 +07:00 [INF] Executed DbCommand (74ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:07:49.533 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:07:49.534 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:07:49.535 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:07:49.536 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:07:49.538 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:07:49.539 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:07:49.539 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:07:49.540 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:07:49.540 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:07:49.541 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:07:49.542 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 118.8659ms
2024-11-09 00:07:49.543 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:07:49.544 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:07:49.544 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:07:49.545 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:07:49.547 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 152.1589ms
2024-11-09 00:07:54.513 +07:00 [DBG] Connection id "0HN7VCUKSF7O3" received FIN.
2024-11-09 00:07:54.517 +07:00 [DBG] Connection id "0HN7VCUKSF7O3" is closed. The last processed stream ID was 1.
2024-11-09 00:07:54.517 +07:00 [DBG] Connection id "0HN7VCUKSF7O3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:07:54.520 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7O3 completed.
2024-11-09 00:07:54.521 +07:00 [DBG] Connection id "0HN7VCUKSF7O3" stopped.
2024-11-09 00:09:12.281 +07:00 [DBG] Connection id "0HN7VCUKSF7O4" accepted.
2024-11-09 00:09:12.283 +07:00 [DBG] Connection id "0HN7VCUKSF7O4" started.
2024-11-09 00:09:12.301 +07:00 [DBG] Connection 0HN7VCUKSF7O4 established using the following protocol: "Tls13"
2024-11-09 00:09:12.321 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:09:12.322 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:09:12.325 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:09:12.331 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:09:12.332 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:09:12.334 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:09:12.336 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:09:12.337 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:09:12.338 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:09:12.338 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:09:12.339 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:09:12.340 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:09:12.341 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:09:12.342 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:09:12.343 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:09:12.343 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:09:12.352 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:09:12.353 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:09:12.353 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:09:12.354 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:09:12.355 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:09:12.355 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:09:12.356 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:09:12.357 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:09:12.357 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:09:12.358 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:09:12.358 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:09:12.359 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:09:12.360 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:09:12.360 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:09:12.361 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:09:12.361 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:09:12.362 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:09:12.362 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:09:12.363 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:09:12.364 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:09:12.364 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:09:12.365 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:09:12.366 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:09:12.366 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:09:12.367 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:09:12.368 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:09:12.368 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:09:12.377 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:09:12.378 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:09:12.379 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:09:12.379 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:12.394 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:12.396 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:09:12.396 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:09:12.397 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:09:12.397 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:09:12.477 +07:00 [INF] Executed DbCommand (80ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:09:12.479 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:12.479 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:09:12.480 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:12.481 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:09:12.482 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:09:12.483 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:09:12.483 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:09:12.484 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:09:12.484 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:09:12.485 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:09:12.486 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 142.0927ms
2024-11-09 00:09:12.486 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:09:12.487 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:09:12.487 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:12.488 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:09:12.489 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 168.4397ms
2024-11-09 00:09:14.603 +07:00 [DBG] Connection id "0HN7VCUKSF7O4" received FIN.
2024-11-09 00:09:14.605 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7O4 completed.
2024-11-09 00:09:14.605 +07:00 [DBG] Connection id "0HN7VCUKSF7O4" is closed. The last processed stream ID was 1.
2024-11-09 00:09:14.606 +07:00 [DBG] Connection id "0HN7VCUKSF7O4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:09:14.620 +07:00 [DBG] Connection id "0HN7VCUKSF7O4" stopped.
2024-11-09 00:09:36.340 +07:00 [DBG] Connection id "0HN7VCUKSF7O5" accepted.
2024-11-09 00:09:36.341 +07:00 [DBG] Connection id "0HN7VCUKSF7O5" started.
2024-11-09 00:09:36.348 +07:00 [DBG] Connection 0HN7VCUKSF7O5 established using the following protocol: "Tls13"
2024-11-09 00:09:36.410 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:09:36.417 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:09:36.417 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:09:36.418 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:09:36.418 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:09:36.419 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:09:36.420 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:09:36.420 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:09:36.420 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:09:36.421 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:09:36.422 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:09:36.422 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:09:36.423 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:09:36.424 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:09:36.425 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:09:36.426 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:09:36.426 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:09:36.427 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:09:36.428 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:09:36.429 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:09:36.429 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:09:36.430 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:09:36.430 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:09:36.431 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:09:36.432 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:09:36.432 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:09:36.433 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:09:36.434 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:09:36.435 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:09:36.435 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:09:36.436 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:09:36.436 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:09:36.437 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:09:36.438 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:09:36.438 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:09:36.439 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:09:36.440 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:09:36.440 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:09:36.441 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:09:36.442 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:09:36.442 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:09:36.443 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:09:36.443 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:09:36.445 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:09:36.446 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:09:36.446 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:09:36.447 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:36.448 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:36.448 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:09:36.449 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:09:36.450 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:09:36.450 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:09:36.512 +07:00 [INF] Executed DbCommand (62ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:09:36.513 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:36.514 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:09:36.515 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:36.516 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:09:36.517 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:09:36.518 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:09:36.519 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:09:36.519 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:09:36.519 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:09:36.520 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:09:36.521 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 95.8016ms
2024-11-09 00:09:36.522 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:09:36.523 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:09:36.523 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:36.524 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:09:36.525 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 115.411ms
2024-11-09 00:09:39.611 +07:00 [DBG] Connection id "0HN7VCUKSF7O5" received FIN.
2024-11-09 00:09:39.612 +07:00 [DBG] Connection id "0HN7VCUKSF7O5" is closed. The last processed stream ID was 1.
2024-11-09 00:09:39.613 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7O5 completed.
2024-11-09 00:09:39.613 +07:00 [DBG] Connection id "0HN7VCUKSF7O5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:09:39.626 +07:00 [DBG] Connection id "0HN7VCUKSF7O5" stopped.
2024-11-09 00:09:43.586 +07:00 [DBG] Connection id "0HN7VCUKSF7O6" accepted.
2024-11-09 00:09:43.587 +07:00 [DBG] Connection id "0HN7VCUKSF7O6" started.
2024-11-09 00:09:43.613 +07:00 [DBG] Connection 0HN7VCUKSF7O6 established using the following protocol: "Tls13"
2024-11-09 00:09:43.632 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:09:43.634 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:09:43.635 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:09:43.636 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:09:43.637 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:09:43.639 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:09:43.641 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:09:43.642 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:09:43.643 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:09:43.644 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:09:43.659 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:09:43.660 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:09:43.661 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:09:43.663 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:09:43.664 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:09:43.666 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:09:43.669 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:09:43.670 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:09:43.672 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:09:43.673 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:09:43.674 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:09:43.675 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:09:43.676 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:09:43.677 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:09:43.678 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:09:43.679 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:09:43.680 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:09:43.681 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:09:43.682 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:09:43.682 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:09:43.683 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:09:43.683 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:09:43.684 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:09:43.685 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:09:43.686 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:09:43.686 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:09:43.687 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:09:43.688 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:09:43.688 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:09:43.689 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:09:43.689 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:09:43.690 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:09:43.691 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:09:43.693 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:09:43.695 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:09:43.696 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:09:43.696 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:43.697 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:43.698 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:09:43.699 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:09:43.699 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:09:43.701 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:09:43.710 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:09:43.711 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:43.714 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:09:43.715 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:43.716 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:09:43.717 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:09:43.718 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:09:43.718 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:09:43.719 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:09:43.719 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:09:43.720 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:09:43.722 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 56.1158ms
2024-11-09 00:09:43.722 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:09:43.723 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:09:43.723 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:09:43.724 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:09:43.725 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 93.1677ms
2024-11-09 00:09:44.612 +07:00 [DBG] Connection id "0HN7VCUKSF7O6" received FIN.
2024-11-09 00:09:44.613 +07:00 [DBG] Connection id "0HN7VCUKSF7O6" is closed. The last processed stream ID was 1.
2024-11-09 00:09:44.613 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7O6 completed.
2024-11-09 00:09:44.613 +07:00 [DBG] Connection id "0HN7VCUKSF7O6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:09:44.622 +07:00 [DBG] Connection id "0HN7VCUKSF7O6" stopped.
2024-11-09 00:10:11.282 +07:00 [DBG] Connection id "0HN7VCUKSF7O7" accepted.
2024-11-09 00:10:11.283 +07:00 [DBG] Connection id "0HN7VCUKSF7O7" started.
2024-11-09 00:10:11.297 +07:00 [DBG] Connection 0HN7VCUKSF7O7 established using the following protocol: "Tls13"
2024-11-09 00:10:11.310 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:10:11.315 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:10:11.318 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:10:11.318 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:10:11.319 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:10:11.320 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:10:11.320 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:10:11.321 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:10:11.322 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:10:11.322 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:10:11.323 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:10:11.324 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:10:11.325 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:10:11.326 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:10:11.327 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:10:11.328 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:10:11.329 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:10:11.330 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:10:11.331 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:10:11.331 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:10:11.332 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:10:11.333 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:10:11.334 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:10:11.335 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:10:11.336 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:10:11.336 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:10:11.337 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:11.338 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:11.339 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:11.339 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:10:11.340 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:11.340 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:10:11.341 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:10:11.342 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:10:11.343 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:10:11.343 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:10:11.344 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:10:11.345 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:10:11.345 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:10:11.346 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:10:11.346 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:10:11.347 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:10:11.348 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:10:11.350 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:10:11.352 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:10:11.353 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 00:10:11.353 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:11.354 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:11.355 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:10:11.355 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:10:11.356 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:10:11.356 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:10:11.363 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:10:11.365 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:11.366 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:10:11.366 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:11.367 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:10:11.368 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:10:11.369 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:10:11.370 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:10:11.370 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:10:11.370 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:10:11.371 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:10:11.372 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.6337ms
2024-11-09 00:10:11.373 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:10:11.374 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:10:11.374 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:11.375 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:10:11.376 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 65.7279ms
2024-11-09 00:10:14.647 +07:00 [DBG] Connection id "0HN7VCUKSF7O7" received FIN.
2024-11-09 00:10:14.648 +07:00 [DBG] Connection id "0HN7VCUKSF7O7" is closed. The last processed stream ID was 1.
2024-11-09 00:10:14.648 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7O7 completed.
2024-11-09 00:10:14.649 +07:00 [DBG] Connection id "0HN7VCUKSF7O7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:10:14.659 +07:00 [DBG] Connection id "0HN7VCUKSF7O7" stopped.
2024-11-09 00:10:44.264 +07:00 [DBG] Connection id "0HN7VCUKSF7O8" accepted.
2024-11-09 00:10:44.266 +07:00 [DBG] Connection id "0HN7VCUKSF7O8" started.
2024-11-09 00:10:44.307 +07:00 [DBG] Connection 0HN7VCUKSF7O8 established using the following protocol: "Tls13"
2024-11-09 00:10:44.309 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:10:44.311 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:10:44.311 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:10:44.312 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:10:44.313 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:10:44.313 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:10:44.314 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:10:44.315 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:10:44.316 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:10:44.317 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:10:44.318 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:10:44.320 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:10:44.355 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:10:44.357 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:10:44.358 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:10:44.359 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:10:44.366 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:10:44.367 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:10:44.367 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:10:44.368 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:10:44.369 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:10:44.370 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:10:44.371 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:10:44.372 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:10:44.373 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:10:44.373 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:10:44.374 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:44.375 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:44.376 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:44.377 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:10:44.378 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:44.379 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:10:44.380 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:10:44.381 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:10:44.381 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:10:44.382 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:10:44.383 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:10:44.384 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:10:44.385 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:10:44.386 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:10:44.387 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:10:44.388 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:10:44.389 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:10:44.407 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:10:44.410 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:10:44.411 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:10:44.412 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:44.414 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:44.416 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:10:44.417 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:10:44.418 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 00:10:44.419 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:10:44.489 +07:00 [INF] Executed DbCommand (70ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:10:44.490 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:44.491 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:10:44.492 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:44.492 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:10:44.495 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:10:44.497 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:10:44.498 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:10:44.499 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:10:44.499 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:10:44.500 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:10:44.501 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 142.1495ms
2024-11-09 00:10:44.502 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:10:44.502 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:10:44.503 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:44.504 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:10:44.505 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 196.3252ms
2024-11-09 00:10:44.587 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:10:44.593 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:10:44.594 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:10:44.595 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:10:44.597 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:10:44.598 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:10:44.600 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:10:44.601 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:10:44.602 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:10:44.603 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:10:44.605 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:10:44.607 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:10:44.608 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:10:44.610 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:10:44.611 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:10:44.613 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:10:44.616 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:10:44.617 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:10:44.619 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:10:44.620 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:10:44.621 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:10:44.623 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:10:44.624 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:10:44.624 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:10:44.626 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:10:44.627 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:10:44.629 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:44.630 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:44.631 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:44.632 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:10:44.633 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:44.634 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:10:44.635 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:10:44.636 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:10:44.637 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:10:44.638 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:10:44.639 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:10:44.639 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:10:44.640 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:10:44.642 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:10:44.642 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:10:44.643 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:10:44.647 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:10:44.649 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:10:44.651 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:10:44.651 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:10:44.652 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:44.652 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:44.653 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:10:44.654 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:10:44.655 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:10:44.656 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:10:44.680 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:10:44.681 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:44.682 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:10:44.683 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:44.685 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 00:10:44.716 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:10:44.718 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:10:44.718 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:10:44.719 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:10:44.719 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:10:44.720 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:10:44.721 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 108.0612ms
2024-11-09 00:10:44.722 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:10:44.723 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:10:44.723 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:44.724 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:10:44.725 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 150.4089ms
2024-11-09 00:10:49.808 +07:00 [DBG] Connection id "0HN7VCUKSF7O8" received FIN.
2024-11-09 00:10:49.817 +07:00 [DBG] Connection id "0HN7VCUKSF7O8" is closed. The last processed stream ID was 3.
2024-11-09 00:10:49.819 +07:00 [DBG] Connection id "0HN7VCUKSF7O8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:10:49.822 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7O8 completed.
2024-11-09 00:10:49.835 +07:00 [DBG] Connection id "0HN7VCUKSF7O8" stopped.
2024-11-09 00:10:59.774 +07:00 [DBG] Connection id "0HN7VCUKSF7O9" accepted.
2024-11-09 00:10:59.775 +07:00 [DBG] Connection id "0HN7VCUKSF7O9" started.
2024-11-09 00:10:59.789 +07:00 [DBG] Connection 0HN7VCUKSF7O9 established using the following protocol: "Tls13"
2024-11-09 00:10:59.793 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:10:59.796 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:10:59.797 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:10:59.798 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:10:59.798 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:10:59.799 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:10:59.800 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:10:59.801 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:10:59.802 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:10:59.803 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:10:59.804 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:10:59.805 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:10:59.806 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:10:59.807 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:10:59.808 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:10:59.809 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:10:59.814 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:10:59.814 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:10:59.815 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:10:59.816 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:10:59.817 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:10:59.817 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:10:59.818 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:10:59.818 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:10:59.819 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:10:59.820 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:10:59.820 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:59.821 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:59.822 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:59.822 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:10:59.823 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:10:59.823 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:10:59.824 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:10:59.825 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:10:59.825 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:10:59.826 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:10:59.827 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:10:59.828 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:10:59.828 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:10:59.829 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:10:59.830 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:10:59.830 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:10:59.831 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:10:59.838 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:10:59.841 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:10:59.842 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:10:59.843 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:59.846 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:59.848 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:10:59.849 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:10:59.849 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:10:59.852 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:10:59.940 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:10:59.942 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:59.942 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:10:59.943 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:59.944 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:10:59.946 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:10:59.947 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:10:59.948 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:10:59.948 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:10:59.949 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:10:59.949 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:10:59.951 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 142.0458ms
2024-11-09 00:10:59.952 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:10:59.953 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:10:59.954 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:10:59.954 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:10:59.955 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 162.8964ms
2024-11-09 00:11:04.707 +07:00 [DBG] Connection id "0HN7VCUKSF7O9" received FIN.
2024-11-09 00:11:04.708 +07:00 [DBG] Connection id "0HN7VCUKSF7O9" is closed. The last processed stream ID was 1.
2024-11-09 00:11:04.708 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7O9 completed.
2024-11-09 00:11:04.709 +07:00 [DBG] Connection id "0HN7VCUKSF7O9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:11:04.722 +07:00 [DBG] Connection id "0HN7VCUKSF7O9" stopped.
2024-11-09 00:11:10.277 +07:00 [DBG] Connection id "0HN7VCUKSF7OA" accepted.
2024-11-09 00:11:10.277 +07:00 [DBG] Connection id "0HN7VCUKSF7OA" started.
2024-11-09 00:11:10.284 +07:00 [DBG] Connection 0HN7VCUKSF7OA established using the following protocol: "Tls13"
2024-11-09 00:11:10.285 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:11:10.287 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:11:10.288 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:11:10.288 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:11:10.289 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:11:10.289 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:11:10.290 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:10.291 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:11:10.291 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:10.292 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:11:10.293 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:11:10.294 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:11:10.295 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:10.296 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:11:10.296 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:10.297 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:10.298 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:10.299 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:11:10.299 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:10.300 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:11:10.301 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:10.302 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:10.303 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:11:10.303 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:11:10.304 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:10.305 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:10.305 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:10.306 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:10.307 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:10.308 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:10.308 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:10.309 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:10.310 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:11:10.311 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:10.311 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:10.312 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:10.312 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:10.313 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:10.314 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:11:10.315 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:10.316 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:10.317 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:10.317 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:10.319 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:11:10.321 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:11:10.321 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:11:10.322 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:10.323 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:10.323 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:11:10.324 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:11:10.325 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:11:10.325 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:10.333 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:10.335 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:10.336 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:11:10.337 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:10.337 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:11:10.338 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:11:10.339 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:11:10.339 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:11:10.340 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:11:10.340 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:11:10.341 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:11:10.342 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.3963ms
2024-11-09 00:11:10.342 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:10.343 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:11:10.344 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:10.345 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:11:10.346 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 60.5477ms
2024-11-09 00:11:14.730 +07:00 [DBG] Connection id "0HN7VCUKSF7OA" received FIN.
2024-11-09 00:11:14.731 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OA completed.
2024-11-09 00:11:14.731 +07:00 [DBG] Connection id "0HN7VCUKSF7OA" is closed. The last processed stream ID was 1.
2024-11-09 00:11:14.732 +07:00 [DBG] Connection id "0HN7VCUKSF7OA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:11:14.742 +07:00 [DBG] Connection id "0HN7VCUKSF7OA" stopped.
2024-11-09 00:11:18.250 +07:00 [DBG] Connection id "0HN7VCUKSF7OB" accepted.
2024-11-09 00:11:18.253 +07:00 [DBG] Connection id "0HN7VCUKSF7OB" started.
2024-11-09 00:11:18.275 +07:00 [DBG] Connection 0HN7VCUKSF7OB established using the following protocol: "Tls13"
2024-11-09 00:11:18.277 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:11:18.278 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:11:18.279 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:11:18.280 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:11:18.280 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:11:18.281 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:11:18.282 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:18.282 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:11:18.283 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:18.284 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:11:18.286 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:11:18.287 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:11:18.289 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:18.290 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:11:18.291 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:18.292 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:18.294 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:18.296 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:11:18.296 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:18.300 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:11:18.301 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:18.301 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:18.302 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:11:18.303 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:11:18.304 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:18.305 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:18.306 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:18.307 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:18.307 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:18.308 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:18.309 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:18.309 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:18.310 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:11:18.311 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:18.311 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:18.312 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:18.313 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:18.314 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:18.314 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:11:18.315 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:18.316 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:18.317 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:18.317 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:18.319 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:11:18.320 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:11:18.321 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:11:18.322 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:18.323 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:18.323 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:11:18.324 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:11:18.325 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:11:18.325 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:18.333 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:18.335 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:18.336 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:11:18.337 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:18.338 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 00:11:18.339 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:11:18.341 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:11:18.342 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:11:18.342 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:11:18.343 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:11:18.344 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:11:18.345 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 52.8431ms
2024-11-09 00:11:18.345 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:18.346 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:11:18.347 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:18.347 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:11:18.348 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 71.7634ms
2024-11-09 00:11:20.224 +07:00 [DBG] Connection id "0HN7VCUKSF7OB" received FIN.
2024-11-09 00:11:20.225 +07:00 [DBG] Connection id "0HN7VCUKSF7OB" is closed. The last processed stream ID was 1.
2024-11-09 00:11:20.225 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OB completed.
2024-11-09 00:11:20.226 +07:00 [DBG] Connection id "0HN7VCUKSF7OB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:11:20.231 +07:00 [DBG] Connection id "0HN7VCUKSF7OB" stopped.
2024-11-09 00:11:28.569 +07:00 [DBG] Connection id "0HN7VCUKSF7OC" accepted.
2024-11-09 00:11:28.570 +07:00 [DBG] Connection id "0HN7VCUKSF7OC" started.
2024-11-09 00:11:28.580 +07:00 [DBG] Connection 0HN7VCUKSF7OC established using the following protocol: "Tls13"
2024-11-09 00:11:28.583 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:11:28.584 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:11:28.585 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:11:28.586 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:11:28.586 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:11:28.587 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:11:28.588 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:28.589 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:11:28.589 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:28.591 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:11:28.592 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:11:28.593 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:11:28.594 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:28.596 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:11:28.597 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:28.598 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:28.600 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:28.601 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:11:28.602 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:28.603 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:11:28.605 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:28.606 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:28.607 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:11:28.608 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:11:28.609 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:28.609 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:28.611 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:28.613 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:28.616 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:28.617 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:28.618 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:28.620 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:28.621 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:11:28.622 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:28.647 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:28.650 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:28.650 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:28.651 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:28.651 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:11:28.652 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:28.657 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:28.658 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:28.659 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:28.664 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:11:28.667 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:11:28.668 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:11:28.669 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:28.671 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:28.672 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:11:28.674 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:11:28.676 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 00:11:28.679 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:28.696 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:28.699 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:28.700 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:11:28.701 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:28.701 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:11:28.703 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:11:28.704 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:11:28.705 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:11:28.706 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:11:28.706 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:11:28.707 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:11:28.708 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 109.7271ms
2024-11-09 00:11:28.708 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:28.709 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:11:28.710 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:28.711 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:11:28.712 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 129.4851ms
2024-11-09 00:11:29.746 +07:00 [DBG] Connection id "0HN7VCUKSF7OC" received FIN.
2024-11-09 00:11:29.747 +07:00 [DBG] Connection id "0HN7VCUKSF7OC" is closed. The last processed stream ID was 1.
2024-11-09 00:11:29.748 +07:00 [DBG] Connection id "0HN7VCUKSF7OC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:11:29.747 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OC completed.
2024-11-09 00:11:29.749 +07:00 [DBG] Connection id "0HN7VCUKSF7OC" stopped.
2024-11-09 00:11:40.002 +07:00 [DBG] Connection id "0HN7VCUKSF7OD" accepted.
2024-11-09 00:11:40.004 +07:00 [DBG] Connection id "0HN7VCUKSF7OD" started.
2024-11-09 00:11:40.023 +07:00 [DBG] Connection 0HN7VCUKSF7OD established using the following protocol: "Tls13"
2024-11-09 00:11:40.027 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:11:40.029 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:11:40.030 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:11:40.030 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:11:40.031 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:11:40.032 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:11:40.033 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:40.034 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:11:40.035 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:40.036 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:11:40.038 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:11:40.039 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:11:40.040 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:40.043 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:11:40.044 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:40.046 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:40.048 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:40.049 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:11:40.051 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:40.052 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:11:40.053 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:40.053 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:40.054 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:11:40.055 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:11:40.055 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:40.056 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:40.057 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:40.058 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:40.058 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:40.059 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:40.059 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:40.060 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:40.061 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:11:40.062 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:40.062 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:40.063 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:40.064 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:40.064 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:40.065 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:11:40.066 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:40.067 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:40.067 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:40.068 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:40.074 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:11:40.076 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:11:40.077 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:11:40.077 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:40.080 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:40.081 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:11:40.082 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:11:40.083 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:11:40.086 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:40.097 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:40.099 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:40.100 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:11:40.101 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:40.102 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:11:40.104 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:11:40.106 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:11:40.106 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:11:40.107 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:11:40.107 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:11:40.108 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:11:40.109 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 63.8617ms
2024-11-09 00:11:40.110 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:40.111 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:11:40.112 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:40.114 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:11:40.115 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 88.3327ms
2024-11-09 00:11:44.784 +07:00 [DBG] Connection id "0HN7VCUKSF7OD" received FIN.
2024-11-09 00:11:44.786 +07:00 [DBG] Connection id "0HN7VCUKSF7OD" is closed. The last processed stream ID was 1.
2024-11-09 00:11:44.788 +07:00 [DBG] Connection id "0HN7VCUKSF7OD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:11:44.789 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OD completed.
2024-11-09 00:11:44.794 +07:00 [DBG] Connection id "0HN7VCUKSF7OD" stopped.
2024-11-09 00:11:45.167 +07:00 [DBG] Connection id "0HN7VCUKSF7OE" accepted.
2024-11-09 00:11:45.168 +07:00 [DBG] Connection id "0HN7VCUKSF7OE" started.
2024-11-09 00:11:45.175 +07:00 [DBG] Connection 0HN7VCUKSF7OE established using the following protocol: "Tls13"
2024-11-09 00:11:45.176 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:11:45.177 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:11:45.178 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:11:45.179 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:11:45.179 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:11:45.180 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:11:45.181 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:45.182 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:11:45.182 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:45.183 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:11:45.184 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:11:45.184 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:11:45.185 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:45.186 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:11:45.187 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:45.187 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:45.188 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:45.189 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:11:45.189 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:45.190 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:11:45.191 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:45.191 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:45.192 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:11:45.193 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:11:45.193 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:45.194 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:45.194 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:45.195 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:45.196 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:45.196 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:45.197 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:45.198 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:45.199 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:11:45.199 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:45.200 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:45.200 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:45.201 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:45.202 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:45.202 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:11:45.203 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:45.204 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:45.205 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:45.205 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:45.267 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:11:45.269 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:11:45.269 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:11:45.270 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:45.271 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:45.271 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:11:45.272 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:11:45.272 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:11:45.273 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:45.280 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:45.281 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:45.282 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:11:45.283 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:45.283 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:11:45.284 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:11:45.285 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:11:45.286 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:11:45.286 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:11:45.287 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:11:45.287 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:11:45.288 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 100.9108ms
2024-11-09 00:11:45.289 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:45.290 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:11:45.290 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:45.291 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:11:45.292 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 116.2336ms
2024-11-09 00:11:49.783 +07:00 [DBG] Connection id "0HN7VCUKSF7OE" received FIN.
2024-11-09 00:11:49.784 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OE completed.
2024-11-09 00:11:49.784 +07:00 [DBG] Connection id "0HN7VCUKSF7OE" is closed. The last processed stream ID was 1.
2024-11-09 00:11:49.786 +07:00 [DBG] Connection id "0HN7VCUKSF7OE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:11:49.800 +07:00 [DBG] Connection id "0HN7VCUKSF7OE" stopped.
2024-11-09 00:11:50.591 +07:00 [DBG] Connection id "0HN7VCUKSF7OF" accepted.
2024-11-09 00:11:50.592 +07:00 [DBG] Connection id "0HN7VCUKSF7OF" started.
2024-11-09 00:11:50.628 +07:00 [DBG] Connection 0HN7VCUKSF7OF established using the following protocol: "Tls13"
2024-11-09 00:11:50.631 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:11:50.632 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:11:50.633 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:11:50.633 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:11:50.634 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:11:50.634 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:11:50.635 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:50.636 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:11:50.636 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:50.637 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:11:50.638 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:11:50.639 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:11:50.648 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:50.649 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:11:50.650 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:50.651 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:50.653 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:50.654 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:11:50.654 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:50.655 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:11:50.655 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:50.656 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:50.656 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:11:50.657 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:11:50.658 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:50.658 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:50.659 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:50.659 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:50.660 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:50.660 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:50.661 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:50.662 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:50.662 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:11:50.663 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:50.663 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:50.664 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:50.664 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:50.665 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:50.666 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:11:50.666 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:50.667 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:50.668 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:50.674 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:50.682 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:11:50.686 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:11:50.686 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:11:50.687 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:50.688 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:50.689 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:11:50.690 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:11:50.691 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:11:50.694 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:50.712 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:50.713 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:50.714 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:11:50.715 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:50.715 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:11:50.718 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:11:50.719 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:11:50.719 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:11:50.720 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:11:50.720 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:11:50.721 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:11:50.723 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 71.9714ms
2024-11-09 00:11:50.723 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:50.724 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:11:50.725 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:50.725 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:11:50.726 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 95.3866ms
2024-11-09 00:11:54.797 +07:00 [DBG] Connection id "0HN7VCUKSF7OF" received FIN.
2024-11-09 00:11:54.801 +07:00 [DBG] Connection id "0HN7VCUKSF7OF" is closed. The last processed stream ID was 1.
2024-11-09 00:11:54.802 +07:00 [DBG] Connection id "0HN7VCUKSF7OF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:11:54.802 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OF completed.
2024-11-09 00:11:54.806 +07:00 [DBG] Connection id "0HN7VCUKSF7OF" stopped.
2024-11-09 00:11:57.791 +07:00 [DBG] Connection id "0HN7VCUKSF7OG" accepted.
2024-11-09 00:11:57.793 +07:00 [DBG] Connection id "0HN7VCUKSF7OG" started.
2024-11-09 00:11:57.814 +07:00 [DBG] Connection 0HN7VCUKSF7OG established using the following protocol: "Tls13"
2024-11-09 00:11:57.819 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:11:57.825 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:11:57.826 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:11:57.827 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:11:57.828 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:11:57.831 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:11:57.833 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:57.834 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:11:57.835 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:57.838 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:11:57.839 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:11:57.840 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:11:57.841 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:57.848 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:11:57.849 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:11:57.850 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:57.860 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:11:57.861 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:11:57.862 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:57.863 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:11:57.863 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:57.864 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:11:57.865 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:11:57.865 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:11:57.866 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:57.867 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:11:57.867 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:57.868 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:57.869 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:57.869 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:11:57.870 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:11:57.871 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:57.871 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:11:57.872 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:57.873 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:57.874 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:11:57.875 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:11:57.875 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:57.876 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:11:57.877 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:57.878 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:57.879 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:11:57.880 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:11:57.894 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:11:57.898 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:11:57.898 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:11:57.899 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:57.901 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:57.904 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:11:57.904 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:11:57.905 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 00:11:57.907 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:58.087 +07:00 [INF] Executed DbCommand (181ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:11:58.089 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:58.089 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:11:58.090 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:58.091 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:11:58.093 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:11:58.094 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:11:58.094 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:11:58.095 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:11:58.095 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:11:58.096 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:11:58.101 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 251.7568ms
2024-11-09 00:11:58.102 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:11:58.103 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:11:58.103 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:11:58.104 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:11:58.104 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 285.8783ms
2024-11-09 00:11:59.792 +07:00 [DBG] Connection id "0HN7VCUKSF7OG" received FIN.
2024-11-09 00:11:59.793 +07:00 [DBG] Connection id "0HN7VCUKSF7OG" is closed. The last processed stream ID was 1.
2024-11-09 00:11:59.793 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OG completed.
2024-11-09 00:11:59.793 +07:00 [DBG] Connection id "0HN7VCUKSF7OG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:11:59.806 +07:00 [DBG] Connection id "0HN7VCUKSF7OG" stopped.
2024-11-09 00:12:52.110 +07:00 [DBG] Connection id "0HN7VCUKSF7OH" accepted.
2024-11-09 00:12:52.116 +07:00 [DBG] Connection id "0HN7VCUKSF7OH" started.
2024-11-09 00:12:52.139 +07:00 [DBG] Connection 0HN7VCUKSF7OH established using the following protocol: "Tls13"
2024-11-09 00:12:52.147 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:12:52.153 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:12:52.154 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:12:52.154 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:12:52.157 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:12:52.158 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:12:52.160 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:12:52.161 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:12:52.162 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:12:52.164 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:12:52.167 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:12:52.168 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:12:52.173 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:12:52.175 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:12:52.175 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:12:52.176 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:12:52.183 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:12:52.184 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:12:52.184 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:12:52.185 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:12:52.186 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:12:52.186 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:12:52.188 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:12:52.189 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:12:52.189 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:12:52.190 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:12:52.191 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:12:52.191 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:12:52.192 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:12:52.192 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:12:52.193 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:12:52.194 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:12:52.195 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:12:52.196 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:12:52.196 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:12:52.197 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:12:52.197 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:12:52.198 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:12:52.199 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:12:52.199 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:12:52.200 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:12:52.201 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:12:52.202 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:12:52.221 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:12:52.225 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:12:52.225 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:12:52.226 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:12:52.230 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:12:52.231 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:12:52.231 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:12:52.232 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:12:52.232 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:12:52.292 +07:00 [INF] Executed DbCommand (59ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:12:52.293 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:12:52.293 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:12:52.294 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:12:52.295 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:12:52.297 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:12:52.298 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:12:52.299 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:12:52.299 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:12:52.299 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:12:52.300 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:12:52.301 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 124.6306ms
2024-11-09 00:12:52.301 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:12:52.302 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:12:52.303 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:12:52.303 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:12:52.304 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 160.4582ms
2024-11-09 00:12:54.873 +07:00 [DBG] Connection id "0HN7VCUKSF7OH" received FIN.
2024-11-09 00:12:54.875 +07:00 [DBG] Connection id "0HN7VCUKSF7OH" is closed. The last processed stream ID was 1.
2024-11-09 00:12:54.876 +07:00 [DBG] Connection id "0HN7VCUKSF7OH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:12:54.876 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OH completed.
2024-11-09 00:12:54.879 +07:00 [DBG] Connection id "0HN7VCUKSF7OH" stopped.
2024-11-09 00:13:05.142 +07:00 [DBG] Connection id "0HN7VCUKSF7OI" accepted.
2024-11-09 00:13:05.143 +07:00 [DBG] Connection id "0HN7VCUKSF7OI" started.
2024-11-09 00:13:05.147 +07:00 [DBG] Connection 0HN7VCUKSF7OI established using the following protocol: "Tls13"
2024-11-09 00:13:05.149 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:13:05.151 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:13:05.152 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:13:05.152 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:13:05.153 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:13:05.154 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:13:05.155 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:13:05.155 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:13:05.156 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:13:05.157 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:13:05.158 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:13:05.159 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:13:05.160 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:13:05.166 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:13:05.166 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:13:05.168 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:13:05.169 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:13:05.169 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:13:05.170 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:13:05.171 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:13:05.172 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:13:05.173 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:13:05.174 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:13:05.174 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:13:05.175 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:13:05.176 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:13:05.177 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:05.178 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:05.179 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:05.179 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:13:05.180 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:05.181 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:13:05.182 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:13:05.182 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:13:05.183 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:13:05.184 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:13:05.185 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:13:05.185 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:13:05.186 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:13:05.187 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:13:05.188 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:13:05.189 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:13:05.190 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:13:05.191 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:13:05.193 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:13:05.194 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:13:05.194 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:05.195 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:05.196 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:13:05.196 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:13:05.197 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:13:05.198 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:13:05.212 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:13:05.214 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:05.215 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:13:05.216 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:05.217 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:13:05.218 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:13:05.219 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:13:05.220 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:13:05.220 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:13:05.221 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:13:05.222 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:13:05.223 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 55.4255ms
2024-11-09 00:13:05.224 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:13:05.224 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:13:05.225 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:05.226 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:13:05.227 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 77.3535ms
2024-11-09 00:13:12.197 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:13:12.199 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:13:12.199 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:13:12.200 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:13:12.200 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:13:12.201 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:13:12.202 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:13:12.203 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:13:12.203 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:13:12.204 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:13:12.205 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:13:12.206 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:13:12.207 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:13:12.208 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:13:12.209 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:13:12.210 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:13:12.211 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:13:12.212 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:13:12.212 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:13:12.213 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:13:12.214 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:13:12.215 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:13:12.215 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:13:12.216 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:13:12.216 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:13:12.217 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:13:12.218 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:12.219 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:12.220 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:12.220 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:13:12.221 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:12.221 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:13:12.222 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:13:12.223 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:13:12.223 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:13:12.224 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:13:12.224 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:13:12.225 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:13:12.225 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:13:12.226 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:13:12.227 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:13:12.227 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:13:12.228 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:13:12.231 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:13:12.232 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:13:12.233 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:13:12.233 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:12.234 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:12.235 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:13:12.235 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:13:12.236 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:13:12.236 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:13:12.250 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:13:12.252 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:12.252 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:13:12.253 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:12.253 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:13:12.254 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:13:12.255 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:13:12.255 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:13:12.256 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:13:12.256 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:13:12.257 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:13:12.258 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.5337ms
2024-11-09 00:13:12.258 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:13:12.259 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:13:12.259 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:12.260 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:13:12.260 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 63.6661ms
2024-11-09 00:13:14.897 +07:00 [DBG] Connection id "0HN7VCUKSF7OI" received FIN.
2024-11-09 00:13:14.898 +07:00 [DBG] Connection id "0HN7VCUKSF7OI" is closed. The last processed stream ID was 3.
2024-11-09 00:13:14.899 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OI completed.
2024-11-09 00:13:14.899 +07:00 [DBG] Connection id "0HN7VCUKSF7OI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:13:14.911 +07:00 [DBG] Connection id "0HN7VCUKSF7OI" stopped.
2024-11-09 00:13:34.035 +07:00 [DBG] Connection id "0HN7VCUKSF7OJ" accepted.
2024-11-09 00:13:34.047 +07:00 [DBG] Connection id "0HN7VCUKSF7OJ" started.
2024-11-09 00:13:34.103 +07:00 [DBG] Connection 0HN7VCUKSF7OJ established using the following protocol: "Tls13"
2024-11-09 00:13:34.118 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:13:34.126 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:13:34.176 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:13:34.206 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:13:34.210 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:13:34.214 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:13:34.219 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:13:34.222 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:13:34.224 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:13:34.231 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:13:34.234 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:13:34.235 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:13:34.238 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:13:34.241 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:13:34.242 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:13:34.243 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:13:34.256 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:13:34.259 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:13:34.260 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:13:34.261 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:13:34.262 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:13:34.263 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:13:34.263 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:13:34.264 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:13:34.264 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:13:34.265 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:13:34.265 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:34.266 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:34.267 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:34.268 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:13:34.269 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:34.269 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:13:34.270 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:13:34.271 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:13:34.272 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:13:34.272 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:13:34.273 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:13:34.274 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:13:34.274 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:13:34.275 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:13:34.276 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:13:34.277 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:13:34.278 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:13:34.299 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:13:34.321 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:13:34.321 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:13:34.322 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:34.327 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:34.331 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:13:34.334 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 00:13:34.335 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-09 00:13:34.342 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:13:34.524 +07:00 [INF] Executed DbCommand (187ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:13:34.526 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:34.527 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:13:34.529 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:34.530 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:13:34.534 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:13:34.537 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:13:34.537 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:13:34.538 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:13:34.538 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:13:34.539 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:13:34.547 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 302.8676ms
2024-11-09 00:13:34.548 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:13:34.549 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:13:34.550 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:34.550 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:13:34.552 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 435.0486ms
2024-11-09 00:13:34.958 +07:00 [DBG] Connection id "0HN7VCUKSF7OJ" received FIN.
2024-11-09 00:13:34.960 +07:00 [DBG] Connection id "0HN7VCUKSF7OJ" is closed. The last processed stream ID was 1.
2024-11-09 00:13:34.962 +07:00 [DBG] Connection id "0HN7VCUKSF7OJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:13:34.962 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OJ completed.
2024-11-09 00:13:34.966 +07:00 [DBG] Connection id "0HN7VCUKSF7OJ" stopped.
2024-11-09 00:13:46.821 +07:00 [DBG] Connection id "0HN7VCUKSF7OK" accepted.
2024-11-09 00:13:46.823 +07:00 [DBG] Connection id "0HN7VCUKSF7OK" started.
2024-11-09 00:13:46.827 +07:00 [DBG] Connection 0HN7VCUKSF7OK established using the following protocol: "Tls13"
2024-11-09 00:13:46.830 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:13:46.831 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:13:46.832 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:13:46.832 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:13:46.832 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:13:46.833 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:13:46.834 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:13:46.834 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:13:46.835 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:13:46.836 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:13:46.836 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:13:46.837 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:13:46.838 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:13:46.839 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:13:46.840 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:13:46.840 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:13:46.841 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:13:46.842 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:13:46.843 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:13:46.844 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:13:46.845 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:13:46.845 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:13:46.846 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:13:46.846 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:13:46.847 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:13:46.848 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:13:46.848 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:46.849 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:46.849 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:46.850 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:13:46.850 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:13:46.851 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:13:46.852 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:13:46.854 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:13:46.854 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:13:46.855 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:13:46.855 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:13:46.856 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:13:46.856 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:13:46.857 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:13:46.858 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:13:46.858 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:13:46.859 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:13:46.860 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:13:46.861 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:13:46.862 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:13:46.862 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:46.863 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:46.863 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:13:46.863 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:13:46.864 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:13:46.864 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:13:46.877 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:13:46.878 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:46.879 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:13:46.880 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:46.880 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:13:46.881 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:13:46.882 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:13:46.882 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:13:46.882 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:13:46.883 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:13:46.883 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:13:46.884 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.6119ms
2024-11-09 00:13:46.885 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:13:46.885 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:13:46.886 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:13:46.886 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:13:46.887 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 58.0865ms
2024-11-09 00:13:54.992 +07:00 [DBG] Connection id "0HN7VCUKSF7OK" received FIN.
2024-11-09 00:13:54.993 +07:00 [DBG] Connection id "0HN7VCUKSF7OK" is closed. The last processed stream ID was 1.
2024-11-09 00:13:54.993 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OK completed.
2024-11-09 00:13:54.993 +07:00 [DBG] Connection id "0HN7VCUKSF7OK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:13:55.006 +07:00 [DBG] Connection id "0HN7VCUKSF7OK" stopped.
2024-11-09 00:14:31.422 +07:00 [DBG] Connection id "0HN7VCUKSF7OL" accepted.
2024-11-09 00:14:31.435 +07:00 [DBG] Connection id "0HN7VCUKSF7OL" started.
2024-11-09 00:14:31.470 +07:00 [DBG] Connection 0HN7VCUKSF7OL established using the following protocol: "Tls13"
2024-11-09 00:14:31.531 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:14:31.537 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:14:31.538 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:14:31.540 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:14:31.543 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:14:31.544 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:14:31.550 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:14:31.555 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:14:31.556 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:14:31.559 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:14:31.562 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:14:31.563 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:14:31.567 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:14:31.571 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:14:31.573 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:14:31.574 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:14:31.584 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:14:31.587 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:14:31.589 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:14:31.590 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:14:31.591 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:14:31.593 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:14:31.594 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:14:31.595 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:14:31.596 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:14:31.597 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:14:31.597 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:14:31.598 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:14:31.599 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:14:31.600 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:14:31.601 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:14:31.601 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:14:31.602 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:14:31.604 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:14:31.604 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:14:31.606 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:14:31.606 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:14:31.607 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:14:31.608 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:14:31.609 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:14:31.610 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:14:31.610 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:14:31.611 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:14:31.640 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:14:31.659 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:14:31.662 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 00:14:31.663 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:14:31.673 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:14:31.679 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:14:31.680 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-11-09 00:14:31.680 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-09 00:14:31.687 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:14:31.861 +07:00 [INF] Executed DbCommand (179ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:14:31.863 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:14:31.865 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:14:31.866 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:14:31.867 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:14:31.870 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:14:31.872 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:14:31.872 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:14:31.873 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:14:31.873 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:14:31.874 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:14:31.883 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 309.0087ms
2024-11-09 00:14:31.884 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:14:31.886 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:14:31.888 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:14:31.891 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:14:31.894 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 363.9975ms
2024-11-09 00:14:35.060 +07:00 [DBG] Connection id "0HN7VCUKSF7OL" received FIN.
2024-11-09 00:14:35.063 +07:00 [DBG] Connection id "0HN7VCUKSF7OL" is closed. The last processed stream ID was 1.
2024-11-09 00:14:35.063 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OL completed.
2024-11-09 00:14:35.064 +07:00 [DBG] Connection id "0HN7VCUKSF7OL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:14:35.076 +07:00 [DBG] Connection id "0HN7VCUKSF7OL" stopped.
2024-11-09 00:16:30.508 +07:00 [DBG] Connection id "0HN7VCUKSF7OM" accepted.
2024-11-09 00:16:30.517 +07:00 [DBG] Connection id "0HN7VCUKSF7OM" started.
2024-11-09 00:16:30.543 +07:00 [DBG] Connection 0HN7VCUKSF7OM established using the following protocol: "Tls13"
2024-11-09 00:16:30.649 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:16:30.656 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:16:30.658 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:16:30.661 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:16:30.664 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:16:30.665 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:16:30.668 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:16:30.670 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:16:30.671 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:16:30.675 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:16:30.678 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:16:30.679 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:16:30.682 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:16:30.685 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:16:30.686 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:16:30.687 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:16:30.697 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:16:30.699 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:16:30.700 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:16:30.701 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:16:30.702 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:16:30.703 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:16:30.703 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:16:30.704 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:16:30.705 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:16:30.706 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:16:30.706 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:16:30.707 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:16:30.708 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:16:30.709 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:16:30.709 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:16:30.710 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:16:30.711 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:16:30.720 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:16:30.721 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:16:30.722 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:16:30.725 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:16:30.725 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:16:30.726 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:16:30.726 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:16:30.727 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:16:30.728 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:16:30.729 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:16:30.784 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:16:30.803 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:16:30.806 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 00:16:30.806 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:16:30.810 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:16:30.815 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:16:30.815 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:16:30.818 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-09 00:16:30.822 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:16:30.936 +07:00 [INF] Executed DbCommand (116ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:16:30.938 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:16:30.939 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:16:30.940 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:16:30.941 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:16:30.944 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:16:30.945 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:16:30.946 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:16:30.946 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:16:30.947 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:16:30.948 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:16:30.952 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 265.1118ms
2024-11-09 00:16:30.953 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:16:30.954 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:16:30.954 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:16:30.955 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:16:30.957 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 376.7948ms
2024-11-09 00:16:35.254 +07:00 [DBG] Connection id "0HN7VCUKSF7OM" received FIN.
2024-11-09 00:16:35.258 +07:00 [DBG] Connection id "0HN7VCUKSF7OM" is closed. The last processed stream ID was 1.
2024-11-09 00:16:35.258 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OM completed.
2024-11-09 00:16:35.259 +07:00 [DBG] Connection id "0HN7VCUKSF7OM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:16:35.269 +07:00 [DBG] Connection id "0HN7VCUKSF7OM" stopped.
2024-11-09 00:16:39.324 +07:00 [DBG] Connection id "0HN7VCUKSF7ON" accepted.
2024-11-09 00:16:39.330 +07:00 [DBG] Connection id "0HN7VCUKSF7ON" started.
2024-11-09 00:16:39.356 +07:00 [DBG] Connection 0HN7VCUKSF7ON established using the following protocol: "Tls13"
2024-11-09 00:16:39.363 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:16:39.365 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:16:39.366 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:16:39.366 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:16:39.368 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:16:39.369 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:16:39.371 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:16:39.372 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:16:39.373 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:16:39.374 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:16:39.376 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:16:39.377 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:16:39.379 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:16:39.381 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:16:39.382 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:16:39.384 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:16:39.390 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:16:39.391 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:16:39.392 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:16:39.393 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:16:39.394 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:16:39.395 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:16:39.396 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:16:39.397 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:16:39.398 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:16:39.399 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:16:39.400 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:16:39.401 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:16:39.403 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:16:39.404 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:16:39.405 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:16:39.406 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:16:39.407 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:16:39.408 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:16:39.408 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:16:39.411 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:16:39.412 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:16:39.412 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:16:39.413 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:16:39.414 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:16:39.415 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:16:39.417 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:16:39.418 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:16:39.427 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:16:39.431 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:16:39.432 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:16:39.433 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:16:39.435 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:16:39.437 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:16:39.438 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:16:39.439 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 00:16:39.441 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:16:39.556 +07:00 [INF] Executed DbCommand (116ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:16:39.558 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:16:39.558 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:16:39.559 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:16:39.560 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:16:39.562 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:16:39.563 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:16:39.563 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:16:39.564 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:16:39.564 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:16:39.565 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:16:39.566 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 183.5357ms
2024-11-09 00:16:39.567 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:16:39.568 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:16:39.568 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:16:39.569 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:16:39.571 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 207.1038ms
2024-11-09 00:16:40.321 +07:00 [DBG] Connection id "0HN7VCUKSF7ON" received FIN.
2024-11-09 00:16:40.323 +07:00 [DBG] Connection id "0HN7VCUKSF7ON" is closed. The last processed stream ID was 1.
2024-11-09 00:16:40.324 +07:00 [DBG] Connection id "0HN7VCUKSF7ON" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:16:40.326 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7ON completed.
2024-11-09 00:16:40.356 +07:00 [DBG] Connection id "0HN7VCUKSF7ON" stopped.
2024-11-09 00:17:01.296 +07:00 [DBG] Connection id "0HN7VCUKSF7OO" accepted.
2024-11-09 00:17:01.306 +07:00 [DBG] Connection id "0HN7VCUKSF7OO" started.
2024-11-09 00:17:01.336 +07:00 [DBG] Connection 0HN7VCUKSF7OO established using the following protocol: "Tls13"
2024-11-09 00:17:01.342 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:17:01.343 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:17:01.343 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:17:01.344 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:17:01.344 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:17:01.345 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:17:01.346 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:17:01.346 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:17:01.347 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:17:01.348 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:17:01.349 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:17:01.350 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:17:01.351 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:17:01.356 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:17:01.357 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:17:01.359 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:17:01.361 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:17:01.362 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:17:01.363 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:17:01.363 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:17:01.364 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:17:01.365 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:17:01.365 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:17:01.366 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:17:01.366 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:17:01.367 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:17:01.368 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:17:01.368 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:17:01.369 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:17:01.370 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:17:01.370 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:17:01.371 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:17:01.371 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:17:01.372 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:17:01.372 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:17:01.373 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:17:01.374 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:17:01.374 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:17:01.375 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:17:01.375 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:17:01.376 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:17:01.376 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:17:01.377 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:17:01.391 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:17:01.392 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:17:01.392 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:17:01.393 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:01.396 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:01.398 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:17:01.398 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:17:01.399 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:17:01.400 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:17:01.414 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:17:01.416 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:01.417 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:17:01.417 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:01.418 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:17:01.419 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:17:01.420 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:17:01.420 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:17:01.421 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:17:01.421 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:17:01.422 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:17:01.424 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 65.7329ms
2024-11-09 00:17:01.425 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:17:01.426 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:17:01.427 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:01.427 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:17:01.428 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 87.3764ms
2024-11-09 00:17:05.275 +07:00 [DBG] Connection id "0HN7VCUKSF7OO" received FIN.
2024-11-09 00:17:05.275 +07:00 [DBG] Connection id "0HN7VCUKSF7OO" is closed. The last processed stream ID was 1.
2024-11-09 00:17:05.275 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OO completed.
2024-11-09 00:17:05.276 +07:00 [DBG] Connection id "0HN7VCUKSF7OO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:17:05.290 +07:00 [DBG] Connection id "0HN7VCUKSF7OO" stopped.
2024-11-09 00:17:12.774 +07:00 [DBG] Connection id "0HN7VCUKSF7OP" accepted.
2024-11-09 00:17:12.776 +07:00 [DBG] Connection id "0HN7VCUKSF7OP" started.
2024-11-09 00:17:12.781 +07:00 [DBG] Connection 0HN7VCUKSF7OP established using the following protocol: "Tls13"
2024-11-09 00:17:12.784 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:17:12.786 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:17:12.786 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:17:12.787 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:17:12.787 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:17:12.788 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:17:12.789 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:17:12.790 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:17:12.790 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:17:12.791 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:17:12.792 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:17:12.792 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:17:12.793 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:17:12.794 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:17:12.795 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:17:12.797 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:17:12.802 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:17:12.803 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:17:12.803 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:17:12.804 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:17:12.805 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:17:12.806 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:17:12.806 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:17:12.807 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:17:12.807 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:17:12.808 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:17:12.809 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:17:12.809 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:17:12.810 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:17:12.810 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:17:12.811 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:17:12.811 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:17:12.812 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:17:12.813 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:17:12.813 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:17:12.814 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:17:12.814 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:17:12.815 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:17:12.816 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:17:12.816 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:17:12.817 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:17:12.818 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:17:12.818 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:17:12.820 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:17:12.822 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:17:12.822 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:17:12.823 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:12.823 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:12.824 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:17:12.825 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:17:12.827 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:17:12.827 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:17:12.838 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:17:12.839 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:12.840 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:17:12.841 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:12.841 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:17:12.842 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:17:12.843 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:17:12.844 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:17:12.844 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:17:12.844 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:17:12.845 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:17:12.846 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 49.3328ms
2024-11-09 00:17:12.847 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:17:12.848 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:17:12.848 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:12.849 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:17:12.850 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 65.752ms
2024-11-09 00:17:15.307 +07:00 [DBG] Connection id "0HN7VCUKSF7OP" received FIN.
2024-11-09 00:17:15.308 +07:00 [DBG] Connection id "0HN7VCUKSF7OP" is closed. The last processed stream ID was 1.
2024-11-09 00:17:15.309 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OP completed.
2024-11-09 00:17:15.309 +07:00 [DBG] Connection id "0HN7VCUKSF7OP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:17:15.317 +07:00 [DBG] Connection id "0HN7VCUKSF7OP" stopped.
2024-11-09 00:17:35.898 +07:00 [DBG] Connection id "0HN7VCUKSF7OQ" accepted.
2024-11-09 00:17:35.935 +07:00 [DBG] Connection id "0HN7VCUKSF7OQ" started.
2024-11-09 00:17:35.998 +07:00 [DBG] Connection 0HN7VCUKSF7OQ established using the following protocol: "Tls13"
2024-11-09 00:17:36.035 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:17:36.043 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:17:36.046 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:17:36.050 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:17:36.052 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:17:36.054 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:17:36.059 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:17:36.062 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:17:36.064 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:17:36.066 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:17:36.074 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:17:36.075 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:17:36.079 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:17:36.082 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:17:36.083 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:17:36.084 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:17:36.099 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:17:36.101 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:17:36.102 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:17:36.103 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:17:36.104 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:17:36.105 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:17:36.105 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:17:36.106 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:17:36.107 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:17:36.108 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:17:36.108 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:17:36.109 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:17:36.110 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:17:36.111 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:17:36.111 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:17:36.112 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:17:36.112 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:17:36.113 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:17:36.114 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:17:36.114 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:17:36.115 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:17:36.116 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:17:36.116 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:17:36.117 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:17:36.118 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:17:36.118 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:17:36.119 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:17:36.135 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:17:36.150 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:17:36.154 +07:00 [DBG] Created DbConnection. (3ms).
2024-11-09 00:17:36.155 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:36.162 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:36.166 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:17:36.169 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-11-09 00:17:36.171 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-11-09 00:17:36.175 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:17:36.414 +07:00 [INF] Executed DbCommand (239ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:17:36.416 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:36.420 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 00:17:36.422 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:36.422 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:17:36.426 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:17:36.427 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:17:36.428 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:17:36.428 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:17:36.429 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:17:36.430 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:17:36.434 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 350.2786ms
2024-11-09 00:17:36.435 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:17:36.436 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:17:36.437 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:17:36.437 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:17:36.439 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 404.3689ms
2024-11-09 00:17:40.313 +07:00 [DBG] Connection id "0HN7VCUKSF7OQ" received FIN.
2024-11-09 00:17:40.313 +07:00 [DBG] Connection id "0HN7VCUKSF7OQ" is closed. The last processed stream ID was 1.
2024-11-09 00:17:40.314 +07:00 [DBG] Connection id "0HN7VCUKSF7OQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:17:40.315 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OQ completed.
2024-11-09 00:17:40.317 +07:00 [DBG] Connection id "0HN7VCUKSF7OQ" stopped.
2024-11-09 00:18:08.976 +07:00 [DBG] Connection id "0HN7VCUKSF7OR" accepted.
2024-11-09 00:18:08.985 +07:00 [DBG] Connection id "0HN7VCUKSF7OR" started.
2024-11-09 00:18:09.022 +07:00 [DBG] Connection 0HN7VCUKSF7OR established using the following protocol: "Tls13"
2024-11-09 00:18:09.025 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:18:09.026 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:18:09.027 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:18:09.027 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:18:09.028 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:18:09.029 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:18:09.029 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:18:09.030 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:18:09.033 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:18:09.036 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:18:09.038 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:18:09.039 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:18:09.043 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:18:09.045 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:18:09.046 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:18:09.051 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:18:09.057 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:18:09.065 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:18:09.067 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:18:09.071 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:18:09.072 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:18:09.073 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:18:09.073 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:18:09.074 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:18:09.075 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:18:09.076 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:18:09.077 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:09.078 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:09.079 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:09.080 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:18:09.081 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:09.081 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:18:09.082 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:18:09.084 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:18:09.084 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:18:09.085 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:18:09.086 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:18:09.086 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:18:09.087 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:18:09.088 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:18:09.089 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:18:09.090 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:18:09.090 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:18:09.097 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:18:09.101 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:18:09.102 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:18:09.103 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:09.105 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:09.105 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:18:09.106 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:18:09.107 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:18:09.110 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:18:09.133 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:18:09.134 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:09.135 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:18:09.139 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:09.140 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:18:09.141 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:18:09.143 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:18:09.144 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:18:09.145 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:18:09.145 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:18:09.146 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:18:09.148 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 96.8688ms
2024-11-09 00:18:09.149 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:18:09.150 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:18:09.150 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:09.151 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:18:09.152 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 127.4773ms
2024-11-09 00:18:10.339 +07:00 [DBG] Connection id "0HN7VCUKSF7OR" received FIN.
2024-11-09 00:18:10.341 +07:00 [DBG] Connection id "0HN7VCUKSF7OR" is closed. The last processed stream ID was 1.
2024-11-09 00:18:10.342 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OR completed.
2024-11-09 00:18:10.342 +07:00 [DBG] Connection id "0HN7VCUKSF7OR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:18:10.350 +07:00 [DBG] Connection id "0HN7VCUKSF7OR" stopped.
2024-11-09 00:18:19.324 +07:00 [DBG] Connection id "0HN7VCUKSF7OS" accepted.
2024-11-09 00:18:19.324 +07:00 [DBG] Connection id "0HN7VCUKSF7OS" started.
2024-11-09 00:18:19.328 +07:00 [DBG] Connection 0HN7VCUKSF7OS established using the following protocol: "Tls13"
2024-11-09 00:18:19.330 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:18:19.332 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:18:19.332 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:18:19.333 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:18:19.333 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:18:19.333 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:18:19.334 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:18:19.335 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:18:19.336 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:18:19.337 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:18:19.342 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:18:19.343 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:18:19.344 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:18:19.345 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:18:19.346 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:18:19.347 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:18:19.348 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:18:19.349 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:18:19.350 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:18:19.351 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:18:19.352 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:18:19.353 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:18:19.354 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:18:19.355 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:18:19.355 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:18:19.356 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:18:19.357 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:19.357 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:19.358 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:19.359 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:18:19.359 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:19.360 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:18:19.361 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:18:19.362 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:18:19.362 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:18:19.363 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:18:19.364 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:18:19.364 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:18:19.365 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:18:19.366 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:18:19.367 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:18:19.367 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:18:19.368 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:18:19.369 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:18:19.371 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:18:19.371 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:18:19.372 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:19.373 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:19.373 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:18:19.374 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:18:19.375 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:18:19.375 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:18:19.382 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:18:19.383 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:19.384 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:18:19.385 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:19.386 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:18:19.387 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:18:19.388 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:18:19.389 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:18:19.389 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:18:19.389 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:18:19.390 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:18:19.391 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.5518ms
2024-11-09 00:18:19.392 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:18:19.392 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:18:19.393 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:19.394 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:18:19.395 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 64.9993ms
2024-11-09 00:18:20.363 +07:00 [DBG] Connection id "0HN7VCUKSF7OS" received FIN.
2024-11-09 00:18:20.364 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OS completed.
2024-11-09 00:18:20.364 +07:00 [DBG] Connection id "0HN7VCUKSF7OS" is closed. The last processed stream ID was 1.
2024-11-09 00:18:20.366 +07:00 [DBG] Connection id "0HN7VCUKSF7OS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:18:20.377 +07:00 [DBG] Connection id "0HN7VCUKSF7OS" stopped.
2024-11-09 00:18:27.696 +07:00 [DBG] Connection id "0HN7VCUKSF7OT" accepted.
2024-11-09 00:18:27.697 +07:00 [DBG] Connection id "0HN7VCUKSF7OT" started.
2024-11-09 00:18:27.708 +07:00 [DBG] Connection 0HN7VCUKSF7OT established using the following protocol: "Tls13"
2024-11-09 00:18:27.710 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:18:27.711 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:18:27.712 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:18:27.712 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:18:27.713 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:18:27.714 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:18:27.715 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:18:27.716 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:18:27.716 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:18:27.717 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:18:27.718 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:18:27.719 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:18:27.732 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:18:27.733 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:18:27.734 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:18:27.735 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:18:27.737 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:18:27.741 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:18:27.742 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:18:27.743 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:18:27.744 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:18:27.745 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:18:27.745 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:18:27.746 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:18:27.747 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:18:27.748 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:18:27.749 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:27.749 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:27.750 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:27.751 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:18:27.751 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:27.752 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:18:27.753 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:18:27.754 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:18:27.754 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:18:27.757 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:18:27.757 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:18:27.758 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:18:27.759 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:18:27.759 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:18:27.760 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:18:27.761 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:18:27.761 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:18:27.769 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:18:27.771 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:18:27.771 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:18:27.772 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:27.775 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:27.776 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:18:27.777 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:18:27.778 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:18:27.779 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:18:27.840 +07:00 [INF] Executed DbCommand (62ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:18:27.842 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:27.843 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:18:27.844 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:27.845 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:18:27.846 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:18:27.847 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:18:27.847 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:18:27.848 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:18:27.848 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:18:27.849 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:18:27.855 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 120.1364ms
2024-11-09 00:18:27.856 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:18:27.857 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:18:27.858 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:27.858 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:18:27.859 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 150.0267ms
2024-11-09 00:18:30.374 +07:00 [DBG] Connection id "0HN7VCUKSF7OT" received FIN.
2024-11-09 00:18:30.375 +07:00 [DBG] Connection id "0HN7VCUKSF7OT" is closed. The last processed stream ID was 1.
2024-11-09 00:18:30.375 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OT completed.
2024-11-09 00:18:30.376 +07:00 [DBG] Connection id "0HN7VCUKSF7OT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:18:30.389 +07:00 [DBG] Connection id "0HN7VCUKSF7OT" stopped.
2024-11-09 00:18:57.485 +07:00 [DBG] Connection id "0HN7VCUKSF7OU" accepted.
2024-11-09 00:18:57.491 +07:00 [DBG] Connection id "0HN7VCUKSF7OU" started.
2024-11-09 00:18:57.503 +07:00 [DBG] Connection 0HN7VCUKSF7OU established using the following protocol: "Tls13"
2024-11-09 00:18:57.508 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:18:57.510 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:18:57.510 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:18:57.511 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:18:57.511 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:18:57.512 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:18:57.513 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:18:57.514 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:18:57.514 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:18:57.515 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:18:57.516 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:18:57.516 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:18:57.517 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:18:57.520 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:18:57.525 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:18:57.526 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:18:57.527 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:18:57.528 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:18:57.529 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:18:57.529 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:18:57.530 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:18:57.531 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:18:57.531 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:18:57.532 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:18:57.533 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:18:57.533 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:18:57.534 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:57.535 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:57.536 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:57.536 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:18:57.537 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:18:57.538 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:18:57.538 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:18:57.539 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:18:57.540 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:18:57.540 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:18:57.541 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:18:57.541 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:18:57.542 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:18:57.543 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:18:57.543 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:18:57.544 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:18:57.545 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:18:57.546 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:18:57.548 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:18:57.548 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:18:57.549 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:57.550 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:57.551 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:18:57.552 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:18:57.552 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:18:57.553 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:18:57.558 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:18:57.560 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:57.560 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:18:57.561 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:57.561 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:18:57.562 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:18:57.563 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:18:57.563 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:18:57.564 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:18:57.564 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:18:57.564 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:18:57.566 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.4603ms
2024-11-09 00:18:57.566 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:18:57.567 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:18:57.567 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:18:57.568 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:18:57.569 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 61.4513ms
2024-11-09 00:19:05.431 +07:00 [DBG] Connection id "0HN7VCUKSF7OU" received FIN.
2024-11-09 00:19:05.432 +07:00 [DBG] Connection id "0HN7VCUKSF7OU" is closed. The last processed stream ID was 1.
2024-11-09 00:19:05.432 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OU completed.
2024-11-09 00:19:05.432 +07:00 [DBG] Connection id "0HN7VCUKSF7OU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:19:05.442 +07:00 [DBG] Connection id "0HN7VCUKSF7OU" stopped.
2024-11-09 00:45:05.573 +07:00 [DBG] Connection id "0HN7VCUKSF7OV" accepted.
2024-11-09 00:45:05.686 +07:00 [DBG] Connection id "0HN7VCUKSF7OV" started.
2024-11-09 00:45:05.891 +07:00 [DBG] Connection 0HN7VCUKSF7OV established using the following protocol: "Tls13"
2024-11-09 00:45:05.933 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:05.950 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:05.951 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:05.964 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:05.969 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:05.974 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:05.987 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:05.992 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:05.996 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:06.004 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:06.011 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:06.012 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:06.039 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:06.042 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:06.043 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:06.049 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:06.073 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:06.077 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:06.079 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:06.080 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:06.081 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:06.081 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:06.082 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:06.082 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:06.083 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:06.084 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:06.085 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:06.085 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:06.086 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:06.087 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:06.087 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:06.088 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:06.088 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:06.089 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:06.090 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:06.091 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:06.091 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:06.092 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:06.093 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:06.093 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:06.094 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:06.095 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:06.095 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:06.136 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:06.162 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:06.377 +07:00 [DBG] Created DbConnection. (212ms).
2024-11-09 00:45:06.379 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:06.585 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:06.587 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:06.589 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:45:06.590 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-09 00:45:06.594 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:06.840 +07:00 [INF] Executed DbCommand (246ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:06.845 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:06.846 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-11-09 00:45:06.847 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:06.849 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:06.856 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:06.859 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:06.860 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:06.861 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:06.863 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:06.863 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:06.877 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 830.0673ms
2024-11-09 00:45:06.878 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:06.879 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:06.879 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:06.880 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:45:06.882 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 958.0584ms
2024-11-09 00:45:06.886 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:06.888 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:06.888 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:06.888 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:06.889 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:06.890 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:06.890 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:06.891 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:06.892 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:06.892 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:06.893 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:06.894 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:06.895 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:06.896 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:06.896 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:06.897 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:06.901 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:06.902 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:06.902 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:06.903 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:06.904 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:06.905 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:06.906 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:06.907 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:06.907 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:06.908 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:06.909 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:06.909 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:06.910 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:06.911 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:06.911 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:06.912 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:06.913 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:06.914 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:06.915 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:06.915 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:06.916 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:06.917 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:06.918 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:06.922 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:06.923 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:06.924 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:06.925 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:06.926 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:06.928 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:06.929 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:06.929 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:06.930 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:06.930 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:06.931 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:06.932 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:06.932 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:06.938 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:06.939 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:06.940 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:06.941 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:06.941 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:06.942 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:06.943 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:06.944 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:06.944 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:06.945 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:06.945 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:06.950 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 52.393ms
2024-11-09 00:45:06.950 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:06.951 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:06.951 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:06.952 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:06.953 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:06.953 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:06.954 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:06.955 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 69.085ms
2024-11-09 00:45:06.956 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:06.957 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:06.958 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:06.959 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:06.959 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:06.960 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:06.960 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:06.961 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:06.962 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:06.963 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:06.969 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:06.972 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:06.972 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:06.973 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:06.974 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:06.974 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:06.975 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:06.976 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:06.977 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:06.978 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:06.978 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:06.979 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:06.980 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:06.980 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:06.981 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:06.981 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:06.982 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:06.983 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:06.983 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:06.984 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:06.984 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:06.985 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:06.985 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:06.986 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:06.987 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:06.987 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:06.988 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:06.989 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:06.989 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:06.990 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:06.991 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:06.992 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:06.993 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:06.993 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:06.994 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:06.994 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:06.995 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:06.995 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:06.996 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:06.998 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.000 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.000 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:45:07.001 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.001 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.002 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.003 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.004 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.004 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.005 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.005 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.007 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.1666ms
2024-11-09 00:45:07.007 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.008 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.008 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.008 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.010 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.010 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.011 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.012 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 60.8228ms
2024-11-09 00:45:07.012 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.014 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.014 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.015 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.016 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.016 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.017 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.018 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.018 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.019 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.020 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.021 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.022 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.023 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.024 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.025 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.026 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.027 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.027 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.028 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.029 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.030 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.030 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.031 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.032 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.032 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.033 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.034 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.034 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.035 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.035 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.036 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.036 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.037 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.038 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.038 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.039 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.040 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.040 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.041 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.042 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.043 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.044 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.044 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.045 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.046 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.046 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.047 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.047 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.049 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.050 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.051 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.052 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.053 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.053 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.054 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.055 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.055 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.056 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.056 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.058 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.2881ms
2024-11-09 00:45:07.059 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.059 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.060 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.060 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.061 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.062 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.062 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.063 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 54.6861ms
2024-11-09 00:45:07.063 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.065 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.066 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.067 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.067 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.067 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.068 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.069 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.069 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.071 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.072 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.073 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.074 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.075 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.075 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.076 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.076 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.077 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.078 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.078 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.079 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.079 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.080 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.081 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.081 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.082 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.082 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.083 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.083 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.084 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.085 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.085 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.086 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.087 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.088 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.088 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.089 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.090 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.090 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.091 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.091 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.093 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.094 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 00:45:07.095 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.096 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.096 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.097 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.098 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.098 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.100 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.101 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.102 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:45:07.103 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.103 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.104 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.105 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.105 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.105 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.106 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.106 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.108 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.2627ms
2024-11-09 00:45:07.109 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.109 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.109 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.110 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.111 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.111 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.112 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.112 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 52.6932ms
2024-11-09 00:45:07.113 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.115 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.115 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.116 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.116 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.117 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.117 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.118 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.119 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.119 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.120 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.121 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.122 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.123 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.123 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.124 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.124 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.125 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.126 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.126 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.127 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.127 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.128 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.129 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.129 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.130 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.130 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.131 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.131 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.132 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.133 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.133 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.134 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.135 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.136 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.136 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.137 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.138 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.138 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.139 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.140 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.141 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.141 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.142 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.143 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.144 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.144 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.145 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.145 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.147 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.148 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.149 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.150 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.151 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.152 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.154 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.154 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.155 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.155 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.155 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.157 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.2455ms
2024-11-09 00:45:07.158 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.158 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.159 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.159 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.160 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.160 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.161 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.161 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 52.4109ms
2024-11-09 00:45:07.162 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.164 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.165 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.166 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.166 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.167 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.168 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.169 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.170 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.170 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.171 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.172 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.173 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.174 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.175 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.176 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.177 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.177 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.178 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.179 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.180 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.180 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.181 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.182 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.182 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.183 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.184 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.185 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.186 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.186 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.188 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.188 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.189 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.189 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.190 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.191 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.192 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.193 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.193 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.194 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.196 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.198 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.198 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.199 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.200 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.201 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.201 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.202 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.203 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.221 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.223 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.223 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.224 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.225 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.226 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.227 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.227 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.228 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.228 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.229 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.230 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 56.8708ms
2024-11-09 00:45:07.231 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.232 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.232 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.233 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.234 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.234 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.235 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.235 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.236 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 78.2897ms
2024-11-09 00:45:07.237 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.239 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.240 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.241 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.241 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.242 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.243 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.243 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.244 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.245 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.246 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.247 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.248 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.249 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.250 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.251 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.252 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.253 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.253 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.254 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.255 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.255 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.256 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.257 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.257 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.258 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.259 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.259 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.260 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.261 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.262 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.262 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.263 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.264 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.265 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.265 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.266 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.267 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.268 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.269 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.271 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.271 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.272 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.273 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.273 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.274 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.275 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.276 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.293 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.294 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.295 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.296 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.297 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.298 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.299 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.299 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.300 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.300 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.301 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.302 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 54.9565ms
2024-11-09 00:45:07.303 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.304 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.304 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.304 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.305 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.306 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.307 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.307 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 75.8373ms
2024-11-09 00:45:07.308 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.310 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.311 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.312 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.312 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.313 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.314 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.316 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.317 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.318 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.319 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.320 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.320 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.321 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.322 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.323 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.323 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.324 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.325 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.325 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.326 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.326 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.327 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.328 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.329 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.330 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.330 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.331 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.331 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.332 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.332 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.333 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.333 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.334 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.334 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.335 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.336 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.336 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.337 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.337 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.339 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.340 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.340 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.341 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.341 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.342 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.342 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.343 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.344 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.355 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.357 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.357 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.358 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.359 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.360 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.361 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.362 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.363 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.363 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.364 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.365 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.893ms
2024-11-09 00:45:07.366 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.366 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.366 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.368 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.368 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.368 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.369 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:45:07.369 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.370 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 66.5519ms
2024-11-09 00:45:07.370 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.372 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.373 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.373 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.374 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.374 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.375 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.376 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.377 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.378 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.378 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.379 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.380 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.381 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.381 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.382 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.383 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.383 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.384 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.384 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.385 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.385 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.386 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.387 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.387 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.388 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.388 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.389 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.389 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.390 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.390 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.391 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.392 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.392 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.393 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.393 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.394 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.394 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.395 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.396 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.397 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.397 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.398 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.399 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.399 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.400 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.400 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.401 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.402 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.403 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.404 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.404 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.405 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.406 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.407 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.408 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.408 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.409 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.409 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.410 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 31.2142ms
2024-11-09 00:45:07.411 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.411 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.412 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.413 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.414 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.414 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.415 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.415 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.416 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 49.5628ms
2024-11-09 00:45:07.416 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.418 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.419 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.420 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.420 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.421 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.422 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.423 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.424 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.425 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.426 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.427 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.428 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.428 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.429 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.430 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.430 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.431 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.432 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.432 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.433 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.433 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.434 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.435 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.436 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.437 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.438 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.438 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.439 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.440 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.441 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.441 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.442 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.443 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.443 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.444 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.445 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.446 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.446 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.448 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.449 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.450 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.450 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.451 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.452 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.452 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.453 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.454 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.470 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.471 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.472 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.473 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.474 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.475 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.476 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.476 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.477 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.477 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.478 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.479 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 51.7641ms
2024-11-09 00:45:07.480 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.480 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.481 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.482 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.483 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.483 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.485 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-09 00:45:07.485 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.486 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 74.7067ms
2024-11-09 00:45:07.487 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.488 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.489 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.490 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.491 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.491 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.492 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.493 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.493 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.495 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.495 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.497 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.497 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.498 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.499 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.500 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.501 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.501 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.502 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.503 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.504 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.505 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.505 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.506 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.507 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.507 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.508 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.509 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.509 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.510 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.511 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.512 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.512 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.513 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.514 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.515 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.515 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.516 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.517 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.518 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.520 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.520 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.521 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.521 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.522 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.523 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.524 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.525 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.542 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.544 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.545 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.546 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.546 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.547 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.548 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.549 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.549 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.550 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.550 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.551 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 54.4217ms
2024-11-09 00:45:07.552 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.553 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.553 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.554 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.555 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.555 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.556 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.557 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.558 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 77.6636ms
2024-11-09 00:45:07.559 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.560 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.561 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.562 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.562 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.563 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.565 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.565 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.566 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.568 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.569 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.569 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.570 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.578 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.579 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.580 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.581 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.581 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.582 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.583 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.583 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.584 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.585 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.585 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.586 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.587 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.588 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.588 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.589 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.589 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.590 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.591 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.591 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.592 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.592 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.593 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.593 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.594 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.595 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.596 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.597 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.597 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.597 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.598 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.599 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.599 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.600 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.600 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.610 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.611 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.612 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.612 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.613 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.613 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.615 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.615 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.615 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.616 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.616 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.617 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.3971ms
2024-11-09 00:45:07.617 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.618 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.618 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.619 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.619 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.620 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.620 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:45:07.621 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.621 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 69.1892ms
2024-11-09 00:45:07.622 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.623 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.624 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.625 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.625 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.625 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.626 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.627 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.627 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.628 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.629 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.630 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.630 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.631 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.631 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.632 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.633 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.633 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.634 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.635 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.635 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.636 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.636 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.637 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.637 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.638 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.638 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.639 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.639 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.640 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.640 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.641 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.641 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.642 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.643 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.643 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.644 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.644 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.645 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.646 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.647 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.647 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.647 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.648 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.649 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.649 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.650 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.651 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.652 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.653 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.654 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.654 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.655 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.656 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.657 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.657 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.657 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.658 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.658 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.659 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 29.2205ms
2024-11-09 00:45:07.659 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.660 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.660 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.661 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.662 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.662 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.663 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.663 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.664 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 46.2789ms
2024-11-09 00:45:07.665 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.667 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.668 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.668 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.669 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.669 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.670 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.671 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.672 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.673 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.673 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.674 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.675 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.675 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.676 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.677 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.677 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.678 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.678 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.679 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.680 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.680 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.681 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.682 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.682 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.683 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.683 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.684 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.684 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.685 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.685 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.686 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.686 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.687 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.687 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.688 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.688 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.689 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.689 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.690 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.692 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.692 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.693 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.693 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.694 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.694 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.696 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.696 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.702 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.704 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.704 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.705 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.706 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.706 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.707 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.708 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.708 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.709 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.709 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.710 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.6007ms
2024-11-09 00:45:07.711 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.712 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.712 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.713 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.713 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.714 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.715 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.715 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.716 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 55.8478ms
2024-11-09 00:45:07.716 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.718 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.719 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.720 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.720 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.721 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.722 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.722 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.723 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.724 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.725 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.726 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.727 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.728 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.729 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.729 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.730 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.731 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.731 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.732 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.733 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.733 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.734 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.735 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.735 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.736 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.736 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.737 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.737 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.738 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.739 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.739 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.740 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.740 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.741 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.742 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.742 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.743 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.743 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.744 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.745 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.746 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.746 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.747 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.748 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.748 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.749 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.750 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.755 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.756 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.757 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.758 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.758 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.759 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.761 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.762 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.762 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.763 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.763 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.764 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.4611ms
2024-11-09 00:45:07.765 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.765 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.766 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.767 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.767 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.768 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.768 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.769 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.769 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 57.9937ms
2024-11-09 00:45:07.770 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.772 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.772 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.773 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.774 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.774 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.775 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.776 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.776 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.777 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.778 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.779 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.780 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.780 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.781 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.782 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.782 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.783 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.783 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.784 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.784 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.785 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.786 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.787 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.788 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.788 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.789 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.790 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.790 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.791 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.792 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.792 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.793 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.794 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.795 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.795 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.796 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.797 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.797 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.798 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.800 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.800 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.801 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.802 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.802 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.803 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.804 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.805 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.810 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.811 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.812 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.813 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.813 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.814 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.815 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.815 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.816 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.816 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.817 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.818 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.6753ms
2024-11-09 00:45:07.818 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.819 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.819 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.820 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.821 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.821 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.822 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.822 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.823 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 57.7204ms
2024-11-09 00:45:07.823 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.826 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.826 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.827 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.827 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.828 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.828 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.829 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.830 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.831 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.831 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.832 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.833 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.834 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.834 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.835 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.836 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.837 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.837 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.838 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.838 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.839 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.839 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.840 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.840 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.841 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.841 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.842 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.842 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.843 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.843 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.844 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.845 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.845 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.846 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.846 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.847 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.847 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.848 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.849 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.850 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.850 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.851 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.851 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.852 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.852 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.853 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.853 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.858 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.859 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.860 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.861 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.861 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.862 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.863 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.863 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.863 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.864 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.864 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.865 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.0317ms
2024-11-09 00:45:07.866 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.866 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.867 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.868 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.868 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.868 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.869 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:45:07.869 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.870 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 51.2278ms
2024-11-09 00:45:07.870 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.872 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.873 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.873 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.873 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.874 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.875 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.875 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.876 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.877 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.877 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.878 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.879 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.880 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.880 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.881 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.882 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.882 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.883 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.883 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.884 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.884 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.885 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.885 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.886 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.886 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.887 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.887 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.888 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.888 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.889 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.889 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.890 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.890 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.891 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.891 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.892 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.892 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.893 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.894 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.895 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.896 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.896 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.897 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.897 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.898 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.899 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:07.899 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.901 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.902 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.902 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.903 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.903 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.904 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.905 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.905 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.906 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.906 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.907 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.907 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 28.9381ms
2024-11-09 00:45:07.908 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.908 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.908 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.909 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.910 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.911 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 00:45:07.911 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.912 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 45.4449ms
2024-11-09 00:45:07.912 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.914 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.915 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.916 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.916 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.917 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.917 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.922 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.924 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.925 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.926 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.927 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.928 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.929 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.929 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.930 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.931 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.932 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.932 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.933 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.934 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.934 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.935 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.936 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.937 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.937 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.938 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.938 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.939 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.940 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.940 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.941 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.942 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.943 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.943 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.944 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.945 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.945 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.946 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.946 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.947 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:07.948 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:07.949 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:07.949 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.950 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.950 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:07.951 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.951 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:45:07.952 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.957 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:07.958 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.959 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:07.959 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.960 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:07.961 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:07.962 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:07.962 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:07.963 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:07.963 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:07.964 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:07.964 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.5029ms
2024-11-09 00:45:07.965 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.965 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:45:07.966 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:07.967 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:45:07.967 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:07.968 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:45:07.968 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:45:07.969 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:45:07.969 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 61.0997ms
2024-11-09 00:45:07.970 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:45:07.973 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:45:07.974 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.975 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:45:07.975 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:07.976 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:45:07.977 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:45:07.977 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:45:07.978 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.979 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:45:07.979 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:45:07.980 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.981 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:45:07.981 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.982 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.983 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.983 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.984 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.985 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:45:07.985 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:45:07.986 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.986 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:45:07.987 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.988 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.988 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.990 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:45:07.991 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:45:07.991 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.992 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:45:07.992 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.993 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.994 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:45:07.995 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:45:07.995 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.996 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:45:07.997 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.997 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:07.998 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:45:07.998 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:45:08.000 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:45:08.001 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:45:08.002 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:45:08.002 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:08.003 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:08.004 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:45:08.005 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:08.006 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:45:08.006 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:08.013 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:45:08.015 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:08.016 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:45:08.016 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:08.017 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:45:08.018 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:45:08.020 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:45:08.020 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:45:08.021 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:45:08.021 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:45:08.023 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:45:08.024 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.5067ms
2024-11-09 00:45:08.025 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:45:08.026 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:45:08.026 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:45:08.027 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:45:08.027 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 62.2142ms
2024-11-09 00:45:17.657 +07:00 [DBG] Connection id "0HN7VCUKSF7OV" received FIN.
2024-11-09 00:45:17.658 +07:00 [DBG] Connection id "0HN7VCUKSF7OV" is closed. The last processed stream ID was 41.
2024-11-09 00:45:17.659 +07:00 [DBG] Connection id "0HN7VCUKSF7OV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:45:17.661 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7OV completed.
2024-11-09 00:45:17.662 +07:00 [DBG] Connection id "0HN7VCUKSF7OV" stopped.
2024-11-09 00:54:58.560 +07:00 [DBG] Connection id "0HN7VCUKSF7P0" accepted.
2024-11-09 00:54:58.581 +07:00 [DBG] Connection id "0HN7VCUKSF7P0" started.
2024-11-09 00:54:58.619 +07:00 [DBG] Connection 0HN7VCUKSF7P0 established using the following protocol: "Tls13"
2024-11-09 00:54:58.666 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:54:58.674 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:54:58.676 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:54:58.679 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:54:58.681 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:54:58.683 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:54:58.692 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:54:58.696 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:54:58.698 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:54:58.705 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:54:58.707 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:54:58.708 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:54:58.712 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:54:58.714 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:54:58.715 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:54:58.717 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:54:58.731 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:54:58.733 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:54:58.734 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:54:58.734 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:54:58.735 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:54:58.736 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:54:58.736 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:54:58.737 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:54:58.738 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:54:58.739 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:54:58.739 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:54:58.740 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:54:58.740 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:54:58.741 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:54:58.741 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:54:58.742 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:54:58.742 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:54:58.743 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:54:58.744 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:54:58.745 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:54:58.745 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:54:58.746 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:54:58.747 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:54:58.747 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:54:58.748 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:54:58.748 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:54:58.749 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:54:58.771 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:54:58.790 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:54:58.795 +07:00 [DBG] Created DbConnection. (4ms).
2024-11-09 00:54:58.795 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:54:58.891 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:54:58.894 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:54:58.895 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:54:58.896 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-09 00:54:58.899 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:54:59.180 +07:00 [INF] Executed DbCommand (275ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:54:59.183 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:54:59.186 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 00:54:59.188 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:54:59.190 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 00:54:59.241 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:54:59.248 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:54:59.248 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:54:59.255 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:54:59.259 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:54:59.261 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:54:59.300 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 583.332ms
2024-11-09 00:54:59.301 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:54:59.304 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:54:59.304 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:54:59.305 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:54:59.307 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 642.5562ms
2024-11-09 00:55:03.482 +07:00 [DBG] Connection id "0HN7VCUKSF7P0" received FIN.
2024-11-09 00:55:03.483 +07:00 [DBG] Connection id "0HN7VCUKSF7P0" is closed. The last processed stream ID was 1.
2024-11-09 00:55:03.484 +07:00 [DBG] Connection id "0HN7VCUKSF7P0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:55:03.487 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7P0 completed.
2024-11-09 00:55:03.488 +07:00 [DBG] Connection id "0HN7VCUKSF7P0" stopped.
2024-11-09 00:55:25.416 +07:00 [DBG] Connection id "0HN7VCUKSF7P1" accepted.
2024-11-09 00:55:25.444 +07:00 [DBG] Connection id "0HN7VCUKSF7P1" started.
2024-11-09 00:55:25.483 +07:00 [DBG] Connection 0HN7VCUKSF7P1 established using the following protocol: "Tls13"
2024-11-09 00:55:25.591 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:55:25.599 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:55:25.602 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:55:25.608 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:55:25.611 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:55:25.613 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:55:25.620 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:55:25.627 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:55:25.628 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:55:25.635 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:55:25.638 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:55:25.639 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:55:25.644 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:55:25.648 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:55:25.649 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:55:25.650 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:55:25.664 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:55:25.667 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:55:25.670 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:55:25.671 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:55:25.672 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:55:25.673 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:55:25.674 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:55:25.674 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:55:25.675 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:55:25.676 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:55:25.679 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:55:25.680 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:55:25.681 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:55:25.687 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:55:25.689 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:55:25.689 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:55:25.690 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:55:25.692 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:55:25.692 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:55:25.693 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:55:25.694 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:55:25.695 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:55:25.695 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:55:25.698 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:55:25.699 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:55:25.699 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:55:25.700 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:55:25.754 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:55:25.786 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:55:25.788 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 00:55:25.789 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:55:25.796 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:55:25.799 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:55:25.801 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:55:25.803 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-09 00:55:25.806 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:55:26.037 +07:00 [INF] Executed DbCommand (233ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:55:26.039 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:55:26.040 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:55:26.042 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:55:26.043 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:55:26.046 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:55:26.048 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:55:26.049 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:55:26.049 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:55:26.050 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:55:26.051 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:55:26.057 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 406.204ms
2024-11-09 00:55:26.059 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:55:26.059 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:55:26.060 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:55:26.061 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:55:26.063 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 475.7459ms
2024-11-09 00:55:28.522 +07:00 [DBG] Connection id "0HN7VCUKSF7P1" received FIN.
2024-11-09 00:55:28.523 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7P1 completed.
2024-11-09 00:55:28.523 +07:00 [DBG] Connection id "0HN7VCUKSF7P1" is closed. The last processed stream ID was 1.
2024-11-09 00:55:28.524 +07:00 [DBG] Connection id "0HN7VCUKSF7P1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:55:28.536 +07:00 [DBG] Connection id "0HN7VCUKSF7P1" stopped.
2024-11-09 00:56:06.654 +07:00 [DBG] Connection id "0HN7VCUKSF7P2" accepted.
2024-11-09 00:56:06.671 +07:00 [DBG] Connection id "0HN7VCUKSF7P2" started.
2024-11-09 00:56:06.713 +07:00 [DBG] Connection 0HN7VCUKSF7P2 established using the following protocol: "Tls13"
2024-11-09 00:56:06.793 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:56:06.799 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:56:06.800 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:56:06.803 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:56:06.805 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:56:06.806 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:56:06.813 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:56:06.815 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:56:06.817 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:56:06.820 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:56:06.821 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:56:06.822 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:56:06.824 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:56:06.827 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:56:06.828 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:56:06.829 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:56:06.842 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:56:06.845 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:56:06.846 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:56:06.847 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:56:06.848 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:56:06.849 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:56:06.849 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:56:06.850 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:56:06.851 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:56:06.851 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:56:06.853 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:56:06.855 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:56:06.856 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:56:06.856 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:56:06.857 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:56:06.857 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:56:06.858 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:56:06.859 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:56:06.859 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:56:06.860 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:56:06.861 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:56:06.862 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:56:06.862 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:56:06.863 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:56:06.863 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:56:06.864 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:56:06.865 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:56:06.886 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:56:06.904 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:56:06.905 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 00:56:06.906 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:06.909 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:06.914 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:56:06.916 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-11-09 00:56:06.919 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2024-11-09 00:56:06.920 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:56:07.137 +07:00 [INF] Executed DbCommand (217ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:56:07.146 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:07.147 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2024-11-09 00:56:07.148 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:07.148 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:56:07.155 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:56:07.156 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:56:07.156 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:56:07.157 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:56:07.157 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:56:07.158 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:56:07.161 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 332.3989ms
2024-11-09 00:56:07.162 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:56:07.162 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:56:07.163 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:07.163 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:56:07.166 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 397.5919ms
2024-11-09 00:56:08.584 +07:00 [DBG] Connection id "0HN7VCUKSF7P2" received FIN.
2024-11-09 00:56:08.586 +07:00 [DBG] Connection id "0HN7VCUKSF7P2" is closed. The last processed stream ID was 1.
2024-11-09 00:56:08.586 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7P2 completed.
2024-11-09 00:56:08.586 +07:00 [DBG] Connection id "0HN7VCUKSF7P2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:56:08.751 +07:00 [DBG] Connection id "0HN7VCUKSF7P2" stopped.
2024-11-09 00:56:29.335 +07:00 [DBG] Connection id "0HN7VCUKSF7P3" accepted.
2024-11-09 00:56:29.344 +07:00 [DBG] Connection id "0HN7VCUKSF7P3" started.
2024-11-09 00:56:29.376 +07:00 [DBG] Connection 0HN7VCUKSF7P3 established using the following protocol: "Tls13"
2024-11-09 00:56:29.382 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:56:29.384 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:56:29.384 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:56:29.386 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:56:29.387 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:56:29.392 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:56:29.393 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:56:29.394 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:56:29.395 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:56:29.396 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:56:29.398 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:56:29.399 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:56:29.400 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:56:29.402 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:56:29.405 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:56:29.406 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:56:29.408 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:56:29.415 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:56:29.417 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:56:29.426 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:56:29.430 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:56:29.431 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:56:29.432 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:56:29.433 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:56:29.434 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:56:29.435 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:56:29.436 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:56:29.437 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:56:29.438 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:56:29.439 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:56:29.439 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:56:29.440 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:56:29.441 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:56:29.442 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:56:29.443 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:56:29.444 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:56:29.445 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:56:29.446 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:56:29.447 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:56:29.448 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:56:29.448 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:56:29.449 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:56:29.450 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:56:29.455 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:56:29.461 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:56:29.462 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:56:29.463 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:29.466 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:29.467 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:56:29.468 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:56:29.469 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 00:56:29.470 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:56:29.495 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:56:29.500 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:29.501 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:56:29.502 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:29.504 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 00:56:29.505 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:56:29.508 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:56:29.509 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:56:29.509 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:56:29.510 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:56:29.511 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:56:29.514 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 107.6835ms
2024-11-09 00:56:29.515 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:56:29.516 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:56:29.516 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:29.517 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:56:29.518 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 136.7472ms
2024-11-09 00:56:32.664 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:56:32.665 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:56:32.666 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:56:32.666 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:56:32.667 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:56:32.668 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:56:32.668 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:56:32.669 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:56:32.669 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:56:32.670 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:56:32.670 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:56:32.671 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:56:32.671 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:56:32.673 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:56:32.673 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:56:32.674 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:56:32.675 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:56:32.676 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:56:32.676 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:56:32.677 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:56:32.678 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:56:32.678 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:56:32.679 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:56:32.680 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:56:32.680 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:56:32.681 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:56:32.682 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:56:32.682 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:56:32.683 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:56:32.683 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:56:32.684 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:56:32.684 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:56:32.685 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:56:32.686 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:56:32.686 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:56:32.687 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:56:32.688 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:56:32.688 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:56:32.689 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:56:32.690 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:56:32.690 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:56:32.691 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:56:32.691 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:56:32.693 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:56:32.695 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:56:32.695 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:56:32.695 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:32.696 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:32.697 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:56:32.697 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:56:32.698 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:56:32.698 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:56:32.706 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:56:32.708 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:32.708 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:56:32.709 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:32.709 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:56:32.710 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:56:32.711 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:56:32.711 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:56:32.712 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:56:32.712 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:56:32.713 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:56:32.713 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.5365ms
2024-11-09 00:56:32.714 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:56:32.715 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:56:32.715 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:56:32.716 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:56:32.717 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 52.9865ms
2024-11-09 00:56:33.622 +07:00 [DBG] Connection id "0HN7VCUKSF7P3" received FIN.
2024-11-09 00:56:33.623 +07:00 [DBG] Connection id "0HN7VCUKSF7P3" is closed. The last processed stream ID was 3.
2024-11-09 00:56:33.623 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7P3 completed.
2024-11-09 00:56:33.624 +07:00 [DBG] Connection id "0HN7VCUKSF7P3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:56:33.635 +07:00 [DBG] Connection id "0HN7VCUKSF7P3" stopped.
2024-11-09 00:58:13.928 +07:00 [DBG] Connection id "0HN7VCUKSF7P4" accepted.
2024-11-09 00:58:13.962 +07:00 [DBG] Connection id "0HN7VCUKSF7P4" started.
2024-11-09 00:58:14.903 +07:00 [DBG] Connection 0HN7VCUKSF7P4 established using the following protocol: "Tls13"
2024-11-09 00:58:14.976 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:58:14.982 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:58:14.985 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:58:15.015 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:58:15.017 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:58:15.018 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:58:15.021 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:58:15.023 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:58:15.025 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:58:15.028 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:58:15.030 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:58:15.031 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:58:15.034 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:58:15.036 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:58:15.037 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:58:15.038 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:58:15.049 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:58:15.050 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:58:15.051 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:58:15.052 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:58:15.053 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:58:15.054 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:58:15.054 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:58:15.055 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:58:15.055 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:58:15.056 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:58:15.057 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:58:15.058 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:58:15.059 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:58:15.060 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:58:15.061 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:58:15.061 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:58:15.062 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:58:15.063 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:58:15.064 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:58:15.064 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:58:15.065 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:58:15.066 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:58:15.067 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:58:15.068 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:58:15.069 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:58:15.070 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:58:15.070 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:58:15.086 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:58:15.095 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:58:15.096 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:58:15.096 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:58:15.100 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:58:15.103 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:58:15.105 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-09 00:58:15.106 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-09 00:58:15.109 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:58:15.411 +07:00 [INF] Executed DbCommand (304ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:58:15.415 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:58:15.416 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 00:58:15.418 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:58:15.419 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 00:58:15.425 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:58:15.430 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:58:15.431 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:58:15.432 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:58:15.433 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:58:15.435 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:58:15.442 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 403.4717ms
2024-11-09 00:58:15.444 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:58:15.445 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:58:15.445 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:58:15.446 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:58:15.448 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 473.8762ms
2024-11-09 00:58:24.960 +07:00 [DBG] Connection id "0HN7VCUKSF7P4" received FIN.
2024-11-09 00:58:24.962 +07:00 [DBG] Connection id "0HN7VCUKSF7P4" is closed. The last processed stream ID was 1.
2024-11-09 00:58:24.962 +07:00 [DBG] Connection id "0HN7VCUKSF7P4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:58:24.962 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7P4 completed.
2024-11-09 00:58:24.967 +07:00 [DBG] Connection id "0HN7VCUKSF7P4" stopped.
2024-11-09 00:58:56.968 +07:00 [DBG] Connection id "0HN7VCUKSF7P5" accepted.
2024-11-09 00:58:56.989 +07:00 [DBG] Connection id "0HN7VCUKSF7P5" started.
2024-11-09 00:58:57.017 +07:00 [DBG] Connection 0HN7VCUKSF7P5 established using the following protocol: "Tls13"
2024-11-09 00:58:57.020 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:58:57.021 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:58:57.022 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:58:57.023 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:58:57.023 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:58:57.024 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:58:57.025 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:58:57.026 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:58:57.026 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:58:57.027 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:58:57.028 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:58:57.029 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:58:57.030 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:58:57.031 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:58:57.032 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:58:57.033 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:58:57.044 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:58:57.045 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:58:57.046 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:58:57.046 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:58:57.047 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:58:57.048 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:58:57.048 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:58:57.049 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:58:57.049 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:58:57.050 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:58:57.051 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:58:57.051 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:58:57.052 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:58:57.052 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:58:57.053 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:58:57.053 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:58:57.054 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:58:57.055 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:58:57.056 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:58:57.056 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:58:57.057 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:58:57.058 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:58:57.058 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:58:57.059 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:58:57.059 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:58:57.060 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:58:57.061 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:58:57.062 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:58:57.063 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:58:57.064 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:58:57.064 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:58:57.065 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:58:57.066 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:58:57.066 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:58:57.067 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:58:57.068 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:58:57.081 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:58:57.083 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:58:57.083 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 00:58:57.084 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:58:57.085 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:58:57.086 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:58:57.087 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:58:57.088 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:58:57.088 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:58:57.089 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:58:57.089 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:58:57.090 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 57.1655ms
2024-11-09 00:58:57.091 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:58:57.092 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:58:57.092 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:58:57.093 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:58:57.094 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 73.878ms
2024-11-09 00:59:00.003 +07:00 [DBG] Connection id "0HN7VCUKSF7P5" received FIN.
2024-11-09 00:59:00.004 +07:00 [DBG] Connection id "0HN7VCUKSF7P5" is closed. The last processed stream ID was 1.
2024-11-09 00:59:00.005 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7P5 completed.
2024-11-09 00:59:00.005 +07:00 [DBG] Connection id "0HN7VCUKSF7P5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:59:00.014 +07:00 [DBG] Connection id "0HN7VCUKSF7P5" stopped.
2024-11-09 00:59:01.552 +07:00 [DBG] Connection id "0HN7VCUKSF7P6" accepted.
2024-11-09 00:59:01.552 +07:00 [DBG] Connection id "0HN7VCUKSF7P6" started.
2024-11-09 00:59:01.557 +07:00 [DBG] Connection 0HN7VCUKSF7P6 established using the following protocol: "Tls13"
2024-11-09 00:59:01.559 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:59:01.560 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:59:01.561 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:59:01.561 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:59:01.562 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:59:01.562 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:59:01.563 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:59:01.564 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:59:01.565 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:59:01.565 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:59:01.566 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:59:01.567 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:59:01.567 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:59:01.569 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:59:01.569 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:59:01.571 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:59:01.575 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:59:01.575 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:59:01.578 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:59:01.578 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:59:01.579 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:59:01.580 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:59:01.580 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:59:01.581 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:59:01.581 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:59:01.582 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:59:01.582 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:59:01.583 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:59:01.583 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:59:01.584 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:59:01.585 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:59:01.586 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:59:01.586 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:59:01.587 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:59:01.588 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:59:01.589 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:59:01.589 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:59:01.590 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:59:01.591 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:59:01.592 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:59:01.593 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:59:01.593 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:59:01.594 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:59:01.595 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:59:01.596 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:59:01.597 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:59:01.597 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:01.598 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:01.599 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:59:01.600 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:59:01.601 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:59:01.602 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:59:01.642 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:59:01.644 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:01.644 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:59:01.645 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:01.645 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:59:01.646 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:59:01.649 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:59:01.650 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:59:01.651 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:59:01.651 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:59:01.652 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:59:01.653 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 82.0859ms
2024-11-09 00:59:01.653 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:59:01.654 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:59:01.655 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:01.657 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-09 00:59:01.658 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 99.084ms
2024-11-09 00:59:05.005 +07:00 [DBG] Connection id "0HN7VCUKSF7P6" received FIN.
2024-11-09 00:59:05.006 +07:00 [DBG] Connection id "0HN7VCUKSF7P6" is closed. The last processed stream ID was 1.
2024-11-09 00:59:05.007 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7P6 completed.
2024-11-09 00:59:05.007 +07:00 [DBG] Connection id "0HN7VCUKSF7P6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:59:05.020 +07:00 [DBG] Connection id "0HN7VCUKSF7P6" stopped.
2024-11-09 00:59:15.168 +07:00 [DBG] Connection id "0HN7VCUKSF7P7" accepted.
2024-11-09 00:59:15.169 +07:00 [DBG] Connection id "0HN7VCUKSF7P7" started.
2024-11-09 00:59:15.173 +07:00 [DBG] Connection 0HN7VCUKSF7P7 established using the following protocol: "Tls13"
2024-11-09 00:59:15.176 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:59:15.177 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:59:15.177 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:59:15.178 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:59:15.178 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:59:15.179 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:59:15.180 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:59:15.180 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:59:15.182 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:59:15.182 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:59:15.183 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:59:15.184 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:59:15.184 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:59:15.185 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:59:15.186 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:59:15.187 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:59:15.188 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:59:15.188 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:59:15.189 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:59:15.190 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:59:15.190 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:59:15.191 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:59:15.192 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:59:15.192 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:59:15.193 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:59:15.193 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:59:15.194 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:59:15.194 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:59:15.195 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:59:15.196 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:59:15.197 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:59:15.198 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:59:15.198 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:59:15.199 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:59:15.200 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:59:15.200 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:59:15.201 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:59:15.201 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:59:15.202 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:59:15.203 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:59:15.203 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:59:15.204 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:59:15.205 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:59:15.206 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:59:15.207 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:59:15.208 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 00:59:15.208 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:15.209 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:15.210 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:59:15.210 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 00:59:15.211 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 00:59:15.211 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:59:15.223 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:59:15.224 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:15.225 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 00:59:15.225 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:15.226 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:59:15.227 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:59:15.228 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:59:15.228 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:59:15.229 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:59:15.229 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:59:15.230 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:59:15.231 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.705ms
2024-11-09 00:59:15.231 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:59:15.232 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:59:15.233 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:15.233 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:59:15.234 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 58.8746ms
2024-11-09 00:59:25.032 +07:00 [DBG] Connection id "0HN7VCUKSF7P7" received FIN.
2024-11-09 00:59:25.033 +07:00 [DBG] Connection id "0HN7VCUKSF7P7" is closed. The last processed stream ID was 1.
2024-11-09 00:59:25.033 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7P7 completed.
2024-11-09 00:59:25.034 +07:00 [DBG] Connection id "0HN7VCUKSF7P7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:59:25.045 +07:00 [DBG] Connection id "0HN7VCUKSF7P7" stopped.
2024-11-09 00:59:46.955 +07:00 [DBG] Connection id "0HN7VCUKSF7P8" accepted.
2024-11-09 00:59:47.051 +07:00 [DBG] Connection id "0HN7VCUKSF7P8" started.
2024-11-09 00:59:47.145 +07:00 [DBG] Connection 0HN7VCUKSF7P8 established using the following protocol: "Tls13"
2024-11-09 00:59:47.215 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 00:59:47.241 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 00:59:47.247 +07:00 [INF] CORS policy execution successful.
2024-11-09 00:59:47.254 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 00:59:47.260 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 00:59:47.265 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 00:59:47.283 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:59:47.298 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 00:59:47.300 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:59:47.317 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 00:59:47.323 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 00:59:47.325 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 00:59:47.338 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:59:47.345 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 00:59:47.346 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 00:59:47.349 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:59:47.401 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 00:59:47.407 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 00:59:47.413 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 00:59:47.416 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 00:59:47.417 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:59:47.417 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 00:59:47.418 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 00:59:47.429 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 00:59:47.430 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:59:47.430 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 00:59:47.431 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 00:59:47.432 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:59:47.432 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 00:59:47.433 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 00:59:47.434 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 00:59:47.434 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 00:59:47.435 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 00:59:47.436 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:59:47.437 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 00:59:47.438 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 00:59:47.438 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 00:59:47.441 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:59:47.442 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 00:59:47.443 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:59:47.443 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:59:47.444 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 00:59:47.444 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 00:59:47.529 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 00:59:47.589 +07:00 [DBG] Creating DbConnection.
2024-11-09 00:59:47.592 +07:00 [DBG] Created DbConnection. (3ms).
2024-11-09 00:59:47.595 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:47.613 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:47.621 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 00:59:47.623 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2024-11-09 00:59:47.625 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-11-09 00:59:47.634 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:59:48.006 +07:00 [INF] Executed DbCommand (378ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 00:59:48.011 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:48.012 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-11-09 00:59:48.014 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:48.015 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 00:59:48.023 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 00:59:48.026 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 00:59:48.026 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 00:59:48.027 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 00:59:48.028 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 00:59:48.029 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 00:59:48.036 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 689.6883ms
2024-11-09 00:59:48.038 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 00:59:48.039 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 00:59:48.040 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 00:59:48.040 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 00:59:48.041 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 835.0617ms
2024-11-09 00:59:50.108 +07:00 [DBG] Connection id "0HN7VCUKSF7P8" received FIN.
2024-11-09 00:59:50.109 +07:00 [DBG] Connection id "0HN7VCUKSF7P8" is closed. The last processed stream ID was 1.
2024-11-09 00:59:50.110 +07:00 [DBG] Connection id "0HN7VCUKSF7P8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 00:59:50.112 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7P8 completed.
2024-11-09 00:59:50.122 +07:00 [DBG] Connection id "0HN7VCUKSF7P8" stopped.
2024-11-09 01:02:00.431 +07:00 [DBG] Connection id "0HN7VCUKSF7P9" accepted.
2024-11-09 01:02:00.442 +07:00 [DBG] Connection id "0HN7VCUKSF7P9" started.
2024-11-09 01:02:00.470 +07:00 [DBG] Connection 0HN7VCUKSF7P9 established using the following protocol: "Tls13"
2024-11-09 01:02:00.515 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:02:00.521 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:02:00.522 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:02:00.526 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:02:00.528 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:02:00.530 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:02:00.533 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:02:00.536 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:02:00.537 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:02:00.541 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:02:00.542 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:02:00.543 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:02:00.546 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:02:00.548 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:02:00.549 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:02:00.550 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:02:00.558 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:02:00.559 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:02:00.561 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:02:00.562 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:02:00.563 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:02:00.563 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:02:00.564 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:02:00.565 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:02:00.565 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:02:00.566 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:02:00.567 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:02:00.568 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:02:00.568 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:02:00.569 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:02:00.570 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:02:00.571 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:02:00.571 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:02:00.572 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:02:00.573 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:02:00.573 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:02:00.574 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:02:00.575 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:02:00.575 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:02:00.576 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:02:00.577 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:02:00.578 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:02:00.578 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:02:00.593 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:02:00.599 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:02:00.599 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:02:00.599 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:02:00.603 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:02:00.606 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:02:00.606 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:02:00.607 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:02:00.611 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:02:00.685 +07:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:02:00.686 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:02:00.687 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:02:00.688 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:02:00.688 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:02:00.691 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:02:00.692 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:02:00.692 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:02:00.693 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:02:00.693 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:02:00.694 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:02:00.695 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 145.5641ms
2024-11-09 01:02:00.696 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:02:00.697 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:02:00.698 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:02:00.698 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:02:00.699 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 186.5852ms
2024-11-09 01:02:10.220 +07:00 [DBG] Connection id "0HN7VCUKSF7P9" received FIN.
2024-11-09 01:02:10.221 +07:00 [DBG] Connection id "0HN7VCUKSF7P9" is closed. The last processed stream ID was 1.
2024-11-09 01:02:10.222 +07:00 [DBG] Connection id "0HN7VCUKSF7P9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:02:10.224 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7P9 completed.
2024-11-09 01:02:10.225 +07:00 [DBG] Connection id "0HN7VCUKSF7P9" stopped.
2024-11-09 01:03:47.014 +07:00 [DBG] Connection id "0HN7VCUKSF7PA" accepted.
2024-11-09 01:03:47.052 +07:00 [DBG] Connection id "0HN7VCUKSF7PA" started.
2024-11-09 01:03:47.113 +07:00 [DBG] Connection 0HN7VCUKSF7PA established using the following protocol: "Tls13"
2024-11-09 01:03:47.254 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:03:47.274 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:03:47.280 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:03:47.290 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:03:47.299 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:03:47.307 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:03:47.323 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:03:47.335 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:03:47.342 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:03:47.355 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:03:47.359 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:03:47.360 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:03:47.365 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:03:47.368 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:03:47.369 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:03:47.371 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:03:47.423 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:03:47.427 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:03:47.430 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:03:47.433 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:03:47.434 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:03:47.435 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:03:47.436 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:03:47.436 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:03:47.437 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:03:47.439 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:03:47.439 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:03:47.440 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:03:47.441 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:03:47.442 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:03:47.442 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:03:47.443 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:03:47.444 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:03:47.447 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:03:47.448 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:03:47.449 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:03:47.450 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:03:47.451 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:03:47.451 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:03:47.452 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:03:47.453 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:03:47.453 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:03:47.454 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:03:47.530 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:03:47.581 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:03:47.583 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:03:47.586 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:03:47.598 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:03:47.604 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:03:47.606 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-11-09 01:03:47.609 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-11-09 01:03:47.614 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:03:47.789 +07:00 [INF] Executed DbCommand (177ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:03:47.791 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:03:47.792 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:03:47.793 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:03:47.797 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:03:47.801 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:03:47.804 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:03:47.804 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:03:47.804 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:03:47.806 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:03:47.808 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:03:47.832 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 461.4733ms
2024-11-09 01:03:47.833 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:03:47.836 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:03:47.837 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:03:47.842 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:03:47.844 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 639.4605ms
2024-11-09 01:03:50.379 +07:00 [DBG] Connection id "0HN7VCUKSF7PA" received FIN.
2024-11-09 01:03:50.388 +07:00 [DBG] Connection id "0HN7VCUKSF7PA" is closed. The last processed stream ID was 1.
2024-11-09 01:03:50.389 +07:00 [DBG] Connection id "0HN7VCUKSF7PA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:03:50.392 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PA completed.
2024-11-09 01:03:50.398 +07:00 [DBG] Connection id "0HN7VCUKSF7PA" stopped.
2024-11-09 01:04:08.461 +07:00 [DBG] Connection id "0HN7VCUKSF7PB" accepted.
2024-11-09 01:04:08.464 +07:00 [DBG] Connection id "0HN7VCUKSF7PB" started.
2024-11-09 01:04:08.468 +07:00 [DBG] Connection 0HN7VCUKSF7PB established using the following protocol: "Tls13"
2024-11-09 01:04:08.470 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:04:08.471 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:04:08.472 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:04:08.473 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:04:08.473 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:04:08.474 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:04:08.475 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:04:08.476 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:04:08.476 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:04:08.477 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:04:08.478 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:04:08.478 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:04:08.479 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:04:08.480 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:04:08.481 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:04:08.488 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:04:08.491 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:04:08.492 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:04:08.493 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:04:08.494 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:04:08.494 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:04:08.495 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:04:08.496 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:04:08.496 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:04:08.497 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:04:08.497 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:04:08.498 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:04:08.499 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:04:08.499 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:04:08.500 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:04:08.501 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:04:08.501 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:04:08.502 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:04:08.503 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:04:08.503 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:04:08.504 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:04:08.504 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:04:08.505 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:04:08.505 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:04:08.506 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:04:08.506 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:04:08.507 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:04:08.508 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:04:08.509 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:04:08.511 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:04:08.512 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:04:08.512 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:08.513 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:08.513 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:04:08.514 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:04:08.514 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:04:08.515 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:04:08.535 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:04:08.536 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:08.537 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:04:08.538 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:08.538 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:04:08.539 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:04:08.540 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:04:08.540 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:04:08.541 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:04:08.541 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:04:08.542 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:04:08.543 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 55.0509ms
2024-11-09 01:04:08.544 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:04:08.544 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:04:08.545 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:08.546 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:04:08.546 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 76.8778ms
2024-11-09 01:04:10.352 +07:00 [DBG] Connection id "0HN7VCUKSF7PB" received FIN.
2024-11-09 01:04:10.353 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PB completed.
2024-11-09 01:04:10.353 +07:00 [DBG] Connection id "0HN7VCUKSF7PB" is closed. The last processed stream ID was 1.
2024-11-09 01:04:10.354 +07:00 [DBG] Connection id "0HN7VCUKSF7PB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:04:10.369 +07:00 [DBG] Connection id "0HN7VCUKSF7PB" stopped.
2024-11-09 01:04:25.821 +07:00 [DBG] Connection id "0HN7VCUKSF7PC" accepted.
2024-11-09 01:04:25.822 +07:00 [DBG] Connection id "0HN7VCUKSF7PC" started.
2024-11-09 01:04:25.829 +07:00 [DBG] Connection 0HN7VCUKSF7PC established using the following protocol: "Tls13"
2024-11-09 01:04:25.831 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:04:25.832 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:04:25.833 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:04:25.833 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:04:25.834 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:04:25.834 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:04:25.835 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:04:25.836 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:04:25.836 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:04:25.837 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:04:25.837 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:04:25.838 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:04:25.839 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:04:25.839 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:04:25.840 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:04:25.841 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:04:25.843 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:04:25.843 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:04:25.844 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:04:25.845 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:04:25.845 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:04:25.846 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:04:25.846 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:04:25.847 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:04:25.848 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:04:25.849 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:04:25.850 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:04:25.851 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:04:25.851 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:04:25.852 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:04:25.852 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:04:25.853 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:04:25.853 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:04:25.854 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:04:25.855 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:04:25.855 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:04:25.856 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:04:25.856 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:04:25.857 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:04:25.858 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:04:25.858 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:04:25.859 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:04:25.859 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:04:25.861 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:04:25.863 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:04:25.863 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:04:25.864 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:25.864 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:25.865 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:04:25.866 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:04:25.866 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:04:25.867 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:04:25.874 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:04:25.876 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:25.877 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:04:25.877 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:25.878 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:04:25.879 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:04:25.880 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:04:25.880 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:04:25.881 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:04:25.881 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:04:25.882 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:04:25.883 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.4714ms
2024-11-09 01:04:25.884 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:04:25.884 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:04:25.885 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:25.885 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:04:25.886 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 55.5322ms
2024-11-09 01:04:29.185 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:04:29.186 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:04:29.187 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:04:29.187 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:04:29.188 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:04:29.189 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:04:29.190 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:04:29.190 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:04:29.191 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:04:29.191 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:04:29.192 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:04:29.192 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:04:29.193 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:04:29.194 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:04:29.195 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:04:29.196 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:04:29.197 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:04:29.198 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:04:29.198 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:04:29.199 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:04:29.199 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:04:29.200 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:04:29.201 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:04:29.202 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:04:29.203 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:04:29.204 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:04:29.205 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:04:29.206 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:04:29.207 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:04:29.208 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:04:29.209 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:04:29.210 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:04:29.210 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:04:29.211 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:04:29.212 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:04:29.212 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:04:29.213 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:04:29.213 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:04:29.214 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:04:29.215 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:04:29.216 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:04:29.216 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:04:29.217 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:04:29.219 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:04:29.220 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:04:29.220 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:04:29.221 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:29.222 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:29.222 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:04:29.223 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:04:29.224 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:04:29.224 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:04:29.230 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:04:29.232 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:29.232 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:04:29.233 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:29.234 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:04:29.234 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:04:29.236 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:04:29.236 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:04:29.237 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:04:29.238 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:04:29.238 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:04:29.239 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.403ms
2024-11-09 01:04:29.240 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:04:29.240 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:04:29.241 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:04:29.241 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:04:29.242 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 57.3837ms
2024-11-09 01:04:30.351 +07:00 [DBG] Connection id "0HN7VCUKSF7PC" received FIN.
2024-11-09 01:04:30.352 +07:00 [DBG] Connection id "0HN7VCUKSF7PC" is closed. The last processed stream ID was 3.
2024-11-09 01:04:30.352 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PC completed.
2024-11-09 01:04:30.352 +07:00 [DBG] Connection id "0HN7VCUKSF7PC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:04:30.363 +07:00 [DBG] Connection id "0HN7VCUKSF7PC" stopped.
2024-11-09 01:05:55.579 +07:00 [DBG] Connection id "0HN7VCUKSF7PD" accepted.
2024-11-09 01:05:55.601 +07:00 [DBG] Connection id "0HN7VCUKSF7PD" started.
2024-11-09 01:05:55.637 +07:00 [DBG] Connection 0HN7VCUKSF7PD established using the following protocol: "Tls13"
2024-11-09 01:05:55.686 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:05:55.690 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:05:55.692 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:05:55.694 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:05:55.697 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:05:55.699 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:05:55.702 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:05:55.704 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:05:55.705 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:05:55.709 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:05:55.711 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:05:55.711 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:05:55.714 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:05:55.718 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:05:55.719 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:05:55.722 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:05:55.742 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:05:55.745 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:05:55.746 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:05:55.747 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:05:55.748 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:05:55.749 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:05:55.750 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:05:55.750 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:05:55.751 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:05:55.752 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:05:55.753 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:05:55.754 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:05:55.755 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:05:55.755 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:05:55.756 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:05:55.757 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:05:55.758 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:05:55.758 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:05:55.759 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:05:55.760 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:05:55.760 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:05:55.761 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:05:55.762 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:05:55.763 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:05:55.764 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:05:55.764 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:05:55.765 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:05:55.876 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:05:55.904 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:05:55.904 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:05:55.905 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:05:55.933 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:05:55.980 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:05:55.988 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (53ms).
2024-11-09 01:05:55.988 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (53ms).
2024-11-09 01:05:55.989 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:05:56.869 +07:00 [INF] Executed DbCommand (880ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:05:56.873 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:05:56.874 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:05:56.875 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:05:56.876 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:05:56.879 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:05:56.881 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:05:56.882 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:05:56.882 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:05:56.883 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:05:56.884 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:05:56.886 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 1165.3361ms
2024-11-09 01:05:56.887 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:05:56.888 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:05:56.889 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:05:56.890 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:05:56.891 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 1208.6631ms
2024-11-09 01:06:00.482 +07:00 [DBG] Connection id "0HN7VCUKSF7PD" received FIN.
2024-11-09 01:06:00.485 +07:00 [DBG] Connection id "0HN7VCUKSF7PD" is closed. The last processed stream ID was 1.
2024-11-09 01:06:00.486 +07:00 [DBG] Connection id "0HN7VCUKSF7PD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:06:00.487 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PD completed.
2024-11-09 01:06:00.490 +07:00 [DBG] Connection id "0HN7VCUKSF7PD" stopped.
2024-11-09 01:06:30.108 +07:00 [DBG] Connection id "0HN7VCUKSF7PE" accepted.
2024-11-09 01:06:30.116 +07:00 [DBG] Connection id "0HN7VCUKSF7PE" started.
2024-11-09 01:06:30.188 +07:00 [DBG] Connection 0HN7VCUKSF7PE established using the following protocol: "Tls13"
2024-11-09 01:06:30.199 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:06:30.204 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:06:30.205 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:06:30.206 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:06:30.206 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:06:30.207 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:06:30.208 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:06:30.212 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:06:30.212 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:06:30.214 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:06:30.215 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:06:30.215 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:06:30.217 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:30.218 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:06:30.219 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:30.219 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:30.224 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:30.225 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:06:30.225 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:06:30.226 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:06:30.227 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:06:30.228 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:06:30.228 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:06:30.229 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:06:30.229 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:06:30.230 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:06:30.231 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:30.231 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:30.232 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:30.232 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:06:30.233 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:30.234 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:06:30.234 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:06:30.235 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:06:30.236 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:06:30.236 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:06:30.237 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:06:30.237 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:06:30.238 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:06:30.239 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:06:30.239 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:06:30.240 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:06:30.241 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:06:30.246 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:06:30.254 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:06:30.254 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:06:30.255 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:30.256 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:30.257 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:06:30.257 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:06:30.259 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:06:30.260 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:06:30.270 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:06:30.273 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:30.273 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:06:30.274 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:30.275 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:06:30.276 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:06:30.277 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:06:30.277 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:06:30.277 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:06:30.278 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:06:30.278 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:06:30.280 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 60.2712ms
2024-11-09 01:06:30.280 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:06:30.281 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:06:30.281 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:30.282 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:06:30.283 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3742 application/json; charset=utf-8 87.3308ms
2024-11-09 01:06:30.515 +07:00 [DBG] Connection id "0HN7VCUKSF7PE" received FIN.
2024-11-09 01:06:30.516 +07:00 [DBG] Connection id "0HN7VCUKSF7PE" is closed. The last processed stream ID was 1.
2024-11-09 01:06:30.516 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PE completed.
2024-11-09 01:06:30.516 +07:00 [DBG] Connection id "0HN7VCUKSF7PE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:06:30.528 +07:00 [DBG] Connection id "0HN7VCUKSF7PE" stopped.
2024-11-09 01:06:35.550 +07:00 [DBG] Connection id "0HN7VCUKSF7PF" accepted.
2024-11-09 01:06:35.551 +07:00 [DBG] Connection id "0HN7VCUKSF7PF" started.
2024-11-09 01:06:35.557 +07:00 [DBG] Connection 0HN7VCUKSF7PF established using the following protocol: "Tls13"
2024-11-09 01:06:35.559 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b - null null
2024-11-09 01:06:35.561 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:06:35.562 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:06:35.563 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:06:35.566 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b'
2024-11-09 01:06:35.567 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b'
2024-11-09 01:06:35.568 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-09 01:06:35.569 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:06:35.570 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-09 01:06:35.571 +07:00 [INF] Route matched with {action = "GetById", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:06:35.573 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:06:35.574 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:06:35.575 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:35.576 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:06:35.577 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:35.577 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:35.578 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:35.582 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-09 01:06:35.587 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-09 01:06:35.597 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-09 01:06:35.598 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-09 01:06:35.599 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-09 01:06:35.599 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-09 01:06:35.602 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:06:35.626 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:06:35.626 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:06:35.627 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.628 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.628 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:06:35.629 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:06:35.630 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:06:35.630 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-09 01:06:35.648 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-09 01:06:35.728 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:35.740 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:35.747 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:35.748 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.749 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 99ms reading results.
2024-11-09 01:06:35.750 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.750 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:06:35.752 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:06:35.753 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:06:35.754 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:06:35.754 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:06:35.755 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:06:35.755 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModel'.
2024-11-09 01:06:35.758 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API) in 180.4516ms
2024-11-09 01:06:35.759 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-09 01:06:35.759 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:06:35.760 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.761 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:06:35.762 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b - 200 533 application/json; charset=utf-8 203.0251ms
2024-11-09 01:06:35.770 +07:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7169/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b - null null
2024-11-09 01:06:35.771 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:06:35.772 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:06:35.775 +07:00 [DBG] The request is a preflight request.
2024-11-09 01:06:35.786 +07:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7169/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b - 204 null null 15.6798ms
2024-11-09 01:06:35.790 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7169/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b - application/json 534
2024-11-09 01:06:35.792 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:06:35.792 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:06:35.794 +07:00 [DBG] PUT requests are not supported
2024-11-09 01:06:35.794 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b'
2024-11-09 01:06:35.795 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b'
2024-11-09 01:06:35.796 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-09 01:06:35.796 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:06:35.797 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-09 01:06:35.798 +07:00 [INF] Route matched with {action = "Update", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Update(System.Guid, CityInfo.API.Models.AppointmentVM) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:06:35.798 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:06:35.799 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:06:35.800 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:35.801 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:06:35.801 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:35.802 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:35.803 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:35.804 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-09 01:06:35.805 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-09 01:06:35.806 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-09 01:06:35.806 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-09 01:06:35.807 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-09 01:06:35.807 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-09 01:06:35.808 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' ...
2024-11-09 01:06:35.814 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' using the name '' in request data ...
2024-11-09 01:06:35.816 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-09 01:06:35.819 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-09 01:06:35.834 +07:00 [DBG] Connection id "0HN7VCUKSF7PF", Request id "0HN7VCUKSF7PF:00000005": started reading request body.
2024-11-09 01:06:35.835 +07:00 [DBG] Connection id "0HN7VCUKSF7PF", Request id "0HN7VCUKSF7PF:00000005": done reading request body.
2024-11-09 01:06:35.867 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-09 01:06:35.868 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-09 01:06:35.869 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' ...
2024-11-09 01:06:35.890 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-09 01:06:35.892 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:06:35.898 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:06:35.898 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:06:35.899 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.900 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.900 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:06:35.901 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:06:35.902 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:06:35.902 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_AppointmentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppointmentId] = @__appointment_AppointmentId_0
2024-11-09 01:06:35.908 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__appointment_AppointmentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppointmentId] = @__appointment_AppointmentId_0
2024-11-09 01:06:35.909 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:35.910 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.910 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:06:35.911 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.912 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:06:35.914 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-11-09 01:06:35.916 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-11-09 01:06:35.919 +07:00 [DBG] The unchanged property 'Appointment.AppointmentStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-09 01:06:35.921 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:35.926 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-11-09 01:06:35.957 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.958 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.959 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:06:35.960 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:06:35.961 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:06:35.962 +07:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointment] SET [AppointmentStatus] = @p0
OUTPUT 1
WHERE [AppointmentId] = @p1;
2024-11-09 01:06:35.992 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointment] SET [AppointmentStatus] = @p0
OUTPUT 1
WHERE [AppointmentId] = @p1;
2024-11-09 01:06:35.994 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.995 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:06:35.996 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:35.997 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 01:06:35.998 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:35.998 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-11-09 01:06:36.002 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-11-09 01:06:36.003 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API) in 200.6698ms
2024-11-09 01:06:36.004 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-09 01:06:36.005 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:06:36.006 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:36.007 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:06:36.008 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7169/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b - 204 null null 217.3164ms
2024-11-09 01:06:36.013 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:06:36.014 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:06:36.015 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:06:36.015 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:06:36.016 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:06:36.016 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:06:36.017 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:06:36.018 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:06:36.018 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:06:36.019 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:06:36.020 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:06:36.020 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:06:36.021 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:36.022 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:06:36.023 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:36.024 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:36.024 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:36.025 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:06:36.026 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:06:36.026 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:06:36.027 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:06:36.028 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:06:36.028 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:06:36.029 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:06:36.029 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:06:36.030 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:06:36.030 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:36.031 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:36.032 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:36.032 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:06:36.033 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:36.033 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:06:36.034 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:06:36.035 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:06:36.035 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:06:36.036 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:06:36.036 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:06:36.037 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:06:36.038 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:06:36.039 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:06:36.039 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:06:36.040 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:06:36.040 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:06:36.042 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:06:36.043 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:06:36.044 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:06:36.044 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:36.045 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:36.046 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:06:36.046 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:06:36.047 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:06:36.047 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:06:36.054 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:06:36.055 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:36.056 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:06:36.057 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:36.057 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:06:36.058 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:06:36.059 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:06:36.060 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:06:36.060 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:06:36.061 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:06:36.061 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:06:36.062 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.5879ms
2024-11-09 01:06:36.064 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:06:36.064 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:06:36.065 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:36.066 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:06:36.067 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3743 application/json; charset=utf-8 54.4892ms
2024-11-09 01:06:40.584 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b - null null
2024-11-09 01:06:40.586 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:06:40.587 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:06:40.588 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:06:40.589 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b'
2024-11-09 01:06:40.590 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b'
2024-11-09 01:06:40.591 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-09 01:06:40.592 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:06:40.592 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-09 01:06:40.593 +07:00 [INF] Route matched with {action = "GetById", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:06:40.595 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:06:40.596 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:06:40.597 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:40.598 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:06:40.598 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:40.599 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:40.601 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:40.602 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-09 01:06:40.603 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-09 01:06:40.613 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-09 01:06:40.614 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-09 01:06:40.615 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-09 01:06:40.616 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-09 01:06:40.621 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:06:40.623 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:06:40.623 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:06:40.624 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.625 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.625 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:06:40.626 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:06:40.627 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:06:40.627 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-09 01:06:40.665 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-09 01:06:40.666 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:40.668 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:40.668 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:40.670 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.671 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-11-09 01:06:40.671 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.672 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:06:40.673 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:06:40.674 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:06:40.675 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:06:40.675 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:06:40.675 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:06:40.676 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModel'.
2024-11-09 01:06:40.677 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API) in 77.2803ms
2024-11-09 01:06:40.677 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-09 01:06:40.678 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:06:40.679 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.680 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:06:40.681 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b - 200 536 application/json; charset=utf-8 97.0932ms
2024-11-09 01:06:40.683 +07:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7169/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b - null null
2024-11-09 01:06:40.685 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:06:40.685 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:06:40.686 +07:00 [DBG] The request is a preflight request.
2024-11-09 01:06:40.687 +07:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7169/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b - 204 null null 3.986ms
2024-11-09 01:06:40.696 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7169/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b - application/json 538
2024-11-09 01:06:40.697 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:06:40.698 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:06:40.698 +07:00 [DBG] PUT requests are not supported
2024-11-09 01:06:40.699 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b'
2024-11-09 01:06:40.700 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b'
2024-11-09 01:06:40.703 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-09 01:06:40.703 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:06:40.703 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-09 01:06:40.704 +07:00 [INF] Route matched with {action = "Update", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Update(System.Guid, CityInfo.API.Models.AppointmentVM) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:06:40.705 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:06:40.706 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:06:40.706 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:40.707 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:06:40.708 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:40.709 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:40.710 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:40.710 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-09 01:06:40.711 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-09 01:06:40.712 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-09 01:06:40.712 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-09 01:06:40.714 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-09 01:06:40.715 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-09 01:06:40.715 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' ...
2024-11-09 01:06:40.716 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' using the name '' in request data ...
2024-11-09 01:06:40.717 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-09 01:06:40.717 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-09 01:06:40.720 +07:00 [DBG] Connection id "0HN7VCUKSF7PF", Request id "0HN7VCUKSF7PF:0000000D": started reading request body.
2024-11-09 01:06:40.721 +07:00 [DBG] Connection id "0HN7VCUKSF7PF", Request id "0HN7VCUKSF7PF:0000000D": done reading request body.
2024-11-09 01:06:40.726 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-09 01:06:40.726 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-09 01:06:40.727 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' ...
2024-11-09 01:06:40.733 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-09 01:06:40.735 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:06:40.736 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:06:40.736 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:06:40.737 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.737 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.738 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:06:40.738 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:06:40.739 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:06:40.740 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_AppointmentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppointmentId] = @__appointment_AppointmentId_0
2024-11-09 01:06:40.742 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__appointment_AppointmentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppointmentId] = @__appointment_AppointmentId_0
2024-11-09 01:06:40.748 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:40.749 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.750 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 6ms reading results.
2024-11-09 01:06:40.751 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.751 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:06:40.757 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.758 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.759 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:06:40.759 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:06:40.760 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:06:40.761 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-11-09 01:06:40.768 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-11-09 01:06:40.769 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:40.770 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:40.771 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.771 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:06:40.772 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.773 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:06:40.775 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.776 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.776 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:06:40.777 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:06:40.778 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:06:40.778 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_DoctorId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [d].[DoctorId], [d].[DoctorDepartment], [d].[DoctorName]
FROM [Doctor] AS [d]
WHERE [d].[DoctorId] = @__appointment_DoctorId_0
2024-11-09 01:06:40.789 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__appointment_DoctorId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [d].[DoctorId], [d].[DoctorDepartment], [d].[DoctorName]
FROM [Doctor] AS [d]
WHERE [d].[DoctorId] = @__appointment_DoctorId_0
2024-11-09 01:06:40.792 +07:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:40.793 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:40.794 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.795 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-11-09 01:06:40.796 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.797 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 01:06:40.841 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-11-09 01:06:40.842 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-11-09 01:06:40.843 +07:00 [DBG] The unchanged property 'Appointment.AppointmentStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-09 01:06:40.844 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:40.846 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-11-09 01:06:40.848 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.849 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.850 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:06:40.850 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:06:40.851 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:06:40.852 +07:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointment] SET [AppointmentStatus] = @p0
OUTPUT 1
WHERE [AppointmentId] = @p1;
2024-11-09 01:06:40.856 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointment] SET [AppointmentStatus] = @p0
OUTPUT 1
WHERE [AppointmentId] = @p1;
2024-11-09 01:06:40.857 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.858 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:06:40.859 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.859 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:06:40.860 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:06:40.861 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-11-09 01:06:40.862 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-11-09 01:06:40.862 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API) in 153.6211ms
2024-11-09 01:06:40.863 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-09 01:06:40.863 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:06:40.864 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.865 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:06:40.866 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7169/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b - 204 null null 170.1954ms
2024-11-09 01:06:40.871 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:06:40.872 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:06:40.873 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:06:40.873 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:06:40.874 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:06:40.874 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:06:40.875 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:06:40.876 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:06:40.876 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:06:40.877 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:06:40.878 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:06:40.879 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:06:40.879 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:40.881 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:06:40.881 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:40.882 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:40.883 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:40.884 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:06:40.884 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:06:40.885 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:06:40.886 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:06:40.887 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:06:40.887 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:06:40.888 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:06:40.889 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:06:40.889 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:06:40.890 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:40.891 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:40.892 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:40.892 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:06:40.893 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:40.894 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:06:40.894 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:06:40.895 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:06:40.896 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:06:40.896 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:06:40.897 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:06:40.898 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:06:40.899 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:06:40.900 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:06:40.901 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:06:40.902 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:06:40.902 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:06:40.903 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:06:40.905 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:06:40.905 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:06:40.906 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.907 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.907 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:06:40.908 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:06:40.908 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:06:40.909 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:06:40.915 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:06:40.916 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.917 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:06:40.918 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.918 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:06:40.919 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:06:40.920 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:06:40.920 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:06:40.921 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:06:40.921 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:06:40.922 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:06:40.923 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.4278ms
2024-11-09 01:06:40.923 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:06:40.924 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:06:40.924 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:40.925 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:06:40.926 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3745 application/json; charset=utf-8 55.2056ms
2024-11-09 01:06:45.539 +07:00 [DBG] Connection id "0HN7VCUKSF7PF" received FIN.
2024-11-09 01:06:45.540 +07:00 [DBG] Connection id "0HN7VCUKSF7PF" is closed. The last processed stream ID was 15.
2024-11-09 01:06:45.540 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PF completed.
2024-11-09 01:06:45.540 +07:00 [DBG] Connection id "0HN7VCUKSF7PF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:06:45.554 +07:00 [DBG] Connection id "0HN7VCUKSF7PF" stopped.
2024-11-09 01:06:54.568 +07:00 [DBG] Connection id "0HN7VCUKSF7PG" accepted.
2024-11-09 01:06:54.569 +07:00 [DBG] Connection id "0HN7VCUKSF7PG" started.
2024-11-09 01:06:54.601 +07:00 [DBG] Connection 0HN7VCUKSF7PG established using the following protocol: "Tls13"
2024-11-09 01:06:54.609 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:06:54.610 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:06:54.611 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:06:54.611 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:06:54.611 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:06:54.612 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:06:54.613 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:06:54.613 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:06:54.618 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:06:54.619 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:06:54.619 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:06:54.620 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:06:54.621 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:54.622 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:06:54.623 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:06:54.624 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:54.635 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:06:54.635 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:06:54.636 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:06:54.636 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:06:54.637 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:06:54.638 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:06:54.639 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:06:54.639 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:06:54.639 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:06:54.640 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:06:54.640 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:54.641 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:54.641 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:54.642 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:06:54.642 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:06:54.643 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:06:54.643 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:06:54.644 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:06:54.644 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:06:54.645 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:06:54.645 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:06:54.645 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:06:54.646 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:06:54.646 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:06:54.647 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:06:54.647 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:06:54.648 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:06:54.649 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:06:54.653 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:06:54.653 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:06:54.653 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:54.654 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:54.655 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:06:54.657 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:06:54.658 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:06:54.659 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:06:54.716 +07:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:06:54.717 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:54.718 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:06:54.721 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:54.721 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:06:54.722 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:06:54.723 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:06:54.723 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:06:54.724 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:06:54.724 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:06:54.726 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:06:54.727 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 102.9872ms
2024-11-09 01:06:54.727 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:06:54.728 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:06:54.729 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:06:54.730 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:06:54.730 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3745 application/json; charset=utf-8 122.1124ms
2024-11-09 01:06:55.567 +07:00 [DBG] Connection id "0HN7VCUKSF7PG" received FIN.
2024-11-09 01:06:55.568 +07:00 [DBG] Connection id "0HN7VCUKSF7PG" is closed. The last processed stream ID was 1.
2024-11-09 01:06:55.568 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PG completed.
2024-11-09 01:06:55.569 +07:00 [DBG] Connection id "0HN7VCUKSF7PG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:06:55.582 +07:00 [DBG] Connection id "0HN7VCUKSF7PG" stopped.
2024-11-09 01:07:11.224 +07:00 [DBG] Connection id "0HN7VCUKSF7PH" accepted.
2024-11-09 01:07:11.225 +07:00 [DBG] Connection id "0HN7VCUKSF7PH" started.
2024-11-09 01:07:11.230 +07:00 [DBG] Connection 0HN7VCUKSF7PH established using the following protocol: "Tls13"
2024-11-09 01:07:11.231 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:07:11.233 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:07:11.233 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:07:11.234 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:07:11.234 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:07:11.235 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:07:11.235 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:07:11.236 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:07:11.237 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:07:11.238 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:07:11.239 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:07:11.240 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:07:11.240 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:07:11.241 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:07:11.242 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:07:11.243 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:07:11.244 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:07:11.245 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:07:11.246 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:07:11.247 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:07:11.248 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:07:11.248 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:07:11.249 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:07:11.250 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:07:11.251 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:07:11.251 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:07:11.252 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:07:11.253 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:07:11.254 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:07:11.255 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:07:11.255 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:07:11.256 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:07:11.257 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:07:11.257 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:07:11.258 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:07:11.259 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:07:11.259 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:07:11.260 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:07:11.261 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:07:11.262 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:07:11.263 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:07:11.264 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:07:11.264 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:07:11.266 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:07:11.268 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:07:11.269 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:07:11.269 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:11.270 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:11.271 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:07:11.271 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:07:11.272 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:07:11.273 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:07:11.295 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:07:11.297 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:11.297 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:07:11.298 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:11.299 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:07:11.300 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:07:11.301 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:07:11.302 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:07:11.302 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:07:11.303 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:07:11.303 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:07:11.304 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 61.3381ms
2024-11-09 01:07:11.305 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:07:11.306 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:07:11.307 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:11.307 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:07:11.308 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3745 application/json; charset=utf-8 77.349ms
2024-11-09 01:07:13.530 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b - null null
2024-11-09 01:07:13.532 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:07:13.532 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:07:13.533 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:07:13.534 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b'
2024-11-09 01:07:13.534 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b'
2024-11-09 01:07:13.535 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-09 01:07:13.536 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:07:13.536 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-09 01:07:13.537 +07:00 [INF] Route matched with {action = "GetById", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:07:13.538 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:07:13.539 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:07:13.539 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:07:13.541 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:07:13.541 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:07:13.543 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:07:13.544 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:07:13.545 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-09 01:07:13.545 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-09 01:07:13.546 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-09 01:07:13.547 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-09 01:07:13.547 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-09 01:07:13.548 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-09 01:07:13.549 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:07:13.554 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:07:13.555 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:07:13.555 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.556 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.557 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:07:13.558 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:07:13.559 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:07:13.560 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-09 01:07:13.573 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-09 01:07:13.574 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:07:13.628 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:07:13.629 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:07:13.629 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.630 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 55ms reading results.
2024-11-09 01:07:13.631 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.631 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:07:13.632 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:07:13.633 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:07:13.633 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:07:13.633 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:07:13.634 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:07:13.635 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModel'.
2024-11-09 01:07:13.636 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API) in 92.9675ms
2024-11-09 01:07:13.636 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-09 01:07:13.637 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:07:13.637 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.638 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:07:13.639 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b - 200 544 application/json; charset=utf-8 109.7968ms
2024-11-09 01:07:13.640 +07:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7169/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b - null null
2024-11-09 01:07:13.642 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:07:13.642 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:07:13.642 +07:00 [DBG] The request is a preflight request.
2024-11-09 01:07:13.643 +07:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7169/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b - 204 null null 4.1137ms
2024-11-09 01:07:13.645 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7169/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b - application/json 545
2024-11-09 01:07:13.646 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:07:13.646 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:07:13.647 +07:00 [DBG] PUT requests are not supported
2024-11-09 01:07:13.647 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b'
2024-11-09 01:07:13.648 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b'
2024-11-09 01:07:13.648 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-09 01:07:13.649 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:07:13.650 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-09 01:07:13.650 +07:00 [INF] Route matched with {action = "Update", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Update(System.Guid, CityInfo.API.Models.AppointmentVM) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:07:13.651 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:07:13.652 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:07:13.652 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:07:13.653 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:07:13.654 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:07:13.655 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:07:13.657 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:07:13.657 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-09 01:07:13.658 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-09 01:07:13.658 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-09 01:07:13.659 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-09 01:07:13.660 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-09 01:07:13.660 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-09 01:07:13.661 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' ...
2024-11-09 01:07:13.661 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' using the name '' in request data ...
2024-11-09 01:07:13.662 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-09 01:07:13.663 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-09 01:07:13.663 +07:00 [DBG] Connection id "0HN7VCUKSF7PH", Request id "0HN7VCUKSF7PH:00000007": started reading request body.
2024-11-09 01:07:13.664 +07:00 [DBG] Connection id "0HN7VCUKSF7PH", Request id "0HN7VCUKSF7PH:00000007": done reading request body.
2024-11-09 01:07:13.665 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-09 01:07:13.666 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-09 01:07:13.667 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' ...
2024-11-09 01:07:13.667 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-09 01:07:13.669 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:07:13.670 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:07:13.671 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:07:13.671 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.672 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.672 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:07:13.673 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:07:13.674 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:07:13.674 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_AppointmentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppointmentId] = @__appointment_AppointmentId_0
2024-11-09 01:07:13.681 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__appointment_AppointmentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppointmentId] = @__appointment_AppointmentId_0
2024-11-09 01:07:13.682 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:07:13.683 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.684 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:07:13.685 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.686 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:07:13.686 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-11-09 01:07:13.688 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-11-09 01:07:13.688 +07:00 [DBG] The unchanged property 'Appointment.AppointmentStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-09 01:07:13.689 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:07:13.690 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-11-09 01:07:13.692 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.693 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.694 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:07:13.694 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:07:13.695 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:07:13.695 +07:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointment] SET [AppointmentStatus] = @p0
OUTPUT 1
WHERE [AppointmentId] = @p1;
2024-11-09 01:07:13.702 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointment] SET [AppointmentStatus] = @p0
OUTPUT 1
WHERE [AppointmentId] = @p1;
2024-11-09 01:07:13.703 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.704 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:07:13.705 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.706 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:07:13.707 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-09 01:07:13.708 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-11-09 01:07:13.708 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-11-09 01:07:13.709 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API) in 54.0492ms
2024-11-09 01:07:13.710 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-09 01:07:13.710 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:07:13.711 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.712 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:07:13.713 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7169/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b - 204 null null 68.1881ms
2024-11-09 01:07:13.718 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:07:13.719 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:07:13.720 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:07:13.721 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:07:13.721 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:07:13.722 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:07:13.723 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:07:13.723 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:07:13.724 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:07:13.725 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:07:13.726 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:07:13.727 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:07:13.728 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:07:13.729 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:07:13.730 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:07:13.731 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:07:13.732 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:07:13.733 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:07:13.734 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:07:13.735 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:07:13.736 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:07:13.737 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:07:13.738 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:07:13.739 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:07:13.740 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:07:13.740 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:07:13.741 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:07:13.742 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:07:13.743 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:07:13.743 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:07:13.744 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:07:13.745 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:07:13.746 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:07:13.747 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:07:13.747 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:07:13.748 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:07:13.749 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:07:13.750 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:07:13.750 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:07:13.751 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:07:13.752 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:07:13.753 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:07:13.754 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:07:13.755 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:07:13.756 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:07:13.757 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:07:13.757 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.758 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.759 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:07:13.760 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:07:13.760 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:07:13.761 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:07:13.777 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:07:13.778 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.779 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:07:13.780 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.781 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:07:13.782 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:07:13.784 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:07:13.784 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:07:13.785 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:07:13.785 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:07:13.786 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:07:13.787 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 56.1272ms
2024-11-09 01:07:13.788 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:07:13.789 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:07:13.790 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:13.791 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:07:13.791 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 73.8625ms
2024-11-09 01:07:15.606 +07:00 [DBG] Connection id "0HN7VCUKSF7PH" received FIN.
2024-11-09 01:07:15.608 +07:00 [DBG] Connection id "0HN7VCUKSF7PH" is closed. The last processed stream ID was 9.
2024-11-09 01:07:15.608 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PH completed.
2024-11-09 01:07:15.609 +07:00 [DBG] Connection id "0HN7VCUKSF7PH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:07:15.628 +07:00 [DBG] Connection id "0HN7VCUKSF7PH" stopped.
2024-11-09 01:07:15.702 +07:00 [DBG] Connection id "0HN7VCUKSF7PI" accepted.
2024-11-09 01:07:15.702 +07:00 [DBG] Connection id "0HN7VCUKSF7PI" started.
2024-11-09 01:07:15.707 +07:00 [DBG] Connection 0HN7VCUKSF7PI established using the following protocol: "Tls13"
2024-11-09 01:07:15.709 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:07:15.711 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:07:15.712 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:07:15.712 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:07:15.713 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:07:15.713 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:07:15.714 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:07:15.715 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:07:15.715 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:07:15.716 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:07:15.717 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:07:15.720 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:07:15.721 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:07:15.722 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:07:15.723 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:07:15.724 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:07:15.725 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:07:15.726 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:07:15.727 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:07:15.728 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:07:15.729 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:07:15.730 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:07:15.730 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:07:15.731 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:07:15.732 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:07:15.733 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:07:15.734 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:07:15.735 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:07:15.736 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:07:15.737 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:07:15.737 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:07:15.738 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:07:15.739 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:07:15.740 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:07:15.741 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:07:15.742 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:07:15.742 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:07:15.743 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:07:15.744 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:07:15.745 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:07:15.746 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:07:15.747 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:07:15.748 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:07:15.749 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:07:15.751 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:07:15.751 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:07:15.752 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:15.753 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:15.754 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:07:15.754 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:07:15.755 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:07:15.756 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:07:15.771 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:07:15.773 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:15.774 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:07:15.775 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:15.776 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:07:15.776 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:07:15.778 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:07:15.778 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:07:15.778 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:07:15.779 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:07:15.780 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:07:15.781 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 56.9584ms
2024-11-09 01:07:15.782 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:07:15.782 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:07:15.783 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:07:15.784 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:07:15.785 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 75.5565ms
2024-11-09 01:07:20.612 +07:00 [DBG] Connection id "0HN7VCUKSF7PI" received FIN.
2024-11-09 01:07:20.613 +07:00 [DBG] Connection id "0HN7VCUKSF7PI" is closed. The last processed stream ID was 1.
2024-11-09 01:07:20.613 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PI completed.
2024-11-09 01:07:20.614 +07:00 [DBG] Connection id "0HN7VCUKSF7PI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:07:20.622 +07:00 [DBG] Connection id "0HN7VCUKSF7PI" stopped.
2024-11-09 01:08:19.199 +07:00 [DBG] Connection id "0HN7VCUKSF7PJ" accepted.
2024-11-09 01:08:19.216 +07:00 [DBG] Connection id "0HN7VCUKSF7PJ" started.
2024-11-09 01:08:19.279 +07:00 [DBG] Connection 0HN7VCUKSF7PJ established using the following protocol: "Tls13"
2024-11-09 01:08:19.330 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:08:19.376 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:08:19.378 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:08:19.388 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:08:19.396 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:08:19.398 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:08:19.410 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:08:19.421 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:08:19.425 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:08:19.432 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:08:19.436 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:08:19.437 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:08:19.443 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:08:19.446 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:08:19.447 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:08:19.448 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:08:19.477 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:08:19.482 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:08:19.486 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:08:19.488 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:08:19.489 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:08:19.489 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:08:19.490 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:08:19.491 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:08:19.491 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:08:19.494 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:08:19.494 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:08:19.495 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:08:19.496 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:08:19.496 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:08:19.497 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:08:19.498 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:08:19.499 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:08:19.501 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:08:19.502 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:08:19.502 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:08:19.503 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:08:19.504 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:08:19.504 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:08:19.506 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:08:19.506 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:08:19.507 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:08:19.509 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:08:19.550 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:08:19.576 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:08:19.581 +07:00 [DBG] Created DbConnection. (4ms).
2024-11-09 01:08:19.582 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:08:19.587 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:08:19.594 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:08:19.596 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-11-09 01:08:19.600 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-11-09 01:08:19.605 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:08:19.807 +07:00 [INF] Executed DbCommand (205ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:08:19.809 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:08:19.810 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:08:19.811 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:08:19.812 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:08:19.816 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:08:19.819 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:08:19.821 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:08:19.822 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:08:19.822 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:08:19.823 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:08:19.829 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 380.8584ms
2024-11-09 01:08:19.830 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:08:19.831 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:08:19.831 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:08:19.832 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:08:19.833 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 505.7383ms
2024-11-09 01:08:20.700 +07:00 [DBG] Connection id "0HN7VCUKSF7PJ" received FIN.
2024-11-09 01:08:20.701 +07:00 [DBG] Connection id "0HN7VCUKSF7PJ" is closed. The last processed stream ID was 1.
2024-11-09 01:08:20.702 +07:00 [DBG] Connection id "0HN7VCUKSF7PJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:08:20.703 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PJ completed.
2024-11-09 01:08:20.704 +07:00 [DBG] Connection id "0HN7VCUKSF7PJ" stopped.
2024-11-09 01:10:42.497 +07:00 [DBG] Connection id "0HN7VCUKSF7PK" accepted.
2024-11-09 01:10:42.597 +07:00 [DBG] Connection id "0HN7VCUKSF7PK" started.
2024-11-09 01:10:42.746 +07:00 [DBG] Connection 0HN7VCUKSF7PK established using the following protocol: "Tls13"
2024-11-09 01:10:42.781 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:10:42.796 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:10:42.799 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:10:42.806 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:10:42.814 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:10:42.818 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:10:42.832 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:10:42.843 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:10:42.849 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:10:42.860 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:10:42.862 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:10:42.863 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:10:42.871 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:10:42.875 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:10:42.876 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:10:42.878 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:10:42.913 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:10:42.921 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:10:42.923 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:10:42.924 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:10:42.925 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:10:42.926 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:10:42.926 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:10:42.927 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:10:42.927 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:10:42.929 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:10:42.930 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:10:42.931 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:10:42.931 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:10:42.933 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:10:42.933 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:10:42.934 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:10:42.935 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:10:42.936 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:10:42.936 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:10:42.937 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:10:42.938 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:10:42.939 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:10:42.940 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:10:42.941 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:10:42.942 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:10:42.942 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:10:42.943 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:10:43.000 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:10:43.040 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:10:43.043 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 01:10:43.044 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:10:43.062 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:10:43.067 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:10:43.069 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:10:43.070 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-09 01:10:43.078 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:10:43.279 +07:00 [INF] Executed DbCommand (204ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:10:43.282 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:10:43.287 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-11-09 01:10:43.289 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:10:43.291 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:10:43.298 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:10:43.300 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:10:43.301 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:10:43.301 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:10:43.302 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:10:43.303 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:10:43.309 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 432.6993ms
2024-11-09 01:10:43.310 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:10:43.312 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:10:43.312 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:10:43.313 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:10:43.314 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 537.8618ms
2024-11-09 01:10:46.168 +07:00 [DBG] Connection id "0HN7VCUKSF7PK" received FIN.
2024-11-09 01:10:46.170 +07:00 [DBG] Connection id "0HN7VCUKSF7PK" is closed. The last processed stream ID was 1.
2024-11-09 01:10:46.170 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PK completed.
2024-11-09 01:10:46.170 +07:00 [DBG] Connection id "0HN7VCUKSF7PK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:10:46.181 +07:00 [DBG] Connection id "0HN7VCUKSF7PK" stopped.
2024-11-09 01:11:13.446 +07:00 [DBG] Connection id "0HN7VCUKSF7PL" accepted.
2024-11-09 01:11:13.451 +07:00 [DBG] Connection id "0HN7VCUKSF7PL" started.
2024-11-09 01:11:13.551 +07:00 [DBG] Connection 0HN7VCUKSF7PL established using the following protocol: "Tls13"
2024-11-09 01:11:13.589 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:11:13.594 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:11:13.595 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:11:13.598 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:11:13.628 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:11:13.630 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:11:13.634 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:11:13.636 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:11:13.636 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:11:13.639 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:11:13.640 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:11:13.641 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:11:13.645 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:11:13.646 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:11:13.647 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:11:13.647 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:11:13.657 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:11:13.659 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:11:13.660 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:11:13.661 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:11:13.662 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:11:13.663 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:11:13.664 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:11:13.664 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:11:13.665 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:11:13.666 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:11:13.666 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:11:13.667 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:11:13.668 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:11:13.668 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:11:13.669 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:11:13.670 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:11:13.670 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:11:13.671 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:11:13.672 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:11:13.672 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:11:13.673 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:11:13.674 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:11:13.674 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:11:13.675 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:11:13.676 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:11:13.676 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:11:13.677 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:11:13.705 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:11:13.732 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:11:13.734 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 01:11:13.736 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:11:13.742 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:11:13.745 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:11:13.747 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:11:13.747 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:11:13.752 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:11:13.877 +07:00 [INF] Executed DbCommand (126ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:11:13.880 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:11:13.881 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:11:13.882 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:11:13.883 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:11:13.884 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:11:13.885 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:11:13.886 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:11:13.886 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:11:13.887 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:11:13.888 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:11:13.894 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 246.1617ms
2024-11-09 01:11:13.895 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:11:13.895 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:11:13.896 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:11:13.897 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:11:13.898 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 311.6754ms
2024-11-09 01:11:16.224 +07:00 [DBG] Connection id "0HN7VCUKSF7PL" received FIN.
2024-11-09 01:11:16.226 +07:00 [DBG] Connection id "0HN7VCUKSF7PL" is closed. The last processed stream ID was 1.
2024-11-09 01:11:16.226 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PL completed.
2024-11-09 01:11:16.235 +07:00 [DBG] Connection id "0HN7VCUKSF7PL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:11:16.245 +07:00 [DBG] Connection id "0HN7VCUKSF7PL" stopped.
2024-11-09 01:11:55.201 +07:00 [DBG] Connection id "0HN7VCUKSF7PM" accepted.
2024-11-09 01:11:55.208 +07:00 [DBG] Connection id "0HN7VCUKSF7PM" started.
2024-11-09 01:11:55.231 +07:00 [DBG] Connection 0HN7VCUKSF7PM established using the following protocol: "Tls13"
2024-11-09 01:11:55.240 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:11:55.250 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:11:55.251 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:11:55.252 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:11:55.253 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:11:55.254 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:11:55.256 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:11:55.258 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:11:55.258 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:11:55.260 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:11:55.262 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:11:55.263 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:11:55.265 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:11:55.267 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:11:55.268 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:11:55.269 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:11:55.277 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:11:55.278 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:11:55.279 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:11:55.280 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:11:55.281 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:11:55.281 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:11:55.282 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:11:55.283 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:11:55.283 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:11:55.284 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:11:55.285 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:11:55.286 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:11:55.287 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:11:55.287 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:11:55.288 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:11:55.289 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:11:55.290 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:11:55.291 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:11:55.292 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:11:55.292 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:11:55.293 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:11:55.294 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:11:55.295 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:11:55.296 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:11:55.296 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:11:55.297 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:11:55.298 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:11:55.317 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:11:55.326 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:11:55.327 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:11:55.327 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:11:55.331 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:11:55.334 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:11:55.336 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:11:55.336 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:11:55.339 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:11:55.437 +07:00 [INF] Executed DbCommand (99ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:11:55.440 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:11:55.442 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:11:55.443 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:11:55.444 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:11:55.447 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:11:55.448 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:11:55.449 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:11:55.449 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:11:55.450 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:11:55.451 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:11:55.454 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 185.1754ms
2024-11-09 01:11:55.456 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:11:55.457 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:11:55.458 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:11:55.459 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:11:55.460 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 221.8707ms
2024-11-09 01:11:56.247 +07:00 [DBG] Connection id "0HN7VCUKSF7PM" received FIN.
2024-11-09 01:11:56.248 +07:00 [DBG] Connection id "0HN7VCUKSF7PM" is closed. The last processed stream ID was 1.
2024-11-09 01:11:56.250 +07:00 [DBG] Connection id "0HN7VCUKSF7PM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:11:56.252 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PM completed.
2024-11-09 01:11:56.253 +07:00 [DBG] Connection id "0HN7VCUKSF7PM" stopped.
2024-11-09 01:12:19.360 +07:00 [DBG] Connection id "0HN7VCUKSF7PN" accepted.
2024-11-09 01:12:19.392 +07:00 [DBG] Connection id "0HN7VCUKSF7PN" started.
2024-11-09 01:12:19.433 +07:00 [DBG] Connection 0HN7VCUKSF7PN established using the following protocol: "Tls13"
2024-11-09 01:12:19.454 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:12:19.457 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:12:19.458 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:12:19.460 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:12:19.462 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:12:19.463 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:12:19.468 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:12:19.473 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:12:19.475 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:12:19.477 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:12:19.478 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:12:19.480 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:12:19.485 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:12:19.488 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:12:19.490 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:12:19.490 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:12:19.509 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:12:19.511 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:12:19.512 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:12:19.513 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:12:19.514 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:12:19.515 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:12:19.515 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:12:19.516 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:12:19.516 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:12:19.517 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:12:19.519 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:12:19.520 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:12:19.520 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:12:19.521 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:12:19.521 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:12:19.522 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:12:19.522 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:12:19.523 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:12:19.524 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:12:19.524 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:12:19.525 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:12:19.525 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:12:19.526 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:12:19.527 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:12:19.531 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:12:19.531 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:12:19.532 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:12:19.545 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:12:19.559 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:12:19.560 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:12:19.561 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:12:19.564 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:12:19.566 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:12:19.567 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:12:19.568 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:12:19.573 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:12:19.692 +07:00 [INF] Executed DbCommand (123ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:12:19.693 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:12:19.694 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:12:19.695 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:12:19.696 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:12:19.697 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:12:19.698 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:12:19.699 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:12:19.699 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:12:19.700 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:12:19.700 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:12:19.703 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 212.4295ms
2024-11-09 01:12:19.704 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:12:19.705 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:12:19.705 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:12:19.706 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:12:19.707 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 257.4624ms
2024-11-09 01:12:21.436 +07:00 [DBG] Connection id "0HN7VCUKSF7PN" received FIN.
2024-11-09 01:12:21.437 +07:00 [DBG] Connection id "0HN7VCUKSF7PN" is closed. The last processed stream ID was 1.
2024-11-09 01:12:21.438 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PN completed.
2024-11-09 01:12:21.438 +07:00 [DBG] Connection id "0HN7VCUKSF7PN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:12:21.446 +07:00 [DBG] Connection id "0HN7VCUKSF7PN" stopped.
2024-11-09 01:15:26.601 +07:00 [DBG] Connection id "0HN7VCUKSF7PO" accepted.
2024-11-09 01:15:26.624 +07:00 [DBG] Connection id "0HN7VCUKSF7PO" started.
2024-11-09 01:15:26.715 +07:00 [DBG] Connection 0HN7VCUKSF7PO established using the following protocol: "Tls13"
2024-11-09 01:15:26.753 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:15:26.758 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:15:26.759 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:15:26.763 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:15:26.765 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:15:26.766 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:15:26.768 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:15:26.771 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:15:26.772 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:15:26.774 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:15:26.776 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:15:26.776 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:15:26.778 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:15:26.780 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:15:26.781 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:15:26.782 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:15:26.790 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:15:26.792 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:15:26.795 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:15:26.796 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:15:26.796 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:15:26.797 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:15:26.797 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:15:26.798 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:15:26.798 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:15:26.799 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:15:26.799 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:15:26.800 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:15:26.801 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:15:26.801 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:15:26.802 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:15:26.802 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:15:26.803 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:15:26.804 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:15:26.804 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:15:26.805 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:15:26.805 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:15:26.806 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:15:26.806 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:15:26.807 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:15:26.808 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:15:26.808 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:15:26.809 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:15:26.832 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:15:26.843 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:15:26.845 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:15:26.845 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:15:26.853 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:15:26.856 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:15:26.856 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:15:26.857 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:15:26.862 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:15:27.036 +07:00 [INF] Executed DbCommand (178ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:15:27.040 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:15:27.041 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:15:27.042 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:15:27.043 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:15:27.046 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:15:27.048 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:15:27.049 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:15:27.049 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:15:27.051 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:15:27.052 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:15:27.054 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 272.6077ms
2024-11-09 01:15:27.055 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:15:27.056 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:15:27.057 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:15:27.057 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:15:27.059 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 331.8761ms
2024-11-09 01:15:32.729 +07:00 [DBG] Connection id "0HN7VCUKSF7PO" received FIN.
2024-11-09 01:15:32.729 +07:00 [DBG] Connection id "0HN7VCUKSF7PO" is closed. The last processed stream ID was 1.
2024-11-09 01:15:32.731 +07:00 [DBG] Connection id "0HN7VCUKSF7PO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:15:32.732 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PO completed.
2024-11-09 01:15:32.733 +07:00 [DBG] Connection id "0HN7VCUKSF7PO" stopped.
2024-11-09 01:18:15.629 +07:00 [DBG] Connection id "0HN7VCUKSF7PP" accepted.
2024-11-09 01:18:15.650 +07:00 [DBG] Connection id "0HN7VCUKSF7PP" started.
2024-11-09 01:18:15.715 +07:00 [DBG] Connection 0HN7VCUKSF7PP established using the following protocol: "Tls13"
2024-11-09 01:18:15.770 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:18:15.778 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:18:15.781 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:18:15.785 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:18:15.788 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:18:15.789 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:18:15.796 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:18:15.804 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:18:15.807 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:18:15.814 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:18:15.816 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:18:15.818 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:18:15.822 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:18:15.824 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:18:15.825 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:18:15.827 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:18:15.847 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:18:15.851 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:18:15.853 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:18:15.854 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:18:15.855 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:18:15.856 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:18:15.856 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:18:15.857 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:18:15.858 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:18:15.859 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:18:15.860 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:18:15.860 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:18:15.861 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:18:15.862 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:18:15.862 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:18:15.863 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:18:15.864 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:18:15.865 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:18:15.866 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:18:15.867 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:18:15.869 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:18:15.870 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:18:15.870 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:18:15.871 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:18:15.872 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:18:15.872 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:18:15.873 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:18:16.250 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:18:16.308 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:18:16.310 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:18:16.311 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:18:16.321 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:18:16.326 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:18:16.327 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:18:16.328 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-09 01:18:16.332 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:18:16.515 +07:00 [INF] Executed DbCommand (185ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:18:16.517 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:18:16.518 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:18:16.519 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:18:16.520 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:18:16.523 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:18:16.525 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:18:16.525 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:18:16.525 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:18:16.527 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:18:16.528 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:18:16.534 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 706.7208ms
2024-11-09 01:18:16.536 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:18:16.538 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:18:16.538 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:18:16.539 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:18:16.541 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 773.5366ms
2024-11-09 01:18:18.126 +07:00 [DBG] Connection id "0HN7VCUKSF7PP" received FIN.
2024-11-09 01:18:18.129 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PP completed.
2024-11-09 01:18:18.129 +07:00 [DBG] Connection id "0HN7VCUKSF7PP" is closed. The last processed stream ID was 1.
2024-11-09 01:18:18.130 +07:00 [DBG] Connection id "0HN7VCUKSF7PP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:18:18.139 +07:00 [DBG] Connection id "0HN7VCUKSF7PP" stopped.
2024-11-09 01:19:20.602 +07:00 [DBG] Connection id "0HN7VCUKSF7PQ" accepted.
2024-11-09 01:19:20.631 +07:00 [DBG] Connection id "0HN7VCUKSF7PQ" started.
2024-11-09 01:19:20.727 +07:00 [DBG] Connection 0HN7VCUKSF7PQ established using the following protocol: "Tls13"
2024-11-09 01:19:20.881 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:19:20.966 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:19:20.972 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:19:20.980 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:19:20.986 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:19:21.000 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:19:21.062 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:19:21.106 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:19:21.111 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:19:21.133 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:19:21.152 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:19:21.155 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:19:21.162 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:19:21.169 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:19:21.172 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:19:21.175 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:19:21.215 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:19:21.218 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:19:21.223 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:19:21.224 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:19:21.225 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:19:21.225 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:19:21.226 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:19:21.227 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:19:21.227 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:19:21.228 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:19:21.229 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:19:21.230 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:19:21.230 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:19:21.231 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:19:21.233 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:19:21.235 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:19:21.236 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:19:21.238 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:19:21.238 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:19:21.239 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:19:21.241 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:19:21.242 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:19:21.243 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:19:21.243 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:19:21.244 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:19:21.244 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:19:21.245 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:19:21.308 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:19:21.348 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:19:21.349 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:19:21.350 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:19:21.361 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:19:21.365 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:19:21.367 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:19:21.369 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-11-09 01:19:21.378 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:19:21.602 +07:00 [INF] Executed DbCommand (229ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:19:21.608 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:19:21.611 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 5ms reading results.
2024-11-09 01:19:21.613 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:19:21.618 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (5ms).
2024-11-09 01:19:21.625 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:19:21.628 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:19:21.628 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:19:21.629 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:19:21.631 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:19:21.632 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:19:21.647 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 473.4239ms
2024-11-09 01:19:21.649 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:19:21.653 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:19:21.654 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:19:21.655 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:19:21.656 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 784.7273ms
2024-11-09 01:19:23.569 +07:00 [DBG] Connection id "0HN7VCUKSF7PQ" received FIN.
2024-11-09 01:19:23.571 +07:00 [DBG] Connection id "0HN7VCUKSF7PQ" is closed. The last processed stream ID was 1.
2024-11-09 01:19:23.571 +07:00 [DBG] Connection id "0HN7VCUKSF7PQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:19:23.572 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PQ completed.
2024-11-09 01:19:23.575 +07:00 [DBG] Connection id "0HN7VCUKSF7PQ" stopped.
2024-11-09 01:19:47.017 +07:00 [DBG] Connection id "0HN7VCUKSF7PR" accepted.
2024-11-09 01:19:47.055 +07:00 [DBG] Connection id "0HN7VCUKSF7PR" started.
2024-11-09 01:19:47.098 +07:00 [DBG] Connection 0HN7VCUKSF7PR established using the following protocol: "Tls13"
2024-11-09 01:19:47.183 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:19:47.187 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:19:47.190 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:19:47.193 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:19:47.224 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:19:47.256 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:19:47.263 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:19:47.266 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:19:47.266 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:19:47.269 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:19:47.274 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:19:47.275 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:19:47.278 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:19:47.281 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:19:47.283 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:19:47.284 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:19:47.292 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:19:47.293 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:19:47.295 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:19:47.296 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:19:47.297 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:19:47.298 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:19:47.298 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:19:47.299 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:19:47.300 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:19:47.301 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:19:47.302 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:19:47.303 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:19:47.303 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:19:47.304 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:19:47.305 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:19:47.305 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:19:47.306 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:19:47.307 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:19:47.307 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:19:47.308 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:19:47.309 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:19:47.310 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:19:47.310 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:19:47.311 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:19:47.312 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:19:47.313 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:19:47.314 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:19:47.331 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:19:47.341 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:19:47.342 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 01:19:47.343 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:19:47.348 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:19:47.352 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:19:47.353 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:19:47.354 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:19:47.357 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:19:47.508 +07:00 [INF] Executed DbCommand (153ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:19:47.510 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:19:47.511 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:19:47.512 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:19:47.513 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:19:47.515 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:19:47.517 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:19:47.517 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:19:47.518 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:19:47.518 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:19:47.519 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:19:47.526 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 242.2578ms
2024-11-09 01:19:47.527 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:19:47.528 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:19:47.529 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:19:47.529 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:19:47.530 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 348.1125ms
2024-11-09 01:19:49.078 +07:00 [DBG] Connection id "0HN7VCUKSF7PR" received FIN.
2024-11-09 01:19:49.080 +07:00 [DBG] Connection id "0HN7VCUKSF7PR" is closed. The last processed stream ID was 1.
2024-11-09 01:19:49.081 +07:00 [DBG] Connection id "0HN7VCUKSF7PR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:19:49.082 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PR completed.
2024-11-09 01:19:49.084 +07:00 [DBG] Connection id "0HN7VCUKSF7PR" stopped.
2024-11-09 01:20:31.185 +07:00 [DBG] Connection id "0HN7VCUKSF7PS" accepted.
2024-11-09 01:20:31.200 +07:00 [DBG] Connection id "0HN7VCUKSF7PS" started.
2024-11-09 01:20:31.275 +07:00 [DBG] Connection 0HN7VCUKSF7PS established using the following protocol: "Tls13"
2024-11-09 01:20:31.325 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:20:31.382 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:20:31.385 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:20:31.389 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:20:31.391 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:20:31.394 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:20:31.403 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:20:31.410 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:20:31.412 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:20:31.416 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:20:31.419 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:20:31.421 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:20:31.426 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:20:31.430 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:20:31.431 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:20:31.432 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:20:31.446 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:20:31.447 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:20:31.448 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:20:31.449 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:20:31.450 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:20:31.450 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:20:31.451 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:20:31.452 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:20:31.452 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:20:31.453 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:20:31.454 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:20:31.455 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:20:31.456 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:20:31.456 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:20:31.457 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:20:31.457 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:20:31.458 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:20:31.459 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:20:31.460 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:20:31.461 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:20:31.461 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:20:31.462 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:20:31.463 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:20:31.463 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:20:31.464 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:20:31.465 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:20:31.465 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:20:31.483 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:20:31.492 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:20:31.494 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:20:31.494 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:20:31.499 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:20:31.505 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:20:31.506 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:20:31.507 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-09 01:20:31.510 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:20:31.659 +07:00 [INF] Executed DbCommand (151ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:20:31.661 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:20:31.663 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:20:31.664 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:20:31.664 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:20:31.667 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:20:31.669 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:20:31.669 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:20:31.670 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:20:31.671 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:20:31.671 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:20:31.675 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 243.2137ms
2024-11-09 01:20:31.676 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:20:31.677 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:20:31.678 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:20:31.678 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:20:31.679 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 359.0129ms
2024-11-09 01:20:34.456 +07:00 [DBG] Connection id "0HN7VCUKSF7PS" received FIN.
2024-11-09 01:20:34.457 +07:00 [DBG] Connection id "0HN7VCUKSF7PS" is closed. The last processed stream ID was 1.
2024-11-09 01:20:34.457 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PS completed.
2024-11-09 01:20:34.458 +07:00 [DBG] Connection id "0HN7VCUKSF7PS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:20:34.467 +07:00 [DBG] Connection id "0HN7VCUKSF7PS" stopped.
2024-11-09 01:21:02.373 +07:00 [DBG] Connection id "0HN7VCUKSF7PT" accepted.
2024-11-09 01:21:02.411 +07:00 [DBG] Connection id "0HN7VCUKSF7PT" started.
2024-11-09 01:21:02.738 +07:00 [DBG] Connection 0HN7VCUKSF7PT established using the following protocol: "Tls13"
2024-11-09 01:21:02.857 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:21:02.877 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:21:02.880 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:21:02.888 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:21:02.896 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:21:02.901 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:21:02.914 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:21:02.925 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:21:02.928 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:21:02.942 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:21:02.947 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:21:02.948 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:21:02.953 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:21:02.955 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:21:02.956 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:21:02.961 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:21:02.999 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:21:03.005 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:21:03.010 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:21:03.011 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:21:03.011 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:21:03.012 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:21:03.013 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:21:03.013 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:21:03.014 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:21:03.017 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:21:03.018 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:21:03.019 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:21:03.019 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:21:03.020 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:21:03.020 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:21:03.021 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:21:03.022 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:21:03.023 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:21:03.024 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:21:03.024 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:21:03.026 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:21:03.026 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:21:03.027 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:21:03.027 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:21:03.028 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:21:03.029 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:21:03.029 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:21:03.084 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:21:03.111 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:21:03.117 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:21:03.119 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:21:03.133 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:21:03.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:21:03.137 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:21:03.139 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:21:03.146 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:21:03.347 +07:00 [INF] Executed DbCommand (204ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:21:03.350 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:21:03.352 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:21:03.354 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:21:03.355 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:21:03.363 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:21:03.366 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:21:03.367 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:21:03.367 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:21:03.369 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:21:03.370 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:21:03.379 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 422.4213ms
2024-11-09 01:21:03.380 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:21:03.381 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:21:03.382 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:21:03.383 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:21:03.385 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 530.3725ms
2024-11-09 01:21:04.743 +07:00 [DBG] Connection id "0HN7VCUKSF7PT" received FIN.
2024-11-09 01:21:04.745 +07:00 [DBG] Connection id "0HN7VCUKSF7PT" is closed. The last processed stream ID was 1.
2024-11-09 01:21:04.746 +07:00 [DBG] Connection id "0HN7VCUKSF7PT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:21:04.749 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PT completed.
2024-11-09 01:21:04.755 +07:00 [DBG] Connection id "0HN7VCUKSF7PT" stopped.
2024-11-09 01:21:38.289 +07:00 [DBG] Connection id "0HN7VCUKSF7PU" accepted.
2024-11-09 01:21:38.295 +07:00 [DBG] Connection id "0HN7VCUKSF7PU" started.
2024-11-09 01:21:38.352 +07:00 [DBG] Connection 0HN7VCUKSF7PU established using the following protocol: "Tls13"
2024-11-09 01:21:38.451 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:21:38.455 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:21:38.456 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:21:38.458 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:21:38.459 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:21:38.461 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:21:38.466 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:21:38.468 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:21:38.470 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:21:38.472 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:21:38.474 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:21:38.475 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:21:38.478 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:21:38.480 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:21:38.481 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:21:38.482 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:21:38.490 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:21:38.491 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:21:38.492 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:21:38.492 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:21:38.493 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:21:38.494 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:21:38.494 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:21:38.495 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:21:38.495 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:21:38.496 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:21:38.497 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:21:38.498 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:21:38.498 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:21:38.499 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:21:38.500 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:21:38.500 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:21:38.501 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:21:38.501 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:21:38.502 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:21:38.503 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:21:38.503 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:21:38.504 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:21:38.504 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:21:38.505 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:21:38.505 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:21:38.506 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:21:38.506 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:21:38.522 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:21:38.527 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:21:38.528 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:21:38.529 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:21:38.532 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:21:38.534 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:21:38.535 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:21:38.536 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:21:38.538 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:21:38.652 +07:00 [INF] Executed DbCommand (115ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:21:38.653 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:21:38.654 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:21:38.655 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:21:38.656 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:21:38.657 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:21:38.659 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:21:38.659 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:21:38.659 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:21:38.660 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:21:38.660 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:21:38.663 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 181.2911ms
2024-11-09 01:21:38.664 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:21:38.665 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:21:38.665 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:21:38.666 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:21:38.667 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 303.1495ms
2024-11-09 01:21:39.762 +07:00 [DBG] Connection id "0HN7VCUKSF7PU" received FIN.
2024-11-09 01:21:39.766 +07:00 [DBG] Connection id "0HN7VCUKSF7PU" is closed. The last processed stream ID was 1.
2024-11-09 01:21:39.766 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PU completed.
2024-11-09 01:21:39.767 +07:00 [DBG] Connection id "0HN7VCUKSF7PU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:21:39.780 +07:00 [DBG] Connection id "0HN7VCUKSF7PU" stopped.
2024-11-09 01:22:05.449 +07:00 [DBG] Connection id "0HN7VCUKSF7PV" accepted.
2024-11-09 01:22:05.575 +07:00 [DBG] Connection id "0HN7VCUKSF7PV" started.
2024-11-09 01:22:06.117 +07:00 [DBG] Connection 0HN7VCUKSF7PV established using the following protocol: "Tls13"
2024-11-09 01:22:06.301 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:22:06.323 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:22:06.334 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:22:06.352 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:22:06.363 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:22:06.375 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:22:06.478 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:22:06.487 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:22:06.492 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:22:06.508 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:22:06.516 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:22:06.518 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:22:06.528 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:22:06.531 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:22:06.560 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:22:06.562 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:22:06.613 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:22:06.624 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:22:06.633 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:22:06.642 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:22:06.644 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:22:06.653 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:22:06.658 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:22:06.663 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:22:06.665 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:22:06.669 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:22:06.675 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:22:06.681 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:22:06.684 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:22:06.690 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:22:06.691 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:22:06.699 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:22:06.700 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:22:06.705 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:22:06.707 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:22:06.718 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:22:06.731 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:22:06.733 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:22:06.734 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:22:06.739 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:22:06.740 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:22:06.741 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:22:06.746 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:22:06.957 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:22:07.551 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:22:07.561 +07:00 [DBG] Created DbConnection. (7ms).
2024-11-09 01:22:07.567 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:22:07.578 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:22:07.585 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:22:07.589 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2024-11-09 01:22:07.592 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-11-09 01:22:07.603 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:22:08.854 +07:00 [INF] Executed DbCommand (1,218ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:22:08.926 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:22:08.930 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 30ms reading results.
2024-11-09 01:22:08.932 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:22:08.955 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (22ms).
2024-11-09 01:22:08.965 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:22:08.970 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:22:08.971 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:22:08.972 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:22:08.974 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:22:08.976 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:22:09.004 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 2442.7902ms
2024-11-09 01:22:09.005 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:22:09.006 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:22:09.007 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:22:09.008 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:22:09.010 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 2793.6592ms
2024-11-09 01:22:09.934 +07:00 [DBG] Connection id "0HN7VCUKSF7PV" received FIN.
2024-11-09 01:22:09.937 +07:00 [DBG] Connection id "0HN7VCUKSF7PV" is closed. The last processed stream ID was 1.
2024-11-09 01:22:09.939 +07:00 [DBG] Connection id "0HN7VCUKSF7PV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:22:09.943 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7PV completed.
2024-11-09 01:22:09.966 +07:00 [DBG] Connection id "0HN7VCUKSF7PV" stopped.
2024-11-09 01:22:27.331 +07:00 [DBG] Connection id "0HN7VCUKSF7Q0" accepted.
2024-11-09 01:22:27.346 +07:00 [DBG] Connection id "0HN7VCUKSF7Q0" started.
2024-11-09 01:22:27.401 +07:00 [DBG] Connection 0HN7VCUKSF7Q0 established using the following protocol: "Tls13"
2024-11-09 01:22:27.532 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:22:27.543 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:22:27.545 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:22:27.549 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:22:27.556 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:22:27.558 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:22:27.568 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:22:27.573 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:22:27.574 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:22:27.579 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:22:27.581 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:22:27.583 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:22:27.587 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:22:27.593 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:22:27.594 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:22:27.595 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:22:27.614 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:22:27.615 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:22:27.617 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:22:27.618 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:22:27.619 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:22:27.619 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:22:27.620 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:22:27.621 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:22:27.621 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:22:27.622 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:22:27.623 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:22:27.623 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:22:27.624 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:22:27.624 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:22:27.625 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:22:27.626 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:22:27.626 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:22:27.627 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:22:27.628 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:22:27.629 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:22:27.630 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:22:27.631 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:22:27.632 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:22:27.632 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:22:27.633 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:22:27.634 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:22:27.634 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:22:27.666 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:22:27.683 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:22:27.684 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:22:27.684 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:22:27.691 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:22:27.695 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:22:27.696 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:22:27.698 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-09 01:22:27.704 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:22:27.972 +07:00 [INF] Executed DbCommand (272ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:22:27.977 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:22:27.978 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-11-09 01:22:27.981 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:22:27.982 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 01:22:27.989 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:22:27.991 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:22:27.992 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:22:27.992 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:22:27.993 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:22:27.995 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:22:28.003 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 406.945ms
2024-11-09 01:22:28.005 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:22:28.006 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:22:28.007 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:22:28.009 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:22:28.009 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 589.4579ms
2024-11-09 01:22:30.006 +07:00 [DBG] Connection id "0HN7VCUKSF7Q0" received FIN.
2024-11-09 01:22:30.009 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7Q0 completed.
2024-11-09 01:22:30.009 +07:00 [DBG] Connection id "0HN7VCUKSF7Q0" is closed. The last processed stream ID was 1.
2024-11-09 01:22:30.014 +07:00 [DBG] Connection id "0HN7VCUKSF7Q0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:22:30.035 +07:00 [DBG] Connection id "0HN7VCUKSF7Q0" stopped.
2024-11-09 01:23:00.848 +07:00 [DBG] Connection id "0HN7VCUKSF7Q1" accepted.
2024-11-09 01:23:00.980 +07:00 [DBG] Connection id "0HN7VCUKSF7Q1" started.
2024-11-09 01:23:01.290 +07:00 [DBG] Connection 0HN7VCUKSF7Q1 established using the following protocol: "Tls13"
2024-11-09 01:23:01.361 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:23:01.376 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:23:01.377 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:23:01.385 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:23:01.386 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:23:01.387 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:23:01.389 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:23:01.394 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:23:01.398 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:23:01.418 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:23:01.427 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:23:01.429 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:23:01.451 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:23:01.456 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:23:01.457 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:23:01.458 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:23:01.697 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:23:01.698 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:23:01.699 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:23:01.700 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:23:01.700 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:23:01.701 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:23:01.701 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:23:01.702 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:23:01.702 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:23:01.703 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:23:01.704 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:01.704 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:01.705 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:01.706 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:23:01.706 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:01.707 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:23:01.707 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:23:01.708 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:23:01.709 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:23:01.709 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:23:01.710 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:23:01.710 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:23:01.711 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:23:01.712 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:23:01.712 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:23:01.713 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:23:01.713 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:23:01.852 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:23:01.859 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:23:01.860 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:23:01.861 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:01.864 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:01.869 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:23:01.870 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:23:01.871 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-09 01:23:01.875 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:23:02.132 +07:00 [INF] Executed DbCommand (260ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:23:02.133 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:02.134 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:23:02.135 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:02.136 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:23:02.138 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:23:02.139 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:23:02.140 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:23:02.140 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:23:02.141 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:23:02.141 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:23:02.143 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 685.3968ms
2024-11-09 01:23:02.144 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:23:02.145 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:23:02.145 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:02.146 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:23:02.147 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 786.8713ms
2024-11-09 01:23:05.601 +07:00 [DBG] Connection id "0HN7VCUKSF7Q1" received FIN.
2024-11-09 01:23:05.602 +07:00 [DBG] Connection id "0HN7VCUKSF7Q1" is closed. The last processed stream ID was 1.
2024-11-09 01:23:05.602 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7Q1 completed.
2024-11-09 01:23:05.603 +07:00 [DBG] Connection id "0HN7VCUKSF7Q1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:23:05.614 +07:00 [DBG] Connection id "0HN7VCUKSF7Q1" stopped.
2024-11-09 01:23:06.789 +07:00 [DBG] Connection id "0HN7VCUKSF7Q2" accepted.
2024-11-09 01:23:06.790 +07:00 [DBG] Connection id "0HN7VCUKSF7Q2" started.
2024-11-09 01:23:06.795 +07:00 [DBG] Connection 0HN7VCUKSF7Q2 established using the following protocol: "Tls13"
2024-11-09 01:23:06.799 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:23:06.801 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:23:06.801 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:23:06.802 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:23:06.802 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:23:06.803 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:23:06.804 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:23:06.805 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:23:06.805 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:23:06.806 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:23:06.807 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:23:06.808 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:23:06.809 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:23:06.810 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:23:06.811 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:23:06.812 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:23:06.820 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:23:06.820 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:23:06.821 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:23:06.822 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:23:06.822 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:23:06.823 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:23:06.824 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:23:06.824 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:23:06.826 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:23:06.827 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:23:06.828 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:06.828 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:06.829 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:06.830 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:23:06.830 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:06.831 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:23:06.832 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:23:06.832 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:23:06.833 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:23:06.834 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:23:06.834 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:23:06.835 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:23:06.838 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:23:06.838 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:23:06.839 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:23:06.840 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:23:06.840 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:23:06.843 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:23:06.845 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:23:06.845 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:23:06.846 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:06.847 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:06.847 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:23:06.848 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:23:06.850 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:23:06.850 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:23:06.870 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:23:06.872 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:06.873 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:23:06.874 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:06.875 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:23:06.876 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:23:06.877 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:23:06.878 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:23:06.878 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:23:06.879 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:23:06.879 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:23:06.881 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 69.1313ms
2024-11-09 01:23:06.882 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:23:06.883 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:23:06.883 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:06.884 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:23:06.885 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 86.3397ms
2024-11-09 01:23:10.611 +07:00 [DBG] Connection id "0HN7VCUKSF7Q2" received FIN.
2024-11-09 01:23:10.612 +07:00 [DBG] Connection id "0HN7VCUKSF7Q2" is closed. The last processed stream ID was 1.
2024-11-09 01:23:10.612 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7Q2 completed.
2024-11-09 01:23:10.612 +07:00 [DBG] Connection id "0HN7VCUKSF7Q2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:23:10.626 +07:00 [DBG] Connection id "0HN7VCUKSF7Q2" stopped.
2024-11-09 01:23:17.406 +07:00 [DBG] Connection id "0HN7VCUKSF7Q3" accepted.
2024-11-09 01:23:17.406 +07:00 [DBG] Connection id "0HN7VCUKSF7Q3" started.
2024-11-09 01:23:17.412 +07:00 [DBG] Connection 0HN7VCUKSF7Q3 established using the following protocol: "Tls13"
2024-11-09 01:23:17.413 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:23:17.414 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:23:17.415 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:23:17.415 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:23:17.416 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:23:17.416 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:23:17.417 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:23:17.417 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:23:17.418 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:23:17.419 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:23:17.420 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:23:17.421 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:23:17.421 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:23:17.423 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:23:17.423 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:23:17.424 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:23:17.425 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:23:17.426 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:23:17.427 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:23:17.428 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:23:17.429 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:23:17.429 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:23:17.430 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:23:17.431 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:23:17.431 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:23:17.432 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:23:17.433 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:17.434 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:17.435 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:17.436 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:23:17.436 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:17.437 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:23:17.438 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:23:17.439 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:23:17.439 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:23:17.440 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:23:17.441 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:23:17.441 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:23:17.442 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:23:17.444 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:23:17.444 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:23:17.445 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:23:17.446 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:23:17.448 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:23:17.450 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:23:17.450 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:23:17.451 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:17.452 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:17.452 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:23:17.453 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:23:17.454 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:23:17.454 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:23:17.469 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:23:17.470 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:17.471 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:23:17.472 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:17.472 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:23:17.473 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:23:17.474 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:23:17.475 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:23:17.475 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:23:17.476 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:23:17.476 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:23:17.478 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 53.4166ms
2024-11-09 01:23:17.479 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:23:17.479 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:23:17.480 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:17.481 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:23:17.482 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 68.8624ms
2024-11-09 01:23:25.616 +07:00 [DBG] Connection id "0HN7VCUKSF7Q3" received FIN.
2024-11-09 01:23:25.617 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7Q3 completed.
2024-11-09 01:23:25.617 +07:00 [DBG] Connection id "0HN7VCUKSF7Q3" is closed. The last processed stream ID was 1.
2024-11-09 01:23:25.618 +07:00 [DBG] Connection id "0HN7VCUKSF7Q3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:23:25.630 +07:00 [DBG] Connection id "0HN7VCUKSF7Q3" stopped.
2024-11-09 01:23:41.776 +07:00 [DBG] Connection id "0HN7VCUKSF7Q4" accepted.
2024-11-09 01:23:41.777 +07:00 [DBG] Connection id "0HN7VCUKSF7Q4" started.
2024-11-09 01:23:41.790 +07:00 [DBG] Connection 0HN7VCUKSF7Q4 established using the following protocol: "Tls13"
2024-11-09 01:23:41.797 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:23:41.799 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:23:41.800 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:23:41.800 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:23:41.801 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:23:41.802 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:23:41.803 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:23:41.803 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:23:41.804 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:23:41.806 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:23:41.807 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:23:41.811 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:23:41.812 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:23:41.814 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:23:41.815 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:23:41.816 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:23:41.820 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:23:41.821 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:23:41.822 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:23:41.823 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:23:41.824 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:23:41.824 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:23:41.825 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:23:41.834 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:23:41.835 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:23:41.835 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:23:41.836 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:41.838 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:41.840 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:41.841 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:23:41.843 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:23:41.843 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:23:41.845 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:23:41.846 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:23:41.848 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:23:41.848 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:23:41.849 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:23:41.850 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:23:41.851 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:23:41.853 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:23:41.854 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:23:41.855 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:23:41.856 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:23:41.864 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:23:41.872 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:23:41.872 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:23:41.873 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:41.886 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:41.890 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:23:41.890 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:23:41.891 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:23:41.895 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:23:41.905 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:23:41.907 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:41.908 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:23:41.909 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:41.910 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:23:41.912 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:23:41.914 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:23:41.914 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:23:41.915 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:23:41.915 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:23:41.917 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:23:41.918 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 101.8927ms
2024-11-09 01:23:41.919 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:23:41.920 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:23:41.920 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:23:41.922 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:23:41.923 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 128.5561ms
2024-11-09 01:23:45.660 +07:00 [DBG] Connection id "0HN7VCUKSF7Q4" received FIN.
2024-11-09 01:23:45.660 +07:00 [DBG] Connection id "0HN7VCUKSF7Q4" is closed. The last processed stream ID was 1.
2024-11-09 01:23:45.661 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7Q4 completed.
2024-11-09 01:23:45.661 +07:00 [DBG] Connection id "0HN7VCUKSF7Q4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:23:45.664 +07:00 [DBG] Connection id "0HN7VCUKSF7Q4" stopped.
2024-11-09 01:24:07.488 +07:00 [DBG] Connection id "0HN7VCUKSF7Q5" accepted.
2024-11-09 01:24:07.608 +07:00 [DBG] Connection id "0HN7VCUKSF7Q5" started.
2024-11-09 01:24:07.678 +07:00 [DBG] Connection 0HN7VCUKSF7Q5 established using the following protocol: "Tls13"
2024-11-09 01:24:07.744 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:24:07.755 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:24:07.757 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:24:07.763 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:24:07.768 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:24:07.771 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:24:07.785 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:24:07.789 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:24:07.791 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:24:07.797 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:24:07.800 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:24:07.803 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:24:07.810 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:24:07.814 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:24:07.815 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:24:07.818 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:24:07.848 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:24:07.853 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:24:07.855 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:24:07.857 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:24:07.857 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:24:07.858 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:24:07.859 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:24:07.860 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:24:07.861 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:24:07.861 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:24:07.862 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:07.863 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:07.863 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:07.864 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:24:07.865 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:07.866 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:24:07.866 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:24:07.867 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:24:07.868 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:24:07.869 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:24:07.870 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:24:07.870 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:24:07.871 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:24:07.872 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:24:07.872 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:24:07.873 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:24:07.873 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:24:07.908 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:24:07.934 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:24:07.938 +07:00 [DBG] Created DbConnection. (5ms).
2024-11-09 01:24:07.939 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:07.946 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:07.955 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:24:07.957 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2024-11-09 01:24:07.959 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-11-09 01:24:07.966 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:24:08.206 +07:00 [INF] Executed DbCommand (243ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:24:08.211 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:08.214 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 5ms reading results.
2024-11-09 01:24:08.216 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:08.217 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:24:08.225 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:24:08.228 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:24:08.229 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:24:08.229 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:24:08.230 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:24:08.232 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:24:08.247 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 429.8399ms
2024-11-09 01:24:08.249 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:24:08.249 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:24:08.250 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:08.252 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:24:08.254 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 513.9845ms
2024-11-09 01:24:11.191 +07:00 [DBG] Connection id "0HN7VCUKSF7Q5" received FIN.
2024-11-09 01:24:11.198 +07:00 [DBG] Connection id "0HN7VCUKSF7Q5" is closed. The last processed stream ID was 1.
2024-11-09 01:24:11.199 +07:00 [DBG] Connection id "0HN7VCUKSF7Q5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:24:11.200 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7Q5 completed.
2024-11-09 01:24:11.214 +07:00 [DBG] Connection id "0HN7VCUKSF7Q5" stopped.
2024-11-09 01:24:26.655 +07:00 [DBG] Connection id "0HN7VCUKSF7Q6" accepted.
2024-11-09 01:24:26.668 +07:00 [DBG] Connection id "0HN7VCUKSF7Q6" started.
2024-11-09 01:24:26.719 +07:00 [DBG] Connection 0HN7VCUKSF7Q6 established using the following protocol: "Tls13"
2024-11-09 01:24:26.738 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:24:26.747 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:24:26.751 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:24:26.753 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:24:26.755 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:24:26.756 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:24:26.762 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:24:26.765 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:24:26.770 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:24:26.775 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:24:26.778 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:24:26.779 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:24:26.783 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:24:26.786 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:24:26.787 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:24:26.788 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:24:26.805 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:24:26.807 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:24:26.808 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:24:26.811 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:24:26.811 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:24:26.812 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:24:26.813 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:24:26.814 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:24:26.814 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:24:26.818 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:24:26.818 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:26.819 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:26.820 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:26.823 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:24:26.824 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:26.825 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:24:26.825 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:24:26.827 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:24:26.827 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:24:26.828 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:24:26.829 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:24:26.830 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:24:26.831 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:24:26.831 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:24:26.833 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:24:26.834 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:24:26.834 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:24:26.863 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:24:26.882 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:24:26.883 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:24:26.884 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:26.889 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:26.894 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:24:26.896 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:24:26.897 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-09 01:24:26.902 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:24:27.127 +07:00 [INF] Executed DbCommand (228ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:24:27.129 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:27.131 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:24:27.134 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:27.136 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:24:27.141 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:24:27.142 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:24:27.143 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:24:27.143 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:24:27.144 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:24:27.146 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:24:27.157 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 369.1518ms
2024-11-09 01:24:27.158 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:24:27.159 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:24:27.160 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:27.161 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:24:27.163 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 430.025ms
2024-11-09 01:24:31.192 +07:00 [DBG] Connection id "0HN7VCUKSF7Q6" received FIN.
2024-11-09 01:24:31.193 +07:00 [DBG] Connection id "0HN7VCUKSF7Q6" is closed. The last processed stream ID was 1.
2024-11-09 01:24:31.193 +07:00 [DBG] Connection id "0HN7VCUKSF7Q6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:24:31.196 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7Q6 completed.
2024-11-09 01:24:31.210 +07:00 [DBG] Connection id "0HN7VCUKSF7Q6" stopped.
2024-11-09 01:24:42.690 +07:00 [DBG] Connection id "0HN7VCUKSF7Q7" accepted.
2024-11-09 01:24:42.695 +07:00 [DBG] Connection id "0HN7VCUKSF7Q7" started.
2024-11-09 01:24:42.722 +07:00 [DBG] Connection 0HN7VCUKSF7Q7 established using the following protocol: "Tls13"
2024-11-09 01:24:42.728 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:24:42.731 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:24:42.731 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:24:42.732 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:24:42.732 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:24:42.733 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:24:42.734 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:24:42.735 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:24:42.736 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:24:42.738 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:24:42.739 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:24:42.740 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:24:42.743 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:24:42.744 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:24:42.745 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:24:42.746 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:24:42.750 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:24:42.751 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:24:42.752 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:24:42.753 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:24:42.754 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:24:42.756 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:24:42.756 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:24:42.757 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:24:42.758 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:24:42.759 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:24:42.760 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:42.761 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:42.765 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:42.765 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:24:42.766 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:42.767 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:24:42.768 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:24:42.768 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:24:42.769 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:24:42.770 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:24:42.770 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:24:42.771 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:24:42.773 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:24:42.774 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:24:42.775 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:24:42.776 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:24:42.777 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:24:42.869 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:24:42.872 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:24:42.873 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:24:42.873 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:42.876 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:42.878 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:24:42.879 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:24:42.879 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:24:42.884 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:24:43.000 +07:00 [INF] Executed DbCommand (119ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:24:43.003 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:43.003 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:24:43.004 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:43.005 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:24:43.006 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:24:43.007 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:24:43.008 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:24:43.009 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:24:43.009 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:24:43.010 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:24:43.012 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 266.099ms
2024-11-09 01:24:43.014 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:24:43.014 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:24:43.014 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:43.015 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:24:43.017 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 288.7564ms
2024-11-09 01:24:46.222 +07:00 [DBG] Connection id "0HN7VCUKSF7Q7" received FIN.
2024-11-09 01:24:46.222 +07:00 [DBG] Connection id "0HN7VCUKSF7Q7" is closed. The last processed stream ID was 1.
2024-11-09 01:24:46.223 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7Q7 completed.
2024-11-09 01:24:46.223 +07:00 [DBG] Connection id "0HN7VCUKSF7Q7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:24:46.234 +07:00 [DBG] Connection id "0HN7VCUKSF7Q7" stopped.
2024-11-09 01:24:50.144 +07:00 [DBG] Connection id "0HN7VCUKSF7Q8" accepted.
2024-11-09 01:24:50.145 +07:00 [DBG] Connection id "0HN7VCUKSF7Q8" started.
2024-11-09 01:24:50.154 +07:00 [DBG] Connection 0HN7VCUKSF7Q8 established using the following protocol: "Tls13"
2024-11-09 01:24:50.156 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:24:50.159 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:24:50.159 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:24:50.160 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:24:50.163 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:24:50.164 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:24:50.165 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:24:50.166 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:24:50.167 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:24:50.170 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:24:50.172 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:24:50.173 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:24:50.174 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:24:50.177 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:24:50.178 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:24:50.180 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:24:50.181 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:24:50.184 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:24:50.185 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:24:50.186 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:24:50.187 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:24:50.188 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:24:50.189 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:24:50.189 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:24:50.191 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:24:50.192 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:24:50.193 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:50.193 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:50.194 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:50.194 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:24:50.195 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:24:50.196 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:24:50.197 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:24:50.198 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:24:50.199 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:24:50.199 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:24:50.200 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:24:50.201 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:24:50.201 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:24:50.202 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:24:50.203 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:24:50.204 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:24:50.205 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:24:50.207 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:24:50.208 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:24:50.209 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:24:50.209 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:50.210 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:50.211 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:24:50.212 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:24:50.213 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:24:50.214 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:24:50.221 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:24:50.222 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:50.223 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:24:50.223 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:50.224 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:24:50.226 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:24:50.228 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:24:50.228 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:24:50.229 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:24:50.229 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:24:50.230 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:24:50.231 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 51.403ms
2024-11-09 01:24:50.233 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:24:50.233 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:24:50.234 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:24:50.235 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:24:50.236 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 79.3439ms
2024-11-09 01:24:56.247 +07:00 [DBG] Connection id "0HN7VCUKSF7Q8" received FIN.
2024-11-09 01:24:56.248 +07:00 [DBG] Connection id "0HN7VCUKSF7Q8" is closed. The last processed stream ID was 1.
2024-11-09 01:24:56.248 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7Q8 completed.
2024-11-09 01:24:56.249 +07:00 [DBG] Connection id "0HN7VCUKSF7Q8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:24:56.261 +07:00 [DBG] Connection id "0HN7VCUKSF7Q8" stopped.
2024-11-09 01:25:00.326 +07:00 [DBG] Connection id "0HN7VCUKSF7Q9" accepted.
2024-11-09 01:25:00.327 +07:00 [DBG] Connection id "0HN7VCUKSF7Q9" started.
2024-11-09 01:25:00.340 +07:00 [DBG] Connection 0HN7VCUKSF7Q9 established using the following protocol: "Tls13"
2024-11-09 01:25:00.347 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:25:00.349 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:25:00.350 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:25:00.350 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:25:00.351 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:25:00.351 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:25:00.352 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:25:00.353 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:25:00.353 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:25:00.353 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:25:00.354 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:25:00.355 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:25:00.355 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:25:00.356 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:25:00.357 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:25:00.358 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:25:00.359 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:25:00.359 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:25:00.360 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:25:00.361 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:25:00.361 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:25:00.362 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:25:00.363 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:25:00.364 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:25:00.365 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:25:00.365 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:25:00.366 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:25:00.367 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:25:00.367 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:25:00.368 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:25:00.368 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:25:00.369 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:25:00.369 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:25:00.370 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:25:00.371 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:25:00.371 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:25:00.372 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:25:00.372 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:25:00.373 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:25:00.374 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:25:00.374 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:25:00.375 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:25:00.375 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:25:00.377 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:25:00.379 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:25:00.379 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:25:00.380 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:25:00.381 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:25:00.381 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:25:00.382 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:25:00.382 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:25:00.383 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:25:00.389 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:25:00.391 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:25:00.392 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:25:00.393 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:25:00.393 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:25:00.394 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:25:00.395 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:25:00.396 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:25:00.396 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:25:00.397 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:25:00.397 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:25:00.399 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.153ms
2024-11-09 01:25:00.399 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:25:00.400 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:25:00.400 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:25:00.401 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:25:00.402 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 55.4086ms
2024-11-09 01:25:01.256 +07:00 [DBG] Connection id "0HN7VCUKSF7Q9" received FIN.
2024-11-09 01:25:01.257 +07:00 [DBG] Connection id "0HN7VCUKSF7Q9" is closed. The last processed stream ID was 1.
2024-11-09 01:25:01.257 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7Q9 completed.
2024-11-09 01:25:01.258 +07:00 [DBG] Connection id "0HN7VCUKSF7Q9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:25:01.271 +07:00 [DBG] Connection id "0HN7VCUKSF7Q9" stopped.
2024-11-09 01:25:09.056 +07:00 [DBG] Connection id "0HN7VCUKSF7QA" accepted.
2024-11-09 01:25:09.059 +07:00 [DBG] Connection id "0HN7VCUKSF7QA" started.
2024-11-09 01:25:09.069 +07:00 [DBG] Connection 0HN7VCUKSF7QA established using the following protocol: "Tls13"
2024-11-09 01:25:09.071 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:25:09.073 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:25:09.075 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:25:09.076 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:25:09.077 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:25:09.077 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:25:09.081 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:25:09.083 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:25:09.084 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:25:09.086 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:25:09.087 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:25:09.088 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:25:09.089 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:25:09.091 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:25:09.094 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:25:09.103 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:25:09.108 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:25:09.109 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:25:09.110 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:25:09.110 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:25:09.111 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:25:09.113 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:25:09.114 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:25:09.115 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:25:09.116 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:25:09.117 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:25:09.117 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:25:09.118 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:25:09.119 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:25:09.120 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:25:09.121 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:25:09.122 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:25:09.125 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:25:09.126 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:25:09.127 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:25:09.128 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:25:09.129 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:25:09.129 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:25:09.130 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:25:09.131 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:25:09.132 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:25:09.132 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:25:09.133 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:25:09.136 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:25:09.138 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:25:09.138 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:25:09.139 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:25:09.142 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:25:09.143 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:25:09.143 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:25:09.144 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:25:09.145 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:25:09.157 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:25:09.159 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:25:09.160 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:25:09.160 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:25:09.162 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 01:25:09.163 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:25:09.164 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:25:09.165 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:25:09.165 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:25:09.166 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:25:09.166 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:25:09.167 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 63.9158ms
2024-11-09 01:25:09.168 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:25:09.169 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:25:09.170 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:25:09.171 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:25:09.172 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 100.8598ms
2024-11-09 01:25:11.270 +07:00 [DBG] Connection id "0HN7VCUKSF7QA" received FIN.
2024-11-09 01:25:11.271 +07:00 [DBG] Connection id "0HN7VCUKSF7QA" is closed. The last processed stream ID was 1.
2024-11-09 01:25:11.272 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QA completed.
2024-11-09 01:25:11.273 +07:00 [DBG] Connection id "0HN7VCUKSF7QA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:25:11.286 +07:00 [DBG] Connection id "0HN7VCUKSF7QA" stopped.
2024-11-09 01:26:49.813 +07:00 [DBG] Connection id "0HN7VCUKSF7QB" accepted.
2024-11-09 01:26:49.831 +07:00 [DBG] Connection id "0HN7VCUKSF7QB" started.
2024-11-09 01:26:49.855 +07:00 [DBG] Connection 0HN7VCUKSF7QB established using the following protocol: "Tls13"
2024-11-09 01:26:49.899 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:26:49.907 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:26:49.907 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:26:49.910 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:26:49.912 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:26:49.913 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:26:49.915 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:26:49.917 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:26:49.920 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:26:49.926 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:26:49.927 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:26:49.928 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:26:49.930 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:26:49.933 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:26:49.934 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:26:49.934 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:26:49.946 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:26:49.948 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:26:49.949 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:26:49.950 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:26:49.950 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:26:49.951 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:26:49.952 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:26:49.952 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:26:49.953 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:26:49.953 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:26:49.954 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:26:49.955 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:26:49.955 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:26:49.956 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:26:49.956 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:26:49.957 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:26:49.958 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:26:49.959 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:26:49.959 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:26:49.960 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:26:49.961 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:26:49.961 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:26:49.962 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:26:49.962 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:26:49.963 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:26:49.964 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:26:49.964 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:26:49.982 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:26:49.990 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:26:49.991 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:26:49.991 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:26:49.998 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:26:50.001 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:26:50.002 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:26:50.003 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:26:50.006 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:26:50.019 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:26:50.021 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:26:50.022 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:26:50.023 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:26:50.024 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:26:50.027 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:26:50.029 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:26:50.029 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:26:50.031 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:26:50.031 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:26:50.032 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:26:50.036 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 101.1181ms
2024-11-09 01:26:50.037 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:26:50.038 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:26:50.039 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:26:50.039 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:26:50.041 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 143.191ms
2024-11-09 01:26:51.419 +07:00 [DBG] Connection id "0HN7VCUKSF7QB" received FIN.
2024-11-09 01:26:51.420 +07:00 [DBG] Connection id "0HN7VCUKSF7QB" is closed. The last processed stream ID was 1.
2024-11-09 01:26:51.420 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QB completed.
2024-11-09 01:26:51.421 +07:00 [DBG] Connection id "0HN7VCUKSF7QB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:26:51.433 +07:00 [DBG] Connection id "0HN7VCUKSF7QB" stopped.
2024-11-09 01:26:58.551 +07:00 [DBG] Connection id "0HN7VCUKSF7QC" accepted.
2024-11-09 01:26:58.552 +07:00 [DBG] Connection id "0HN7VCUKSF7QC" started.
2024-11-09 01:26:58.559 +07:00 [DBG] Connection 0HN7VCUKSF7QC established using the following protocol: "Tls13"
2024-11-09 01:26:58.563 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:26:58.565 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:26:58.567 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:26:58.567 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:26:58.569 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:26:58.570 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:26:58.571 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:26:58.572 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:26:58.572 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:26:58.573 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:26:58.574 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:26:58.575 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:26:58.576 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:26:58.578 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:26:58.579 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:26:58.580 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:26:58.586 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:26:58.587 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:26:58.588 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:26:58.590 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:26:58.593 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:26:58.603 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:26:58.606 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:26:58.607 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:26:58.608 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:26:58.609 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:26:58.610 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:26:58.611 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:26:58.612 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:26:58.612 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:26:58.613 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:26:58.614 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:26:58.615 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:26:58.616 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:26:58.617 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:26:58.618 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:26:58.618 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:26:58.619 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:26:58.620 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:26:58.621 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:26:58.622 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:26:58.622 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:26:58.623 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:26:58.625 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:26:58.628 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:26:58.629 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:26:58.630 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:26:58.634 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:26:58.635 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:26:58.635 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:26:58.636 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:26:58.637 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:26:58.680 +07:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:26:58.684 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:26:58.685 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:26:58.685 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:26:58.686 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 01:26:58.687 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:26:58.689 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:26:58.689 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:26:58.690 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:26:58.690 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:26:58.691 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:26:58.692 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 111.3318ms
2024-11-09 01:26:58.692 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:26:58.693 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:26:58.694 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:26:58.695 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:26:58.696 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 132.5347ms
2024-11-09 01:27:01.438 +07:00 [DBG] Connection id "0HN7VCUKSF7QC" received FIN.
2024-11-09 01:27:01.439 +07:00 [DBG] Connection id "0HN7VCUKSF7QC" is closed. The last processed stream ID was 1.
2024-11-09 01:27:01.439 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QC completed.
2024-11-09 01:27:01.439 +07:00 [DBG] Connection id "0HN7VCUKSF7QC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:27:01.453 +07:00 [DBG] Connection id "0HN7VCUKSF7QC" stopped.
2024-11-09 01:27:23.603 +07:00 [DBG] Connection id "0HN7VCUKSF7QD" accepted.
2024-11-09 01:27:23.611 +07:00 [DBG] Connection id "0HN7VCUKSF7QD" started.
2024-11-09 01:27:23.664 +07:00 [DBG] Connection 0HN7VCUKSF7QD established using the following protocol: "Tls13"
2024-11-09 01:27:23.705 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:27:23.710 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:27:23.711 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:27:23.713 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:27:23.714 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:27:23.715 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:27:23.717 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:27:23.718 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:27:23.719 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:27:23.723 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:27:23.724 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:27:23.725 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:27:23.728 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:27:23.730 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:27:23.731 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:27:23.732 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:27:23.739 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:27:23.741 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:27:23.742 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:27:23.742 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:27:23.743 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:27:23.744 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:27:23.744 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:27:23.745 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:27:23.745 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:27:23.746 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:27:23.747 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:23.748 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:23.748 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:23.749 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:27:23.750 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:23.750 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:27:23.751 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:27:23.752 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:27:23.752 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:27:23.753 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:27:23.753 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:27:23.754 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:27:23.755 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:27:23.756 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:27:23.756 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:27:23.757 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:27:23.758 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:27:23.776 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:27:23.784 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:27:23.785 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:27:23.786 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:23.788 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:23.791 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:27:23.792 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:27:23.793 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:27:23.796 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:27:24.055 +07:00 [INF] Executed DbCommand (256ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:27:24.063 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:24.067 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2024-11-09 01:27:24.069 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:24.072 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 01:27:24.089 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:27:24.093 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:27:24.093 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:27:24.094 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:27:24.096 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:27:24.097 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:27:24.140 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 407.098ms
2024-11-09 01:27:24.141 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:27:24.145 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:27:24.146 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:24.147 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:27:24.149 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 474.7977ms
2024-11-09 01:27:26.553 +07:00 [DBG] Connection id "0HN7VCUKSF7QD" received FIN.
2024-11-09 01:27:26.635 +07:00 [DBG] Connection id "0HN7VCUKSF7QD" is closed. The last processed stream ID was 1.
2024-11-09 01:27:26.636 +07:00 [DBG] Connection id "0HN7VCUKSF7QD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:27:26.647 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QD completed.
2024-11-09 01:27:26.681 +07:00 [DBG] Connection id "0HN7VCUKSF7QD" stopped.
2024-11-09 01:27:28.758 +07:00 [DBG] Connection id "0HN7VCUKSF7QE" accepted.
2024-11-09 01:27:28.759 +07:00 [DBG] Connection id "0HN7VCUKSF7QE" started.
2024-11-09 01:27:28.767 +07:00 [DBG] Connection 0HN7VCUKSF7QE established using the following protocol: "Tls13"
2024-11-09 01:27:28.783 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:27:28.785 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:27:28.786 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:27:28.787 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:27:28.794 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:27:28.795 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:27:28.796 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:27:28.797 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:27:28.798 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:27:28.802 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:27:28.803 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:27:28.804 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:27:28.805 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:27:28.806 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:27:28.807 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:27:28.808 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:27:28.812 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:27:28.813 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:27:28.814 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:27:28.815 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:27:28.815 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:27:28.816 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:27:28.817 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:27:28.818 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:27:28.818 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:27:28.819 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:27:28.820 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:28.821 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:28.822 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:28.822 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:27:28.823 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:28.824 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:27:28.825 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:27:28.825 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:27:28.826 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:27:28.827 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:27:28.828 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:27:28.828 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:27:28.829 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:27:28.830 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:27:28.831 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:27:28.831 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:27:28.832 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:27:28.834 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:27:28.837 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:27:28.837 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:27:28.838 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:28.839 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:28.840 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:27:28.840 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:27:28.841 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:27:28.842 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:27:28.895 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:27:28.897 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:28.898 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:27:28.899 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:28.899 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:27:28.901 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:27:28.902 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:27:28.902 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:27:28.903 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:27:28.903 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:27:28.905 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:27:28.906 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 98.2763ms
2024-11-09 01:27:28.907 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:27:28.907 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:27:28.908 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:28.909 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:27:28.910 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 126.2588ms
2024-11-09 01:27:31.508 +07:00 [DBG] Connection id "0HN7VCUKSF7QE" received FIN.
2024-11-09 01:27:31.509 +07:00 [DBG] Connection id "0HN7VCUKSF7QE" is closed. The last processed stream ID was 1.
2024-11-09 01:27:31.509 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QE completed.
2024-11-09 01:27:31.510 +07:00 [DBG] Connection id "0HN7VCUKSF7QE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:27:31.520 +07:00 [DBG] Connection id "0HN7VCUKSF7QE" stopped.
2024-11-09 01:27:36.887 +07:00 [DBG] Connection id "0HN7VCUKSF7QF" accepted.
2024-11-09 01:27:36.911 +07:00 [DBG] Connection id "0HN7VCUKSF7QF" started.
2024-11-09 01:27:36.987 +07:00 [DBG] Connection 0HN7VCUKSF7QF established using the following protocol: "Tls13"
2024-11-09 01:27:36.995 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:27:36.997 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:27:36.998 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:27:36.999 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:27:37.000 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:27:37.001 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:27:37.001 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:27:37.002 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:27:37.003 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:27:37.006 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:27:37.007 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:27:37.008 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:27:37.014 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:27:37.022 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:27:37.023 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:27:37.024 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:27:37.032 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:27:37.033 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:27:37.034 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:27:37.034 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:27:37.035 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:27:37.036 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:27:37.037 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:27:37.037 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:27:37.038 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:27:37.039 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:27:37.040 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:37.040 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:37.041 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:37.042 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:27:37.043 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:37.043 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:27:37.044 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:27:37.045 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:27:37.045 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:27:37.046 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:27:37.047 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:27:37.047 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:27:37.048 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:27:37.049 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:27:37.049 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:27:37.050 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:27:37.051 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:27:37.063 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:27:37.094 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:27:37.095 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:27:37.096 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:37.099 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:37.102 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:27:37.103 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:27:37.104 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:27:37.107 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:27:37.481 +07:00 [INF] Executed DbCommand (376ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:27:37.484 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:37.484 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:27:37.485 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:37.486 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:27:37.488 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:27:37.490 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:27:37.491 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:27:37.491 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:27:37.492 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:27:37.492 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:27:37.495 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 471.2116ms
2024-11-09 01:27:37.496 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:27:37.496 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:27:37.497 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:37.498 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:27:37.499 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 504.5236ms
2024-11-09 01:27:41.560 +07:00 [DBG] Connection id "0HN7VCUKSF7QF" received FIN.
2024-11-09 01:27:41.568 +07:00 [DBG] Connection id "0HN7VCUKSF7QF" is closed. The last processed stream ID was 1.
2024-11-09 01:27:41.568 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QF completed.
2024-11-09 01:27:41.569 +07:00 [DBG] Connection id "0HN7VCUKSF7QF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:27:41.582 +07:00 [DBG] Connection id "0HN7VCUKSF7QF" stopped.
2024-11-09 01:27:59.041 +07:00 [DBG] Connection id "0HN7VCUKSF7QG" accepted.
2024-11-09 01:27:59.052 +07:00 [DBG] Connection id "0HN7VCUKSF7QG" started.
2024-11-09 01:27:59.107 +07:00 [DBG] Connection 0HN7VCUKSF7QG established using the following protocol: "Tls13"
2024-11-09 01:27:59.121 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:27:59.128 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:27:59.129 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:27:59.133 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:27:59.139 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:27:59.140 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:27:59.147 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:27:59.154 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:27:59.156 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:27:59.162 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:27:59.167 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:27:59.168 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:27:59.172 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:27:59.175 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:27:59.176 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:27:59.178 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:27:59.199 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:27:59.201 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:27:59.204 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:27:59.205 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:27:59.206 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:27:59.207 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:27:59.208 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:27:59.209 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:27:59.210 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:27:59.211 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:27:59.212 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:59.213 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:59.214 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:59.215 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:27:59.216 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:27:59.216 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:27:59.217 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:27:59.218 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:27:59.219 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:27:59.220 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:27:59.221 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:27:59.222 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:27:59.223 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:27:59.224 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:27:59.225 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:27:59.226 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:27:59.227 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:27:59.254 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:27:59.274 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:27:59.277 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 01:27:59.278 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:59.287 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:59.290 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:27:59.294 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:27:59.295 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-09 01:27:59.298 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:27:59.521 +07:00 [INF] Executed DbCommand (223ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:27:59.523 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:59.524 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:27:59.525 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:59.526 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:27:59.529 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:27:59.531 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:27:59.531 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:27:59.532 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:27:59.532 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:27:59.534 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:27:59.539 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 361.667ms
2024-11-09 01:27:59.539 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:27:59.540 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:27:59.541 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:27:59.544 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:27:59.546 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 425.8083ms
2024-11-09 01:28:01.570 +07:00 [DBG] Connection id "0HN7VCUKSF7QG" received FIN.
2024-11-09 01:28:01.572 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QG completed.
2024-11-09 01:28:01.572 +07:00 [DBG] Connection id "0HN7VCUKSF7QG" is closed. The last processed stream ID was 1.
2024-11-09 01:28:01.573 +07:00 [DBG] Connection id "0HN7VCUKSF7QG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:28:01.584 +07:00 [DBG] Connection id "0HN7VCUKSF7QG" stopped.
2024-11-09 01:28:29.989 +07:00 [DBG] Connection id "0HN7VCUKSF7QH" accepted.
2024-11-09 01:28:29.994 +07:00 [DBG] Connection id "0HN7VCUKSF7QH" started.
2024-11-09 01:28:30.007 +07:00 [DBG] Connection 0HN7VCUKSF7QH established using the following protocol: "Tls13"
2024-11-09 01:28:30.026 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:28:30.062 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:28:30.063 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:28:30.064 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:28:30.064 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:28:30.065 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:28:30.067 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:28:30.068 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:28:30.068 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:28:30.069 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:28:30.071 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:28:30.077 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:28:30.077 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:28:30.078 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:28:30.080 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:28:30.081 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:28:30.084 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:28:30.085 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:28:30.085 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:28:30.086 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:28:30.087 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:28:30.088 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:28:30.089 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:28:30.090 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:28:30.090 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:28:30.091 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:28:30.092 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:28:30.093 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:28:30.094 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:28:30.094 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:28:30.099 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:28:30.100 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:28:30.101 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:28:30.102 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:28:30.103 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:28:30.103 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:28:30.104 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:28:30.105 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:28:30.105 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:28:30.106 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:28:30.107 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:28:30.108 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:28:30.108 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:28:30.111 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:28:30.113 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:28:30.113 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:28:30.114 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:30.116 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:30.116 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:28:30.117 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:28:30.118 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:28:30.118 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:28:30.137 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:28:30.139 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:30.139 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:28:30.140 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:30.141 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:28:30.142 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:28:30.143 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:28:30.144 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:28:30.144 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:28:30.145 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:28:30.146 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:28:30.147 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 66.5244ms
2024-11-09 01:28:30.148 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:28:30.149 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:28:30.150 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:30.150 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:28:30.151 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 124.9237ms
2024-11-09 01:28:31.599 +07:00 [DBG] Connection id "0HN7VCUKSF7QH" received FIN.
2024-11-09 01:28:31.600 +07:00 [DBG] Connection id "0HN7VCUKSF7QH" is closed. The last processed stream ID was 1.
2024-11-09 01:28:31.601 +07:00 [DBG] Connection id "0HN7VCUKSF7QH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:28:31.602 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QH completed.
2024-11-09 01:28:31.603 +07:00 [DBG] Connection id "0HN7VCUKSF7QH" stopped.
2024-11-09 01:28:45.710 +07:00 [DBG] Connection id "0HN7VCUKSF7QI" accepted.
2024-11-09 01:28:45.713 +07:00 [DBG] Connection id "0HN7VCUKSF7QI" started.
2024-11-09 01:28:45.722 +07:00 [DBG] Connection 0HN7VCUKSF7QI established using the following protocol: "Tls13"
2024-11-09 01:28:45.725 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:28:45.729 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:28:45.730 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:28:45.731 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:28:45.732 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:28:45.740 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:28:45.743 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:28:45.743 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:28:45.744 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:28:45.745 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:28:45.746 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:28:45.747 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:28:45.748 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:28:45.749 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:28:45.750 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:28:45.751 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:28:45.753 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:28:45.753 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:28:45.755 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:28:45.756 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:28:45.759 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:28:45.759 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:28:45.760 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:28:45.761 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:28:45.762 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:28:45.762 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:28:45.763 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:28:45.764 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:28:45.765 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:28:45.765 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:28:45.766 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:28:45.767 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:28:45.768 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:28:45.769 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:28:45.769 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:28:45.770 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:28:45.771 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:28:45.771 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:28:45.772 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:28:45.773 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:28:45.774 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:28:45.775 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:28:45.775 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:28:45.777 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:28:45.787 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:28:45.787 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:28:45.788 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:45.789 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:45.789 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:28:45.790 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:28:45.790 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:28:45.791 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:28:45.812 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:28:45.813 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:45.814 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:28:45.815 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:45.816 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:28:45.817 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:28:45.818 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:28:45.819 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:28:45.819 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:28:45.820 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:28:45.820 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:28:45.822 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 71.0749ms
2024-11-09 01:28:45.823 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:28:45.823 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:28:45.824 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:45.825 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:28:45.826 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 100.7445ms
2024-11-09 01:28:46.621 +07:00 [DBG] Connection id "0HN7VCUKSF7QI" received FIN.
2024-11-09 01:28:46.621 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QI completed.
2024-11-09 01:28:46.622 +07:00 [DBG] Connection id "0HN7VCUKSF7QI" is closed. The last processed stream ID was 1.
2024-11-09 01:28:46.623 +07:00 [DBG] Connection id "0HN7VCUKSF7QI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:28:46.635 +07:00 [DBG] Connection id "0HN7VCUKSF7QI" stopped.
2024-11-09 01:28:54.905 +07:00 [DBG] Connection id "0HN7VCUKSF7QJ" accepted.
2024-11-09 01:28:54.906 +07:00 [DBG] Connection id "0HN7VCUKSF7QJ" started.
2024-11-09 01:28:54.911 +07:00 [DBG] Connection 0HN7VCUKSF7QJ established using the following protocol: "Tls13"
2024-11-09 01:28:54.914 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:28:54.915 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:28:54.916 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:28:54.917 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:28:54.917 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:28:54.918 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:28:54.919 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:28:54.920 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:28:54.920 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:28:54.921 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:28:54.922 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:28:54.923 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:28:54.924 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:28:54.930 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:28:54.936 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:28:54.937 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:28:54.938 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:28:54.939 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:28:54.940 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:28:54.942 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:28:54.942 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:28:54.943 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:28:54.944 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:28:54.944 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:28:54.945 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:28:54.946 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:28:54.947 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:28:54.948 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:28:54.948 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:28:54.949 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:28:54.950 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:28:54.951 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:28:54.951 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:28:54.952 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:28:54.953 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:28:54.954 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:28:54.954 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:28:54.955 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:28:54.956 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:28:54.957 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:28:54.957 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:28:54.958 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:28:54.959 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:28:54.961 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:28:54.962 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:28:54.963 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:28:54.963 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:54.964 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:54.965 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:28:54.965 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:28:54.966 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:28:54.967 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:28:54.973 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:28:54.975 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:54.976 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:28:54.976 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:54.977 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:28:54.978 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:28:54.979 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:28:54.980 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:28:54.980 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:28:54.980 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:28:54.981 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:28:54.982 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 45.1194ms
2024-11-09 01:28:54.983 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:28:54.983 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:28:54.984 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:28:54.985 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:28:54.985 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 72.3115ms
2024-11-09 01:28:56.630 +07:00 [DBG] Connection id "0HN7VCUKSF7QJ" received FIN.
2024-11-09 01:28:56.631 +07:00 [DBG] Connection id "0HN7VCUKSF7QJ" is closed. The last processed stream ID was 1.
2024-11-09 01:28:56.631 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QJ completed.
2024-11-09 01:28:56.631 +07:00 [DBG] Connection id "0HN7VCUKSF7QJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:28:56.643 +07:00 [DBG] Connection id "0HN7VCUKSF7QJ" stopped.
2024-11-09 01:29:19.249 +07:00 [DBG] Connection id "0HN7VCUKSF7QK" accepted.
2024-11-09 01:29:19.250 +07:00 [DBG] Connection id "0HN7VCUKSF7QK" started.
2024-11-09 01:29:19.264 +07:00 [DBG] Connection 0HN7VCUKSF7QK established using the following protocol: "Tls13"
2024-11-09 01:29:19.269 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:29:19.270 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:29:19.271 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:29:19.271 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:29:19.272 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:29:19.273 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:29:19.274 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:29:19.275 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:29:19.276 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:29:19.276 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:29:19.277 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:29:19.278 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:29:19.279 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:29:19.280 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:29:19.282 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:29:19.287 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:29:19.289 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:29:19.290 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:29:19.291 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:29:19.292 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:29:19.293 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:29:19.294 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:29:19.294 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:29:19.295 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:29:19.296 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:29:19.297 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:29:19.297 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:29:19.298 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:29:19.299 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:29:19.299 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:29:19.300 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:29:19.301 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:29:19.302 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:29:19.303 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:29:19.303 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:29:19.304 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:29:19.305 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:29:19.305 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:29:19.306 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:29:19.307 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:29:19.308 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:29:19.308 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:29:19.309 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:29:19.311 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:29:19.313 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:29:19.313 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:29:19.314 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:29:19.314 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:29:19.315 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:29:19.316 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:29:19.316 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:29:19.318 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:29:19.325 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:29:19.326 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:29:19.327 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:29:19.328 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:29:19.329 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:29:19.329 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:29:19.331 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:29:19.331 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:29:19.332 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:29:19.332 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:29:19.333 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:29:19.334 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.0524ms
2024-11-09 01:29:19.335 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:29:19.336 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:29:19.337 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:29:19.338 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:29:19.339 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 70.5846ms
2024-11-09 01:29:26.673 +07:00 [DBG] Connection id "0HN7VCUKSF7QK" received FIN.
2024-11-09 01:29:26.674 +07:00 [DBG] Connection id "0HN7VCUKSF7QK" is closed. The last processed stream ID was 1.
2024-11-09 01:29:26.675 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QK completed.
2024-11-09 01:29:26.675 +07:00 [DBG] Connection id "0HN7VCUKSF7QK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:29:26.693 +07:00 [DBG] Connection id "0HN7VCUKSF7QK" stopped.
2024-11-09 01:29:57.770 +07:00 [DBG] Connection id "0HN7VCUKSF7QL" accepted.
2024-11-09 01:29:57.771 +07:00 [DBG] Connection id "0HN7VCUKSF7QL" started.
2024-11-09 01:29:57.842 +07:00 [DBG] Connection 0HN7VCUKSF7QL established using the following protocol: "Tls13"
2024-11-09 01:29:57.889 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:29:57.893 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:29:57.895 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:29:57.898 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:29:57.898 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:29:57.899 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:29:57.901 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:29:57.901 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:29:57.902 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:29:57.904 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:29:57.905 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:29:57.905 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:29:57.909 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:29:57.910 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:29:57.911 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:29:57.912 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:29:57.918 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:29:57.919 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:29:57.919 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:29:57.920 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:29:57.920 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:29:57.921 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:29:57.922 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:29:57.922 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:29:57.923 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:29:57.923 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:29:57.924 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:29:57.924 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:29:57.925 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:29:57.925 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:29:57.926 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:29:57.926 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:29:57.927 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:29:57.928 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:29:57.928 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:29:57.929 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:29:57.929 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:29:57.930 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:29:57.930 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:29:57.931 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:29:57.932 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:29:57.932 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:29:57.933 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:29:57.944 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:29:57.950 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:29:57.953 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 01:29:57.953 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:29:57.955 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:29:57.957 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:29:57.958 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:29:57.959 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:29:57.963 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:29:58.000 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:29:58.002 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:29:58.003 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:29:58.004 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:29:58.004 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:29:58.006 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:29:58.007 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:29:58.008 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:29:58.008 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:29:58.008 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:29:58.009 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:29:58.010 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 98.5878ms
2024-11-09 01:29:58.011 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:29:58.012 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:29:58.012 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:29:58.013 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:29:58.013 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 125.2253ms
2024-11-09 01:30:01.692 +07:00 [DBG] Connection id "0HN7VCUKSF7QL" received FIN.
2024-11-09 01:30:01.693 +07:00 [DBG] Connection id "0HN7VCUKSF7QL" is closed. The last processed stream ID was 1.
2024-11-09 01:30:01.693 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QL completed.
2024-11-09 01:30:01.694 +07:00 [DBG] Connection id "0HN7VCUKSF7QL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:30:01.707 +07:00 [DBG] Connection id "0HN7VCUKSF7QL" stopped.
2024-11-09 01:30:32.017 +07:00 [DBG] Connection id "0HN7VCUKSF7QM" accepted.
2024-11-09 01:30:32.032 +07:00 [DBG] Connection id "0HN7VCUKSF7QM" started.
2024-11-09 01:30:32.087 +07:00 [DBG] Connection 0HN7VCUKSF7QM established using the following protocol: "Tls13"
2024-11-09 01:30:32.143 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:30:32.151 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:30:32.153 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:30:32.157 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:30:32.159 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:30:32.163 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:30:32.169 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:30:32.173 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:30:32.175 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:30:32.180 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:30:32.182 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:30:32.183 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:30:32.186 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:30:32.191 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:30:32.192 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:30:32.193 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:30:32.208 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:30:32.210 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:30:32.212 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:30:32.213 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:30:32.214 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:30:32.215 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:30:32.216 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:30:32.217 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:30:32.218 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:30:32.218 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:30:32.220 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:30:32.221 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:30:32.221 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:30:32.222 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:30:32.223 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:30:32.224 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:30:32.225 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:30:32.227 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:30:32.229 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:30:32.231 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:30:32.234 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:30:32.234 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:30:32.235 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:30:32.236 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:30:32.237 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:30:32.238 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:30:32.239 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:30:32.272 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:30:32.292 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:30:32.293 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 01:30:32.294 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:32.300 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:32.306 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:30:32.308 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-11-09 01:30:32.309 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-11-09 01:30:32.313 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:30:32.794 +07:00 [INF] Executed DbCommand (482ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:30:32.799 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:32.801 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-11-09 01:30:32.803 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:32.804 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:30:32.814 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:30:32.816 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:30:32.816 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:30:32.817 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:30:32.817 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:30:32.819 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:30:32.833 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 639.5782ms
2024-11-09 01:30:32.834 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:30:32.835 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:30:32.836 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:32.836 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:30:32.837 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 697.6534ms
2024-11-09 01:30:37.013 +07:00 [DBG] Connection id "0HN7VCUKSF7QM" received FIN.
2024-11-09 01:30:37.016 +07:00 [DBG] Connection id "0HN7VCUKSF7QM" is closed. The last processed stream ID was 1.
2024-11-09 01:30:37.020 +07:00 [DBG] Connection id "0HN7VCUKSF7QM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:30:37.023 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QM completed.
2024-11-09 01:30:37.030 +07:00 [DBG] Connection id "0HN7VCUKSF7QM" stopped.
2024-11-09 01:30:45.944 +07:00 [DBG] Connection id "0HN7VCUKSF7QN" accepted.
2024-11-09 01:30:45.956 +07:00 [DBG] Connection id "0HN7VCUKSF7QN" started.
2024-11-09 01:30:46.012 +07:00 [DBG] Connection 0HN7VCUKSF7QN established using the following protocol: "Tls13"
2024-11-09 01:30:46.127 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:30:46.138 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:30:46.139 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:30:46.145 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:30:46.147 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:30:46.148 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:30:46.154 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:30:46.156 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:30:46.158 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:30:46.165 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:30:46.168 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:30:46.169 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:30:46.174 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:30:46.177 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:30:46.177 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:30:46.178 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:30:46.202 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:30:46.207 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:30:46.209 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:30:46.210 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:30:46.211 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:30:46.211 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:30:46.212 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:30:46.213 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:30:46.213 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:30:46.214 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:30:46.215 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:30:46.216 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:30:46.216 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:30:46.217 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:30:46.218 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:30:46.218 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:30:46.219 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:30:46.222 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:30:46.223 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:30:46.224 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:30:46.224 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:30:46.225 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:30:46.228 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:30:46.229 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:30:46.230 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:30:46.231 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:30:46.232 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:30:46.255 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:30:46.279 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:30:46.281 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 01:30:46.282 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:46.287 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:46.293 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:30:46.293 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:30:46.295 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-09 01:30:46.299 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:30:46.466 +07:00 [INF] Executed DbCommand (170ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:30:46.469 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:46.471 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:30:46.472 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:46.473 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:30:46.476 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:30:46.477 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:30:46.478 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:30:46.478 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:30:46.479 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:30:46.480 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:30:46.484 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 305.2257ms
2024-11-09 01:30:46.485 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:30:46.485 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:30:46.487 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:46.488 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:30:46.489 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 438.2433ms
2024-11-09 01:30:47.024 +07:00 [DBG] Connection id "0HN7VCUKSF7QN" received FIN.
2024-11-09 01:30:47.025 +07:00 [DBG] Connection id "0HN7VCUKSF7QN" is closed. The last processed stream ID was 1.
2024-11-09 01:30:47.025 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QN completed.
2024-11-09 01:30:47.026 +07:00 [DBG] Connection id "0HN7VCUKSF7QN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:30:47.030 +07:00 [DBG] Connection id "0HN7VCUKSF7QN" stopped.
2024-11-09 01:30:50.085 +07:00 [DBG] Connection id "0HN7VCUKSF7QO" accepted.
2024-11-09 01:30:50.086 +07:00 [DBG] Connection id "0HN7VCUKSF7QO" started.
2024-11-09 01:30:50.093 +07:00 [DBG] Connection 0HN7VCUKSF7QO established using the following protocol: "Tls13"
2024-11-09 01:30:50.097 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:30:50.098 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:30:50.099 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:30:50.099 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:30:50.100 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:30:50.101 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:30:50.102 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:30:50.103 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:30:50.103 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:30:50.104 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:30:50.105 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:30:50.105 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:30:50.106 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:30:50.107 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:30:50.108 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:30:50.108 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:30:50.109 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:30:50.110 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:30:50.110 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:30:50.111 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:30:50.113 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:30:50.114 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:30:50.114 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:30:50.115 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:30:50.116 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:30:50.116 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:30:50.117 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:30:50.117 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:30:50.118 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:30:50.119 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:30:50.119 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:30:50.120 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:30:50.120 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:30:50.121 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:30:50.122 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:30:50.122 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:30:50.123 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:30:50.123 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:30:50.124 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:30:50.125 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:30:50.125 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:30:50.126 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:30:50.126 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:30:50.132 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:30:50.134 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:30:50.134 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:30:50.135 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:50.135 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:50.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:30:50.136 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:30:50.137 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:30:50.137 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:30:50.160 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:30:50.163 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:50.164 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:30:50.165 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:50.165 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:30:50.166 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:30:50.167 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:30:50.168 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:30:50.168 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:30:50.169 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:30:50.169 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:30:50.171 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 62.8796ms
2024-11-09 01:30:50.172 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:30:50.173 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:30:50.173 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:30:50.174 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:30:50.175 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 79.8523ms
2024-11-09 01:30:52.025 +07:00 [DBG] Connection id "0HN7VCUKSF7QO" received FIN.
2024-11-09 01:30:52.026 +07:00 [DBG] Connection id "0HN7VCUKSF7QO" is closed. The last processed stream ID was 1.
2024-11-09 01:30:52.026 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QO completed.
2024-11-09 01:30:52.026 +07:00 [DBG] Connection id "0HN7VCUKSF7QO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:30:52.039 +07:00 [DBG] Connection id "0HN7VCUKSF7QO" stopped.
2024-11-09 01:31:10.803 +07:00 [DBG] Connection id "0HN7VCUKSF7QP" accepted.
2024-11-09 01:31:10.804 +07:00 [DBG] Connection id "0HN7VCUKSF7QP" started.
2024-11-09 01:31:10.812 +07:00 [DBG] Connection 0HN7VCUKSF7QP established using the following protocol: "Tls13"
2024-11-09 01:31:10.813 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:31:10.815 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:31:10.816 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:31:10.816 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:31:10.817 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:31:10.818 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:31:10.819 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:31:10.819 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:31:10.820 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:31:10.820 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:31:10.821 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:31:10.822 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:31:10.823 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:31:10.824 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:31:10.824 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:31:10.826 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:31:10.902 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:31:10.903 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:31:10.903 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:31:10.904 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:31:10.905 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:31:10.906 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:31:10.906 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:31:10.907 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:31:10.908 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:31:10.909 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:31:10.909 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:31:10.910 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:31:10.911 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:31:10.912 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:31:10.912 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:31:10.913 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:31:10.914 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:31:10.914 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:31:10.915 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:31:10.916 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:31:10.916 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:31:10.917 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:31:10.917 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:31:10.918 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:31:10.919 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:31:10.919 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:31:10.920 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:31:10.921 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:31:10.923 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:31:10.923 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:31:10.923 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:31:10.924 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:31:10.925 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:31:10.926 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:31:10.927 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:31:10.927 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:31:10.934 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:31:10.936 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:31:10.936 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:31:10.937 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:31:10.938 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:31:10.939 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:31:10.940 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:31:10.940 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:31:10.941 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:31:10.941 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:31:10.942 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:31:10.944 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 117.9155ms
2024-11-09 01:31:10.944 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:31:10.945 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:31:10.946 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:31:10.946 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:31:10.947 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 133.618ms
2024-11-09 01:31:17.097 +07:00 [DBG] Connection id "0HN7VCUKSF7QP" received FIN.
2024-11-09 01:31:17.098 +07:00 [DBG] Connection id "0HN7VCUKSF7QP" is closed. The last processed stream ID was 1.
2024-11-09 01:31:17.098 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QP completed.
2024-11-09 01:31:17.098 +07:00 [DBG] Connection id "0HN7VCUKSF7QP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:31:17.111 +07:00 [DBG] Connection id "0HN7VCUKSF7QP" stopped.
2024-11-09 01:32:12.924 +07:00 [DBG] Connection id "0HN7VCUKSF7QQ" accepted.
2024-11-09 01:32:13.014 +07:00 [DBG] Connection id "0HN7VCUKSF7QQ" started.
2024-11-09 01:32:13.076 +07:00 [DBG] Connection 0HN7VCUKSF7QQ established using the following protocol: "Tls13"
2024-11-09 01:32:13.394 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:32:13.402 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:32:13.405 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:32:13.412 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:32:13.416 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:32:13.418 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:32:13.428 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:32:13.432 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:32:13.435 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:32:13.441 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:32:13.444 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:32:13.445 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:32:13.448 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:32:13.451 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:32:13.451 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:32:13.453 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:32:13.484 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:32:13.485 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:32:13.485 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:32:13.486 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:32:13.487 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:32:13.487 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:32:13.488 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:32:13.488 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:32:13.489 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:32:13.489 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:32:13.490 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:32:13.491 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:32:13.492 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:32:13.493 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:32:13.494 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:32:13.495 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:32:13.496 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:32:13.500 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:32:13.501 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:32:13.502 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:32:13.502 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:32:13.503 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:32:13.503 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:32:13.505 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:32:13.505 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:32:13.506 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:32:13.506 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:32:13.706 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:32:13.721 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:32:13.722 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:32:13.722 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:13.762 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:13.810 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:32:13.812 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (47ms).
2024-11-09 01:32:13.813 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (49ms).
2024-11-09 01:32:13.817 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:32:14.033 +07:00 [INF] Executed DbCommand (219ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:32:14.035 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:14.036 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:32:14.036 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:14.037 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:32:14.039 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:32:14.041 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:32:14.041 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:32:14.042 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:32:14.042 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:32:14.043 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:32:14.044 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 591.9429ms
2024-11-09 01:32:14.045 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:32:14.045 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:32:14.046 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:14.048 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-09 01:32:14.049 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 661.2386ms
2024-11-09 01:32:17.173 +07:00 [DBG] Connection id "0HN7VCUKSF7QQ" received FIN.
2024-11-09 01:32:17.174 +07:00 [DBG] Connection id "0HN7VCUKSF7QQ" is closed. The last processed stream ID was 1.
2024-11-09 01:32:17.174 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QQ completed.
2024-11-09 01:32:17.175 +07:00 [DBG] Connection id "0HN7VCUKSF7QQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:32:17.187 +07:00 [DBG] Connection id "0HN7VCUKSF7QQ" stopped.
2024-11-09 01:32:28.209 +07:00 [DBG] Connection id "0HN7VCUKSF7QR" accepted.
2024-11-09 01:32:28.210 +07:00 [DBG] Connection id "0HN7VCUKSF7QR" started.
2024-11-09 01:32:28.235 +07:00 [DBG] Connection 0HN7VCUKSF7QR established using the following protocol: "Tls13"
2024-11-09 01:32:28.238 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:32:28.241 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:32:28.243 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:32:28.243 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:32:28.244 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:32:28.245 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:32:28.247 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:32:28.248 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:32:28.249 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:32:28.250 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:32:28.251 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:32:28.251 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:32:28.252 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:32:28.254 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:32:28.256 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:32:28.257 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:32:28.295 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:32:28.302 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:32:28.303 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:32:28.303 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:32:28.304 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:32:28.305 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:32:28.306 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:32:28.307 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:32:28.307 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:32:28.308 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:32:28.309 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:32:28.316 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:32:28.317 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:32:28.318 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:32:28.319 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:32:28.319 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:32:28.320 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:32:28.320 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:32:28.321 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:32:28.322 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:32:28.322 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:32:28.323 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:32:28.324 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:32:28.325 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:32:28.325 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:32:28.326 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:32:28.327 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:32:28.331 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:32:28.333 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:32:28.334 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:32:28.335 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:28.335 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:28.336 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:32:28.337 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:32:28.339 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:32:28.340 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:32:28.392 +07:00 [INF] Executed DbCommand (52ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:32:28.394 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:28.395 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:32:28.396 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:28.403 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (6ms).
2024-11-09 01:32:28.403 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:32:28.404 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:32:28.405 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:32:28.405 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:32:28.405 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:32:28.406 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:32:28.418 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 161.4421ms
2024-11-09 01:32:28.419 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:32:28.419 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:32:28.420 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:28.420 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:32:28.438 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 183.9775ms
2024-11-09 01:32:32.203 +07:00 [DBG] Connection id "0HN7VCUKSF7QR" received FIN.
2024-11-09 01:32:32.204 +07:00 [DBG] Connection id "0HN7VCUKSF7QR" is closed. The last processed stream ID was 1.
2024-11-09 01:32:32.204 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QR completed.
2024-11-09 01:32:32.205 +07:00 [DBG] Connection id "0HN7VCUKSF7QR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:32:32.217 +07:00 [DBG] Connection id "0HN7VCUKSF7QR" stopped.
2024-11-09 01:32:49.341 +07:00 [DBG] Connection id "0HN7VCUKSF7QS" accepted.
2024-11-09 01:32:49.342 +07:00 [DBG] Connection id "0HN7VCUKSF7QS" started.
2024-11-09 01:32:49.360 +07:00 [DBG] Connection 0HN7VCUKSF7QS established using the following protocol: "Tls13"
2024-11-09 01:32:49.368 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:32:49.374 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:32:49.385 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:32:49.387 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:32:49.387 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:32:49.388 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:32:49.393 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:32:49.394 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:32:49.395 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:32:49.396 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:32:49.399 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:32:49.400 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:32:49.403 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:32:49.404 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:32:49.405 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:32:49.406 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:32:49.413 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:32:49.417 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:32:49.418 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:32:49.418 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:32:49.419 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:32:49.420 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:32:49.421 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:32:49.421 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:32:49.422 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:32:49.423 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:32:49.423 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:32:49.424 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:32:49.424 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:32:49.425 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:32:49.425 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:32:49.426 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:32:49.427 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:32:49.428 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:32:49.428 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:32:49.429 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:32:49.431 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:32:49.432 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:32:49.432 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:32:49.433 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:32:49.434 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:32:49.435 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:32:49.435 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:32:49.446 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:32:49.458 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:32:49.459 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:32:49.460 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:49.463 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:49.464 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:32:49.465 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:32:49.466 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:32:49.471 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:32:49.525 +07:00 [INF] Executed DbCommand (59ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:32:49.528 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:49.529 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:32:49.531 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:49.532 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:32:49.534 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:32:49.535 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:32:49.536 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:32:49.536 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:32:49.537 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:32:49.538 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:32:49.540 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 133.6055ms
2024-11-09 01:32:49.541 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:32:49.542 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:32:49.542 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:32:49.543 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:32:49.546 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 176.3565ms
2024-11-09 01:32:52.284 +07:00 [DBG] Connection id "0HN7VCUKSF7QS" received FIN.
2024-11-09 01:32:52.286 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QS completed.
2024-11-09 01:32:52.286 +07:00 [DBG] Connection id "0HN7VCUKSF7QS" is closed. The last processed stream ID was 1.
2024-11-09 01:32:52.288 +07:00 [DBG] Connection id "0HN7VCUKSF7QS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:32:52.303 +07:00 [DBG] Connection id "0HN7VCUKSF7QS" stopped.
2024-11-09 01:33:58.904 +07:00 [DBG] Connection id "0HN7VCUKSF7QT" accepted.
2024-11-09 01:33:58.922 +07:00 [DBG] Connection id "0HN7VCUKSF7QT" started.
2024-11-09 01:33:58.969 +07:00 [DBG] Connection 0HN7VCUKSF7QT established using the following protocol: "Tls13"
2024-11-09 01:33:59.004 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:33:59.045 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:33:59.046 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:33:59.051 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:33:59.056 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:33:59.058 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:33:59.066 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:33:59.073 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:33:59.074 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:33:59.080 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:33:59.083 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:33:59.085 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:33:59.090 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:33:59.095 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:33:59.096 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:33:59.097 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:33:59.117 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:33:59.123 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:33:59.124 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:33:59.125 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:33:59.126 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:33:59.127 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:33:59.128 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:33:59.128 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:33:59.129 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:33:59.130 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:33:59.130 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:33:59.131 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:33:59.132 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:33:59.133 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:33:59.134 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:33:59.135 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:33:59.136 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:33:59.137 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:33:59.138 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:33:59.139 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:33:59.140 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:33:59.142 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:33:59.142 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:33:59.143 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:33:59.144 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:33:59.144 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:33:59.145 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:33:59.169 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:33:59.190 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:33:59.191 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:33:59.191 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:33:59.200 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:33:59.208 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:33:59.209 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2024-11-09 01:33:59.211 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-11-09 01:33:59.219 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:33:59.245 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:33:59.249 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:33:59.251 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-11-09 01:33:59.252 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:33:59.252 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:33:59.254 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:33:59.255 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:33:59.256 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:33:59.256 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:33:59.257 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:33:59.257 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:33:59.263 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 166.3036ms
2024-11-09 01:33:59.264 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:33:59.265 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:33:59.266 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:33:59.266 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:33:59.268 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 271.9722ms
2024-11-09 01:34:02.394 +07:00 [DBG] Connection id "0HN7VCUKSF7QT" received FIN.
2024-11-09 01:34:02.395 +07:00 [DBG] Connection id "0HN7VCUKSF7QT" is closed. The last processed stream ID was 1.
2024-11-09 01:34:02.396 +07:00 [DBG] Connection id "0HN7VCUKSF7QT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:34:02.396 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QT completed.
2024-11-09 01:34:02.398 +07:00 [DBG] Connection id "0HN7VCUKSF7QT" stopped.
2024-11-09 01:34:08.020 +07:00 [DBG] Connection id "0HN7VCUKSF7QU" accepted.
2024-11-09 01:34:08.021 +07:00 [DBG] Connection id "0HN7VCUKSF7QU" started.
2024-11-09 01:34:08.039 +07:00 [DBG] Connection 0HN7VCUKSF7QU established using the following protocol: "Tls13"
2024-11-09 01:34:08.041 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:34:08.043 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:34:08.044 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:34:08.044 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:34:08.045 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:34:08.046 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:34:08.047 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:34:08.047 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:34:08.048 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:34:08.048 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:34:08.049 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:34:08.050 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:34:08.051 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:34:08.052 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:34:08.053 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:34:08.054 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:34:08.056 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:34:08.056 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:34:08.057 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:34:08.058 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:34:08.059 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:34:08.059 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:34:08.060 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:34:08.061 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:34:08.061 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:34:08.062 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:34:08.063 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:08.063 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:08.064 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:08.064 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:34:08.065 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:08.066 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:34:08.066 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:34:08.067 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:34:08.068 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:34:08.068 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:34:08.069 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:34:08.069 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:34:08.070 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:34:08.071 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:34:08.071 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:34:08.072 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:34:08.073 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:34:08.077 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:34:08.080 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:34:08.081 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:34:08.081 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:08.082 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:08.084 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:34:08.085 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:34:08.086 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:34:08.087 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:34:08.185 +07:00 [INF] Executed DbCommand (98ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:34:08.186 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:08.187 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:34:08.189 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:08.190 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 01:34:08.190 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:34:08.192 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:34:08.192 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:34:08.192 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:34:08.193 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:34:08.195 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:34:08.201 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 147.1087ms
2024-11-09 01:34:08.202 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:34:08.202 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:34:08.203 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:08.204 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:34:08.204 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 163.6891ms
2024-11-09 01:34:12.387 +07:00 [DBG] Connection id "0HN7VCUKSF7QU" received FIN.
2024-11-09 01:34:12.388 +07:00 [DBG] Connection id "0HN7VCUKSF7QU" is closed. The last processed stream ID was 1.
2024-11-09 01:34:12.388 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QU completed.
2024-11-09 01:34:12.388 +07:00 [DBG] Connection id "0HN7VCUKSF7QU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:34:12.401 +07:00 [DBG] Connection id "0HN7VCUKSF7QU" stopped.
2024-11-09 01:34:33.283 +07:00 [DBG] Connection id "0HN7VCUKSF7QV" accepted.
2024-11-09 01:34:33.285 +07:00 [DBG] Connection id "0HN7VCUKSF7QV" started.
2024-11-09 01:34:33.291 +07:00 [DBG] Connection 0HN7VCUKSF7QV established using the following protocol: "Tls13"
2024-11-09 01:34:33.294 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:34:33.295 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:34:33.296 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:34:33.296 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:34:33.297 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:34:33.298 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:34:33.299 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:34:33.301 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:34:33.302 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:34:33.302 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:34:33.303 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:34:33.304 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:34:33.305 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:34:33.308 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:34:33.309 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:34:33.310 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:34:33.312 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:34:33.313 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:34:33.314 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:34:33.315 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:34:33.316 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:34:33.317 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:34:33.317 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:34:33.318 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:34:33.325 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:34:33.329 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:34:33.329 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:33.330 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:33.331 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:33.332 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:34:33.333 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:33.334 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:34:33.336 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:34:33.338 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:34:33.339 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:34:33.340 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:34:33.342 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:34:33.343 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:34:33.345 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:34:33.346 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:34:33.347 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:34:33.348 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:34:33.349 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:34:33.353 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:34:33.355 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:34:33.356 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:34:33.357 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:33.358 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:33.359 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:34:33.359 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:34:33.360 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:34:33.361 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:34:33.382 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:34:33.384 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:33.385 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:34:33.386 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:33.386 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:34:33.387 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:34:33.389 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:34:33.390 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:34:33.390 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:34:33.391 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:34:33.392 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:34:33.393 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 82.9452ms
2024-11-09 01:34:33.394 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:34:33.395 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:34:33.395 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:33.397 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:34:33.398 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 104.6691ms
2024-11-09 01:34:37.439 +07:00 [DBG] Connection id "0HN7VCUKSF7QV" received FIN.
2024-11-09 01:34:37.440 +07:00 [DBG] Connection id "0HN7VCUKSF7QV" is closed. The last processed stream ID was 1.
2024-11-09 01:34:37.441 +07:00 [DBG] Connection id "0HN7VCUKSF7QV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:34:37.441 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7QV completed.
2024-11-09 01:34:37.443 +07:00 [DBG] Connection id "0HN7VCUKSF7QV" stopped.
2024-11-09 01:34:40.057 +07:00 [DBG] Connection id "0HN7VCUKSF7R0" accepted.
2024-11-09 01:34:40.058 +07:00 [DBG] Connection id "0HN7VCUKSF7R0" started.
2024-11-09 01:34:40.076 +07:00 [DBG] Connection 0HN7VCUKSF7R0 established using the following protocol: "Tls13"
2024-11-09 01:34:40.080 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:34:40.083 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:34:40.084 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:34:40.085 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:34:40.086 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:34:40.087 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:34:40.088 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:34:40.089 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:34:40.091 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:34:40.094 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:34:40.096 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:34:40.098 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:34:40.100 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:34:40.168 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:34:40.170 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:34:40.171 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:34:40.175 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:34:40.176 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:34:40.177 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:34:40.178 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:34:40.179 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:34:40.180 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:34:40.181 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:34:40.182 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:34:40.183 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:34:40.184 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:34:40.185 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:40.186 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:40.187 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:40.188 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:34:40.189 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:40.190 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:34:40.191 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:34:40.193 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:34:40.195 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:34:40.196 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:34:40.197 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:34:40.198 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:34:40.198 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:34:40.199 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:34:40.200 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:34:40.201 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:34:40.201 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:34:40.211 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:34:40.217 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:34:40.217 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:34:40.218 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:40.220 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:40.222 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:34:40.223 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:34:40.224 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:34:40.228 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:34:40.246 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:34:40.248 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:40.249 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:34:40.250 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:40.251 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 01:34:40.254 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:34:40.256 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:34:40.256 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:34:40.258 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:34:40.258 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:34:40.259 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:34:40.263 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 92.0139ms
2024-11-09 01:34:40.264 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:34:40.265 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:34:40.267 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:40.268 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:34:40.270 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 190.9681ms
2024-11-09 01:34:42.524 +07:00 [DBG] Connection id "0HN7VCUKSF7R0" received FIN.
2024-11-09 01:34:42.530 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7R0 completed.
2024-11-09 01:34:42.530 +07:00 [DBG] Connection id "0HN7VCUKSF7R0" is closed. The last processed stream ID was 1.
2024-11-09 01:34:42.536 +07:00 [DBG] Connection id "0HN7VCUKSF7R0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:34:42.560 +07:00 [DBG] Connection id "0HN7VCUKSF7R0" stopped.
2024-11-09 01:34:58.162 +07:00 [DBG] Connection id "0HN7VCUKSF7R1" accepted.
2024-11-09 01:34:58.177 +07:00 [DBG] Connection id "0HN7VCUKSF7R1" started.
2024-11-09 01:34:58.424 +07:00 [DBG] Connection 0HN7VCUKSF7R1 established using the following protocol: "Tls13"
2024-11-09 01:34:58.443 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:34:58.447 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:34:58.451 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:34:58.459 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:34:58.459 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:34:58.460 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:34:58.463 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:34:58.465 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:34:58.465 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:34:58.477 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:34:58.480 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:34:58.480 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:34:58.503 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:34:58.508 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:34:58.517 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:34:58.520 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:34:58.582 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:34:58.583 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:34:58.584 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:34:58.585 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:34:58.586 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:34:58.587 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:34:58.588 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:34:58.588 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:34:58.589 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:34:58.590 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:34:58.591 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:58.591 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:58.592 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:58.592 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:34:58.593 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:34:58.599 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:34:58.599 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:34:58.600 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:34:58.601 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:34:58.601 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:34:58.602 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:34:58.603 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:34:58.603 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:34:58.604 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:34:58.604 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:34:58.605 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:34:58.606 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:34:58.781 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:34:58.810 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:34:58.813 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 01:34:58.813 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:58.845 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:58.906 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:34:58.908 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (61ms).
2024-11-09 01:34:58.911 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (64ms).
2024-11-09 01:34:58.955 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:34:59.523 +07:00 [INF] Executed DbCommand (611ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:34:59.525 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:59.526 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:34:59.527 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:59.528 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:34:59.530 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:34:59.532 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:34:59.533 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:34:59.533 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:34:59.534 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:34:59.535 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:34:59.538 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 1020.6036ms
2024-11-09 01:34:59.539 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:34:59.540 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:34:59.541 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:34:59.541 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:34:59.542 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 1105.5846ms
2024-11-09 01:35:01.072 +07:00 [DBG] Connection id "0HN7VCUKSF7R1" received FIN.
2024-11-09 01:35:01.074 +07:00 [DBG] Connection id "0HN7VCUKSF7R1" is closed. The last processed stream ID was 1.
2024-11-09 01:35:01.075 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7R1 completed.
2024-11-09 01:35:01.075 +07:00 [DBG] Connection id "0HN7VCUKSF7R1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:35:01.086 +07:00 [DBG] Connection id "0HN7VCUKSF7R1" stopped.
2024-11-09 01:35:17.032 +07:00 [DBG] Connection id "0HN7VCUKSF7R2" accepted.
2024-11-09 01:35:17.035 +07:00 [DBG] Connection id "0HN7VCUKSF7R2" started.
2024-11-09 01:35:17.052 +07:00 [DBG] Connection 0HN7VCUKSF7R2 established using the following protocol: "Tls13"
2024-11-09 01:35:17.056 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:35:17.057 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:35:17.058 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:35:17.058 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:35:17.059 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:35:17.059 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:35:17.060 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:35:17.061 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:35:17.064 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:35:17.065 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:35:17.066 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:35:17.067 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:35:17.070 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:35:17.072 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:35:17.072 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:35:17.073 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:35:17.076 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:35:17.077 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:35:17.079 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:35:17.079 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:35:17.080 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:35:17.081 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:35:17.081 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:35:17.082 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:35:17.083 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:35:17.083 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:35:17.084 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:35:17.085 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:35:17.085 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:35:17.086 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:35:17.086 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:35:17.087 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:35:17.087 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:35:17.088 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:35:17.089 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:35:17.089 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:35:17.090 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:35:17.090 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:35:17.091 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:35:17.092 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:35:17.092 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:35:17.093 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:35:17.093 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:35:17.098 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:35:17.100 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:35:17.100 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:35:17.101 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:17.103 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:17.105 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:35:17.105 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:35:17.106 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:35:17.107 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:35:17.121 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:35:17.122 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:17.122 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:35:17.123 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:17.124 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:35:17.125 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:35:17.126 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:35:17.126 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:35:17.127 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:35:17.127 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:35:17.128 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:35:17.130 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 56.7174ms
2024-11-09 01:35:17.133 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:35:17.133 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:35:17.134 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:17.135 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:35:17.135 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 81.6115ms
2024-11-09 01:35:21.155 +07:00 [DBG] Connection id "0HN7VCUKSF7R2" received FIN.
2024-11-09 01:35:21.156 +07:00 [DBG] Connection id "0HN7VCUKSF7R2" is closed. The last processed stream ID was 1.
2024-11-09 01:35:21.156 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7R2 completed.
2024-11-09 01:35:21.156 +07:00 [DBG] Connection id "0HN7VCUKSF7R2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:35:21.163 +07:00 [DBG] Connection id "0HN7VCUKSF7R2" stopped.
2024-11-09 01:35:35.941 +07:00 [DBG] Connection id "0HN7VCUKSF7R3" accepted.
2024-11-09 01:35:35.950 +07:00 [DBG] Connection id "0HN7VCUKSF7R3" started.
2024-11-09 01:35:35.993 +07:00 [DBG] Connection 0HN7VCUKSF7R3 established using the following protocol: "Tls13"
2024-11-09 01:35:35.997 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:35:35.999 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:35:36.001 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:35:36.002 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:35:36.003 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:35:36.004 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:35:36.005 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:35:36.006 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:35:36.007 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:35:36.010 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:35:36.011 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:35:36.012 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:35:36.015 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:35:36.018 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:35:36.019 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:35:36.019 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:35:36.025 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:35:36.026 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:35:36.026 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:35:36.027 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:35:36.028 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:35:36.029 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:35:36.029 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:35:36.030 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:35:36.031 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:35:36.031 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:35:36.032 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:35:36.033 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:35:36.033 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:35:36.034 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:35:36.034 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:35:36.035 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:35:36.036 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:35:36.036 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:35:36.038 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:35:36.038 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:35:36.039 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:35:36.040 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:35:36.040 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:35:36.041 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:35:36.041 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:35:36.042 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:35:36.043 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:35:36.054 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:35:36.059 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:35:36.060 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:35:36.060 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:36.066 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:36.068 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:35:36.068 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:35:36.069 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:35:36.073 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:35:36.219 +07:00 [INF] Executed DbCommand (149ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:35:36.221 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:36.222 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:35:36.223 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:36.223 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:35:36.226 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:35:36.228 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:35:36.229 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:35:36.229 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:35:36.231 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:35:36.232 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:35:36.234 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 214.5213ms
2024-11-09 01:35:36.235 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:35:36.235 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:35:36.236 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:36.237 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:35:36.239 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 242.0344ms
2024-11-09 01:35:41.209 +07:00 [DBG] Connection id "0HN7VCUKSF7R3" received FIN.
2024-11-09 01:35:41.216 +07:00 [DBG] Connection id "0HN7VCUKSF7R3" is closed. The last processed stream ID was 1.
2024-11-09 01:35:41.217 +07:00 [DBG] Connection id "0HN7VCUKSF7R3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:35:41.218 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7R3 completed.
2024-11-09 01:35:41.223 +07:00 [DBG] Connection id "0HN7VCUKSF7R3" stopped.
2024-11-09 01:35:58.079 +07:00 [DBG] Connection id "0HN7VCUKSF7R4" accepted.
2024-11-09 01:35:58.080 +07:00 [DBG] Connection id "0HN7VCUKSF7R4" started.
2024-11-09 01:35:58.098 +07:00 [DBG] Connection 0HN7VCUKSF7R4 established using the following protocol: "Tls13"
2024-11-09 01:35:58.108 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:35:58.111 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:35:58.112 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:35:58.113 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:35:58.113 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:35:58.114 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:35:58.130 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:35:58.131 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:35:58.132 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:35:58.133 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:35:58.134 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:35:58.135 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:35:58.136 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:35:58.137 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:35:58.138 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:35:58.138 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:35:58.141 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:35:58.142 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:35:58.143 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:35:58.144 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:35:58.144 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:35:58.145 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:35:58.145 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:35:58.146 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:35:58.147 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:35:58.147 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:35:58.148 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:35:58.148 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:35:58.149 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:35:58.149 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:35:58.150 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:35:58.150 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:35:58.151 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:35:58.152 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:35:58.152 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:35:58.153 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:35:58.153 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:35:58.154 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:35:58.154 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:35:58.155 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:35:58.156 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:35:58.156 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:35:58.157 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:35:58.163 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:35:58.166 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:35:58.167 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:35:58.167 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:58.169 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:58.171 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:35:58.172 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:35:58.172 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:35:58.176 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:35:58.264 +07:00 [INF] Executed DbCommand (91ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:35:58.266 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:58.267 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:35:58.267 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:58.269 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 01:35:58.270 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:35:58.271 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:35:58.272 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:35:58.272 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:35:58.272 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:35:58.273 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:35:58.275 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 136.2703ms
2024-11-09 01:35:58.275 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:35:58.276 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:35:58.277 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:35:58.277 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:35:58.278 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 170.0583ms
2024-11-09 01:36:01.238 +07:00 [DBG] Connection id "0HN7VCUKSF7R4" received FIN.
2024-11-09 01:36:01.239 +07:00 [DBG] Connection id "0HN7VCUKSF7R4" is closed. The last processed stream ID was 1.
2024-11-09 01:36:01.240 +07:00 [DBG] Connection id "0HN7VCUKSF7R4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:36:01.242 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7R4 completed.
2024-11-09 01:36:01.244 +07:00 [DBG] Connection id "0HN7VCUKSF7R4" stopped.
2024-11-09 01:36:04.650 +07:00 [DBG] Connection id "0HN7VCUKSF7R5" accepted.
2024-11-09 01:36:04.651 +07:00 [DBG] Connection id "0HN7VCUKSF7R5" started.
2024-11-09 01:36:04.662 +07:00 [DBG] Connection 0HN7VCUKSF7R5 established using the following protocol: "Tls13"
2024-11-09 01:36:04.667 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:36:04.668 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:36:04.669 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:36:04.669 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:36:04.670 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:36:04.670 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:36:04.671 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:36:04.672 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:36:04.676 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:36:04.677 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:36:04.677 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:36:04.678 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:36:04.679 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:36:04.680 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:36:04.680 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:36:04.681 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:36:04.682 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:36:04.682 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:36:04.686 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:36:04.686 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:36:04.687 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:36:04.688 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:36:04.688 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:36:04.689 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:36:04.689 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:36:04.690 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:36:04.691 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:36:04.691 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:36:04.692 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:36:04.693 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:36:04.693 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:36:04.694 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:36:04.695 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:36:04.696 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:36:04.696 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:36:04.697 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:36:04.698 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:36:04.699 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:36:04.701 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:36:04.702 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:36:04.703 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:36:04.703 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:36:04.704 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:36:04.708 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:36:04.709 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:36:04.710 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:36:04.710 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:04.711 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:04.712 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:36:04.712 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:36:04.713 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:36:04.713 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:36:04.743 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:36:04.750 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:04.750 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 5ms reading results.
2024-11-09 01:36:04.751 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:04.752 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:36:04.752 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:36:04.753 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:36:04.753 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:36:04.754 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:36:04.754 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:36:04.755 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:36:04.762 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 80.9001ms
2024-11-09 01:36:04.763 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:36:04.763 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:36:04.764 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:04.765 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:36:04.765 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 100.7257ms
2024-11-09 01:36:06.237 +07:00 [DBG] Connection id "0HN7VCUKSF7R5" received FIN.
2024-11-09 01:36:06.239 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7R5 completed.
2024-11-09 01:36:06.240 +07:00 [DBG] Connection id "0HN7VCUKSF7R5" is closed. The last processed stream ID was 1.
2024-11-09 01:36:06.244 +07:00 [DBG] Connection id "0HN7VCUKSF7R5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:36:06.252 +07:00 [DBG] Connection id "0HN7VCUKSF7R5" stopped.
2024-11-09 01:36:12.199 +07:00 [DBG] Connection id "0HN7VCUKSF7R6" accepted.
2024-11-09 01:36:12.200 +07:00 [DBG] Connection id "0HN7VCUKSF7R6" started.
2024-11-09 01:36:12.208 +07:00 [DBG] Connection 0HN7VCUKSF7R6 established using the following protocol: "Tls13"
2024-11-09 01:36:12.210 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:36:12.211 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:36:12.212 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:36:12.212 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:36:12.213 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:36:12.213 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:36:12.215 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:36:12.215 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:36:12.216 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:36:12.217 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:36:12.218 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:36:12.219 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:36:12.220 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:36:12.221 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:36:12.221 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:36:12.223 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:36:12.225 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:36:12.226 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:36:12.226 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:36:12.227 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:36:12.228 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:36:12.229 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:36:12.229 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:36:12.230 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:36:12.230 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:36:12.231 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:36:12.232 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:36:12.232 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:36:12.233 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:36:12.233 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:36:12.234 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:36:12.235 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:36:12.235 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:36:12.236 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:36:12.237 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:36:12.238 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:36:12.238 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:36:12.239 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:36:12.240 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:36:12.240 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:36:12.241 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:36:12.241 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:36:12.242 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:36:12.244 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:36:12.246 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:36:12.247 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:36:12.247 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:12.248 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:12.249 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:36:12.249 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:36:12.251 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:36:12.252 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:36:12.269 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:36:12.271 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:12.271 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:36:12.272 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:12.273 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:36:12.273 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:36:12.275 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:36:12.275 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:36:12.275 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:36:12.276 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:36:12.276 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:36:12.278 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 55.1635ms
2024-11-09 01:36:12.279 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:36:12.279 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:36:12.280 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:12.280 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:36:12.282 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 71.5075ms
2024-11-09 01:36:16.254 +07:00 [DBG] Connection id "0HN7VCUKSF7R6" received FIN.
2024-11-09 01:36:16.254 +07:00 [DBG] Connection id "0HN7VCUKSF7R6" is closed. The last processed stream ID was 1.
2024-11-09 01:36:16.255 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7R6 completed.
2024-11-09 01:36:16.255 +07:00 [DBG] Connection id "0HN7VCUKSF7R6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:36:16.268 +07:00 [DBG] Connection id "0HN7VCUKSF7R6" stopped.
2024-11-09 01:36:52.382 +07:00 [DBG] Connection id "0HN7VCUKSF7R7" accepted.
2024-11-09 01:36:52.404 +07:00 [DBG] Connection id "0HN7VCUKSF7R7" started.
2024-11-09 01:36:52.492 +07:00 [DBG] Connection 0HN7VCUKSF7R7 established using the following protocol: "Tls13"
2024-11-09 01:36:52.555 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:36:52.565 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:36:52.568 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:36:52.572 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:36:52.575 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:36:52.577 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:36:52.588 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:36:52.595 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:36:52.597 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:36:52.602 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:36:52.605 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:36:52.606 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:36:52.611 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:36:52.614 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:36:52.615 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:36:52.616 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:36:52.629 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:36:52.633 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:36:52.634 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:36:52.636 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:36:52.637 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:36:52.637 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:36:52.638 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:36:52.639 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:36:52.640 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:36:52.640 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:36:52.642 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:36:52.643 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:36:52.643 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:36:52.644 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:36:52.645 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:36:52.646 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:36:52.647 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:36:52.648 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:36:52.649 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:36:52.650 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:36:52.651 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:36:52.651 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:36:52.652 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:36:52.653 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:36:52.654 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:36:52.654 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:36:52.655 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:36:52.685 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:36:52.710 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:36:52.712 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 01:36:52.714 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:52.723 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:52.732 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:36:52.734 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2024-11-09 01:36:52.735 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-11-09 01:36:52.740 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:36:52.938 +07:00 [INF] Executed DbCommand (201ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:36:52.940 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:52.942 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:36:52.942 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:52.943 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:36:52.945 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:36:52.947 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:36:52.948 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:36:52.949 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:36:52.950 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:36:52.950 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:36:52.958 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 341.5227ms
2024-11-09 01:36:52.959 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:36:52.959 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:36:52.960 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:36:52.961 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:36:52.961 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 409.7143ms
2024-11-09 01:36:56.569 +07:00 [DBG] Connection id "0HN7VCUKSF7R7" received FIN.
2024-11-09 01:36:56.570 +07:00 [DBG] Connection id "0HN7VCUKSF7R7" is closed. The last processed stream ID was 1.
2024-11-09 01:36:56.571 +07:00 [DBG] Connection id "0HN7VCUKSF7R7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:36:56.573 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7R7 completed.
2024-11-09 01:36:56.579 +07:00 [DBG] Connection id "0HN7VCUKSF7R7" stopped.
2024-11-09 01:37:17.833 +07:00 [DBG] Connection id "0HN7VCUKSF7R8" accepted.
2024-11-09 01:37:17.862 +07:00 [DBG] Connection id "0HN7VCUKSF7R8" started.
2024-11-09 01:37:17.905 +07:00 [DBG] Connection 0HN7VCUKSF7R8 established using the following protocol: "Tls13"
2024-11-09 01:37:17.935 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:37:17.940 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:37:17.943 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:37:17.946 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:37:17.949 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:37:17.951 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:37:17.960 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:37:17.963 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:37:17.966 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:37:17.973 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:37:17.976 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:37:17.977 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:37:17.981 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:37:17.983 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:37:17.984 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:37:17.985 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:37:18.001 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:37:18.002 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:37:18.006 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:37:18.007 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:37:18.007 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:37:18.008 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:37:18.009 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:37:18.009 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:37:18.010 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:37:18.011 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:37:18.011 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:37:18.012 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:37:18.013 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:37:18.013 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:37:18.014 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:37:18.015 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:37:18.015 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:37:18.017 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:37:18.018 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:37:18.018 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:37:18.019 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:37:18.022 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:37:18.023 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:37:18.023 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:37:18.024 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:37:18.024 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:37:18.025 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:37:18.049 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:37:18.062 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:37:18.063 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:37:18.065 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:37:18.070 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:37:18.075 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:37:18.076 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:37:18.077 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-09 01:37:18.082 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:37:18.255 +07:00 [INF] Executed DbCommand (176ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:37:18.258 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:37:18.259 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:37:18.260 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:37:18.260 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:37:18.263 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:37:18.264 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:37:18.264 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:37:18.264 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:37:18.265 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:37:18.265 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:37:18.271 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 286.4853ms
2024-11-09 01:37:18.273 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:37:18.273 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:37:18.274 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:37:18.275 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:37:18.276 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 344.3193ms
2024-11-09 01:37:21.602 +07:00 [DBG] Connection id "0HN7VCUKSF7R8" received FIN.
2024-11-09 01:37:21.604 +07:00 [DBG] Connection id "0HN7VCUKSF7R8" is closed. The last processed stream ID was 1.
2024-11-09 01:37:21.604 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7R8 completed.
2024-11-09 01:37:21.605 +07:00 [DBG] Connection id "0HN7VCUKSF7R8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:37:21.616 +07:00 [DBG] Connection id "0HN7VCUKSF7R8" stopped.
2024-11-09 01:37:29.484 +07:00 [DBG] Connection id "0HN7VCUKSF7R9" accepted.
2024-11-09 01:37:29.484 +07:00 [DBG] Connection id "0HN7VCUKSF7R9" started.
2024-11-09 01:37:29.499 +07:00 [DBG] Connection 0HN7VCUKSF7R9 established using the following protocol: "Tls13"
2024-11-09 01:37:29.502 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:37:29.504 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:37:29.504 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:37:29.505 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:37:29.506 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:37:29.506 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:37:29.507 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:37:29.508 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:37:29.509 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:37:29.510 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:37:29.511 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:37:29.513 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:37:29.534 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:37:29.536 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:37:29.537 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:37:29.538 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:37:29.539 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:37:29.540 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:37:29.541 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:37:29.542 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:37:29.543 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:37:29.543 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:37:29.544 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:37:29.545 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:37:29.546 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:37:29.546 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:37:29.547 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:37:29.548 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:37:29.549 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:37:29.549 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:37:29.550 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:37:29.550 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:37:29.551 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:37:29.552 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:37:29.553 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:37:29.553 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:37:29.554 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:37:29.555 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:37:29.555 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:37:29.556 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:37:29.557 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:37:29.557 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:37:29.558 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:37:29.560 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:37:29.562 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:37:29.562 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:37:29.563 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:37:29.564 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:37:29.564 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:37:29.565 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:37:29.566 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:37:29.567 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:37:29.579 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:37:29.581 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:37:29.582 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:37:29.582 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:37:29.583 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:37:29.584 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:37:29.585 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:37:29.586 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:37:29.586 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:37:29.587 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:37:29.587 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:37:29.588 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.522ms
2024-11-09 01:37:29.589 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:37:29.589 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:37:29.590 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:37:29.591 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:37:29.592 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 90.2981ms
2024-11-09 01:37:31.611 +07:00 [DBG] Connection id "0HN7VCUKSF7R9" received FIN.
2024-11-09 01:37:31.612 +07:00 [DBG] Connection id "0HN7VCUKSF7R9" is closed. The last processed stream ID was 1.
2024-11-09 01:37:31.613 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7R9 completed.
2024-11-09 01:37:31.613 +07:00 [DBG] Connection id "0HN7VCUKSF7R9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:37:31.625 +07:00 [DBG] Connection id "0HN7VCUKSF7R9" stopped.
2024-11-09 01:38:20.055 +07:00 [DBG] Connection id "0HN7VCUKSF7RA" accepted.
2024-11-09 01:38:20.070 +07:00 [DBG] Connection id "0HN7VCUKSF7RA" started.
2024-11-09 01:38:20.134 +07:00 [DBG] Connection 0HN7VCUKSF7RA established using the following protocol: "Tls13"
2024-11-09 01:38:20.298 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:38:20.364 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:38:20.373 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:38:20.411 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:38:20.412 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:38:20.416 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:38:20.450 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:38:20.459 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:38:20.460 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:38:20.507 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:38:20.510 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:38:20.511 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:38:20.552 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:38:20.564 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:38:20.565 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:38:20.566 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:38:20.673 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:38:20.674 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:38:20.675 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:38:20.676 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:38:20.677 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:38:20.678 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:38:20.678 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:38:20.679 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:38:20.680 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:38:20.681 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:38:20.681 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:38:20.692 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:38:20.693 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:38:20.694 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:38:20.701 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:38:20.701 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:38:20.702 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:38:20.703 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:38:20.704 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:38:20.704 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:38:20.705 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:38:20.705 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:38:20.706 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:38:20.707 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:38:20.708 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:38:20.708 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:38:20.709 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:38:21.213 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:38:21.402 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:38:21.402 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:38:21.409 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:21.494 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:21.514 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:38:21.518 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (21ms).
2024-11-09 01:38:21.520 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (24ms).
2024-11-09 01:38:21.530 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:38:21.777 +07:00 [INF] Executed DbCommand (252ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:38:21.779 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:21.781 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:38:21.782 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:21.782 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:38:21.785 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:38:21.787 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:38:21.787 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:38:21.788 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:38:21.788 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:38:21.789 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:38:21.885 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 1319.6446ms
2024-11-09 01:38:21.887 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:38:21.888 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:38:21.889 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:21.890 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:38:21.892 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 1629.4511ms
2024-11-09 01:38:24.447 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:38:24.448 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:38:24.449 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:38:24.450 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:38:24.450 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:38:24.451 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:38:24.452 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:38:24.453 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:38:24.454 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:38:24.454 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:38:24.455 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:38:24.456 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:38:24.457 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:38:24.458 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:38:24.459 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:38:24.460 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:38:24.461 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:38:24.462 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:38:24.463 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:38:24.464 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:38:24.464 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:38:24.465 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:38:24.466 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:38:24.467 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:38:24.468 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:38:24.468 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:38:24.469 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:38:24.471 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:38:24.471 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:38:24.472 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:38:24.473 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:38:24.474 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:38:24.475 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:38:24.476 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:38:24.476 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:38:24.477 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:38:24.478 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:38:24.478 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:38:24.479 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:38:24.480 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:38:24.480 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:38:24.481 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:38:24.482 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:38:24.484 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:38:24.485 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:38:24.486 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:38:24.487 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:24.487 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:24.488 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:38:24.489 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:38:24.489 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:38:24.490 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:38:24.504 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:38:24.505 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:24.506 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:38:24.507 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:24.508 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:38:24.509 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:38:24.510 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:38:24.510 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:38:24.511 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:38:24.511 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:38:24.512 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:38:24.512 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 52.0941ms
2024-11-09 01:38:24.513 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:38:24.513 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:38:24.514 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:24.514 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:38:24.516 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 69.3095ms
2024-11-09 01:38:26.690 +07:00 [DBG] Connection id "0HN7VCUKSF7RA" received FIN.
2024-11-09 01:38:26.691 +07:00 [DBG] Connection id "0HN7VCUKSF7RA" is closed. The last processed stream ID was 3.
2024-11-09 01:38:26.692 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RA completed.
2024-11-09 01:38:26.692 +07:00 [DBG] Connection id "0HN7VCUKSF7RA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:38:26.704 +07:00 [DBG] Connection id "0HN7VCUKSF7RA" stopped.
2024-11-09 01:38:46.361 +07:00 [DBG] Connection id "0HN7VCUKSF7RB" accepted.
2024-11-09 01:38:46.374 +07:00 [DBG] Connection id "0HN7VCUKSF7RB" started.
2024-11-09 01:38:46.420 +07:00 [DBG] Connection 0HN7VCUKSF7RB established using the following protocol: "Tls13"
2024-11-09 01:38:46.431 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:38:46.438 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:38:46.441 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:38:46.444 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:38:46.445 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:38:46.448 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:38:46.513 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:38:46.516 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:38:46.517 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:38:46.523 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:38:46.525 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:38:46.526 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:38:46.530 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:38:46.533 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:38:46.534 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:38:46.535 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:38:46.550 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:38:46.551 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:38:46.552 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:38:46.553 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:38:46.554 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:38:46.555 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:38:46.555 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:38:46.556 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:38:46.557 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:38:46.558 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:38:46.558 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:38:46.560 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:38:46.560 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:38:46.561 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:38:46.562 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:38:46.563 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:38:46.564 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:38:46.564 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:38:46.565 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:38:46.566 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:38:46.567 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:38:46.568 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:38:46.569 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:38:46.569 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:38:46.570 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:38:46.572 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:38:46.573 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:38:46.593 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:38:46.607 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:38:46.609 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:38:46.610 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:46.614 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:46.619 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:38:46.622 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-11-09 01:38:46.624 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2024-11-09 01:38:46.629 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:38:46.701 +07:00 [INF] Executed DbCommand (76ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:38:46.704 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:46.708 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 4ms reading results.
2024-11-09 01:38:46.711 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:46.713 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:38:46.720 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:38:46.721 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:38:46.722 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:38:46.722 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:38:46.723 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:38:46.724 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:38:46.726 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 191.1214ms
2024-11-09 01:38:46.727 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:38:46.728 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:38:46.728 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:38:46.729 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:38:46.730 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 300.9676ms
2024-11-09 01:38:51.731 +07:00 [DBG] Connection id "0HN7VCUKSF7RB" received FIN.
2024-11-09 01:38:51.732 +07:00 [DBG] Connection id "0HN7VCUKSF7RB" is closed. The last processed stream ID was 1.
2024-11-09 01:38:51.735 +07:00 [DBG] Connection id "0HN7VCUKSF7RB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:38:51.738 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RB completed.
2024-11-09 01:38:51.739 +07:00 [DBG] Connection id "0HN7VCUKSF7RB" stopped.
2024-11-09 01:39:28.607 +07:00 [DBG] Connection id "0HN7VCUKSF7RC" accepted.
2024-11-09 01:39:28.647 +07:00 [DBG] Connection id "0HN7VCUKSF7RC" started.
2024-11-09 01:39:28.687 +07:00 [DBG] Connection 0HN7VCUKSF7RC established using the following protocol: "Tls13"
2024-11-09 01:39:28.696 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:39:28.702 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:39:28.704 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:39:28.733 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:39:28.737 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:39:28.740 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:39:28.744 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:39:28.747 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:39:28.748 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:39:28.751 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:39:28.753 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:39:28.754 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:39:28.757 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:39:28.759 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:39:28.759 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:39:28.760 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:39:28.772 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:39:28.773 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:39:28.775 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:39:28.775 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:39:28.776 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:39:28.777 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:39:28.778 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:39:28.779 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:39:28.779 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:39:28.780 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:39:28.781 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:39:28.782 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:39:28.782 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:39:28.783 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:39:28.783 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:39:28.784 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:39:28.785 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:39:28.786 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:39:28.786 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:39:28.787 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:39:28.788 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:39:28.789 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:39:28.789 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:39:28.790 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:39:28.791 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:39:28.792 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:39:28.792 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:39:28.815 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:39:28.827 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:39:28.827 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:39:28.828 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:39:28.832 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:39:28.835 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:39:28.836 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:39:28.837 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:39:28.840 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:39:29.005 +07:00 [INF] Executed DbCommand (164ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:39:29.008 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:39:29.011 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-11-09 01:39:29.013 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:39:29.015 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:39:29.020 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:39:29.023 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:39:29.023 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:39:29.024 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:39:29.026 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:39:29.029 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:39:29.046 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 285.7268ms
2024-11-09 01:39:29.048 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:39:29.050 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:39:29.050 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:39:29.052 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:39:29.053 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 359.4084ms
2024-11-09 01:39:34.082 +07:00 [DBG] Connection id "0HN7VCUKSF7RC" received FIN.
2024-11-09 01:39:34.092 +07:00 [DBG] Connection id "0HN7VCUKSF7RC" is closed. The last processed stream ID was 1.
2024-11-09 01:39:34.094 +07:00 [DBG] Connection id "0HN7VCUKSF7RC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:39:34.098 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RC completed.
2024-11-09 01:39:34.107 +07:00 [DBG] Connection id "0HN7VCUKSF7RC" stopped.
2024-11-09 01:40:27.160 +07:00 [DBG] Connection id "0HN7VCUKSF7RD" accepted.
2024-11-09 01:40:27.199 +07:00 [DBG] Connection id "0HN7VCUKSF7RD" started.
2024-11-09 01:40:27.252 +07:00 [DBG] Connection 0HN7VCUKSF7RD established using the following protocol: "Tls13"
2024-11-09 01:40:27.303 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:40:27.310 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:40:27.311 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:40:27.316 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:40:27.318 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:40:27.318 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:40:27.321 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:40:27.323 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:40:27.324 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:40:27.333 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:40:27.337 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:40:27.338 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:40:27.343 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:40:27.349 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:40:27.349 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:40:27.350 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:40:27.365 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:40:27.366 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:40:27.367 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:40:27.368 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:40:27.369 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:40:27.370 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:40:27.370 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:40:27.371 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:40:27.372 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:40:27.372 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:40:27.373 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:40:27.374 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:40:27.375 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:40:27.375 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:40:27.376 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:40:27.376 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:40:27.377 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:40:27.378 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:40:27.379 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:40:27.379 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:40:27.380 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:40:27.381 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:40:27.382 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:40:27.382 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:40:27.383 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:40:27.384 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:40:27.384 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:40:27.406 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:40:27.418 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:40:27.418 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:40:27.419 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:27.426 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:27.429 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:40:27.432 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:40:27.433 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-09 01:40:27.438 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:40:27.577 +07:00 [INF] Executed DbCommand (142ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:40:27.580 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:27.581 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:40:27.582 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:27.582 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:40:27.586 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:40:27.588 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:40:27.588 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:40:27.589 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:40:27.589 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:40:27.590 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:40:27.594 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 243.3798ms
2024-11-09 01:40:27.594 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:40:27.595 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:40:27.598 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:27.598 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:40:27.599 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 297.7673ms
2024-11-09 01:40:28.050 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:40:28.052 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:40:28.052 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:40:28.053 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:40:28.053 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:40:28.054 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:40:28.055 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:40:28.056 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:40:28.056 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:40:28.057 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:40:28.058 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:40:28.059 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:40:28.059 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:40:28.060 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:40:28.061 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:40:28.062 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:40:28.063 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:40:28.064 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:40:28.065 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:40:28.065 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:40:28.066 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:40:28.067 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:40:28.067 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:40:28.068 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:40:28.068 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:40:28.069 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:40:28.070 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:40:28.070 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:40:28.071 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:40:28.071 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:40:28.072 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:40:28.072 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:40:28.073 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:40:28.075 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:40:28.077 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:40:28.077 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:40:28.078 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:40:28.078 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:40:28.079 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:40:28.079 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:40:28.080 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:40:28.081 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:40:28.081 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:40:28.083 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:40:28.085 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:40:28.086 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:40:28.086 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:28.087 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:28.088 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:40:28.089 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:40:28.090 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:40:28.091 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:40:28.094 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:40:28.095 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:28.096 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:40:28.096 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:28.097 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:40:28.098 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:40:28.099 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:40:28.099 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:40:28.099 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:40:28.100 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:40:28.100 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:40:28.102 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.9632ms
2024-11-09 01:40:28.102 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:40:28.103 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:40:28.104 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:28.104 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:40:28.105 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 55.0855ms
2024-11-09 01:40:28.970 +07:00 [DBG] Connection id "0HN7VCUKSF7RD" received FIN.
2024-11-09 01:40:28.971 +07:00 [DBG] Connection id "0HN7VCUKSF7RD" is closed. The last processed stream ID was 3.
2024-11-09 01:40:28.971 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RD completed.
2024-11-09 01:40:28.971 +07:00 [DBG] Connection id "0HN7VCUKSF7RD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:40:28.976 +07:00 [DBG] Connection id "0HN7VCUKSF7RD" stopped.
2024-11-09 01:40:44.683 +07:00 [DBG] Connection id "0HN7VCUKSF7RE" accepted.
2024-11-09 01:40:44.691 +07:00 [DBG] Connection id "0HN7VCUKSF7RE" started.
2024-11-09 01:40:45.093 +07:00 [DBG] Connection 0HN7VCUKSF7RE established using the following protocol: "Tls13"
2024-11-09 01:40:45.162 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:40:45.177 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:40:45.178 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:40:45.179 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:40:45.180 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:40:45.180 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:40:45.181 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:40:45.201 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:40:45.202 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:40:45.238 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:40:45.246 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:40:45.247 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:40:45.269 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:40:45.282 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:40:45.282 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:40:45.283 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:40:45.367 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:40:45.368 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:40:45.369 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:40:45.370 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:40:45.370 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:40:45.371 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:40:45.372 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:40:45.373 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:40:45.374 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:40:45.375 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:40:45.376 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:40:45.378 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:40:45.378 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:40:45.379 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:40:45.380 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:40:45.380 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:40:45.381 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:40:45.382 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:40:45.383 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:40:45.383 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:40:45.384 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:40:45.385 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:40:45.385 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:40:45.386 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:40:45.387 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:40:45.388 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:40:45.388 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:40:45.451 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:40:45.474 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:40:45.476 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:40:45.480 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:45.554 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:45.561 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:40:45.561 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:40:45.563 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-09 01:40:45.566 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:40:45.851 +07:00 [INF] Executed DbCommand (287ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:40:45.854 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:45.857 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:40:45.860 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:45.861 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 01:40:45.863 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:40:45.865 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:40:45.866 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:40:45.866 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:40:45.867 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:40:45.868 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:40:45.869 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 586.3344ms
2024-11-09 01:40:45.871 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:40:45.871 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:40:45.873 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:40:45.875 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:40:45.877 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 721.4598ms
2024-11-09 01:40:49.010 +07:00 [DBG] Connection id "0HN7VCUKSF7RE" received FIN.
2024-11-09 01:40:49.013 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RE completed.
2024-11-09 01:40:49.013 +07:00 [DBG] Connection id "0HN7VCUKSF7RE" is closed. The last processed stream ID was 1.
2024-11-09 01:40:49.015 +07:00 [DBG] Connection id "0HN7VCUKSF7RE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:40:49.023 +07:00 [DBG] Connection id "0HN7VCUKSF7RE" stopped.
2024-11-09 01:41:03.567 +07:00 [DBG] Connection id "0HN7VCUKSF7RF" accepted.
2024-11-09 01:41:03.568 +07:00 [DBG] Connection id "0HN7VCUKSF7RF" started.
2024-11-09 01:41:03.580 +07:00 [DBG] Connection 0HN7VCUKSF7RF established using the following protocol: "Tls13"
2024-11-09 01:41:03.582 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:41:03.583 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:41:03.584 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:41:03.584 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:41:03.585 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:41:03.586 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:41:03.586 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:03.587 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:41:03.588 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:03.588 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:41:03.589 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:41:03.590 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:41:03.591 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:03.592 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:41:03.593 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:03.593 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:03.595 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:03.596 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:41:03.596 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:03.597 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:41:03.598 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:03.598 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:03.599 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:41:03.599 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:41:03.600 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:03.600 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:03.601 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:03.602 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:03.603 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:03.604 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:03.604 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:03.605 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:03.605 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:41:03.606 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:03.606 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:03.607 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:03.607 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:03.608 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:03.608 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:41:03.609 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:03.610 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:03.610 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:03.611 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:03.613 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:41:03.614 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:41:03.615 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:41:03.615 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:03.616 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:03.618 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:41:03.618 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:41:03.619 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:41:03.619 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:03.634 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:03.636 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:03.637 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:41:03.637 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:03.638 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:41:03.639 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:41:03.640 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:41:03.640 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:41:03.640 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:41:03.641 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:41:03.641 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:41:03.642 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 48.798ms
2024-11-09 01:41:03.643 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:03.643 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:41:03.644 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:03.645 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:41:03.646 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 63.8287ms
2024-11-09 01:41:04.019 +07:00 [DBG] Connection id "0HN7VCUKSF7RF" received FIN.
2024-11-09 01:41:04.020 +07:00 [DBG] Connection id "0HN7VCUKSF7RF" is closed. The last processed stream ID was 1.
2024-11-09 01:41:04.020 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RF completed.
2024-11-09 01:41:04.021 +07:00 [DBG] Connection id "0HN7VCUKSF7RF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:41:04.033 +07:00 [DBG] Connection id "0HN7VCUKSF7RF" stopped.
2024-11-09 01:41:08.958 +07:00 [DBG] Connection id "0HN7VCUKSF7RG" accepted.
2024-11-09 01:41:08.959 +07:00 [DBG] Connection id "0HN7VCUKSF7RG" started.
2024-11-09 01:41:08.967 +07:00 [DBG] Connection 0HN7VCUKSF7RG established using the following protocol: "Tls13"
2024-11-09 01:41:08.970 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:41:08.973 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:41:08.974 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:41:08.974 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:41:08.975 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:41:08.976 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:41:08.977 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:08.978 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:41:08.979 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:08.980 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:41:08.981 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:41:08.981 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:41:08.982 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:08.984 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:41:08.989 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:08.994 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:08.995 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:08.995 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:41:08.996 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:08.997 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:41:08.998 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:08.998 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:08.999 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:41:09.000 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:41:09.000 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:09.001 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:09.002 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:09.003 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:09.003 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:09.004 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:09.005 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:09.006 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:09.006 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:41:09.007 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:09.008 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:09.008 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:09.009 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:09.009 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:09.010 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:41:09.011 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:09.011 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:09.012 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:09.013 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:09.014 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:41:09.015 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:41:09.016 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:41:09.017 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:09.018 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:09.019 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:41:09.020 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:41:09.021 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:41:09.021 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:09.029 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:09.031 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:09.031 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:41:09.032 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:09.033 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:41:09.034 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:41:09.036 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:41:09.036 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:41:09.037 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:41:09.037 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:41:09.038 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:41:09.039 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 45.4712ms
2024-11-09 01:41:09.040 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:09.040 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:41:09.041 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:09.042 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:41:09.043 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 73.0216ms
2024-11-09 01:41:14.026 +07:00 [DBG] Connection id "0HN7VCUKSF7RG" received FIN.
2024-11-09 01:41:14.027 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RG completed.
2024-11-09 01:41:14.027 +07:00 [DBG] Connection id "0HN7VCUKSF7RG" is closed. The last processed stream ID was 1.
2024-11-09 01:41:14.028 +07:00 [DBG] Connection id "0HN7VCUKSF7RG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:41:14.031 +07:00 [DBG] Connection id "0HN7VCUKSF7RG" stopped.
2024-11-09 01:41:14.535 +07:00 [DBG] Connection id "0HN7VCUKSF7RH" accepted.
2024-11-09 01:41:14.536 +07:00 [DBG] Connection id "0HN7VCUKSF7RH" started.
2024-11-09 01:41:14.541 +07:00 [DBG] Connection 0HN7VCUKSF7RH established using the following protocol: "Tls13"
2024-11-09 01:41:14.543 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:41:14.544 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:41:14.545 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:41:14.546 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:41:14.546 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:41:14.547 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:41:14.548 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:14.549 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:41:14.550 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:14.550 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:41:14.551 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:41:14.552 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:41:14.553 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:14.555 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:41:14.555 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:14.556 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:14.558 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:14.558 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:41:14.560 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:14.561 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:41:14.562 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:14.563 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:14.563 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:41:14.564 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:41:14.565 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:14.566 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:14.567 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:14.568 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:14.569 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:14.570 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:14.571 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:14.572 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:14.572 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:41:14.574 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:14.575 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:14.576 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:14.578 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:14.579 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:14.580 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:41:14.581 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:14.582 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:14.583 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:14.584 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:14.585 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:41:14.587 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:41:14.588 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:41:14.589 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:14.590 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:14.590 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:41:14.591 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:41:14.592 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:41:14.593 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:14.602 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:14.604 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:14.604 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:41:14.605 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:14.606 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:41:14.607 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:41:14.608 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:41:14.609 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:41:14.609 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:41:14.610 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:41:14.611 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:41:14.612 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 55.3072ms
2024-11-09 01:41:14.612 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:14.613 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:41:14.614 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:14.615 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:41:14.616 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 73.8121ms
2024-11-09 01:41:19.035 +07:00 [DBG] Connection id "0HN7VCUKSF7RH" received FIN.
2024-11-09 01:41:19.036 +07:00 [DBG] Connection id "0HN7VCUKSF7RH" is closed. The last processed stream ID was 1.
2024-11-09 01:41:19.036 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RH completed.
2024-11-09 01:41:19.037 +07:00 [DBG] Connection id "0HN7VCUKSF7RH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:41:19.049 +07:00 [DBG] Connection id "0HN7VCUKSF7RH" stopped.
2024-11-09 01:41:27.916 +07:00 [DBG] Connection id "0HN7VCUKSF7RI" accepted.
2024-11-09 01:41:27.917 +07:00 [DBG] Connection id "0HN7VCUKSF7RI" started.
2024-11-09 01:41:27.922 +07:00 [DBG] Connection 0HN7VCUKSF7RI established using the following protocol: "Tls13"
2024-11-09 01:41:27.924 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:41:27.927 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:41:27.928 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:41:27.929 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:41:27.930 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:41:27.930 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:41:27.931 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:27.932 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:41:27.933 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:27.934 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:41:27.936 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:41:27.937 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:41:27.938 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:27.939 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:41:27.940 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:27.941 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:27.946 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:27.946 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:41:27.947 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:27.948 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:41:27.951 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:27.952 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:27.952 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:41:27.953 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:41:27.954 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:27.954 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:27.955 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:27.956 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:27.957 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:27.958 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:27.958 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:27.959 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:27.960 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:41:27.961 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:27.961 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:27.962 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:27.962 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:27.963 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:27.964 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:41:27.965 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:27.965 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:27.966 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:27.967 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:27.968 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:41:27.969 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:41:27.970 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:41:27.970 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:27.971 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:27.972 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:41:27.973 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:41:27.973 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:41:27.974 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:27.982 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:27.985 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:27.985 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:41:27.986 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:27.986 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:41:27.987 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:41:27.989 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:41:27.989 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:41:27.990 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:41:27.990 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:41:27.991 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:41:27.991 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.1336ms
2024-11-09 01:41:27.992 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:27.993 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:41:27.993 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:27.994 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:41:27.995 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 70.3922ms
2024-11-09 01:41:29.045 +07:00 [DBG] Connection id "0HN7VCUKSF7RI" received FIN.
2024-11-09 01:41:29.046 +07:00 [DBG] Connection id "0HN7VCUKSF7RI" is closed. The last processed stream ID was 1.
2024-11-09 01:41:29.046 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RI completed.
2024-11-09 01:41:29.047 +07:00 [DBG] Connection id "0HN7VCUKSF7RI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:41:29.059 +07:00 [DBG] Connection id "0HN7VCUKSF7RI" stopped.
2024-11-09 01:41:37.061 +07:00 [DBG] Connection id "0HN7VCUKSF7RJ" accepted.
2024-11-09 01:41:37.062 +07:00 [DBG] Connection id "0HN7VCUKSF7RJ" started.
2024-11-09 01:41:37.070 +07:00 [DBG] Connection 0HN7VCUKSF7RJ established using the following protocol: "Tls13"
2024-11-09 01:41:37.072 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:41:37.074 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:41:37.074 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:41:37.075 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:41:37.076 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:41:37.076 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:41:37.077 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:37.078 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:41:37.079 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:37.079 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:41:37.080 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:41:37.081 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:41:37.082 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:37.083 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:41:37.084 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:37.085 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:37.087 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:37.087 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:41:37.088 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:37.089 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:41:37.090 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:37.091 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:37.092 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:41:37.093 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:41:37.094 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:37.094 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:37.095 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:37.096 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:37.097 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:37.098 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:37.099 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:37.099 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:37.100 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:41:37.101 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:37.102 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:37.103 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:37.103 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:37.104 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:37.105 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:41:37.106 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:37.107 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:37.107 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:37.108 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:37.110 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:41:37.111 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:41:37.112 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:41:37.112 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:37.113 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:37.114 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:41:37.115 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:41:37.115 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:41:37.116 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:37.124 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:37.126 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:37.126 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:41:37.127 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:37.128 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:41:37.129 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:41:37.130 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:41:37.131 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:41:37.131 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:41:37.132 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:41:37.132 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:41:37.133 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.9008ms
2024-11-09 01:41:37.134 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:37.135 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:41:37.136 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:37.137 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:41:37.137 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 66.3336ms
2024-11-09 01:41:39.096 +07:00 [DBG] Connection id "0HN7VCUKSF7RJ" received FIN.
2024-11-09 01:41:39.097 +07:00 [DBG] Connection id "0HN7VCUKSF7RJ" is closed. The last processed stream ID was 1.
2024-11-09 01:41:39.097 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RJ completed.
2024-11-09 01:41:39.097 +07:00 [DBG] Connection id "0HN7VCUKSF7RJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:41:39.115 +07:00 [DBG] Connection id "0HN7VCUKSF7RJ" stopped.
2024-11-09 01:41:43.892 +07:00 [DBG] Connection id "0HN7VCUKSF7RK" accepted.
2024-11-09 01:41:43.893 +07:00 [DBG] Connection id "0HN7VCUKSF7RK" started.
2024-11-09 01:41:43.898 +07:00 [DBG] Connection 0HN7VCUKSF7RK established using the following protocol: "Tls13"
2024-11-09 01:41:43.900 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:41:43.902 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:41:43.902 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:41:43.903 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:41:43.904 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:41:43.905 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:41:43.906 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:43.906 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:41:43.907 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:43.908 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:41:43.909 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:41:43.909 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:41:43.910 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:43.911 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:41:43.912 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:43.913 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:43.914 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:43.915 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:41:43.915 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:43.916 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:41:43.917 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:43.918 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:43.918 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:41:43.919 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:41:43.920 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:43.921 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:43.922 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:43.922 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:43.923 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:43.924 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:43.924 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:43.925 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:43.926 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:41:43.926 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:43.927 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:43.928 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:43.928 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:43.929 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:43.930 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:41:43.931 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:43.932 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:43.933 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:43.934 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:43.936 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:41:43.938 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:41:43.938 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:41:43.939 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:43.940 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:43.941 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:41:43.941 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:41:43.942 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:41:43.943 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:43.950 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:43.951 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:43.952 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:41:43.953 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:43.954 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:41:43.955 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:41:43.956 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:41:43.957 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:41:43.957 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:41:43.958 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:41:43.958 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:41:43.959 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 46.3715ms
2024-11-09 01:41:43.960 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:43.961 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:41:43.961 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:43.962 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:41:43.963 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 63.9009ms
2024-11-09 01:41:44.071 +07:00 [DBG] Connection id "0HN7VCUKSF7RK" received FIN.
2024-11-09 01:41:44.073 +07:00 [DBG] Connection id "0HN7VCUKSF7RK" is closed. The last processed stream ID was 1.
2024-11-09 01:41:44.073 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RK completed.
2024-11-09 01:41:44.073 +07:00 [DBG] Connection id "0HN7VCUKSF7RK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:41:44.086 +07:00 [DBG] Connection id "0HN7VCUKSF7RK" stopped.
2024-11-09 01:41:50.656 +07:00 [DBG] Connection id "0HN7VCUKSF7RL" accepted.
2024-11-09 01:41:50.658 +07:00 [DBG] Connection id "0HN7VCUKSF7RL" started.
2024-11-09 01:41:50.692 +07:00 [DBG] Connection 0HN7VCUKSF7RL established using the following protocol: "Tls13"
2024-11-09 01:41:50.695 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:41:50.696 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:41:50.698 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:41:50.698 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:41:50.699 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:41:50.700 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:41:50.701 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:50.703 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:41:50.703 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:50.704 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:41:50.706 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:41:50.707 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:41:50.708 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:50.710 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:41:50.712 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:41:50.713 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:50.715 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:41:50.715 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:41:50.716 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:50.717 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:41:50.718 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:50.719 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:41:50.719 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:41:50.720 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:41:50.721 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:50.722 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:41:50.722 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:50.723 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:50.724 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:50.725 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:41:50.726 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:41:50.727 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:50.727 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:41:50.728 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:50.729 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:50.730 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:41:50.730 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:41:50.731 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:50.731 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:41:50.732 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:50.733 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:50.734 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:41:50.735 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:41:50.743 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:41:50.745 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:41:50.746 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:41:50.746 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:50.747 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:50.749 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:41:50.749 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:41:50.750 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:41:50.751 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:50.759 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:41:50.761 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:50.761 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:41:50.762 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:50.763 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:41:50.764 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:41:50.765 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:41:50.765 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:41:50.765 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:41:50.766 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:41:50.767 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:41:50.767 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 54.1566ms
2024-11-09 01:41:50.768 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:41:50.769 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:41:50.769 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:41:50.770 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:41:50.771 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 76.4739ms
2024-11-09 01:41:54.087 +07:00 [DBG] Connection id "0HN7VCUKSF7RL" received FIN.
2024-11-09 01:41:54.088 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RL completed.
2024-11-09 01:41:54.088 +07:00 [DBG] Connection id "0HN7VCUKSF7RL" is closed. The last processed stream ID was 1.
2024-11-09 01:41:54.089 +07:00 [DBG] Connection id "0HN7VCUKSF7RL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:41:54.103 +07:00 [DBG] Connection id "0HN7VCUKSF7RL" stopped.
2024-11-09 01:42:02.534 +07:00 [DBG] Connection id "0HN7VCUKSF7RM" accepted.
2024-11-09 01:42:02.542 +07:00 [DBG] Connection id "0HN7VCUKSF7RM" started.
2024-11-09 01:42:02.575 +07:00 [DBG] Connection 0HN7VCUKSF7RM established using the following protocol: "Tls13"
2024-11-09 01:42:02.587 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:42:02.596 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:42:02.598 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:42:02.602 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:42:02.604 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:42:02.605 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:42:02.613 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:42:02.615 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:42:02.617 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:42:02.624 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:42:02.626 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:42:02.629 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:42:02.633 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:42:02.637 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:42:02.639 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:42:02.640 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:42:02.657 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:42:02.663 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:42:02.665 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:42:02.666 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:42:02.667 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:42:02.670 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:42:02.671 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:42:02.671 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:42:02.672 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:42:02.673 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:42:02.674 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:02.675 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:02.676 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:02.677 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:42:02.678 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:02.679 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:42:02.680 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:42:02.681 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:42:02.682 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:42:02.682 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:42:02.683 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:42:02.684 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:42:02.685 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:42:02.686 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:42:02.688 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:42:02.689 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:42:02.690 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:42:03.077 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:42:03.106 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:42:03.107 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 01:42:03.108 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:03.112 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:03.117 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:42:03.118 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:42:03.119 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-09 01:42:03.125 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:42:03.530 +07:00 [INF] Executed DbCommand (409ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:42:03.537 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:03.541 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 8ms reading results.
2024-11-09 01:42:03.543 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:03.545 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-11-09 01:42:03.552 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:42:03.554 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:42:03.555 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:42:03.555 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:42:03.558 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:42:03.560 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:42:03.564 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 924.1438ms
2024-11-09 01:42:03.565 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:42:03.568 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:42:03.570 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:03.571 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:42:03.572 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 986.2265ms
2024-11-09 01:42:03.583 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:42:03.587 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:42:03.588 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:42:03.589 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:42:03.589 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:42:03.590 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:42:03.591 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:42:03.592 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:42:03.593 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:42:03.594 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:42:03.596 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:42:03.597 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:42:03.597 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:42:03.599 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:42:03.600 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:42:03.602 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:42:03.605 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:42:03.606 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:42:03.607 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:42:03.608 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:42:03.609 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:42:03.610 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:42:03.611 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:42:03.612 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:42:03.613 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:42:03.615 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:42:03.616 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:03.617 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:03.618 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:03.619 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:42:03.621 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:03.623 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:42:03.625 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:42:03.626 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:42:03.627 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:42:03.628 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:42:03.630 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:42:03.631 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:42:03.633 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:42:03.636 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:42:03.639 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:42:03.640 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:42:03.642 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:42:03.647 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:42:03.652 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:42:03.653 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:42:03.654 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:03.657 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:03.659 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:42:03.659 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:42:03.660 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:42:03.662 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:42:03.710 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:42:03.712 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:03.713 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:42:03.714 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:03.715 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:42:03.716 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:42:03.719 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:42:03.721 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:42:03.722 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:42:03.722 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:42:03.725 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:42:03.729 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 127.6548ms
2024-11-09 01:42:03.730 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:42:03.732 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:42:03.733 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:03.736 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-09 01:42:03.739 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 162.9885ms
2024-11-09 01:42:04.137 +07:00 [DBG] Connection id "0HN7VCUKSF7RM" received FIN.
2024-11-09 01:42:04.160 +07:00 [DBG] Connection id "0HN7VCUKSF7RM" is closed. The last processed stream ID was 3.
2024-11-09 01:42:04.161 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RM completed.
2024-11-09 01:42:04.161 +07:00 [DBG] Connection id "0HN7VCUKSF7RM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:42:04.184 +07:00 [DBG] Connection id "0HN7VCUKSF7RM" stopped.
2024-11-09 01:42:13.576 +07:00 [DBG] Connection id "0HN7VCUKSF7RN" accepted.
2024-11-09 01:42:13.591 +07:00 [DBG] Connection id "0HN7VCUKSF7RN" started.
2024-11-09 01:42:13.640 +07:00 [DBG] Connection 0HN7VCUKSF7RN established using the following protocol: "Tls13"
2024-11-09 01:42:13.658 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:42:13.660 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:42:13.661 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:42:13.662 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:42:13.662 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:42:13.663 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:42:13.664 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:42:13.665 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:42:13.666 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:42:13.668 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:42:13.669 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:42:13.670 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:42:13.671 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:42:13.673 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:42:13.673 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:42:13.674 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:42:13.678 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:42:13.679 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:42:13.680 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:42:13.681 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:42:13.682 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:42:13.682 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:42:13.683 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:42:13.683 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:42:13.684 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:42:13.684 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:42:13.685 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:13.686 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:13.686 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:13.687 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:42:13.687 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:13.688 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:42:13.688 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:42:13.689 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:42:13.690 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:42:13.690 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:42:13.691 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:42:13.691 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:42:13.692 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:42:13.692 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:42:13.693 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:42:13.693 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:42:13.694 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:42:13.703 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:42:13.706 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:42:13.707 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:42:13.707 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:13.709 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:13.711 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:42:13.712 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:42:13.713 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:42:13.716 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:42:13.824 +07:00 [INF] Executed DbCommand (110ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:42:13.825 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:13.826 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:42:13.827 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:13.828 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:42:13.829 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:42:13.830 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:42:13.830 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:42:13.831 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:42:13.831 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:42:13.832 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:42:13.833 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 158.9016ms
2024-11-09 01:42:13.834 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:42:13.834 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:42:13.835 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:13.835 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:42:13.837 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 179.1559ms
2024-11-09 01:42:14.120 +07:00 [DBG] Connection id "0HN7VCUKSF7RN" received FIN.
2024-11-09 01:42:14.121 +07:00 [DBG] Connection id "0HN7VCUKSF7RN" is closed. The last processed stream ID was 1.
2024-11-09 01:42:14.121 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RN completed.
2024-11-09 01:42:14.121 +07:00 [DBG] Connection id "0HN7VCUKSF7RN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:42:14.131 +07:00 [DBG] Connection id "0HN7VCUKSF7RN" stopped.
2024-11-09 01:42:45.010 +07:00 [DBG] Connection id "0HN7VCUKSF7RO" accepted.
2024-11-09 01:42:45.036 +07:00 [DBG] Connection id "0HN7VCUKSF7RO" started.
2024-11-09 01:42:45.136 +07:00 [DBG] Connection 0HN7VCUKSF7RO established using the following protocol: "Tls13"
2024-11-09 01:42:46.030 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:42:46.043 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:42:46.045 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:42:46.049 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:42:46.054 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:42:46.058 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:42:46.067 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:42:46.071 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:42:46.073 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:42:46.080 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:42:46.087 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:42:46.087 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:42:46.091 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:42:46.095 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:42:46.096 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:42:46.098 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:42:46.126 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:42:46.130 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:42:46.131 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:42:46.132 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:42:46.133 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:42:46.134 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:42:46.135 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:42:46.135 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:42:46.136 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:42:46.137 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:42:46.138 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:46.138 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:46.139 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:46.139 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:42:46.140 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:42:46.141 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:42:46.141 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:42:46.142 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:42:46.143 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:42:46.144 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:42:46.144 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:42:46.145 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:42:46.146 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:42:46.146 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:42:46.147 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:42:46.148 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:42:46.148 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:42:46.179 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:42:46.199 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:42:46.200 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:42:46.201 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:46.209 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:46.214 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:42:46.215 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:42:46.216 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-09 01:42:46.223 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:42:46.448 +07:00 [INF] Executed DbCommand (229ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:42:46.450 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:46.452 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:42:46.453 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:46.454 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:42:46.460 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:42:46.462 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:42:46.463 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:42:46.463 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:42:46.464 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:42:46.465 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:42:46.471 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 373.6151ms
2024-11-09 01:42:46.472 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:42:46.473 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:42:46.474 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:42:46.475 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:42:46.476 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 449.5635ms
2024-11-09 01:42:49.149 +07:00 [DBG] Connection id "0HN7VCUKSF7RO" received FIN.
2024-11-09 01:42:49.149 +07:00 [DBG] Connection id "0HN7VCUKSF7RO" is closed. The last processed stream ID was 1.
2024-11-09 01:42:49.152 +07:00 [DBG] Connection id "0HN7VCUKSF7RO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:42:49.170 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RO completed.
2024-11-09 01:42:49.173 +07:00 [DBG] Connection id "0HN7VCUKSF7RO" stopped.
2024-11-09 01:43:33.493 +07:00 [DBG] Connection id "0HN7VCUKSF7RP" accepted.
2024-11-09 01:43:33.511 +07:00 [DBG] Connection id "0HN7VCUKSF7RP" started.
2024-11-09 01:43:33.583 +07:00 [DBG] Connection 0HN7VCUKSF7RP established using the following protocol: "Tls13"
2024-11-09 01:43:33.663 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:43:33.676 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:43:33.684 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:43:33.694 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:43:33.700 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:43:33.705 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:43:33.722 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:43:33.728 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:43:33.735 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:43:33.747 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:43:33.754 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:43:33.755 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:43:33.766 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:43:33.772 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:43:33.774 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:43:33.776 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:43:33.816 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:43:33.821 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:43:33.824 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:43:33.825 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:43:33.826 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:43:33.827 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:43:33.828 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:43:33.829 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:43:33.829 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:43:33.830 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:43:33.831 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:43:33.832 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:43:33.832 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:43:33.833 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:43:33.834 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:43:33.834 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:43:33.835 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:43:33.837 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:43:33.837 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:43:33.838 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:43:33.839 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:43:33.840 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:43:33.841 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:43:33.842 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:43:33.843 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:43:33.843 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:43:33.844 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:43:33.889 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:43:33.927 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:43:33.929 +07:00 [DBG] Created DbConnection. (4ms).
2024-11-09 01:43:33.931 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:33.946 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:33.949 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:43:33.951 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:43:33.954 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-11-09 01:43:33.962 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:43:34.187 +07:00 [INF] Executed DbCommand (230ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:43:34.191 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:34.193 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-11-09 01:43:34.195 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:34.197 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 01:43:34.201 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:43:34.204 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:43:34.205 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:43:34.206 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:43:34.206 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:43:34.207 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:43:34.214 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 439.4034ms
2024-11-09 01:43:34.216 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:43:34.217 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:43:34.218 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:34.220 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:43:34.222 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 566.6056ms
2024-11-09 01:43:39.197 +07:00 [DBG] Connection id "0HN7VCUKSF7RP" received FIN.
2024-11-09 01:43:39.198 +07:00 [DBG] Connection id "0HN7VCUKSF7RP" is closed. The last processed stream ID was 1.
2024-11-09 01:43:39.199 +07:00 [DBG] Connection id "0HN7VCUKSF7RP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:43:39.199 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RP completed.
2024-11-09 01:43:39.201 +07:00 [DBG] Connection id "0HN7VCUKSF7RP" stopped.
2024-11-09 01:43:47.897 +07:00 [DBG] Connection id "0HN7VCUKSF7RQ" accepted.
2024-11-09 01:43:47.898 +07:00 [DBG] Connection id "0HN7VCUKSF7RQ" started.
2024-11-09 01:43:47.906 +07:00 [DBG] Connection 0HN7VCUKSF7RQ established using the following protocol: "Tls13"
2024-11-09 01:43:47.908 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:43:47.910 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:43:47.911 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:43:47.912 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:43:47.912 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:43:47.913 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:43:47.914 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:43:47.915 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:43:47.915 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:43:47.916 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:43:47.918 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:43:47.919 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:43:47.920 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:43:47.922 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:43:47.923 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:43:47.924 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:43:47.930 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:43:47.932 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:43:47.933 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:43:47.934 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:43:47.934 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:43:47.935 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:43:47.936 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:43:47.937 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:43:47.937 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:43:47.938 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:43:47.939 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:43:47.940 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:43:47.940 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:43:47.940 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:43:47.941 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:43:47.941 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:43:47.942 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:43:47.943 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:43:47.943 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:43:47.944 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:43:47.945 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:43:47.945 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:43:47.946 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:43:47.947 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:43:47.947 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:43:47.948 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:43:47.948 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:43:47.953 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:43:47.956 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:43:47.956 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:43:47.957 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:47.958 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:47.960 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:43:47.961 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:43:47.961 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:43:47.962 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:43:48.061 +07:00 [INF] Executed DbCommand (99ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:43:48.062 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:48.063 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:43:48.064 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:48.064 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:43:48.065 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:43:48.067 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:43:48.067 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:43:48.067 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:43:48.068 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:43:48.068 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:43:48.069 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 145.4987ms
2024-11-09 01:43:48.070 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:43:48.071 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:43:48.072 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:48.072 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:43:48.073 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 165.1469ms
2024-11-09 01:43:49.217 +07:00 [DBG] Connection id "0HN7VCUKSF7RQ" received FIN.
2024-11-09 01:43:49.218 +07:00 [DBG] Connection id "0HN7VCUKSF7RQ" is closed. The last processed stream ID was 1.
2024-11-09 01:43:49.218 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RQ completed.
2024-11-09 01:43:49.219 +07:00 [DBG] Connection id "0HN7VCUKSF7RQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:43:49.230 +07:00 [DBG] Connection id "0HN7VCUKSF7RQ" stopped.
2024-11-09 01:43:57.947 +07:00 [DBG] Connection id "0HN7VCUKSF7RR" accepted.
2024-11-09 01:43:57.948 +07:00 [DBG] Connection id "0HN7VCUKSF7RR" started.
2024-11-09 01:43:57.963 +07:00 [DBG] Connection 0HN7VCUKSF7RR established using the following protocol: "Tls13"
2024-11-09 01:43:57.967 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:43:57.969 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:43:57.970 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:43:57.970 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:43:57.971 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:43:57.971 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:43:57.972 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:43:57.973 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:43:57.974 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:43:57.974 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:43:57.976 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:43:57.976 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:43:57.977 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:43:57.979 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:43:57.980 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:43:57.981 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:43:57.983 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:43:57.984 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:43:57.985 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:43:57.986 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:43:57.987 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:43:57.988 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:43:57.989 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:43:57.989 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:43:57.990 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:43:57.991 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:43:57.992 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:43:57.993 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:43:57.993 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:43:57.994 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:43:57.995 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:43:57.996 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:43:57.996 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:43:57.997 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:43:57.998 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:43:57.999 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:43:57.999 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:43:58.000 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:43:58.001 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:43:58.002 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:43:58.002 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:43:58.003 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:43:58.004 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:43:58.006 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:43:58.010 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:43:58.010 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:43:58.011 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:58.012 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:58.012 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:43:58.013 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:43:58.014 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:43:58.015 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:43:58.060 +07:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:43:58.063 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:58.064 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:43:58.065 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:58.066 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-09 01:43:58.067 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:43:58.069 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:43:58.069 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:43:58.070 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:43:58.070 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:43:58.071 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:43:58.076 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 95.1366ms
2024-11-09 01:43:58.077 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:43:58.078 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:43:58.079 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:43:58.079 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:43:58.080 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 114.5582ms
2024-11-09 01:43:59.240 +07:00 [DBG] Connection id "0HN7VCUKSF7RR" received FIN.
2024-11-09 01:43:59.240 +07:00 [DBG] Connection id "0HN7VCUKSF7RR" is closed. The last processed stream ID was 1.
2024-11-09 01:43:59.241 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RR completed.
2024-11-09 01:43:59.241 +07:00 [DBG] Connection id "0HN7VCUKSF7RR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:43:59.254 +07:00 [DBG] Connection id "0HN7VCUKSF7RR" stopped.
2024-11-09 01:44:06.649 +07:00 [DBG] Connection id "0HN7VCUKSF7RS" accepted.
2024-11-09 01:44:06.649 +07:00 [DBG] Connection id "0HN7VCUKSF7RS" started.
2024-11-09 01:44:06.681 +07:00 [DBG] Connection 0HN7VCUKSF7RS established using the following protocol: "Tls13"
2024-11-09 01:44:06.683 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:44:06.685 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:44:06.687 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:44:06.708 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:44:06.711 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:44:06.711 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:44:06.712 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:44:06.713 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:44:06.714 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:44:06.714 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:44:06.715 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:44:06.716 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:44:06.717 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:44:06.718 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:44:06.719 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:44:06.720 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:44:06.721 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:44:06.722 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:44:06.723 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:44:06.723 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:44:06.724 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:44:06.725 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:44:06.726 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:44:06.726 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:44:06.727 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:44:06.728 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:44:06.728 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:44:06.729 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:44:06.730 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:44:06.731 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:44:06.731 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:44:06.732 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:44:06.733 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:44:06.733 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:44:06.734 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:44:06.735 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:44:06.736 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:44:06.736 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:44:06.737 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:44:06.738 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:44:06.738 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:44:06.739 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:44:06.740 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:44:06.744 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:44:06.746 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:44:06.746 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:44:06.746 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:44:06.747 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:44:06.749 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:44:06.750 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:44:06.750 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:44:06.751 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:44:06.762 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:44:06.764 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:44:06.764 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:44:06.765 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:44:06.766 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:44:06.767 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:44:06.768 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:44:06.768 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:44:06.768 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:44:06.769 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:44:06.769 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:44:06.771 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.4959ms
2024-11-09 01:44:06.771 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:44:06.772 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:44:06.772 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:44:06.773 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:44:06.774 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 90.5719ms
2024-11-09 01:44:09.265 +07:00 [DBG] Connection id "0HN7VCUKSF7RS" received FIN.
2024-11-09 01:44:09.266 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RS completed.
2024-11-09 01:44:09.271 +07:00 [DBG] Connection id "0HN7VCUKSF7RS" is closed. The last processed stream ID was 1.
2024-11-09 01:44:09.272 +07:00 [DBG] Connection id "0HN7VCUKSF7RS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:44:09.290 +07:00 [DBG] Connection id "0HN7VCUKSF7RS" stopped.
2024-11-09 01:44:11.239 +07:00 [DBG] Connection id "0HN7VCUKSF7RT" accepted.
2024-11-09 01:44:11.240 +07:00 [DBG] Connection id "0HN7VCUKSF7RT" started.
2024-11-09 01:44:11.244 +07:00 [DBG] Connection 0HN7VCUKSF7RT established using the following protocol: "Tls13"
2024-11-09 01:44:11.246 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 01:44:11.247 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:44:11.248 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:44:11.248 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:44:11.249 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:44:11.249 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:44:11.250 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:44:11.251 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:44:11.251 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:44:11.252 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:44:11.253 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:44:11.253 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:44:11.254 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:44:11.255 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:44:11.256 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:44:11.257 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:44:11.258 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:44:11.258 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:44:11.259 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:44:11.260 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:44:11.260 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:44:11.261 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:44:11.261 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:44:11.262 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:44:11.263 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:44:11.263 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:44:11.264 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:44:11.265 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:44:11.265 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:44:11.267 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:44:11.268 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:44:11.268 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:44:11.269 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:44:11.270 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:44:11.271 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:44:11.271 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:44:11.272 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:44:11.273 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:44:11.273 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:44:11.274 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:44:11.275 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:44:11.276 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:44:11.276 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:44:11.278 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:44:11.280 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:44:11.281 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:44:11.281 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:44:11.282 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:44:11.283 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:44:11.283 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:44:11.284 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:44:11.285 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:44:11.297 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 01:44:11.298 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:44:11.299 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:44:11.300 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:44:11.300 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:44:11.301 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:44:11.302 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:44:11.303 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:44:11.303 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:44:11.304 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:44:11.305 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:44:11.306 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 48.5777ms
2024-11-09 01:44:11.306 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:44:11.307 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:44:11.307 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:44:11.308 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:44:11.309 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 63.3471ms
2024-11-09 01:44:19.271 +07:00 [DBG] Connection id "0HN7VCUKSF7RT" received FIN.
2024-11-09 01:44:19.272 +07:00 [DBG] Connection id "0HN7VCUKSF7RT" is closed. The last processed stream ID was 1.
2024-11-09 01:44:19.272 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RT completed.
2024-11-09 01:44:19.272 +07:00 [DBG] Connection id "0HN7VCUKSF7RT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:44:19.285 +07:00 [DBG] Connection id "0HN7VCUKSF7RT" stopped.
2024-11-09 01:50:09.502 +07:00 [DBG] Connection id "0HN7VCUKSF7RU" accepted.
2024-11-09 01:50:09.514 +07:00 [DBG] Connection id "0HN7VCUKSF7RU" started.
2024-11-09 01:50:09.547 +07:00 [DBG] Connection 0HN7VCUKSF7RU established using the following protocol: "Tls13"
2024-11-09 01:50:09.584 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-09 01:50:09.588 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:50:09.590 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:50:09.592 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:50:09.594 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:50:09.595 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:50:09.597 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:50:09.600 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:50:09.602 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:50:09.605 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:50:09.606 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:50:09.607 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:50:09.610 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:50:09.612 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:50:09.613 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:50:09.613 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:50:09.624 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:50:09.625 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:50:09.626 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:50:09.626 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:50:09.627 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:50:09.627 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:50:09.628 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:50:09.629 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:50:09.629 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:50:09.630 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:50:09.630 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:50:09.632 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:50:09.632 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:50:09.633 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:50:09.633 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:50:09.634 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:50:09.634 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:50:09.637 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:50:09.637 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:50:09.638 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:50:09.638 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:50:09.639 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:50:09.639 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:50:09.640 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:50:09.640 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:50:09.641 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:50:09.642 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:50:09.660 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:50:09.776 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .OrderBy(pt => pt.AppointmentTime)
    .Select(ap => new AppointmentModel{ 
        AppointmentId = ap.AppointmentId, 
        AppointmentTime = ap.AppointmentTime, 
        AppointmentStatus = ap.AppointmentStatus, 
        AppointmentComment = ap.AppointmentComment, 
        PatientId = ap.PatientId, 
        DoctorId = ap.DoctorId, 
        Gender = ap.Patient.Gender, 
        Avatar = ap.Patient.Avatar, 
        FullName = ap.Patient.FullName, 
        Date = ap.Patient.Date, 
        Age = DateTime.Now.Year - ap.Patient.Date.Year - DateTime.Now < ap.Patient.Date.AddYears(DateTime.Now.Year - ap.Patient.Date.Year) ? 1 : 0 
    }
    )'
2024-11-09 01:50:09.988 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppointmentModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            AppointmentId -> 0
            AppointmentTime -> 1
            AppointmentStatus -> 2
            AppointmentComment -> 3
            PatientId -> 4
            DoctorId -> 5
            Gender -> 6
            Avatar -> 7
            FullName -> 8
            Date -> 9
            Age -> 10
        SELECT a.AppointmentId, a.AppointmentTime, a.AppointmentStatus, a.AppointmentComment, a.PatientId, a.DoctorId, p.Gender, p.Avatar, p.FullName, p.Date, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM Appointment AS a
        INNER JOIN Patient AS p ON a.PatientId == p.PatientId
        ORDER BY a.AppointmentTime ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppointmentModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-11-09 01:50:09.992 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:50:09.997 +07:00 [DBG] Created DbConnection. (4ms).
2024-11-09 01:50:09.997 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:10.079 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:10.081 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:50:10.081 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-09 01:50:10.082 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:50:10.084 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:50:10.225 +07:00 [INF] Executed DbCommand (142ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:50:10.228 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:10.229 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:50:10.229 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:10.230 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:50:10.233 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:50:10.236 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:50:10.237 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:50:10.237 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:50:10.238 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:50:10.238 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:50:10.380 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 766.886ms
2024-11-09 01:50:10.381 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:50:10.382 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:50:10.383 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:10.383 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:50:10.385 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 801.8844ms
2024-11-09 01:50:14.888 +07:00 [DBG] Connection id "0HN7VCUKSF7RU" received FIN.
2024-11-09 01:50:14.894 +07:00 [DBG] Connection id "0HN7VCUKSF7RU" is closed. The last processed stream ID was 1.
2024-11-09 01:50:14.905 +07:00 [DBG] Connection id "0HN7VCUKSF7RU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:50:14.914 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RU completed.
2024-11-09 01:50:14.915 +07:00 [DBG] Connection id "0HN7VCUKSF7RU" stopped.
2024-11-09 01:50:17.355 +07:00 [DBG] Connection id "0HN7VCUKSF7RV" accepted.
2024-11-09 01:50:17.356 +07:00 [DBG] Connection id "0HN7VCUKSF7RV" started.
2024-11-09 01:50:17.371 +07:00 [DBG] Connection 0HN7VCUKSF7RV established using the following protocol: "Tls13"
2024-11-09 01:50:17.375 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-09 01:50:17.376 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:50:17.377 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:50:17.377 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:50:17.379 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:50:17.380 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:50:17.384 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:50:17.385 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:50:17.385 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:50:17.386 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:50:17.387 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:50:17.387 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:50:17.388 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:50:17.389 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:50:17.390 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:50:17.390 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:50:17.392 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:50:17.394 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:50:17.395 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:50:17.396 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:50:17.396 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:50:17.397 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:50:17.398 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:50:17.398 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:50:17.399 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:50:17.399 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:50:17.400 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:50:17.401 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:50:17.402 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:50:17.402 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:50:17.403 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:50:17.403 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:50:17.404 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:50:17.404 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:50:17.405 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:50:17.415 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:50:17.416 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:50:17.416 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:50:17.417 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:50:17.418 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:50:17.418 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:50:17.419 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:50:17.420 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:50:17.427 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:50:17.430 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:50:17.430 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:50:17.431 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:17.432 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:17.433 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:50:17.434 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-09 01:50:17.439 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-09 01:50:17.440 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:50:17.514 +07:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:50:17.516 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:17.517 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:50:17.518 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:17.518 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:50:17.523 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:50:17.525 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:50:17.525 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:50:17.525 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:50:17.526 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:50:17.526 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:50:17.611 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 220.7418ms
2024-11-09 01:50:17.612 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:50:17.613 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:50:17.615 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:17.616 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:50:17.617 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 242.7447ms
2024-11-09 01:50:20.210 +07:00 [DBG] Connection id "0HN7VCUKSF7RV" received FIN.
2024-11-09 01:50:20.211 +07:00 [DBG] Connection id "0HN7VCUKSF7RV" is closed. The last processed stream ID was 1.
2024-11-09 01:50:20.212 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7RV completed.
2024-11-09 01:50:20.213 +07:00 [DBG] Connection id "0HN7VCUKSF7RV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:50:20.230 +07:00 [DBG] Connection id "0HN7VCUKSF7RV" stopped.
2024-11-09 01:50:38.978 +07:00 [DBG] Connection id "0HN7VCUKSF7S0" accepted.
2024-11-09 01:50:39.002 +07:00 [DBG] Connection id "0HN7VCUKSF7S0" started.
2024-11-09 01:50:39.059 +07:00 [DBG] Connection 0HN7VCUKSF7S0 established using the following protocol: "Tls13"
2024-11-09 01:50:39.080 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-09 01:50:39.088 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:50:39.090 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:50:39.094 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:50:39.098 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:50:39.103 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:50:39.113 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:50:39.118 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:50:39.119 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:50:39.124 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:50:39.125 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:50:39.126 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:50:39.132 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:50:39.135 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:50:39.136 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:50:39.138 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:50:39.158 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:50:39.161 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:50:39.165 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:50:39.166 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:50:39.166 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:50:39.167 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:50:39.167 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:50:39.168 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:50:39.168 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:50:39.169 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:50:39.170 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:50:39.171 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:50:39.172 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:50:39.172 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:50:39.173 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:50:39.174 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:50:39.176 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:50:39.178 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:50:39.178 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:50:39.179 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:50:39.180 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:50:39.180 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:50:39.181 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:50:39.182 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:50:39.182 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:50:39.183 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:50:39.183 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:50:39.219 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:50:39.232 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:50:39.234 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:50:39.235 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:39.242 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:39.248 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:50:39.249 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-11-09 01:50:39.250 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-09 01:50:39.253 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:50:39.512 +07:00 [INF] Executed DbCommand (260ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:50:39.515 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:39.515 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:50:39.516 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:39.517 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:50:39.520 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:50:39.521 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:50:39.522 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:50:39.522 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:50:39.523 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:50:39.524 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:50:39.661 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 523.7702ms
2024-11-09 01:50:39.680 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:50:39.681 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:50:39.682 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:50:39.683 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:50:39.684 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 609.176ms
2024-11-09 01:50:39.918 +07:00 [DBG] Connection id "0HN7VCUKSF7S0" received FIN.
2024-11-09 01:50:39.919 +07:00 [DBG] Connection id "0HN7VCUKSF7S0" is closed. The last processed stream ID was 1.
2024-11-09 01:50:39.919 +07:00 [DBG] Connection id "0HN7VCUKSF7S0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:50:39.928 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7S0 completed.
2024-11-09 01:50:39.939 +07:00 [DBG] Connection id "0HN7VCUKSF7S0" stopped.
2024-11-09 01:56:36.464 +07:00 [DBG] Connection id "0HN7VCUKSF7S1" accepted.
2024-11-09 01:56:36.478 +07:00 [DBG] Connection id "0HN7VCUKSF7S1" started.
2024-11-09 01:56:36.526 +07:00 [DBG] Connection 0HN7VCUKSF7S1 established using the following protocol: "Tls13"
2024-11-09 01:56:36.545 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-09 01:56:36.553 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:56:36.554 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:56:36.557 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:56:36.559 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:56:36.562 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:56:36.567 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:56:36.572 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:56:36.574 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:56:36.580 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:56:36.581 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:56:36.582 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:56:36.586 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:56:36.589 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:56:36.589 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:56:36.591 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:56:36.604 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:56:36.607 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:56:36.609 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:56:36.610 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:56:36.611 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:56:36.612 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:56:36.613 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:56:36.614 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:56:36.614 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:56:36.615 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:56:36.616 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:56:36.617 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:56:36.618 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:56:36.618 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:56:36.619 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:56:36.620 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:56:36.620 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:56:36.622 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:56:36.622 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:56:36.623 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:56:36.624 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:56:36.625 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:56:36.626 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:56:36.627 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:56:36.628 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:56:36.628 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:56:36.629 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:56:36.654 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:56:36.664 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:56:36.665 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:56:36.666 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:56:36.672 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:56:36.676 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:56:36.677 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-09 01:56:36.678 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:56:36.680 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:56:36.836 +07:00 [INF] Executed DbCommand (156ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:56:36.838 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:56:36.839 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:56:36.840 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:56:36.841 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:56:36.846 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:56:36.848 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:56:36.848 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:56:36.848 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:56:36.849 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:56:36.850 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:56:36.878 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 284.6879ms
2024-11-09 01:56:36.879 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:56:36.880 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:56:36.881 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:56:36.882 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:56:36.883 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 340.9604ms
2024-11-09 01:56:40.366 +07:00 [DBG] Connection id "0HN7VCUKSF7S1" received FIN.
2024-11-09 01:56:40.367 +07:00 [DBG] Connection id "0HN7VCUKSF7S1" is closed. The last processed stream ID was 1.
2024-11-09 01:56:40.368 +07:00 [DBG] Connection id "0HN7VCUKSF7S1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:56:40.368 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7S1 completed.
2024-11-09 01:56:40.370 +07:00 [DBG] Connection id "0HN7VCUKSF7S1" stopped.
2024-11-09 01:56:56.016 +07:00 [DBG] Connection id "0HN7VCUKSF7S2" accepted.
2024-11-09 01:56:56.024 +07:00 [DBG] Connection id "0HN7VCUKSF7S2" started.
2024-11-09 01:56:56.048 +07:00 [DBG] Connection 0HN7VCUKSF7S2 established using the following protocol: "Tls13"
2024-11-09 01:56:56.053 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-09 01:56:56.055 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:56:56.056 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:56:56.057 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:56:56.058 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:56:56.059 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:56:56.061 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:56:56.062 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:56:56.063 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:56:56.065 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:56:56.066 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:56:56.067 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:56:56.069 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:56:56.071 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:56:56.072 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:56:56.073 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:56:56.079 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:56:56.080 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:56:56.081 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:56:56.081 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:56:56.082 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:56:56.083 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:56:56.084 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:56:56.085 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:56:56.085 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:56:56.086 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:56:56.087 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:56:56.087 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:56:56.088 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:56:56.088 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:56:56.089 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:56:56.090 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:56:56.091 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:56:56.092 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:56:56.092 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:56:56.093 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:56:56.094 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:56:56.094 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:56:56.095 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:56:56.096 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:56:56.096 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:56:56.097 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:56:56.098 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:56:56.107 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:56:56.110 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:56:56.111 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 01:56:56.112 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:56:56.114 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:56:56.117 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:56:56.117 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:56:56.118 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-09 01:56:56.119 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:56:56.209 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:56:56.211 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:56:56.212 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 01:56:56.212 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:56:56.213 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:56:56.215 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:56:56.217 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:56:56.217 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:56:56.218 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:56:56.218 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:56:56.219 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:56:56.241 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 167.2787ms
2024-11-09 01:56:56.293 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:56:56.333 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:56:56.334 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:56:56.335 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:56:56.336 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 283.313ms
2024-11-09 01:57:00.413 +07:00 [DBG] Connection id "0HN7VCUKSF7S2" received FIN.
2024-11-09 01:57:00.419 +07:00 [DBG] Connection id "0HN7VCUKSF7S2" is closed. The last processed stream ID was 1.
2024-11-09 01:57:00.420 +07:00 [DBG] Connection id "0HN7VCUKSF7S2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:57:00.422 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7S2 completed.
2024-11-09 01:57:00.425 +07:00 [DBG] Connection id "0HN7VCUKSF7S2" stopped.
2024-11-09 01:57:11.423 +07:00 [DBG] Connection id "0HN7VCUKSF7S3" accepted.
2024-11-09 01:57:11.433 +07:00 [DBG] Connection id "0HN7VCUKSF7S3" started.
2024-11-09 01:57:11.493 +07:00 [DBG] Connection 0HN7VCUKSF7S3 established using the following protocol: "Tls13"
2024-11-09 01:57:11.510 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-09 01:57:11.516 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:57:11.519 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:57:11.521 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:57:11.524 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:57:11.527 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:57:11.535 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:57:11.541 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:57:11.542 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:57:11.548 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:57:11.553 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:57:11.555 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:57:11.559 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:57:11.563 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:57:11.564 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:57:11.565 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:57:11.577 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:57:11.580 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:57:11.581 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:57:11.582 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:57:11.583 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:57:11.584 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:57:11.584 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:57:11.585 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:57:11.586 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:57:11.586 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:57:11.587 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:57:11.587 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:57:11.588 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:57:11.588 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:57:11.589 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:57:11.590 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:57:11.591 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:57:11.591 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:57:11.592 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:57:11.593 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:57:11.593 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:57:11.594 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:57:11.595 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:57:11.596 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:57:11.597 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:57:11.597 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:57:11.598 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:57:11.623 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:57:11.636 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:57:11.636 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:57:11.637 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:57:11.644 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:57:11.647 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:57:11.650 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-11-09 01:57:11.651 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-09 01:57:11.651 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:57:11.821 +07:00 [INF] Executed DbCommand (169ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:57:11.825 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:57:11.826 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 01:57:11.827 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:57:11.828 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:57:11.833 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:57:11.834 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:57:11.835 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:57:11.835 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:57:11.836 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:57:11.837 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:57:11.853 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 287.5318ms
2024-11-09 01:57:11.860 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:57:11.876 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:57:11.877 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:57:11.878 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 01:57:11.879 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 374.8732ms
2024-11-09 01:57:15.450 +07:00 [DBG] Connection id "0HN7VCUKSF7S3" received FIN.
2024-11-09 01:57:15.455 +07:00 [DBG] Connection id "0HN7VCUKSF7S3" is closed. The last processed stream ID was 1.
2024-11-09 01:57:15.456 +07:00 [DBG] Connection id "0HN7VCUKSF7S3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:57:15.459 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7S3 completed.
2024-11-09 01:57:15.466 +07:00 [DBG] Connection id "0HN7VCUKSF7S3" stopped.
2024-11-09 01:59:47.945 +07:00 [DBG] Connection id "0HN7VCUKSF7S4" accepted.
2024-11-09 01:59:47.974 +07:00 [DBG] Connection id "0HN7VCUKSF7S4" started.
2024-11-09 01:59:48.039 +07:00 [DBG] Connection 0HN7VCUKSF7S4 established using the following protocol: "Tls13"
2024-11-09 01:59:48.099 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-09 01:59:48.112 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 01:59:48.115 +07:00 [INF] CORS policy execution successful.
2024-11-09 01:59:48.121 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 01:59:48.126 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 01:59:48.127 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 01:59:48.139 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:59:48.147 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 01:59:48.150 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:59:48.157 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 01:59:48.162 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 01:59:48.164 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 01:59:48.169 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:59:48.173 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 01:59:48.174 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 01:59:48.175 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:59:48.199 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 01:59:48.201 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 01:59:48.203 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 01:59:48.204 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 01:59:48.205 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:59:48.206 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 01:59:48.207 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 01:59:48.207 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 01:59:48.208 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:59:48.209 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 01:59:48.210 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 01:59:48.211 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:59:48.212 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 01:59:48.213 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 01:59:48.213 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 01:59:48.214 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 01:59:48.215 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 01:59:48.216 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:59:48.217 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 01:59:48.218 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 01:59:48.219 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 01:59:48.220 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:59:48.220 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 01:59:48.221 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:59:48.223 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:59:48.223 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 01:59:48.224 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 01:59:48.263 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 01:59:48.280 +07:00 [DBG] Creating DbConnection.
2024-11-09 01:59:48.282 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-09 01:59:48.283 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:59:48.290 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:59:48.294 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 01:59:48.295 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-09 01:59:48.296 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-09 01:59:48.299 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:59:48.509 +07:00 [INF] Executed DbCommand (211ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 01:59:48.511 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:59:48.512 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-09 01:59:48.513 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:59:48.513 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 01:59:48.518 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 01:59:48.519 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 01:59:48.520 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 01:59:48.520 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 01:59:48.522 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 01:59:48.523 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 01:59:48.544 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 369.3397ms
2024-11-09 01:59:48.546 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 01:59:48.547 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 01:59:48.553 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 01:59:48.555 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-09 01:59:48.556 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 460.8018ms
2024-11-09 01:59:50.801 +07:00 [DBG] Connection id "0HN7VCUKSF7S4" received FIN.
2024-11-09 01:59:50.803 +07:00 [DBG] Connection id "0HN7VCUKSF7S4" is closed. The last processed stream ID was 1.
2024-11-09 01:59:50.805 +07:00 [DBG] Connection id "0HN7VCUKSF7S4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 01:59:50.806 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7S4 completed.
2024-11-09 01:59:50.809 +07:00 [DBG] Connection id "0HN7VCUKSF7S4" stopped.
2024-11-09 02:00:15.265 +07:00 [DBG] Connection id "0HN7VCUKSF7S5" accepted.
2024-11-09 02:00:15.282 +07:00 [DBG] Connection id "0HN7VCUKSF7S5" started.
2024-11-09 02:00:15.335 +07:00 [DBG] Connection 0HN7VCUKSF7S5 established using the following protocol: "Tls13"
2024-11-09 02:00:15.354 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-09 02:00:15.365 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 02:00:15.368 +07:00 [INF] CORS policy execution successful.
2024-11-09 02:00:15.375 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 02:00:15.379 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 02:00:15.381 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 02:00:15.388 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 02:00:15.392 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 02:00:15.396 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 02:00:15.405 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 02:00:15.411 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 02:00:15.412 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 02:00:15.416 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 02:00:15.418 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 02:00:15.418 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 02:00:15.419 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 02:00:15.445 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 02:00:15.447 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 02:00:15.451 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 02:00:15.452 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 02:00:15.453 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 02:00:15.453 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 02:00:15.454 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 02:00:15.454 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 02:00:15.455 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 02:00:15.455 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 02:00:15.456 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 02:00:15.456 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 02:00:15.457 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 02:00:15.458 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 02:00:15.458 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 02:00:15.459 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 02:00:15.459 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 02:00:15.460 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 02:00:15.460 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 02:00:15.461 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 02:00:15.462 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 02:00:15.462 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 02:00:15.463 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 02:00:15.464 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 02:00:15.465 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 02:00:15.465 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 02:00:15.466 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 02:00:15.610 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 02:00:15.630 +07:00 [DBG] Creating DbConnection.
2024-11-09 02:00:15.633 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-09 02:00:15.634 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 02:00:15.644 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 02:00:15.650 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 02:00:15.651 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-11-09 02:00:15.651 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-11-09 02:00:15.653 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 02:00:15.901 +07:00 [INF] Executed DbCommand (248ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-09 02:00:15.904 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 02:00:15.905 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-09 02:00:15.908 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 02:00:15.909 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 02:00:15.913 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 02:00:15.915 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 02:00:15.915 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 02:00:15.916 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 02:00:15.918 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 02:00:15.919 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 02:00:15.956 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 536.9135ms
2024-11-09 02:00:15.962 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 02:00:15.966 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 02:00:15.967 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 02:00:15.968 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 02:00:15.970 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 620.5788ms
2024-11-09 02:00:20.854 +07:00 [DBG] Connection id "0HN7VCUKSF7S5" received FIN.
2024-11-09 02:00:20.856 +07:00 [DBG] Connection id "0HN7VCUKSF7S5" is closed. The last processed stream ID was 1.
2024-11-09 02:00:20.857 +07:00 [DBG] Connection id "0HN7VCUKSF7S5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 02:00:20.857 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7S5 completed.
2024-11-09 02:00:20.859 +07:00 [DBG] Connection id "0HN7VCUKSF7S5" stopped.
2024-11-09 02:01:56.012 +07:00 [DBG] Connection id "0HN7VCUKSF7S6" accepted.
2024-11-09 02:01:56.031 +07:00 [DBG] Connection id "0HN7VCUKSF7S6" started.
2024-11-09 02:01:56.072 +07:00 [DBG] Connection 0HN7VCUKSF7S6 established using the following protocol: "Tls13"
2024-11-09 02:01:56.093 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-09 02:01:56.098 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-09 02:01:56.099 +07:00 [INF] CORS policy execution successful.
2024-11-09 02:01:56.103 +07:00 [DBG] The request path  does not match the path filter
2024-11-09 02:01:56.104 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-09 02:01:56.105 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-09 02:01:56.109 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 02:01:56.114 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-09 02:01:56.115 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 02:01:56.118 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-09 02:01:56.121 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-09 02:01:56.122 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-09 02:01:56.124 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 02:01:56.125 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-09 02:01:56.126 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-09 02:01:56.128 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 02:01:56.139 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-09 02:01:56.142 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-09 02:01:56.143 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-09 02:01:56.144 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-09 02:01:56.145 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 02:01:56.145 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-09 02:01:56.146 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-09 02:01:56.147 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-09 02:01:56.147 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-09 02:01:56.148 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-09 02:01:56.149 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-09 02:01:56.149 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 02:01:56.150 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-09 02:01:56.151 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-09 02:01:56.152 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-09 02:01:56.152 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-09 02:01:56.153 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-09 02:01:56.154 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 02:01:56.155 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-09 02:01:56.155 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-09 02:01:56.156 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-09 02:01:56.156 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-09 02:01:56.157 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-09 02:01:56.158 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 02:01:56.158 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-09 02:01:56.159 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-09 02:01:56.160 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-09 02:01:56.178 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-09 02:01:56.198 +07:00 [DBG] Creating DbConnection.
2024-11-09 02:01:56.199 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-09 02:01:56.200 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 02:01:56.205 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 02:01:56.208 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-09 02:01:56.208 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-09 02:01:56.209 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-09 02:01:56.214 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 02:01:56.328 +07:00 [INF] Executed DbCommand (118ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-09 02:01:56.330 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 02:01:56.331 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-09 02:01:56.333 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 02:01:56.334 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-09 02:01:56.336 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-09 02:01:56.337 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-09 02:01:56.337 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-09 02:01:56.341 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-09 02:01:56.341 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-09 02:01:56.342 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-09 02:01:56.347 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 220.0769ms
2024-11-09 02:01:56.348 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-09 02:01:56.349 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-09 02:01:56.349 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-09 02:01:56.350 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-09 02:01:56.351 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 260.691ms
2024-11-09 02:02:01.001 +07:00 [DBG] Connection id "0HN7VCUKSF7S6" received FIN.
2024-11-09 02:02:01.002 +07:00 [DBG] Connection id "0HN7VCUKSF7S6" is closed. The last processed stream ID was 1.
2024-11-09 02:02:01.004 +07:00 [DBG] Connection id "0HN7VCUKSF7S6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-09 02:02:01.015 +07:00 [DBG] The connection queue processing loop for 0HN7VCUKSF7S6 completed.
2024-11-09 02:02:01.022 +07:00 [DBG] Connection id "0HN7VCUKSF7S6" stopped.
