2024-11-10 12:40:21.645 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-10 12:40:21.762 +07:00 [DBG] Hosting starting
2024-11-10 12:40:21.787 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-10 12:40:21.796 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-11-10 12:40:21.806 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-11-10 12:40:21.812 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-11-10 12:40:21.817 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-11-10 12:40:21.822 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-11-10 12:40:21.826 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-10 12:40:21.829 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-10 12:40:21.832 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-10 12:40:21.838 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-10 12:40:21.843 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-10 12:40:21.846 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-11-10 12:40:21.848 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-11-10 12:40:22.093 +07:00 [INF] Now listening on: https://localhost:7169
2024-11-10 12:40:22.093 +07:00 [INF] Now listening on: http://localhost:5169
2024-11-10 12:40:22.094 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-11-10 12:40:22.095 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-11-10 12:40:22.095 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-11-10 12:40:22.096 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-11-10 12:40:22.171 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-10 12:40:22.172 +07:00 [INF] Hosting environment: Development
2024-11-10 12:40:22.172 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\api\CityInfo.API
2024-11-10 12:40:22.173 +07:00 [DBG] Hosting started
2024-11-10 12:40:40.375 +07:00 [DBG] Connection id "0HN8198R1VNPR" accepted.
2024-11-10 12:40:40.377 +07:00 [DBG] Connection id "0HN8198R1VNPR" started.
2024-11-10 12:40:40.477 +07:00 [DBG] Connection 0HN8198R1VNPR established using the following protocol: "Tls13"
2024-11-10 12:40:40.542 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-10 12:40:40.650 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-10 12:40:40.680 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:40:40.697 +07:00 [DBG] No candidates found for the request path '/'
2024-11-10 12:40:40.697 +07:00 [DBG] Request did not match any endpoints
2024-11-10 12:40:40.746 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:40:40.753 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 215.9518ms
2024-11-10 12:40:40.756 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-10 12:40:42.436 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-10 12:40:42.445 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:40:42.447 +07:00 [DBG] No candidates found for the request path '/'
2024-11-10 12:40:42.447 +07:00 [DBG] Request did not match any endpoints
2024-11-10 12:40:42.450 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:40:42.452 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 15.2106ms
2024-11-10 12:40:42.454 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-10 12:40:42.950 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-10 12:40:42.956 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:40:42.957 +07:00 [DBG] No candidates found for the request path '/'
2024-11-10 12:40:42.957 +07:00 [DBG] Request did not match any endpoints
2024-11-10 12:40:42.959 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:40:42.960 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 9.9926ms
2024-11-10 12:40:42.962 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-10 12:40:43.151 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-10 12:40:43.154 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:40:43.155 +07:00 [DBG] No candidates found for the request path '/'
2024-11-10 12:40:43.155 +07:00 [DBG] Request did not match any endpoints
2024-11-10 12:40:43.156 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:40:43.158 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 7.7215ms
2024-11-10 12:40:43.160 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-10 12:40:43.333 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-10 12:40:43.338 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:40:43.339 +07:00 [DBG] No candidates found for the request path '/'
2024-11-10 12:40:43.339 +07:00 [DBG] Request did not match any endpoints
2024-11-10 12:40:43.340 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:40:43.341 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 7.9568ms
2024-11-10 12:40:43.344 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-10 12:40:52.158 +07:00 [DBG] Connection id "0HN8198R1VNPS" accepted.
2024-11-10 12:40:52.158 +07:00 [DBG] Connection id "0HN8198R1VNPS" started.
2024-11-10 12:40:52.159 +07:00 [DBG] Connection id "0HN8198R1VNPT" accepted.
2024-11-10 12:40:52.160 +07:00 [DBG] Connection id "0HN8198R1VNPT" started.
2024-11-10 12:40:52.163 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5169/ - null null
2024-11-10 12:40:52.167 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:40:52.171 +07:00 [DBG] Https port '7169' loaded from configuration.
2024-11-10 12:40:52.174 +07:00 [DBG] Redirecting to 'https://localhost:7169/'.
2024-11-10 12:40:52.178 +07:00 [DBG] Connection id "0HN8198R1VNPS" completed keep alive response.
2024-11-10 12:40:52.180 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5169/ - 307 0 null 16.8277ms
2024-11-10 12:40:52.185 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/ - null null
2024-11-10 12:40:52.190 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:40:52.191 +07:00 [DBG] No candidates found for the request path '/'
2024-11-10 12:40:52.191 +07:00 [DBG] Request did not match any endpoints
2024-11-10 12:40:52.192 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:40:52.193 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/ - 404 0 null 8.032ms
2024-11-10 12:40:52.195 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7169/, Response status code: 404
2024-11-10 12:41:00.127 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger - null null
2024-11-10 12:41:00.133 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger - 301 0 null 6.8691ms
2024-11-10 12:41:00.138 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-11-10 12:41:00.188 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-11-10 12:41:00.191 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-11-10 12:41:00.207 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-11-10 12:41:00.208 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-11-10 12:41:00.209 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 71.2151ms
2024-11-10 12:41:00.218 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui.css - null null
2024-11-10 12:41:00.218 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - null null
2024-11-10 12:41:00.219 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-11-10 12:41:00.218 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - null null
2024-11-10 12:41:00.225 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-11-10 12:41:00.240 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 21.6491ms
2024-11-10 12:41:00.266 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-11-10 12:41:00.266 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-11-10 12:41:00.269 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui.css - 200 143943 text/css 51.5872ms
2024-11-10 12:41:00.269 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 51.4669ms
2024-11-10 12:41:00.288 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-11-10 12:41:00.289 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 71.0452ms
2024-11-10 12:41:00.308 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 83.0567ms
2024-11-10 12:41:00.496 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-11-10 12:41:00.516 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/favicon-32x32.png - null null
2024-11-10 12:41:00.520 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-11-10 12:41:00.521 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/favicon-32x32.png - 200 628 image/png 5.1108ms
2024-11-10 12:41:00.633 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 137.8958ms
2024-11-10 12:42:08.879 +07:00 [DBG] Connection id "0HN8198R1VNPT" received FIN.
2024-11-10 12:42:08.883 +07:00 [DBG] Connection id "0HN8198R1VNPT" disconnecting.
2024-11-10 12:42:08.888 +07:00 [DBG] Connection id "0HN8198R1VNPT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 12:42:08.893 +07:00 [DBG] Connection id "0HN8198R1VNPT" stopped.
2024-11-10 12:45:34.562 +07:00 [DBG] Connection id "0HN8198R1VNPS" received FIN.
2024-11-10 12:45:34.564 +07:00 [DBG] Connection id "0HN8198R1VNPR" received FIN.
2024-11-10 12:45:34.569 +07:00 [DBG] Connection id "0HN8198R1VNPS" disconnecting.
2024-11-10 12:45:34.574 +07:00 [DBG] Connection id "0HN8198R1VNPS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 12:45:34.575 +07:00 [DBG] Connection id "0HN8198R1VNPR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 12:45:34.581 +07:00 [DBG] Connection id "0HN8198R1VNPS" stopped.
2024-11-10 12:45:34.587 +07:00 [DBG] Connection id "0HN8198R1VNPR" is closed. The last processed stream ID was 29.
2024-11-10 12:45:34.589 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNPR completed.
2024-11-10 12:45:34.592 +07:00 [DBG] Connection id "0HN8198R1VNPR" stopped.
2024-11-10 12:48:58.459 +07:00 [DBG] Connection id "0HN8198R1VNPU" accepted.
2024-11-10 12:48:58.464 +07:00 [DBG] Connection id "0HN8198R1VNPU" started.
2024-11-10 12:48:58.471 +07:00 [DBG] Connection 0HN8198R1VNPU established using the following protocol: "Tls13"
2024-11-10 12:48:58.476 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 12:48:58.483 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 12:48:58.484 +07:00 [INF] CORS policy execution successful.
2024-11-10 12:48:58.486 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:48:58.492 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 12:48:58.495 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 12:48:58.505 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:48:58.506 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:48:58.508 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:48:58.536 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 12:48:58.538 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 12:48:58.540 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 12:48:58.543 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:48:58.546 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 12:48:58.547 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:48:58.550 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:48:58.695 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-10 12:48:58.711 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:48:58.716 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 12:48:58.718 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 12:48:58.719 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 12:48:58.720 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:48:58.720 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:48:58.721 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 12:48:58.723 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 12:48:58.724 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:48:58.725 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 12:48:58.725 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 12:48:58.726 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:48:58.726 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:48:58.728 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:48:58.728 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 12:48:58.729 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 12:48:58.730 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 12:48:58.731 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:48:58.732 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:48:58.732 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 12:48:58.734 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 12:48:58.735 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:48:58.736 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 12:48:58.737 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:48:58.737 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:48:58.738 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:48:58.738 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:48:59.359 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 12:48:59.430 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .OrderBy(pt => pt.AppointmentTime)
    .Skip(__p_0)
    .Take(__p_1)
    .Select(ap => new AppointmentModel{ 
        AppointmentId = ap.AppointmentId, 
        AppointmentTime = ap.AppointmentTime, 
        AppointmentStatus = ap.AppointmentStatus, 
        AppointmentComment = ap.AppointmentComment, 
        PatientId = ap.PatientId, 
        DoctorId = ap.DoctorId, 
        Gender = ap.Patient.Gender, 
        Avatar = ap.Patient.Avatar, 
        FullName = ap.Patient.FullName, 
        Date = ap.Patient.Date, 
        Age = DateTime.Now.Year - ap.Patient.Date.Year - DateTime.Now < ap.Patient.Date.AddYears(DateTime.Now.Year - ap.Patient.Date.Year) ? 1 : 0 
    }
    )'
2024-11-10 12:48:59.635 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppointmentModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            AppointmentId -> 0
            AppointmentTime -> 1
            AppointmentStatus -> 2
            AppointmentComment -> 3
            PatientId -> 4
            DoctorId -> 5
            Gender -> 6
            Avatar -> 7
            FullName -> 8
            Date -> 9
            Age -> 10
        SELECT t.AppointmentId, t.AppointmentTime, t.AppointmentStatus, t.AppointmentComment, t.PatientId, t.DoctorId, p.Gender, p.Avatar, p.FullName, p.Date, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM 
        (
            SELECT a.AppointmentId, a.AppointmentComment, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId
            FROM Appointment AS a
            ORDER BY a.AppointmentTime ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        INNER JOIN Patient AS p ON t.PatientId == p.PatientId
        ORDER BY t.AppointmentTime ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppointmentModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-11-10 12:48:59.665 +07:00 [DBG] Creating DbConnection.
2024-11-10 12:48:59.684 +07:00 [DBG] Created DbConnection. (20ms).
2024-11-10 12:48:59.686 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:00.024 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:00.027 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 12:49:00.030 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-10 12:49:00.037 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-11-10 12:49:00.045 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 12:49:00.104 +07:00 [INF] Executed DbCommand (61ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 12:49:00.116 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:00.122 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 12ms reading results.
2024-11-10 12:49:00.124 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:00.128 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2024-11-10 12:49:00.132 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 12:49:00.135 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 12:49:00.136 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 12:49:00.136 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 12:49:00.137 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 12:49:00.138 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 12:49:00.219 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 1668.2376ms
2024-11-10 12:49:00.220 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:49:00.223 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 12:49:00.226 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:00.229 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-10 12:49:00.230 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 1754.5991ms
2024-11-10 12:49:04.891 +07:00 [DBG] Connection id "0HN8198R1VNPU" received FIN.
2024-11-10 12:49:04.892 +07:00 [DBG] Connection id "0HN8198R1VNPU" is closed. The last processed stream ID was 1.
2024-11-10 12:49:04.892 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNPU completed.
2024-11-10 12:49:04.893 +07:00 [DBG] Connection id "0HN8198R1VNPU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 12:49:04.904 +07:00 [DBG] Connection id "0HN8198R1VNPU" stopped.
2024-11-10 12:49:05.064 +07:00 [DBG] Connection id "0HN8198R1VNPV" accepted.
2024-11-10 12:49:05.065 +07:00 [DBG] Connection id "0HN8198R1VNPV" started.
2024-11-10 12:49:05.067 +07:00 [DBG] Connection 0HN8198R1VNPV established using the following protocol: "Tls13"
2024-11-10 12:49:05.069 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 12:49:05.070 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 12:49:05.071 +07:00 [INF] CORS policy execution successful.
2024-11-10 12:49:05.071 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:49:05.072 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 12:49:05.073 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 12:49:05.075 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:49:05.075 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:49:05.076 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:49:05.077 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 12:49:05.078 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 12:49:05.079 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 12:49:05.079 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:49:05.080 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 12:49:05.081 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:49:05.082 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:49:05.084 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:49:05.085 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 12:49:05.086 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 12:49:05.086 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 12:49:05.087 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:49:05.088 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:49:05.088 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 12:49:05.089 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 12:49:05.090 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:49:05.091 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 12:49:05.092 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 12:49:05.094 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:49:05.095 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:49:05.096 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:49:05.096 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 12:49:05.097 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 12:49:05.098 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 12:49:05.099 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:49:05.100 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:49:05.100 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 12:49:05.101 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 12:49:05.102 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:49:05.103 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 12:49:05.104 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:49:05.105 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:49:05.106 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:49:05.107 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:49:05.118 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 12:49:05.123 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .OrderBy(pt => pt.AppointmentTime)
    .Select(ap => new AppointmentModel{ 
        AppointmentId = ap.AppointmentId, 
        AppointmentTime = ap.AppointmentTime, 
        AppointmentStatus = ap.AppointmentStatus, 
        AppointmentComment = ap.AppointmentComment, 
        PatientId = ap.PatientId, 
        DoctorId = ap.DoctorId, 
        Gender = ap.Patient.Gender, 
        Avatar = ap.Patient.Avatar, 
        FullName = ap.Patient.FullName, 
        Date = ap.Patient.Date, 
        Age = DateTime.Now.Year - ap.Patient.Date.Year - DateTime.Now < ap.Patient.Date.AddYears(DateTime.Now.Year - ap.Patient.Date.Year) ? 1 : 0 
    }
    )'
2024-11-10 12:49:05.133 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppointmentModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            AppointmentId -> 0
            AppointmentTime -> 1
            AppointmentStatus -> 2
            AppointmentComment -> 3
            PatientId -> 4
            DoctorId -> 5
            Gender -> 6
            Avatar -> 7
            FullName -> 8
            Date -> 9
            Age -> 10
        SELECT a.AppointmentId, a.AppointmentTime, a.AppointmentStatus, a.AppointmentComment, a.PatientId, a.DoctorId, p.Gender, p.Avatar, p.FullName, p.Date, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM Appointment AS a
        INNER JOIN Patient AS p ON a.PatientId == p.PatientId
        ORDER BY a.AppointmentTime ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppointmentModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-11-10 12:49:05.134 +07:00 [DBG] Creating DbConnection.
2024-11-10 12:49:05.135 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 12:49:05.136 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:05.138 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:05.139 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 12:49:05.140 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 12:49:05.141 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 12:49:05.142 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 12:49:05.151 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 12:49:05.153 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:05.154 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 12:49:05.155 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:05.155 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 12:49:05.156 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 12:49:05.157 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 12:49:05.158 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 12:49:05.158 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 12:49:05.159 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 12:49:05.160 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 12:49:05.165 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 83.111ms
2024-11-10 12:49:05.166 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:49:05.167 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 12:49:05.168 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:05.169 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 12:49:05.169 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 100.912ms
2024-11-10 12:49:12.419 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 12:49:12.420 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 12:49:12.421 +07:00 [INF] CORS policy execution successful.
2024-11-10 12:49:12.422 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:49:12.423 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 12:49:12.424 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 12:49:12.425 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:49:12.425 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:49:12.426 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:49:12.427 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 12:49:12.428 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 12:49:12.429 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 12:49:12.430 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:49:12.431 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 12:49:12.432 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:49:12.434 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:49:12.439 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:49:12.440 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 12:49:12.441 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 12:49:12.443 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 12:49:12.444 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:49:12.445 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:49:12.445 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 12:49:12.446 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 12:49:12.447 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:49:12.448 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 12:49:12.449 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 12:49:12.450 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:49:12.451 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:49:12.452 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:49:12.453 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 12:49:12.453 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 12:49:12.454 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 12:49:12.455 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:49:12.456 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:49:12.457 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 12:49:12.458 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 12:49:12.459 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:49:12.460 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 12:49:12.461 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:49:12.462 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:49:12.463 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:49:12.464 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:49:12.512 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 12:49:12.517 +07:00 [DBG] Creating DbConnection.
2024-11-10 12:49:12.518 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 12:49:12.519 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:12.520 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:12.521 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 12:49:12.521 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 12:49:12.522 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 12:49:12.523 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 12:49:12.529 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 12:49:12.531 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:12.532 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 12:49:12.533 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:12.534 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 12:49:12.535 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 12:49:12.536 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 12:49:12.537 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 12:49:12.537 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 12:49:12.538 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 12:49:12.539 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 12:49:12.540 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 106.7242ms
2024-11-10 12:49:12.541 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:49:12.542 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 12:49:12.543 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:49:12.544 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 12:49:12.545 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 126.0711ms
2024-11-10 12:49:14.897 +07:00 [DBG] Connection id "0HN8198R1VNPV" received FIN.
2024-11-10 12:49:14.897 +07:00 [DBG] Connection id "0HN8198R1VNPV" is closed. The last processed stream ID was 3.
2024-11-10 12:49:14.897 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNPV completed.
2024-11-10 12:49:14.898 +07:00 [DBG] Connection id "0HN8198R1VNPV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 12:49:14.911 +07:00 [DBG] Connection id "0HN8198R1VNPV" stopped.
2024-11-10 12:50:14.887 +07:00 [DBG] Connection id "0HN8198R1VNQ0" accepted.
2024-11-10 12:50:14.891 +07:00 [DBG] Connection id "0HN8198R1VNQ0" started.
2024-11-10 12:50:14.896 +07:00 [DBG] Connection 0HN8198R1VNQ0 established using the following protocol: "Tls13"
2024-11-10 12:50:14.901 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 12:50:14.907 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 12:50:14.907 +07:00 [INF] CORS policy execution successful.
2024-11-10 12:50:14.908 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:50:14.908 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 12:50:14.909 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 12:50:14.910 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:50:14.910 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:50:14.911 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:50:14.911 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 12:50:14.912 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 12:50:14.913 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 12:50:14.914 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:50:14.915 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 12:50:14.916 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:50:14.916 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:50:14.917 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:50:14.918 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 12:50:14.918 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 12:50:14.919 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 12:50:14.920 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:50:14.920 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:50:14.921 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 12:50:14.922 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 12:50:14.922 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:50:14.923 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 12:50:14.923 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 12:50:14.924 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:50:14.925 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:50:14.925 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:50:14.926 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 12:50:14.927 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 12:50:14.927 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 12:50:14.928 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:50:14.929 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:50:14.929 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 12:50:14.930 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 12:50:14.930 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:50:14.931 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 12:50:14.931 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:50:14.932 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:50:14.933 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:50:14.933 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:50:14.935 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 12:50:14.936 +07:00 [DBG] Creating DbConnection.
2024-11-10 12:50:14.937 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 12:50:14.937 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:14.938 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:14.938 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 12:50:14.939 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 12:50:14.939 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 12:50:14.940 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 12:50:14.945 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 12:50:14.946 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:14.947 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 12:50:14.948 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:14.949 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 12:50:14.950 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 12:50:14.951 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 12:50:14.951 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 12:50:14.952 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 12:50:14.952 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 12:50:14.952 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 12:50:14.953 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.8036ms
2024-11-10 12:50:14.954 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:50:14.955 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 12:50:14.955 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:14.956 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 12:50:14.957 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 55.4276ms
2024-11-10 12:50:14.973 +07:00 [DBG] Connection id "0HN8198R1VNQ0" received FIN.
2024-11-10 12:50:14.974 +07:00 [DBG] Connection id "0HN8198R1VNQ0" is closed. The last processed stream ID was 1.
2024-11-10 12:50:14.974 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQ0 completed.
2024-11-10 12:50:14.974 +07:00 [DBG] Connection id "0HN8198R1VNQ0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 12:50:14.988 +07:00 [DBG] Connection id "0HN8198R1VNQ0" stopped.
2024-11-10 12:50:41.512 +07:00 [DBG] Connection id "0HN8198R1VNQ1" accepted.
2024-11-10 12:50:41.516 +07:00 [DBG] Connection id "0HN8198R1VNQ1" started.
2024-11-10 12:50:41.519 +07:00 [DBG] Connection 0HN8198R1VNQ1 established using the following protocol: "Tls13"
2024-11-10 12:50:41.524 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 12:50:41.528 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 12:50:41.529 +07:00 [INF] CORS policy execution successful.
2024-11-10 12:50:41.530 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:50:41.530 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 12:50:41.531 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 12:50:41.532 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:50:41.533 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:50:41.534 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:50:41.534 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 12:50:41.535 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 12:50:41.536 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 12:50:41.537 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:50:41.538 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 12:50:41.539 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:50:41.540 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:50:41.541 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:50:41.542 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 12:50:41.543 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 12:50:41.544 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 12:50:41.545 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:50:41.545 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:50:41.546 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 12:50:41.547 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 12:50:41.547 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:50:41.548 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 12:50:41.549 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 12:50:41.550 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:50:41.550 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:50:41.551 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:50:41.552 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 12:50:41.552 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 12:50:41.553 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 12:50:41.554 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:50:41.555 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:50:41.555 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 12:50:41.556 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 12:50:41.557 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:50:41.558 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 12:50:41.558 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:50:41.559 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:50:41.560 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:50:41.560 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:50:41.562 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 12:50:41.563 +07:00 [DBG] Creating DbConnection.
2024-11-10 12:50:41.564 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 12:50:41.564 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:41.565 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:41.566 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 12:50:41.566 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 12:50:41.567 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 12:50:41.568 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 12:50:41.575 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 12:50:41.576 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:41.577 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 12:50:41.577 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:41.578 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 12:50:41.579 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 12:50:41.581 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 12:50:41.581 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 12:50:41.582 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 12:50:41.582 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 12:50:41.583 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 12:50:41.584 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.2668ms
2024-11-10 12:50:41.585 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:50:41.586 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 12:50:41.587 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:41.588 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 12:50:41.588 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 64.6828ms
2024-11-10 12:50:45.029 +07:00 [DBG] Connection id "0HN8198R1VNQ1" received FIN.
2024-11-10 12:50:45.029 +07:00 [DBG] Connection id "0HN8198R1VNQ1" is closed. The last processed stream ID was 1.
2024-11-10 12:50:45.029 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQ1 completed.
2024-11-10 12:50:45.030 +07:00 [DBG] Connection id "0HN8198R1VNQ1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 12:50:45.044 +07:00 [DBG] Connection id "0HN8198R1VNQ1" stopped.
2024-11-10 12:50:55.403 +07:00 [DBG] Connection id "0HN8198R1VNQ2" accepted.
2024-11-10 12:50:55.404 +07:00 [DBG] Connection id "0HN8198R1VNQ2" started.
2024-11-10 12:50:55.408 +07:00 [DBG] Connection 0HN8198R1VNQ2 established using the following protocol: "Tls13"
2024-11-10 12:50:55.410 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 12:50:55.411 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 12:50:55.412 +07:00 [INF] CORS policy execution successful.
2024-11-10 12:50:55.412 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:50:55.413 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 12:50:55.413 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 12:50:55.414 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:50:55.414 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:50:55.415 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:50:55.415 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 12:50:55.416 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 12:50:55.417 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 12:50:55.417 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:50:55.419 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 12:50:55.419 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:50:55.420 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:50:55.421 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:50:55.421 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 12:50:55.422 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 12:50:55.422 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 12:50:55.423 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:50:55.424 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:50:55.424 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 12:50:55.425 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 12:50:55.425 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:50:55.426 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 12:50:55.426 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 12:50:55.427 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:50:55.428 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:50:55.428 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:50:55.429 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 12:50:55.429 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 12:50:55.430 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 12:50:55.430 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:50:55.431 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:50:55.431 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 12:50:55.432 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 12:50:55.433 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:50:55.433 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 12:50:55.434 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:50:55.434 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:50:55.435 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:50:55.435 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:50:55.436 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 12:50:55.438 +07:00 [DBG] Creating DbConnection.
2024-11-10 12:50:55.438 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 12:50:55.439 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:55.439 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:55.440 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 12:50:55.440 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 12:50:55.441 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 12:50:55.442 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 12:50:55.447 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 12:50:55.448 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:55.448 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 12:50:55.449 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:55.449 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 12:50:55.450 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 12:50:55.451 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 12:50:55.451 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 12:50:55.452 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 12:50:55.452 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 12:50:55.453 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 12:50:55.453 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.4619ms
2024-11-10 12:50:55.454 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:50:55.455 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 12:50:55.455 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:50:55.456 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 12:50:55.456 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 46.7994ms
2024-11-10 12:51:05.057 +07:00 [DBG] Connection id "0HN8198R1VNQ2" received FIN.
2024-11-10 12:51:05.058 +07:00 [DBG] Connection id "0HN8198R1VNQ2" is closed. The last processed stream ID was 1.
2024-11-10 12:51:05.059 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQ2 completed.
2024-11-10 12:51:05.059 +07:00 [DBG] Connection id "0HN8198R1VNQ2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 12:51:05.072 +07:00 [DBG] Connection id "0HN8198R1VNQ2" stopped.
2024-11-10 12:51:28.471 +07:00 [DBG] Connection id "0HN8198R1VNQ3" accepted.
2024-11-10 12:51:28.475 +07:00 [DBG] Connection id "0HN8198R1VNQ3" started.
2024-11-10 12:51:28.478 +07:00 [DBG] Connection 0HN8198R1VNQ3 established using the following protocol: "Tls13"
2024-11-10 12:51:28.483 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 12:51:28.487 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 12:51:28.487 +07:00 [INF] CORS policy execution successful.
2024-11-10 12:51:28.488 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:51:28.488 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 12:51:28.489 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 12:51:28.490 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:51:28.490 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:51:28.491 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:51:28.492 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 12:51:28.492 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 12:51:28.493 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 12:51:28.494 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:51:28.495 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 12:51:28.496 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:51:28.497 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:51:28.497 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:51:28.498 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 12:51:28.499 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 12:51:28.499 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 12:51:28.500 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:51:28.500 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:51:28.501 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 12:51:28.502 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 12:51:28.502 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:51:28.503 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 12:51:28.504 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 12:51:28.504 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:51:28.505 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:51:28.505 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:51:28.506 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 12:51:28.506 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 12:51:28.507 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 12:51:28.508 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:51:28.509 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:51:28.510 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 12:51:28.510 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 12:51:28.511 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:51:28.511 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 12:51:28.512 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:51:28.513 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:51:28.513 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:51:28.514 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:51:28.516 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 12:51:28.517 +07:00 [DBG] Creating DbConnection.
2024-11-10 12:51:28.518 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 12:51:28.519 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:51:28.519 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:51:28.520 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 12:51:28.521 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 12:51:28.521 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 12:51:28.522 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 12:51:28.528 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 12:51:28.531 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:51:28.531 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 12:51:28.532 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:51:28.533 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 12:51:28.533 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 12:51:28.535 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 12:51:28.535 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 12:51:28.536 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 12:51:28.536 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 12:51:28.537 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 12:51:28.538 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.969ms
2024-11-10 12:51:28.538 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:51:28.539 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 12:51:28.539 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:51:28.540 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 12:51:28.541 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 58.2736ms
2024-11-10 12:51:30.511 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 12:51:30.512 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 12:51:30.512 +07:00 [INF] CORS policy execution successful.
2024-11-10 12:51:30.513 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:51:30.513 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 12:51:30.514 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 12:51:30.515 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:51:30.516 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:51:30.516 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:51:30.517 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 12:51:30.518 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 12:51:30.518 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 12:51:30.519 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:51:30.520 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 12:51:30.521 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:51:30.522 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:51:30.523 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:51:30.524 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 12:51:30.524 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 12:51:30.525 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 12:51:30.526 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:51:30.526 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:51:30.527 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 12:51:30.527 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 12:51:30.528 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:51:30.529 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 12:51:30.529 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 12:51:30.530 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:51:30.531 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:51:30.531 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:51:30.532 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 12:51:30.532 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 12:51:30.533 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 12:51:30.533 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:51:30.534 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:51:30.534 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 12:51:30.535 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 12:51:30.536 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:51:30.536 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 12:51:30.537 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:51:30.538 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:51:30.538 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:51:30.539 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:51:30.540 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 12:51:30.541 +07:00 [DBG] Creating DbConnection.
2024-11-10 12:51:30.542 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 12:51:30.542 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:51:30.543 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:51:30.543 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 12:51:30.544 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 12:51:30.545 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 12:51:30.546 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 12:51:30.551 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 12:51:30.552 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:51:30.553 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 12:51:30.554 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:51:30.554 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 12:51:30.555 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 12:51:30.556 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 12:51:30.557 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 12:51:30.557 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 12:51:30.558 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 12:51:30.559 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 12:51:30.565 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.8376ms
2024-11-10 12:51:30.567 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:51:30.568 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 12:51:30.569 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:51:30.569 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 12:51:30.570 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 59.8477ms
2024-11-10 12:51:35.108 +07:00 [DBG] Connection id "0HN8198R1VNQ3" received FIN.
2024-11-10 12:51:35.109 +07:00 [DBG] Connection id "0HN8198R1VNQ3" is closed. The last processed stream ID was 3.
2024-11-10 12:51:35.109 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQ3 completed.
2024-11-10 12:51:35.110 +07:00 [DBG] Connection id "0HN8198R1VNQ3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 12:51:35.123 +07:00 [DBG] Connection id "0HN8198R1VNQ3" stopped.
2024-11-10 12:52:29.351 +07:00 [DBG] Connection id "0HN8198R1VNQ4" accepted.
2024-11-10 12:52:29.357 +07:00 [DBG] Connection id "0HN8198R1VNQ4" started.
2024-11-10 12:52:29.362 +07:00 [DBG] Connection 0HN8198R1VNQ4 established using the following protocol: "Tls13"
2024-11-10 12:52:29.367 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 12:52:29.373 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 12:52:29.373 +07:00 [INF] CORS policy execution successful.
2024-11-10 12:52:29.374 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:52:29.374 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 12:52:29.375 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 12:52:29.376 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:52:29.377 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:52:29.377 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:52:29.378 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 12:52:29.379 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 12:52:29.379 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 12:52:29.380 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:52:29.381 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 12:52:29.382 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:52:29.383 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:52:29.384 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:52:29.385 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 12:52:29.385 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 12:52:29.386 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 12:52:29.386 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:52:29.387 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:52:29.388 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 12:52:29.388 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 12:52:29.389 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:52:29.390 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 12:52:29.391 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 12:52:29.391 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:52:29.392 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:52:29.392 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:52:29.393 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 12:52:29.393 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 12:52:29.394 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 12:52:29.395 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:52:29.395 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:52:29.396 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 12:52:29.397 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 12:52:29.398 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:52:29.398 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 12:52:29.399 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:52:29.400 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:52:29.400 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:52:29.401 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:52:29.402 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 12:52:29.404 +07:00 [DBG] Creating DbConnection.
2024-11-10 12:52:29.405 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 12:52:29.405 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:52:29.406 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:52:29.406 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 12:52:29.407 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 12:52:29.407 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 12:52:29.408 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 12:52:29.413 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 12:52:29.414 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:52:29.414 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 12:52:29.415 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:52:29.416 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 12:52:29.417 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 12:52:29.418 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 12:52:29.419 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 12:52:29.419 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 12:52:29.419 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 12:52:29.420 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 12:52:29.422 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.5897ms
2024-11-10 12:52:29.422 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:52:29.423 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 12:52:29.424 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:52:29.424 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 12:52:29.425 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 58.0859ms
2024-11-10 12:52:30.203 +07:00 [DBG] Connection id "0HN8198R1VNQ4" received FIN.
2024-11-10 12:52:30.204 +07:00 [DBG] Connection id "0HN8198R1VNQ4" is closed. The last processed stream ID was 1.
2024-11-10 12:52:30.204 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQ4 completed.
2024-11-10 12:52:30.204 +07:00 [DBG] Connection id "0HN8198R1VNQ4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 12:52:30.216 +07:00 [DBG] Connection id "0HN8198R1VNQ4" stopped.
2024-11-10 12:56:43.339 +07:00 [DBG] Connection id "0HN8198R1VNQ5" accepted.
2024-11-10 12:56:43.344 +07:00 [DBG] Connection id "0HN8198R1VNQ5" started.
2024-11-10 12:56:43.350 +07:00 [DBG] Connection 0HN8198R1VNQ5 established using the following protocol: "Tls13"
2024-11-10 12:56:43.357 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 12:56:43.364 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 12:56:43.364 +07:00 [INF] CORS policy execution successful.
2024-11-10 12:56:43.366 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:56:43.366 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 12:56:43.367 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 12:56:43.369 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:56:43.369 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:56:43.370 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:56:43.371 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 12:56:43.372 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 12:56:43.373 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 12:56:43.374 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:56:43.376 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 12:56:43.377 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:56:43.379 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:56:43.380 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:56:43.381 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 12:56:43.383 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 12:56:43.384 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 12:56:43.385 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:56:43.385 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:56:43.386 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 12:56:43.387 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 12:56:43.387 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:56:43.388 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 12:56:43.389 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 12:56:43.390 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:56:43.390 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:56:43.391 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:56:43.391 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 12:56:43.392 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 12:56:43.393 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 12:56:43.394 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:56:43.394 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:56:43.395 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 12:56:43.396 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 12:56:43.396 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:56:43.397 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 12:56:43.398 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:56:43.398 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:56:43.399 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:56:43.399 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:56:43.400 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 12:56:43.402 +07:00 [DBG] Creating DbConnection.
2024-11-10 12:56:43.402 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 12:56:43.403 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:56:43.403 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:56:43.404 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 12:56:43.405 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 12:56:43.405 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 12:56:43.406 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 12:56:43.411 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 12:56:43.412 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:56:43.413 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 12:56:43.414 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:56:43.414 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 12:56:43.415 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 12:56:43.416 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 12:56:43.416 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 12:56:43.417 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 12:56:43.417 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 12:56:43.418 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 12:56:43.420 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.331ms
2024-11-10 12:56:43.424 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:56:43.425 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 12:56:43.426 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:56:43.427 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 12:56:43.427 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 70.5871ms
2024-11-10 12:57:40.341 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 12:57:40.349 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 12:57:40.349 +07:00 [INF] CORS policy execution successful.
2024-11-10 12:57:40.350 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 12:57:40.350 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 12:57:40.351 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 12:57:40.352 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:57:40.352 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 12:57:40.353 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:57:40.353 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 12:57:40.354 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 12:57:40.355 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 12:57:40.356 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:57:40.358 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 12:57:40.358 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 12:57:40.359 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:57:40.360 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 12:57:40.361 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 12:57:40.361 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 12:57:40.362 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 12:57:40.363 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:57:40.363 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 12:57:40.364 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 12:57:40.364 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 12:57:40.365 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:57:40.365 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 12:57:40.366 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 12:57:40.367 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:57:40.367 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 12:57:40.368 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 12:57:40.368 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 12:57:40.369 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 12:57:40.370 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 12:57:40.370 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:57:40.371 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 12:57:40.371 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 12:57:40.372 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 12:57:40.373 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:57:40.373 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 12:57:40.374 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:57:40.374 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:57:40.375 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 12:57:40.376 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 12:57:40.377 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 12:57:40.378 +07:00 [DBG] Creating DbConnection.
2024-11-10 12:57:40.378 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 12:57:40.378 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:57:40.379 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:57:40.380 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 12:57:40.380 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 12:57:40.381 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 12:57:40.381 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 12:57:40.386 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 12:57:40.387 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:57:40.388 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 12:57:40.388 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:57:40.389 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 12:57:40.390 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 12:57:40.391 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 12:57:40.391 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 12:57:40.391 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 12:57:40.391 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 12:57:40.392 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 12:57:40.394 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.8446ms
2024-11-10 12:57:40.398 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 12:57:40.399 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 12:57:40.399 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 12:57:40.400 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 12:57:40.401 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 59.6135ms
2024-11-10 13:00:40.949 +07:00 [DBG] Connection id "0HN8198R1VNQ5" received FIN.
2024-11-10 13:00:40.951 +07:00 [DBG] Connection id "0HN8198R1VNQ5" is closed. The last processed stream ID was 3.
2024-11-10 13:00:40.951 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQ5 completed.
2024-11-10 13:00:40.955 +07:00 [DBG] Connection id "0HN8198R1VNQ5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 13:00:40.958 +07:00 [DBG] Connection id "0HN8198R1VNQ5" stopped.
2024-11-10 13:02:50.375 +07:00 [DBG] Connection id "0HN8198R1VNQ6" accepted.
2024-11-10 13:02:50.376 +07:00 [DBG] Connection id "0HN8198R1VNQ6" started.
2024-11-10 13:02:50.411 +07:00 [DBG] Connection 0HN8198R1VNQ6 established using the following protocol: "Tls13"
2024-11-10 13:02:50.423 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 13:02:50.454 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 13:02:50.456 +07:00 [INF] CORS policy execution successful.
2024-11-10 13:02:50.456 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 13:02:50.457 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 13:02:50.457 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 13:02:50.460 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:02:50.461 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 13:02:50.461 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:02:50.462 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 13:02:50.463 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 13:02:50.464 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 13:02:50.465 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:02:50.466 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 13:02:50.467 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:02:50.468 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:02:50.471 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:02:50.472 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 13:02:50.474 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 13:02:50.478 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 13:02:50.479 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:02:50.480 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:02:50.481 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 13:02:50.481 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 13:02:50.482 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:02:50.484 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 13:02:50.484 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 13:02:50.485 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:02:50.486 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:02:50.487 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:02:50.488 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 13:02:50.488 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 13:02:50.489 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 13:02:50.490 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:02:50.490 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:02:50.491 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 13:02:50.492 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 13:02:50.492 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:02:50.493 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 13:02:50.494 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:02:50.495 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:02:50.496 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:02:50.497 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:02:50.499 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 13:02:50.500 +07:00 [DBG] Creating DbConnection.
2024-11-10 13:02:50.501 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 13:02:50.501 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:02:50.538 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:02:50.539 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 13:02:50.540 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 13:02:50.541 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 13:02:50.542 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 13:02:50.565 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 13:02:50.567 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:02:50.568 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 13:02:50.568 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:02:50.569 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 13:02:50.571 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 13:02:50.572 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 13:02:50.572 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 13:02:50.573 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 13:02:50.574 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 13:02:50.574 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 13:02:50.580 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 111.6609ms
2024-11-10 13:02:50.584 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:02:50.586 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 13:02:50.588 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:02:50.590 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-10 13:02:50.593 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 170.1423ms
2024-11-10 13:02:51.108 +07:00 [DBG] Connection id "0HN8198R1VNQ6" received FIN.
2024-11-10 13:02:51.110 +07:00 [DBG] Connection id "0HN8198R1VNQ6" is closed. The last processed stream ID was 1.
2024-11-10 13:02:51.110 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQ6 completed.
2024-11-10 13:02:51.111 +07:00 [DBG] Connection id "0HN8198R1VNQ6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 13:02:51.124 +07:00 [DBG] Connection id "0HN8198R1VNQ6" stopped.
2024-11-10 13:03:01.346 +07:00 [DBG] Connection id "0HN8198R1VNQ7" accepted.
2024-11-10 13:03:01.347 +07:00 [DBG] Connection id "0HN8198R1VNQ7" started.
2024-11-10 13:03:01.351 +07:00 [DBG] Connection 0HN8198R1VNQ7 established using the following protocol: "Tls13"
2024-11-10 13:03:01.353 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 13:03:01.354 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 13:03:01.354 +07:00 [INF] CORS policy execution successful.
2024-11-10 13:03:01.355 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 13:03:01.355 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 13:03:01.356 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 13:03:01.356 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:03:01.357 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 13:03:01.358 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:03:01.358 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 13:03:01.359 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 13:03:01.360 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 13:03:01.361 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:03:01.362 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 13:03:01.362 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:03:01.363 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:03:01.365 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:03:01.366 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 13:03:01.366 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 13:03:01.367 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 13:03:01.368 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:03:01.368 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:03:01.369 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 13:03:01.370 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 13:03:01.370 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:03:01.371 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 13:03:01.371 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 13:03:01.372 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:03:01.373 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:03:01.374 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:03:01.374 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 13:03:01.375 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 13:03:01.375 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 13:03:01.376 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:03:01.376 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:03:01.377 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 13:03:01.377 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 13:03:01.378 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:03:01.379 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 13:03:01.380 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:03:01.381 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:03:01.381 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:03:01.382 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:03:01.383 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 13:03:01.385 +07:00 [DBG] Creating DbConnection.
2024-11-10 13:03:01.385 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 13:03:01.386 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:03:01.387 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:03:01.388 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 13:03:01.389 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 13:03:01.389 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 13:03:01.390 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 13:03:01.396 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 13:03:01.397 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:03:01.397 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 13:03:01.398 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:03:01.398 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 13:03:01.400 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 13:03:01.401 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 13:03:01.401 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 13:03:01.402 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 13:03:01.402 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 13:03:01.403 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 13:03:01.404 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.9652ms
2024-11-10 13:03:01.405 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:03:01.406 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 13:03:01.407 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:03:01.408 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 13:03:01.408 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 55.8993ms
2024-11-10 13:03:11.131 +07:00 [DBG] Connection id "0HN8198R1VNQ7" received FIN.
2024-11-10 13:03:11.131 +07:00 [DBG] Connection id "0HN8198R1VNQ7" is closed. The last processed stream ID was 1.
2024-11-10 13:03:11.132 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQ7 completed.
2024-11-10 13:03:11.132 +07:00 [DBG] Connection id "0HN8198R1VNQ7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 13:03:11.149 +07:00 [DBG] Connection id "0HN8198R1VNQ7" stopped.
2024-11-10 13:03:25.343 +07:00 [DBG] Connection id "0HN8198R1VNQ8" accepted.
2024-11-10 13:03:25.344 +07:00 [DBG] Connection id "0HN8198R1VNQ8" started.
2024-11-10 13:03:25.346 +07:00 [DBG] Connection 0HN8198R1VNQ8 established using the following protocol: "Tls13"
2024-11-10 13:03:25.348 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 13:03:25.353 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 13:03:25.353 +07:00 [INF] CORS policy execution successful.
2024-11-10 13:03:25.354 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 13:03:25.354 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 13:03:25.355 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 13:03:25.355 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:03:25.356 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 13:03:25.356 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:03:25.357 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 13:03:25.358 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 13:03:25.359 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 13:03:25.360 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:03:25.361 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 13:03:25.361 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:03:25.362 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:03:25.363 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:03:25.364 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 13:03:25.364 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 13:03:25.365 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 13:03:25.366 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:03:25.366 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:03:25.367 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 13:03:25.367 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 13:03:25.368 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:03:25.368 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 13:03:25.369 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 13:03:25.370 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:03:25.370 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:03:25.371 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:03:25.372 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 13:03:25.372 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 13:03:25.373 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 13:03:25.374 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:03:25.374 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:03:25.375 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 13:03:25.375 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 13:03:25.376 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:03:25.376 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 13:03:25.377 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:03:25.377 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:03:25.378 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:03:25.379 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:03:25.380 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 13:03:25.381 +07:00 [DBG] Creating DbConnection.
2024-11-10 13:03:25.382 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 13:03:25.382 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:03:25.383 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:03:25.383 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 13:03:25.384 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 13:03:25.385 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 13:03:25.386 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 13:03:25.391 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 13:03:25.393 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:03:25.394 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 13:03:25.394 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:03:25.395 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 13:03:25.395 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 13:03:25.396 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 13:03:25.397 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 13:03:25.397 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 13:03:25.397 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 13:03:25.398 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 13:03:25.399 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.9042ms
2024-11-10 13:03:25.400 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:03:25.400 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 13:03:25.401 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:03:25.402 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 13:03:25.403 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 55.1381ms
2024-11-10 13:03:26.157 +07:00 [DBG] Connection id "0HN8198R1VNQ8" received FIN.
2024-11-10 13:03:26.158 +07:00 [DBG] Connection id "0HN8198R1VNQ8" is closed. The last processed stream ID was 1.
2024-11-10 13:03:26.159 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQ8 completed.
2024-11-10 13:03:26.160 +07:00 [DBG] Connection id "0HN8198R1VNQ8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 13:03:26.171 +07:00 [DBG] Connection id "0HN8198R1VNQ8" stopped.
2024-11-10 13:04:08.950 +07:00 [DBG] Connection id "0HN8198R1VNQ9" accepted.
2024-11-10 13:04:08.954 +07:00 [DBG] Connection id "0HN8198R1VNQ9" started.
2024-11-10 13:04:08.959 +07:00 [DBG] Connection 0HN8198R1VNQ9 established using the following protocol: "Tls13"
2024-11-10 13:04:08.965 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 13:04:08.971 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 13:04:08.972 +07:00 [INF] CORS policy execution successful.
2024-11-10 13:04:08.973 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 13:04:08.974 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 13:04:08.975 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 13:04:08.976 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:04:08.977 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 13:04:08.978 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:04:08.979 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 13:04:08.980 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 13:04:08.981 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 13:04:08.982 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:04:08.983 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 13:04:08.984 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:04:08.986 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:04:08.987 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:04:08.988 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 13:04:08.988 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 13:04:08.990 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 13:04:08.991 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:04:08.992 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:04:08.993 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 13:04:08.993 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 13:04:08.994 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:04:08.995 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 13:04:08.996 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:08.997 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:08.998 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:08.999 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:04:09.000 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:09.000 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 13:04:09.002 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 13:04:09.004 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:04:09.004 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:04:09.005 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 13:04:09.006 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 13:04:09.007 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:04:09.008 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 13:04:09.009 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:04:09.009 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:04:09.010 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:04:09.011 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:04:09.012 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 13:04:09.014 +07:00 [DBG] Creating DbConnection.
2024-11-10 13:04:09.014 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 13:04:09.015 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:09.016 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:09.017 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 13:04:09.018 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 13:04:09.019 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 13:04:09.020 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 13:04:09.027 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 13:04:09.028 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:09.029 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 13:04:09.030 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:09.031 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 13:04:09.032 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 13:04:09.034 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 13:04:09.035 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 13:04:09.035 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 13:04:09.036 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 13:04:09.037 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 13:04:09.038 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 52.6466ms
2024-11-10 13:04:09.039 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:04:09.040 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 13:04:09.041 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:09.043 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 13:04:09.045 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 79.7699ms
2024-11-10 13:04:26.124 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 13:04:26.126 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 13:04:26.126 +07:00 [INF] CORS policy execution successful.
2024-11-10 13:04:26.127 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 13:04:26.127 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 13:04:26.128 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 13:04:26.129 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:04:26.129 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 13:04:26.130 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:04:26.130 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 13:04:26.131 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 13:04:26.132 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 13:04:26.132 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:04:26.133 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 13:04:26.134 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:04:26.136 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:04:26.136 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:04:26.137 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 13:04:26.138 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 13:04:26.138 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 13:04:26.139 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:04:26.140 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:04:26.141 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 13:04:26.141 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 13:04:26.142 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:04:26.143 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 13:04:26.143 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:26.144 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:26.145 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:26.145 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:04:26.146 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:26.147 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 13:04:26.147 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 13:04:26.148 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:04:26.149 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:04:26.149 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 13:04:26.150 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 13:04:26.150 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:04:26.151 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 13:04:26.151 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:04:26.152 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:04:26.152 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:04:26.153 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:04:26.154 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 13:04:26.156 +07:00 [DBG] Creating DbConnection.
2024-11-10 13:04:26.156 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 13:04:26.157 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:26.158 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:26.158 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 13:04:26.159 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 13:04:26.160 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 13:04:26.161 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 13:04:26.166 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 13:04:26.168 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:26.169 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 13:04:26.170 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:26.171 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 13:04:26.172 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 13:04:26.174 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 13:04:26.175 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 13:04:26.175 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 13:04:26.176 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 13:04:26.176 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 13:04:26.177 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.9886ms
2024-11-10 13:04:26.178 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:04:26.179 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 13:04:26.180 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:26.180 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 13:04:26.181 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 57.427ms
2024-11-10 13:04:26.881 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 13:04:26.882 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 13:04:26.882 +07:00 [INF] CORS policy execution successful.
2024-11-10 13:04:26.883 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 13:04:26.884 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 13:04:26.885 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 13:04:26.886 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:04:26.886 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 13:04:26.887 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:04:26.887 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 13:04:26.888 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 13:04:26.889 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 13:04:26.890 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:04:26.891 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 13:04:26.892 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:04:26.893 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:04:26.894 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:04:26.895 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 13:04:26.895 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 13:04:26.897 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 13:04:26.898 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:04:26.899 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:04:26.899 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 13:04:26.900 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 13:04:26.901 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:04:26.902 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 13:04:26.903 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:26.905 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:26.906 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:26.906 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:04:26.907 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:26.908 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 13:04:26.909 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 13:04:26.909 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:04:26.910 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:04:26.911 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 13:04:26.912 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 13:04:26.913 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:04:26.913 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 13:04:26.914 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:04:26.915 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:04:26.915 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:04:26.916 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:04:26.917 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 13:04:26.919 +07:00 [DBG] Creating DbConnection.
2024-11-10 13:04:26.920 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 13:04:26.921 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:26.922 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:26.922 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 13:04:26.923 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 13:04:26.923 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 13:04:26.924 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 13:04:26.927 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 13:04:26.928 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:26.929 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 13:04:26.930 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:26.930 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 13:04:26.931 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 13:04:26.933 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 13:04:26.933 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 13:04:26.934 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 13:04:26.934 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 13:04:26.935 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 13:04:26.936 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.5489ms
2024-11-10 13:04:26.937 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:04:26.938 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 13:04:26.939 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:26.939 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 13:04:26.940 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 60.0729ms
2024-11-10 13:04:28.856 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 13:04:28.858 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 13:04:28.859 +07:00 [INF] CORS policy execution successful.
2024-11-10 13:04:28.859 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 13:04:28.860 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 13:04:28.861 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 13:04:28.862 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:04:28.862 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 13:04:28.863 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:04:28.864 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 13:04:28.865 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 13:04:28.865 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 13:04:28.866 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:04:28.867 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 13:04:28.868 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 13:04:28.869 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:04:28.870 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 13:04:28.871 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 13:04:28.872 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 13:04:28.873 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 13:04:28.873 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:04:28.874 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 13:04:28.875 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 13:04:28.876 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 13:04:28.877 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:04:28.877 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 13:04:28.878 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:28.879 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:28.880 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:28.880 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 13:04:28.881 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 13:04:28.881 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 13:04:28.882 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 13:04:28.883 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:04:28.884 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 13:04:28.884 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 13:04:28.885 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 13:04:28.886 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:04:28.887 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 13:04:28.888 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:04:28.888 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:04:28.889 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 13:04:28.890 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 13:04:28.891 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 13:04:28.893 +07:00 [DBG] Creating DbConnection.
2024-11-10 13:04:28.893 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 13:04:28.894 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:28.894 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:28.895 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 13:04:28.895 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 13:04:28.896 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 13:04:28.897 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 13:04:28.902 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 13:04:28.903 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:28.904 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 13:04:28.904 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:28.905 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 13:04:28.906 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 13:04:28.907 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 13:04:28.908 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 13:04:28.908 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 13:04:28.909 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 13:04:28.909 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 13:04:28.911 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.0263ms
2024-11-10 13:04:28.912 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 13:04:28.913 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 13:04:28.914 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 13:04:28.914 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 13:04:28.915 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 59.2956ms
2024-11-10 13:07:06.495 +07:00 [DBG] Connection id "0HN8198R1VNQ9" received FIN.
2024-11-10 13:07:06.496 +07:00 [DBG] Connection id "0HN8198R1VNQ9" is closed. The last processed stream ID was 7.
2024-11-10 13:07:06.498 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQ9 completed.
2024-11-10 13:07:06.500 +07:00 [DBG] Connection id "0HN8198R1VNQ9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 13:07:06.506 +07:00 [DBG] Connection id "0HN8198R1VNQ9" stopped.
2024-11-10 19:56:32.431 +07:00 [DBG] Connection id "0HN8198R1VNQA" accepted.
2024-11-10 19:56:32.434 +07:00 [DBG] Connection id "0HN8198R1VNQA" started.
2024-11-10 19:56:32.444 +07:00 [DBG] Connection 0HN8198R1VNQA established using the following protocol: "Tls13"
2024-11-10 19:56:32.451 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-11-10 19:56:32.489 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-11-10 19:56:32.490 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-11-10 19:56:32.498 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-11-10 19:56:32.499 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-11-10 19:56:32.499 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 51.6771ms
2024-11-10 19:56:32.511 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui.css - null null
2024-11-10 19:56:32.512 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - null null
2024-11-10 19:56:32.512 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - null null
2024-11-10 19:56:32.528 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-11-10 19:56:32.530 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui.css - 200 143943 text/css 18.7312ms
2024-11-10 19:56:32.538 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-11-10 19:56:32.540 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 28.1944ms
2024-11-10 19:56:32.560 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-11-10 19:56:32.561 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 49.4474ms
2024-11-10 19:56:32.818 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-11-10 19:56:32.821 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 2.7885ms
2024-11-10 19:56:32.822 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-11-10 19:56:32.843 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.6751ms
2024-11-10 19:56:32.938 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/favicon-32x32.png - null null
2024-11-10 19:56:32.940 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-11-10 19:56:32.941 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/favicon-32x32.png - 200 628 image/png 3.6189ms
2024-11-10 19:56:33.096 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-11-10 19:56:33.135 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 39.3401ms
2024-11-10 19:57:13.095 +07:00 [DBG] Connection id "0HN8198R1VNQA" received FIN.
2024-11-10 19:57:13.098 +07:00 [DBG] Connection id "0HN8198R1VNQA" is closed. The last processed stream ID was 15.
2024-11-10 19:57:13.099 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQA completed.
2024-11-10 19:57:13.105 +07:00 [DBG] Connection id "0HN8198R1VNQA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 19:57:13.112 +07:00 [DBG] Connection id "0HN8198R1VNQA" stopped.
2024-11-10 20:00:18.719 +07:00 [DBG] Connection id "0HN8198R1VNQB" accepted.
2024-11-10 20:00:18.723 +07:00 [DBG] Connection id "0HN8198R1VNQB" started.
2024-11-10 20:00:18.728 +07:00 [DBG] Connection 0HN8198R1VNQB established using the following protocol: "Tls13"
2024-11-10 20:00:18.734 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:00:18.740 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:00:18.740 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:00:18.742 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:00:18.744 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:00:18.746 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:00:18.750 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:18.752 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:00:18.753 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:18.757 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:00:18.759 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:00:18.760 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:00:18.761 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:00:18.763 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:00:18.764 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:00:18.765 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:00:18.770 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:00:18.771 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:00:18.772 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:00:18.773 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:00:18.774 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:00:18.774 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:00:18.775 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:00:18.776 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:00:18.777 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:00:18.777 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:00:18.778 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:18.779 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:18.780 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:18.780 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:00:18.781 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:18.782 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:00:18.783 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:00:18.784 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:18.785 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:18.786 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:00:18.787 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:18.787 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:00:18.788 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:00:18.789 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:18.790 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:18.791 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:00:18.791 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:18.799 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:00:18.806 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:00:18.808 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-10 20:00:18.809 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:18.875 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:18.876 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:00:18.877 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:00:18.879 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-10 20:00:18.880 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:00:18.902 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:00:18.904 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:18.904 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:00:18.905 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:18.906 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:00:18.908 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:00:18.909 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:00:18.909 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:00:18.910 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:00:18.910 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:00:18.911 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:00:18.914 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 149.7819ms
2024-11-10 20:00:18.915 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:18.916 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:00:18.916 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:18.917 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:00:18.918 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 184.0783ms
2024-11-10 20:00:28.666 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:00:28.668 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:00:28.669 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:00:28.670 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:00:28.670 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:00:28.671 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:00:28.671 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:28.672 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:00:28.673 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:28.673 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:00:28.675 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:00:28.676 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:00:28.677 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:00:28.678 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:00:28.679 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:00:28.679 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:00:28.680 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:00:28.681 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:00:28.682 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:00:28.683 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:00:28.683 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:00:28.684 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:00:28.685 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:00:28.685 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:00:28.686 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:00:28.686 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:00:28.687 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:28.687 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:28.688 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:28.689 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:00:28.690 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:28.691 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:00:28.692 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:00:28.692 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:28.693 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:28.694 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:00:28.694 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:28.695 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:00:28.695 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:00:28.696 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:28.697 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:28.698 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:00:28.698 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:28.699 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:00:28.701 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:00:28.702 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:00:28.702 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:28.703 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:28.704 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:00:28.705 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:00:28.705 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:00:28.706 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:00:28.710 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:00:28.712 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:28.712 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:00:28.713 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:28.714 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:00:28.715 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:00:28.716 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:00:28.717 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:00:28.717 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:00:28.718 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:00:28.718 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:00:28.720 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.4897ms
2024-11-10 20:00:28.721 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:28.722 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:00:28.723 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:28.723 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:00:28.724 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 58.1448ms
2024-11-10 20:00:44.993 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:00:44.995 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:00:44.996 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:00:44.998 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:00:44.999 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:00:44.999 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:00:45.001 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:45.003 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:00:45.004 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:45.005 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:00:45.006 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:00:45.006 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:00:45.008 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:00:45.010 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:00:45.011 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:00:45.012 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:00:45.013 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:00:45.014 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:00:45.015 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:00:45.015 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:00:45.016 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:00:45.016 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:00:45.017 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:00:45.018 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:00:45.019 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:00:45.020 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:00:45.021 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:45.022 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:45.022 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:45.023 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:00:45.024 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:45.024 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:00:45.025 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:00:45.026 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:45.026 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:45.027 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:00:45.027 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:45.028 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:00:45.029 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:00:45.029 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:45.030 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:45.031 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:00:45.031 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:45.034 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:00:45.036 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:00:45.037 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:00:45.038 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:45.039 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:45.040 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:00:45.040 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:00:45.041 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:00:45.042 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:00:45.051 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:00:45.053 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:45.054 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:00:45.054 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:45.055 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:00:45.056 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:00:45.057 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:00:45.058 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:00:45.058 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:00:45.059 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:00:45.059 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:00:45.060 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 48.524ms
2024-11-10 20:00:45.061 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:45.062 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:00:45.062 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:45.063 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:00:45.064 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 71.5788ms
2024-11-10 20:00:48.138 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:00:48.139 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:00:48.140 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:00:48.140 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:00:48.141 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:00:48.142 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:00:48.143 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:48.143 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:00:48.144 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:48.144 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:00:48.145 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:00:48.146 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:00:48.146 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:00:48.147 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:00:48.148 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:00:48.149 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:00:48.149 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:00:48.150 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:00:48.150 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:00:48.151 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:00:48.152 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:00:48.152 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:00:48.153 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:00:48.154 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:00:48.154 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:00:48.155 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:00:48.156 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:48.156 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:48.157 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:48.157 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:00:48.158 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:48.158 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:00:48.159 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:00:48.160 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:48.160 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:48.161 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:00:48.162 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:48.162 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:00:48.163 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:00:48.164 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:48.164 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:48.165 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:00:48.166 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:48.167 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:00:48.168 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:00:48.169 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:00:48.170 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:48.170 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:48.171 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:00:48.171 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:00:48.172 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:00:48.173 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:00:48.174 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:00:48.176 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:48.176 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:00:48.177 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:48.178 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:00:48.179 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:00:48.180 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:00:48.180 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:00:48.181 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:00:48.181 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:00:48.182 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:00:48.183 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.229ms
2024-11-10 20:00:48.184 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:48.184 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:00:48.185 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:48.186 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:00:48.186 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 49.0227ms
2024-11-10 20:00:53.117 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:00:53.119 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:00:53.119 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:00:53.120 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:00:53.120 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:00:53.121 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:00:53.122 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:53.122 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:00:53.123 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:53.123 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:00:53.124 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:00:53.124 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:00:53.125 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:00:53.127 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:00:53.127 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:00:53.128 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:00:53.129 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:00:53.130 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:00:53.130 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:00:53.131 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:00:53.131 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:00:53.132 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:00:53.133 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:00:53.133 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:00:53.134 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:00:53.134 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:00:53.135 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:53.136 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:53.136 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:53.137 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:00:53.137 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:00:53.138 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:00:53.138 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:00:53.138 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:53.139 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:53.140 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:00:53.141 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:00:53.141 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:00:53.142 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:00:53.142 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:53.143 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:53.143 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:00:53.144 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:00:53.145 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:00:53.147 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:00:53.147 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:00:53.148 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:53.149 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:53.150 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:00:53.150 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:00:53.151 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:00:53.151 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:00:53.154 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:00:53.155 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:53.156 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:00:53.157 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:53.157 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:00:53.158 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:00:53.159 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:00:53.160 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:00:53.160 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:00:53.161 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:00:53.161 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:00:53.163 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.504ms
2024-11-10 20:00:53.164 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:00:53.164 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:00:53.165 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:00:53.166 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:00:53.166 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 49.8432ms
2024-11-10 20:01:08.390 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:01:08.392 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:01:08.392 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:01:08.393 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:01:08.393 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:01:08.394 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:01:08.395 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:08.395 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:01:08.396 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:08.397 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:01:08.398 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:01:08.399 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:01:08.399 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:01:08.400 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:01:08.401 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:01:08.402 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:01:08.403 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:01:08.404 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:01:08.404 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:01:08.405 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:01:08.406 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:01:08.406 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:01:08.407 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:01:08.407 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:01:08.408 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:01:08.408 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:01:08.409 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:08.410 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:08.410 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:08.411 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:01:08.411 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:08.412 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:01:08.413 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:01:08.413 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:08.414 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:08.414 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:01:08.415 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:08.415 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:01:08.416 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:01:08.417 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:08.417 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:08.418 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:01:08.419 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:08.420 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:01:08.421 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:01:08.422 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:01:08.422 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:08.423 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:08.423 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:01:08.424 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:01:08.425 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:01:08.425 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:01:08.427 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:01:08.428 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:08.429 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:01:08.429 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:08.430 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:01:08.431 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:01:08.432 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:01:08.433 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:01:08.433 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:01:08.434 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:01:08.434 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:01:08.435 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.4295ms
2024-11-10 20:01:08.436 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:08.437 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:01:08.437 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:08.438 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:01:08.439 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 48.6665ms
2024-11-10 20:01:15.478 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:01:15.480 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:01:15.480 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:01:15.481 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:01:15.482 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:01:15.482 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:01:15.484 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:15.484 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:01:15.485 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:15.486 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:01:15.487 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:01:15.488 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:01:15.489 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:01:15.490 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:01:15.490 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:01:15.491 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:01:15.492 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:01:15.493 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:01:15.494 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:01:15.495 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:01:15.496 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:01:15.496 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:01:15.497 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:01:15.497 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:01:15.498 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:01:15.498 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:01:15.499 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:15.500 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:15.500 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:15.501 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:01:15.502 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:15.502 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:01:15.503 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:01:15.504 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:15.504 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:15.505 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:01:15.505 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:15.506 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:01:15.506 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:01:15.507 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:15.508 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:15.509 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:01:15.510 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:15.511 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:01:15.513 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:01:15.514 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:01:15.515 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:15.516 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:15.517 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:01:15.518 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:01:15.518 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:01:15.519 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:01:15.521 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:01:15.523 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:15.524 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:01:15.524 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:15.525 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:01:15.525 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:01:15.527 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:01:15.527 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:01:15.527 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:01:15.528 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:01:15.528 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:01:15.529 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.2958ms
2024-11-10 20:01:15.530 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:15.531 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:01:15.532 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:15.533 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:01:15.533 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 55.5672ms
2024-11-10 20:01:32.685 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:01:32.686 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:01:32.687 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:01:32.687 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:01:32.689 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:01:32.689 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:01:32.690 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:32.691 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:01:32.691 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:32.692 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:01:32.693 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:01:32.693 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:01:32.694 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:01:32.695 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:01:32.696 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:01:32.697 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:01:32.697 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:01:32.698 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:01:32.699 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:01:32.699 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:01:32.700 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:01:32.700 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:01:32.701 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:01:32.702 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:01:32.702 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:01:32.703 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:01:32.704 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:32.704 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:32.705 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:32.705 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:01:32.706 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:32.706 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:01:32.707 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:01:32.708 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:32.708 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:32.709 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:01:32.710 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:32.710 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:01:32.711 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:01:32.711 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:32.712 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:32.712 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:01:32.713 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:32.714 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:01:32.716 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:01:32.716 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:01:32.717 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:32.717 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:32.718 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:01:32.718 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:01:32.719 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:01:32.719 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:01:32.721 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:01:32.722 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:32.723 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:01:32.724 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:32.725 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:01:32.725 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:01:32.727 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:01:32.727 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:01:32.728 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:01:32.728 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:01:32.729 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:01:32.730 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.0389ms
2024-11-10 20:01:32.730 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:32.731 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:01:32.732 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:32.733 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:01:32.734 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 49.0683ms
2024-11-10 20:01:38.443 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:01:38.446 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:01:38.447 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:01:38.448 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:01:38.449 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:01:38.450 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:01:38.451 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:38.452 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:01:38.453 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:38.453 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:01:38.454 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:01:38.455 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:01:38.456 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:01:38.458 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:01:38.459 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:01:38.460 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:01:38.462 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:01:38.462 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:01:38.463 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:01:38.464 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:01:38.465 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:01:38.466 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:01:38.467 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:01:38.467 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:01:38.468 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:01:38.469 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:01:38.470 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:38.471 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:38.472 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:38.472 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:01:38.473 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:38.474 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:01:38.475 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:01:38.476 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:38.476 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:38.477 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:01:38.478 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:38.479 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:01:38.480 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:01:38.481 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:38.482 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:38.483 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:01:38.483 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:38.484 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:01:38.486 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:01:38.487 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:01:38.488 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:38.489 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:38.489 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:01:38.490 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:01:38.491 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:01:38.491 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:01:38.497 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:01:38.499 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:38.500 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:01:38.500 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:38.501 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:01:38.503 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:01:38.504 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:01:38.505 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:01:38.505 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:01:38.505 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:01:38.506 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:01:38.507 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.5965ms
2024-11-10 20:01:38.508 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:38.509 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:01:38.510 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:38.511 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:01:38.512 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 68.5632ms
2024-11-10 20:01:40.715 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:01:40.716 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:01:40.717 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:01:40.718 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:01:40.719 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:01:40.719 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:01:40.720 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:40.721 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:01:40.722 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:40.722 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:01:40.723 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:01:40.724 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:01:40.725 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:01:40.726 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:01:40.727 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:01:40.728 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:01:40.729 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:01:40.730 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:01:40.731 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:01:40.732 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:01:40.734 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:01:40.734 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:01:40.736 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:01:40.736 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:01:40.737 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:01:40.738 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:01:40.738 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:40.739 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:40.740 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:40.741 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:01:40.741 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:01:40.742 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:01:40.743 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:01:40.744 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:40.745 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:40.745 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:01:40.746 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:01:40.747 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:01:40.747 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:01:40.748 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:40.750 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:40.751 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:01:40.751 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:01:40.753 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:01:40.755 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:01:40.756 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-10 20:01:40.757 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:40.758 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:40.759 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:01:40.760 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:01:40.761 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:01:40.761 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:01:40.770 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:01:40.772 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:40.773 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:01:40.775 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:40.776 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:01:40.777 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:01:40.778 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:01:40.779 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:01:40.780 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:01:40.780 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:01:40.781 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:01:40.786 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 57.2145ms
2024-11-10 20:01:40.790 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:01:40.791 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:01:40.791 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:01:40.792 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:01:40.793 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 78.4658ms
2024-11-10 20:02:00.294 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:02:00.296 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:02:00.296 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:02:00.297 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:02:00.298 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:02:00.299 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:02:00.300 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:00.301 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:02:00.302 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:00.303 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:02:00.303 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:02:00.305 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:02:00.305 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:00.307 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:02:00.307 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:00.309 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:00.310 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:00.311 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:02:00.312 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:00.313 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:02:00.314 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:00.315 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:00.315 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:02:00.316 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:02:00.317 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:00.317 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:00.318 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:00.319 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:00.319 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:00.320 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:00.321 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:00.322 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:00.322 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:02:00.323 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:00.324 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:00.324 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:00.325 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:00.326 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:00.326 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:02:00.327 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:00.328 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:00.328 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:00.329 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:00.330 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:02:00.331 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:02:00.331 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:02:00.332 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:00.333 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:00.333 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:02:00.334 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:02:00.335 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:02:00.335 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:02:00.342 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:02:00.343 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:00.344 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:02:00.345 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:00.346 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:02:00.347 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:02:00.348 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:02:00.349 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:02:00.349 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:02:00.350 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:02:00.350 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:02:00.352 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.4177ms
2024-11-10 20:02:00.354 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:00.355 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:02:00.355 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:00.356 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:02:00.357 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 63.9185ms
2024-11-10 20:02:03.845 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:02:03.847 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:02:03.848 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:02:03.849 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:02:03.849 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:02:03.850 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:02:03.850 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:03.851 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:02:03.851 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:03.852 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:02:03.853 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:02:03.854 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:02:03.854 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:03.856 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:02:03.856 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:03.857 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:03.858 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:03.859 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:02:03.860 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:03.861 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:02:03.862 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:03.863 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:03.864 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:02:03.865 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:02:03.866 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:03.867 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:03.867 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:03.868 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:03.869 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:03.870 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:03.870 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:03.871 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:03.872 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:02:03.872 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:03.873 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:03.874 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:03.875 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:03.875 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:03.876 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:02:03.877 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:03.877 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:03.878 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:03.878 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:03.879 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:02:03.882 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:02:03.882 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:02:03.883 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:03.884 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:03.885 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:02:03.885 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:02:03.886 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:02:03.886 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:02:03.892 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:02:03.893 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:03.894 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:02:03.895 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:03.896 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:02:03.897 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:02:03.898 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:02:03.899 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:02:03.899 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:02:03.899 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:02:03.900 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:02:03.901 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.585ms
2024-11-10 20:02:03.902 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:03.902 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:02:03.903 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:03.904 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:02:03.905 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 59.6571ms
2024-11-10 20:02:10.215 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:02:10.216 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:02:10.217 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:02:10.218 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:02:10.218 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:02:10.219 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:02:10.220 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:10.221 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:02:10.222 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:10.223 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:02:10.225 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:02:10.226 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:02:10.226 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:10.227 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:02:10.228 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:10.230 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:10.231 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:10.232 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:02:10.233 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:10.234 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:02:10.235 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:10.236 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:10.236 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:02:10.237 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:02:10.238 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:10.239 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:10.239 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:10.240 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:10.241 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:10.242 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:10.243 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:10.243 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:10.244 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:02:10.245 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:10.246 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:10.247 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:10.248 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:10.250 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:10.251 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:02:10.252 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:10.253 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:10.253 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:10.254 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:10.256 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:02:10.258 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:02:10.260 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-10 20:02:10.261 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:10.263 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:10.264 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:02:10.264 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:02:10.265 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:02:10.265 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:02:10.268 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:02:10.269 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:10.270 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:02:10.271 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:10.272 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:02:10.273 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:02:10.274 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:02:10.274 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:02:10.275 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:02:10.275 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:02:10.275 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:02:10.277 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.4759ms
2024-11-10 20:02:10.278 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:10.279 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:02:10.280 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:10.280 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:02:10.281 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 66.8906ms
2024-11-10 20:02:11.007 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:02:11.009 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:02:11.009 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:02:11.010 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:02:11.010 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:02:11.011 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:02:11.012 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:11.013 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:02:11.013 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:11.015 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:02:11.016 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:02:11.016 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:02:11.017 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:11.018 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:02:11.018 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:11.020 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:11.021 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:11.022 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:02:11.022 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:11.023 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:02:11.024 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:11.024 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:11.025 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:02:11.025 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:02:11.026 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:11.027 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:11.028 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:11.029 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:11.029 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:11.030 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:11.031 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:11.031 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:11.032 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:02:11.032 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:11.033 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:11.034 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:11.034 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:11.035 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:11.036 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:02:11.036 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:11.037 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:11.037 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:11.038 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:11.039 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:02:11.040 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:02:11.041 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:02:11.041 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:11.042 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:11.043 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:02:11.044 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:02:11.044 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:02:11.045 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:02:11.046 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:02:11.048 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:11.048 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:02:11.049 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:11.050 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:02:11.050 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:02:11.052 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:02:11.052 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:02:11.052 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:02:11.053 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:02:11.053 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:02:11.055 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.1969ms
2024-11-10 20:02:11.056 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:11.057 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:02:11.057 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:11.058 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:02:11.058 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 51.7039ms
2024-11-10 20:02:23.980 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:02:23.983 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:02:23.986 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:02:23.988 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:02:23.989 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:02:23.989 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:02:23.990 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:23.993 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:02:23.993 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:23.994 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:02:23.997 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:02:23.999 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:02:24.000 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:24.002 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:02:24.004 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:24.006 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:24.007 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:24.008 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:02:24.009 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:24.010 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:02:24.011 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:24.012 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:24.013 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:02:24.014 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:02:24.014 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:24.015 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:24.016 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:24.017 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:24.017 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:24.018 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:24.018 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:24.019 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:24.020 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:02:24.021 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:24.022 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:24.022 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:24.023 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:24.024 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:24.024 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:02:24.025 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:24.026 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:24.027 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:24.027 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:24.029 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:02:24.030 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:02:24.030 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:02:24.031 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:24.032 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:24.032 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:02:24.033 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:02:24.034 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:02:24.034 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:02:24.036 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:02:24.037 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:24.038 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:02:24.038 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:24.039 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:02:24.040 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:02:24.041 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:02:24.042 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:02:24.042 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:02:24.043 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:02:24.043 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:02:24.045 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.167ms
2024-11-10 20:02:24.046 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:24.047 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:02:24.047 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:24.048 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:02:24.049 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 69.1044ms
2024-11-10 20:02:30.430 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:02:30.433 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:02:30.433 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:02:30.434 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:02:30.434 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:02:30.435 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:02:30.436 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:30.437 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:02:30.437 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:30.438 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:02:30.438 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:02:30.439 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:02:30.440 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:30.441 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:02:30.441 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:30.442 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:30.443 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:30.444 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:02:30.445 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:30.446 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:02:30.446 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:30.447 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:30.447 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:02:30.448 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:02:30.449 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:30.449 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:30.450 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:30.451 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:30.452 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:30.452 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:30.453 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:30.453 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:30.454 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:02:30.454 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:30.455 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:30.455 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:30.456 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:30.457 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:30.457 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:02:30.458 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:30.459 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:30.459 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:30.460 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:30.461 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:02:30.462 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:02:30.463 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:02:30.463 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:30.464 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:30.465 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:02:30.465 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:02:30.466 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:02:30.466 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:02:30.468 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:02:30.469 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:30.469 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:02:30.470 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:30.471 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:02:30.472 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:02:30.473 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:02:30.473 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:02:30.474 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:02:30.474 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:02:30.475 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:02:30.476 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.6584ms
2024-11-10 20:02:30.477 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:30.478 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:02:30.479 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:30.480 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:02:30.480 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 50.6275ms
2024-11-10 20:02:46.829 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:02:46.830 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:02:46.832 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:02:46.832 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:02:46.833 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:02:46.833 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:02:46.834 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:46.835 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:02:46.836 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:46.836 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:02:46.837 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:02:46.838 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:02:46.839 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:46.840 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:02:46.841 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:02:46.842 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:46.843 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:02:46.844 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:02:46.845 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:46.845 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:02:46.846 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:46.847 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:02:46.848 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:02:46.849 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:02:46.850 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:46.850 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:02:46.851 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:46.852 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:46.853 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:46.853 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:02:46.854 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:02:46.855 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:46.856 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:02:46.856 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:46.857 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:46.858 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:02:46.858 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:02:46.859 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:46.860 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:02:46.860 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:46.861 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:46.862 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:02:46.862 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:02:46.863 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:02:46.864 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:02:46.865 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:02:46.865 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:46.866 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:46.867 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:02:46.867 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:02:46.868 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:02:46.869 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:02:46.874 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:02:46.875 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:46.876 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:02:46.877 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:46.878 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:02:46.879 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:02:46.880 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:02:46.880 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:02:46.881 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:02:46.882 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:02:46.882 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:02:46.884 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.8174ms
2024-11-10 20:02:46.885 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:02:46.886 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:02:46.887 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:02:46.887 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:02:46.888 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 59.2012ms
2024-11-10 20:03:00.932 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:03:00.933 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:03:00.934 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:03:00.934 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:03:00.935 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:03:00.935 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:03:00.936 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:03:00.937 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:03:00.937 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:03:00.938 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:03:00.938 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:03:00.939 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:03:00.939 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:03:00.940 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:03:00.941 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:03:00.942 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:03:00.943 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:03:00.944 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:03:00.944 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:03:00.945 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:03:00.945 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:03:00.946 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:03:00.946 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:03:00.947 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:03:00.947 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:03:00.948 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:03:00.949 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:03:00.950 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:03:00.950 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:03:00.951 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:03:00.951 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:03:00.952 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:03:00.952 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:03:00.953 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:03:00.953 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:03:00.954 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:03:00.954 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:03:00.955 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:03:00.956 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:03:00.956 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:03:00.957 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:03:00.958 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:03:00.958 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:03:00.959 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:03:00.960 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:03:00.960 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:03:00.961 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:03:00.962 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:03:00.962 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:03:00.963 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:03:00.963 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:03:00.964 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:03:00.968 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:03:00.969 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:03:00.970 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:03:00.971 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:03:00.971 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:03:00.972 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:03:00.973 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:03:00.973 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:03:00.974 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:03:00.974 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:03:00.975 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:03:00.976 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.1001ms
2024-11-10 20:03:00.977 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:03:00.978 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:03:00.979 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:03:00.979 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:03:00.980 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 48.4395ms
2024-11-10 20:03:07.330 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:03:07.332 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:03:07.332 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:03:07.333 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:03:07.333 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:03:07.334 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:03:07.335 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:03:07.335 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:03:07.336 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:03:07.336 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:03:07.337 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:03:07.338 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:03:07.339 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:03:07.341 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:03:07.341 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:03:07.342 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:03:07.343 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:03:07.343 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:03:07.344 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:03:07.345 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:03:07.346 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:03:07.347 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:03:07.347 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:03:07.348 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:03:07.348 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:03:07.349 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:03:07.349 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:03:07.350 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:03:07.351 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:03:07.351 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:03:07.352 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:03:07.352 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:03:07.353 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:03:07.354 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:03:07.355 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:03:07.355 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:03:07.356 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:03:07.356 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:03:07.357 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:03:07.358 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:03:07.358 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:03:07.359 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:03:07.360 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:03:07.361 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:03:07.362 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:03:07.362 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:03:07.363 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:03:07.363 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:03:07.364 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:03:07.364 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:03:07.365 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:03:07.366 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:03:07.367 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:03:07.368 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:03:07.369 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:03:07.370 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:03:07.370 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:03:07.371 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:03:07.372 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:03:07.372 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:03:07.373 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:03:07.373 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:03:07.374 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:03:07.375 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.1779ms
2024-11-10 20:03:07.376 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:03:07.377 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:03:07.378 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:03:07.378 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:03:07.379 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 48.8607ms
2024-11-10 20:07:15.558 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:07:15.564 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:07:15.564 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:07:15.565 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:07:15.565 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:07:15.566 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:07:15.567 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:07:15.568 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:07:15.568 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:07:15.569 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:07:15.570 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:07:15.571 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:07:15.571 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:07:15.572 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:07:15.573 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:07:15.574 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:07:15.575 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:07:15.575 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:07:15.576 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:07:15.577 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:07:15.578 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:07:15.578 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:07:15.579 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:07:15.579 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:07:15.580 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:07:15.581 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:07:15.582 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:07:15.583 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:07:15.584 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:07:15.584 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:07:15.585 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:07:15.586 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:07:15.586 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:07:15.587 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:07:15.588 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:07:15.588 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:07:15.589 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:07:15.589 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:07:15.590 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:07:15.591 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:07:15.591 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:07:15.592 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:07:15.592 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:07:15.594 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:07:15.595 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:07:15.595 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:07:15.596 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:15.633 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:15.634 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:07:15.634 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:07:15.634 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:07:15.635 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:07:15.648 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:07:15.649 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:15.651 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:07:15.652 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:15.652 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:07:15.654 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:07:15.655 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:07:15.656 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:07:15.656 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:07:15.657 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:07:15.658 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:07:15.660 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 86.4549ms
2024-11-10 20:07:15.665 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:07:15.666 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:07:15.667 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:15.669 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:07:15.670 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 112.3287ms
2024-11-10 20:07:36.490 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:07:36.495 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:07:36.496 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:07:36.496 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:07:36.497 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:07:36.498 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:07:36.499 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:07:36.499 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:07:36.500 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:07:36.501 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:07:36.501 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:07:36.502 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:07:36.502 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:07:36.503 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:07:36.504 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:07:36.505 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:07:36.506 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:07:36.507 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:07:36.508 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:07:36.508 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:07:36.509 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:07:36.509 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:07:36.510 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:07:36.511 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:07:36.511 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:07:36.512 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:07:36.513 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:07:36.514 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:07:36.514 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:07:36.515 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:07:36.515 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:07:36.516 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:07:36.517 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:07:36.517 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:07:36.518 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:07:36.519 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:07:36.520 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:07:36.520 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:07:36.521 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:07:36.522 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:07:36.522 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:07:36.523 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:07:36.524 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:07:36.525 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:07:36.527 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:07:36.527 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:07:36.528 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:36.529 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:36.530 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:07:36.530 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:07:36.531 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:07:36.532 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:07:36.537 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:07:36.538 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:36.539 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:07:36.540 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:36.541 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:07:36.542 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:07:36.543 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:07:36.543 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:07:36.544 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:07:36.544 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:07:36.545 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:07:36.547 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.2109ms
2024-11-10 20:07:36.551 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:07:36.552 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:07:36.553 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:36.554 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:07:36.555 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 65.5698ms
2024-11-10 20:07:43.402 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:07:43.404 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:07:43.404 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:07:43.405 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:07:43.405 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:07:43.406 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:07:43.407 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:07:43.407 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:07:43.408 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:07:43.409 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:07:43.409 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:07:43.410 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:07:43.411 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:07:43.411 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:07:43.412 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:07:43.413 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:07:43.414 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:07:43.415 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:07:43.416 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:07:43.417 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:07:43.418 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:07:43.419 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:07:43.420 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:07:43.421 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:07:43.422 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:07:43.423 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:07:43.424 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:07:43.425 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:07:43.426 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:07:43.426 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:07:43.427 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:07:43.428 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:07:43.429 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:07:43.430 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:07:43.431 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:07:43.432 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:07:43.433 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:07:43.434 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:07:43.434 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:07:43.435 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:07:43.436 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:07:43.437 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:07:43.437 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:07:43.439 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:07:43.441 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:07:43.442 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:07:43.442 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:43.443 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:43.444 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:07:43.445 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:07:43.446 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:07:43.447 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:07:43.456 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:07:43.458 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:43.458 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:07:43.459 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:43.460 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:07:43.461 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:07:43.463 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:07:43.463 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:07:43.464 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:07:43.464 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:07:43.465 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:07:43.468 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 54.4142ms
2024-11-10 20:07:43.469 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:07:43.470 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:07:43.471 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:07:43.472 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:07:43.473 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 70.8232ms
2024-11-10 20:08:25.981 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:08:25.987 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:08:25.988 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:08:25.988 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:08:25.989 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:08:25.989 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:08:25.990 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:08:25.991 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:08:25.991 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:08:25.992 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:08:25.993 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:08:25.994 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:08:25.994 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:08:25.996 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:08:25.997 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:08:25.998 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:08:25.999 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:08:26.000 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:08:26.001 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:08:26.002 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:08:26.003 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:08:26.004 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:08:26.005 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:08:26.005 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:08:26.006 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:08:26.007 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:08:26.007 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:26.008 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:26.009 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:26.010 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:08:26.010 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:26.011 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:08:26.012 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:08:26.013 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:08:26.013 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:08:26.014 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:08:26.014 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:08:26.015 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:08:26.016 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:08:26.017 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:08:26.018 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:08:26.019 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:08:26.019 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:08:26.020 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:08:26.022 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:08:26.022 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:08:26.022 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:26.023 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:26.024 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:08:26.024 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:08:26.025 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:08:26.026 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:08:26.030 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:08:26.031 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:26.032 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:08:26.033 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:26.033 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:08:26.034 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:08:26.035 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:08:26.035 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:08:26.035 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:08:26.036 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:08:26.036 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:08:26.038 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.0521ms
2024-11-10 20:08:26.040 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:08:26.044 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:08:26.044 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:26.045 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:08:26.046 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 65.2245ms
2024-11-10 20:08:57.736 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:08:57.741 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:08:57.741 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:08:57.742 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:08:57.742 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:08:57.743 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:08:57.743 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:08:57.744 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:08:57.745 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:08:57.745 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:08:57.746 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:08:57.747 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:08:57.747 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:08:57.748 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:08:57.749 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:08:57.750 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:08:57.750 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:08:57.751 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:08:57.752 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:08:57.752 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:08:57.753 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:08:57.753 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:08:57.754 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:08:57.754 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:08:57.755 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:08:57.755 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:08:57.756 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:57.757 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:57.757 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:57.758 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:08:57.758 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:57.759 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:08:57.759 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:08:57.760 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:08:57.761 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:08:57.761 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:08:57.762 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:08:57.762 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:08:57.763 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:08:57.763 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:08:57.764 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:08:57.764 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:08:57.765 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:08:57.766 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:08:57.767 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:08:57.767 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:08:57.768 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:57.768 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:57.769 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:08:57.769 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:08:57.770 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:08:57.770 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:08:57.775 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:08:57.776 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:57.777 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:08:57.777 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:57.778 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:08:57.779 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:08:57.780 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:08:57.780 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:08:57.780 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:08:57.781 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:08:57.781 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:08:57.783 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.5727ms
2024-11-10 20:08:57.787 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:08:57.788 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:08:57.788 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:57.789 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:08:57.790 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 53.4525ms
2024-11-10 20:08:58.756 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:08:58.758 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:08:58.759 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:08:58.760 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:08:58.761 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:08:58.762 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:08:58.763 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:08:58.764 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:08:58.764 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:08:58.766 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:08:58.767 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:08:58.768 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:08:58.769 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:08:58.770 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:08:58.772 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:08:58.776 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:08:58.778 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:08:58.779 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:08:58.783 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:08:58.785 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:08:58.788 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:08:58.788 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:08:58.789 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:08:58.790 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:08:58.791 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:08:58.792 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:08:58.794 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:58.795 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:58.796 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:58.797 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:08:58.798 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:58.799 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:08:58.800 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:08:58.802 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:08:58.802 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:08:58.803 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:08:58.804 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:08:58.804 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:08:58.805 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:08:58.806 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:08:58.806 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:08:58.807 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:08:58.808 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:08:58.809 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:08:58.811 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:08:58.812 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:08:58.812 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:58.813 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:58.814 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:08:58.815 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:08:58.816 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:08:58.817 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:08:58.824 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:08:58.825 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:58.826 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:08:58.827 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:58.827 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:08:58.828 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:08:58.830 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:08:58.830 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:08:58.830 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:08:58.831 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:08:58.831 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:08:58.832 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 56.1958ms
2024-11-10 20:08:58.833 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:08:58.833 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:08:58.834 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:58.834 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:08:58.836 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 79.3205ms
2024-11-10 20:08:59.903 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:08:59.904 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:08:59.905 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:08:59.905 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:08:59.906 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:08:59.906 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:08:59.907 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:08:59.908 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:08:59.908 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:08:59.909 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:08:59.910 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:08:59.910 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:08:59.911 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:08:59.912 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:08:59.912 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:08:59.913 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:08:59.914 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:08:59.915 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:08:59.915 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:08:59.916 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:08:59.917 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:08:59.917 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:08:59.918 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:08:59.919 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:08:59.919 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:08:59.920 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:08:59.920 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:59.921 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:59.922 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:59.922 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:08:59.922 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:08:59.923 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:08:59.923 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:08:59.924 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:08:59.925 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:08:59.925 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:08:59.926 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:08:59.926 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:08:59.927 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:08:59.927 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:08:59.928 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:08:59.928 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:08:59.929 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:08:59.930 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:08:59.931 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:08:59.931 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:08:59.932 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:59.933 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:59.933 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:08:59.934 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:08:59.935 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:08:59.935 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:08:59.940 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:08:59.941 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:59.942 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:08:59.943 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:59.943 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:08:59.944 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:08:59.945 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:08:59.946 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:08:59.946 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:08:59.947 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:08:59.947 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:08:59.949 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.4895ms
2024-11-10 20:08:59.950 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:08:59.950 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:08:59.951 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:08:59.951 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:08:59.952 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 49.3346ms
2024-11-10 20:09:01.170 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:01.172 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:01.173 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:01.174 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:01.175 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:01.176 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:01.177 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:01.177 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:01.178 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:01.179 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:01.180 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:01.180 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:01.181 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:01.182 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:01.183 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:01.184 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:01.185 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:01.185 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:01.186 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:01.187 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:01.188 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:01.188 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:01.190 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:01.191 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:01.191 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:01.192 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:01.193 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:01.193 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:01.194 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:01.195 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:01.195 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:01.196 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:01.197 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:01.197 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:01.198 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:01.199 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:01.200 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:01.200 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:01.201 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:01.201 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:01.202 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:01.203 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:01.203 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:01.205 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:01.206 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:01.207 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:01.207 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:01.208 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:01.208 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:01.209 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:01.210 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:01.210 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:01.215 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:01.217 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:01.217 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:01.218 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:01.219 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:01.220 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:01.221 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:01.222 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:01.222 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:01.223 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:01.223 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:01.224 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.3071ms
2024-11-10 20:09:01.225 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:01.226 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:01.226 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:01.227 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:01.228 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 57.6926ms
2024-11-10 20:09:02.118 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:02.120 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:02.120 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:02.121 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:02.121 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:02.122 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:02.123 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:02.123 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:02.123 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:02.124 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:02.125 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:02.125 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:02.126 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:02.127 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:02.128 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:02.129 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:02.130 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:02.131 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:02.131 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:02.132 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:02.132 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:02.133 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:02.134 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:02.134 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:02.135 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:02.135 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:02.136 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:02.137 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:02.137 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:02.138 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:02.138 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:02.139 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:02.139 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:02.140 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:02.141 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:02.141 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:02.142 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:02.142 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:02.143 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:02.144 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:02.144 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:02.145 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:02.145 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:02.147 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:02.148 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:02.148 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:02.149 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:02.149 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:02.150 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:02.151 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:02.151 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:02.152 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:02.156 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:02.157 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:02.158 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:02.158 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:02.159 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:02.160 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:02.161 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:02.161 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:02.162 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:02.162 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:02.163 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:02.165 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.5647ms
2024-11-10 20:09:02.165 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:02.166 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:02.166 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:02.167 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:02.168 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 49.7512ms
2024-11-10 20:09:02.684 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:02.686 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:02.686 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:02.687 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:02.687 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:02.688 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:02.689 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:02.690 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:02.690 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:02.691 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:02.692 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:02.693 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:02.694 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:02.695 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:02.695 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:02.697 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:02.698 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:02.699 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:02.699 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:02.700 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:02.701 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:02.701 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:02.702 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:02.702 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:02.703 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:02.703 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:02.704 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:02.705 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:02.706 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:02.706 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:02.707 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:02.707 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:02.708 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:02.709 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:02.709 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:02.710 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:02.710 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:02.711 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:02.712 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:02.712 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:02.713 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:02.714 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:02.714 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:02.715 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:02.717 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:02.717 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:02.718 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:02.719 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:02.719 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:02.720 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:02.720 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:02.721 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:02.725 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:02.726 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:02.727 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:02.728 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:02.728 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:02.729 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:02.730 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:02.730 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:02.731 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:02.731 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:02.732 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:02.733 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.043ms
2024-11-10 20:09:02.733 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:02.734 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:02.734 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:02.735 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:02.735 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 51.7101ms
2024-11-10 20:09:03.094 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:03.097 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:03.097 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:03.098 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:03.099 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:03.100 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:03.101 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:03.102 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:03.103 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:03.104 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:03.105 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:03.105 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:03.106 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:03.107 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:03.108 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:03.109 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:03.109 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:03.110 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:03.110 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:03.111 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:03.112 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:03.112 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:03.113 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:03.114 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:03.115 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:03.115 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:03.116 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:03.117 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:03.118 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:03.118 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:03.119 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:03.120 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:03.120 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:03.121 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:03.122 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:03.122 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:03.123 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:03.124 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:03.125 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:03.125 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:03.126 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:03.127 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:03.128 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:03.129 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:03.130 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:03.130 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:03.131 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.132 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.132 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:03.133 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:03.133 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:03.134 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:03.139 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:03.140 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.141 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:03.142 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.143 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:03.143 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:03.144 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:03.145 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:03.145 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:03.146 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:03.147 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:03.148 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.7046ms
2024-11-10 20:09:03.150 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:03.151 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:03.151 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.152 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:03.153 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 58.7171ms
2024-11-10 20:09:03.446 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:03.448 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:03.449 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:03.449 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:03.450 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:03.450 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:03.451 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:03.452 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:03.452 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:03.453 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:03.454 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:03.455 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:03.456 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:03.457 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:03.458 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:03.459 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:03.460 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:03.461 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:03.462 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:03.463 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:03.463 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:03.464 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:03.465 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:03.466 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:03.466 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:03.467 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:03.468 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:03.469 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:03.469 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:03.470 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:03.470 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:03.471 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:03.471 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:03.472 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:03.473 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:03.473 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:03.474 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:03.474 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:03.475 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:03.476 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:03.476 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:03.477 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:03.477 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:03.478 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:03.479 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:03.480 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:03.480 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.481 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.482 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:03.482 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:03.483 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:03.483 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:03.488 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:03.489 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.490 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:03.491 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.492 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:03.493 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:03.493 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:03.494 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:03.494 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:03.495 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:03.495 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:03.496 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.2131ms
2024-11-10 20:09:03.497 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:03.497 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:03.497 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.498 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:03.498 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 52.286ms
2024-11-10 20:09:03.812 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:03.814 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:03.815 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:03.815 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:03.816 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:03.816 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:03.818 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:03.818 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:03.819 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:03.820 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:03.821 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:03.822 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:03.823 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:03.824 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:03.825 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:03.826 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:03.827 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:03.827 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:03.828 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:03.829 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:03.830 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:03.830 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:03.831 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:03.832 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:03.832 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:03.833 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:03.834 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:03.834 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:03.835 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:03.836 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:03.836 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:03.837 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:03.838 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:03.838 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:03.839 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:03.839 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:03.840 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:03.841 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:03.841 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:03.842 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:03.843 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:03.844 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:03.844 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:03.845 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:03.846 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:03.847 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:03.847 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.848 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.849 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:03.849 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:03.850 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:03.851 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:03.857 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:03.858 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.859 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:03.860 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.861 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:03.861 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:03.863 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:03.864 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:03.864 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:03.865 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:03.865 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:03.867 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.6083ms
2024-11-10 20:09:03.871 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:03.873 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:03.873 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:03.874 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:03.874 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 62.3734ms
2024-11-10 20:09:04.100 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:04.102 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:04.102 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:04.103 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:04.103 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:04.104 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:04.105 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:04.105 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:04.106 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:04.106 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:04.107 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:04.108 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:04.108 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:04.109 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:04.110 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:04.111 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:04.112 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:04.113 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:04.113 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:04.114 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.115 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.115 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.116 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:04.116 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.117 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:04.117 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:04.118 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.118 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.119 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.120 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:04.120 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.121 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:04.121 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:04.122 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:04.122 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:04.123 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:04.123 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:04.124 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:04.125 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:04.125 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:04.126 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:04.126 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:04.127 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:04.128 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:04.129 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:04.130 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:04.130 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.131 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.131 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:04.132 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:04.132 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:04.133 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:04.137 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:04.138 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.139 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:04.140 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.141 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:04.142 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:04.143 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:04.144 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:04.144 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:04.145 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:04.145 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:04.146 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.036ms
2024-11-10 20:09:04.147 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:04.147 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:04.148 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.149 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:04.149 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 49.1047ms
2024-11-10 20:09:04.332 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:04.333 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:04.333 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:04.334 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:04.334 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:04.335 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:04.336 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:04.336 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:04.337 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:04.338 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:04.338 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:04.339 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:04.340 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:04.341 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:04.341 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:04.343 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:04.344 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:04.345 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:04.346 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:04.346 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.347 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.347 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.348 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:04.348 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.349 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:04.350 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:04.351 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.351 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.352 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.352 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:04.353 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.353 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:04.354 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:04.354 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:04.355 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:04.356 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:04.356 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:04.357 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:04.358 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:04.358 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:04.359 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:04.359 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:04.360 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:04.361 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:04.362 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:04.362 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:04.363 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.363 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.364 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:04.364 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:04.365 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:04.366 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:04.370 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:04.371 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.372 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:04.373 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.373 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:04.374 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:04.375 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:04.376 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:04.376 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:04.377 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:04.377 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:04.379 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.0628ms
2024-11-10 20:09:04.380 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:04.380 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:04.381 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.381 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:04.382 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 50.6823ms
2024-11-10 20:09:04.580 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:04.581 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:04.582 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:04.582 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:04.583 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:04.583 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:04.584 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:04.585 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:04.585 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:04.586 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:04.588 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:04.589 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:04.589 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:04.590 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:04.591 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:04.592 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:04.593 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:04.594 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:04.595 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:04.596 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.596 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.597 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.598 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:04.598 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.599 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:04.600 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:04.600 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.601 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.602 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.603 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:04.603 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.604 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:04.605 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:04.606 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:04.607 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:04.607 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:04.608 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:04.609 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:04.609 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:04.610 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:04.611 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:04.612 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:04.612 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:04.614 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:04.616 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:04.617 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:04.618 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.618 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.619 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:04.620 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:04.621 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:04.622 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:04.627 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:04.629 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.629 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:04.630 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.631 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:04.632 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:04.633 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:04.634 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:04.634 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:04.635 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:04.635 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:04.636 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.8597ms
2024-11-10 20:09:04.637 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:04.637 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:04.638 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.638 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:04.639 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 59.2865ms
2024-11-10 20:09:04.799 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:04.800 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:04.801 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:04.801 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:04.802 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:04.802 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:04.803 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:04.803 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:04.804 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:04.804 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:04.805 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:04.806 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:04.807 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:04.809 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:04.810 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:04.811 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:04.811 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:04.812 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:04.813 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:04.814 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.814 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.815 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.816 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:04.817 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:04.817 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:04.818 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:04.819 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.819 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.820 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.821 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:04.821 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:04.822 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:04.823 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:04.824 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:04.825 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:04.825 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:04.826 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:04.827 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:04.827 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:04.828 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:04.829 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:04.829 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:04.830 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:04.832 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:04.833 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:04.833 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:04.834 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.835 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.836 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:04.836 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:04.837 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:04.837 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:04.842 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:04.843 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.844 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:04.844 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.845 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:04.846 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:04.847 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:04.847 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:04.848 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:04.848 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:04.849 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:04.851 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.7763ms
2024-11-10 20:09:04.852 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:04.852 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:04.853 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:04.854 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:04.855 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 56.3807ms
2024-11-10 20:09:05.028 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:05.030 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:05.031 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:05.031 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:05.032 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:05.032 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:05.033 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.034 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:05.034 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.035 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:05.036 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:05.037 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:05.037 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:05.039 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:05.040 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:05.041 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:05.043 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:05.045 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:05.045 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:05.046 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.047 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.048 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.049 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:05.049 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.050 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:05.051 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:05.052 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.052 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.053 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.054 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:05.055 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.056 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:05.057 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:05.058 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.059 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.059 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:05.060 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.061 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:05.061 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:05.062 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.063 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.063 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:05.064 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.065 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:05.066 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:05.066 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:05.067 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.067 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.068 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:05.068 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:05.069 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:05.070 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:05.076 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:05.077 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.077 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:05.078 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.079 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:05.080 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:05.081 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:05.081 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:05.081 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:05.082 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:05.082 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:05.083 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.3197ms
2024-11-10 20:09:05.083 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.084 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:05.084 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.085 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:05.086 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 57.5115ms
2024-11-10 20:09:05.259 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:05.261 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:05.262 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:05.262 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:05.263 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:05.264 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:05.265 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.265 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:05.266 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.267 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:05.268 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:05.269 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:05.270 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:05.271 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:05.272 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:05.273 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:05.274 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:05.275 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:05.276 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:05.277 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.278 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.278 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.279 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:05.280 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.280 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:05.281 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:05.282 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.283 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.283 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.284 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:05.284 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.285 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:05.286 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:05.287 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.287 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.288 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:05.289 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.289 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:05.290 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:05.291 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.291 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.292 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:05.292 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.293 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:05.294 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:05.295 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:05.295 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.296 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.296 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:05.297 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:05.298 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:05.298 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:05.303 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:05.304 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.305 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:05.305 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.306 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:05.307 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:05.308 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:05.308 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:05.309 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:05.309 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:05.310 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:05.311 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.841ms
2024-11-10 20:09:05.312 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.312 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:05.313 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.313 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:05.314 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 54.9541ms
2024-11-10 20:09:05.475 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:05.477 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:05.478 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:05.479 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:05.479 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:05.480 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:05.481 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.482 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:05.482 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.483 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:05.484 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:05.485 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:05.486 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:05.487 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:05.488 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:05.489 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:05.490 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:05.491 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:05.492 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:05.493 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.495 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.495 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.496 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:05.497 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.497 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:05.498 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:05.498 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.499 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.500 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.500 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:05.501 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.501 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:05.502 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:05.503 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.503 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.504 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:05.505 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.506 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:05.506 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:05.507 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.507 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.508 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:05.509 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.510 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:05.511 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:05.511 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:05.512 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.512 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.513 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:05.513 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:05.514 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:05.515 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:05.519 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:05.520 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.521 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:05.522 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.523 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:05.524 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:05.525 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:05.525 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:05.526 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:05.526 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:05.527 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:05.528 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.8835ms
2024-11-10 20:09:05.528 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.529 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:05.530 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.530 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:05.531 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 56.0936ms
2024-11-10 20:09:05.713 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:05.715 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:05.715 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:05.715 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:05.716 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:05.716 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:05.717 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.718 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:05.718 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.719 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:05.719 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:05.720 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:05.720 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:05.721 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:05.722 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:05.723 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:05.723 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:05.724 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:05.724 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:05.725 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.725 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.726 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.727 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:05.728 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.728 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:05.729 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:05.730 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.731 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.732 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.732 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:05.733 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.733 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:05.734 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:05.735 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.735 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.736 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:05.736 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.737 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:05.737 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:05.738 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.738 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.739 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:05.739 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.740 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:05.741 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:05.742 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:05.742 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.743 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.744 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:05.744 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:05.745 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:05.745 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:05.750 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:05.751 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.751 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:05.752 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.753 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:05.753 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:05.754 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:05.754 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:05.755 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:05.755 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:05.756 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:05.757 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.1669ms
2024-11-10 20:09:05.758 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.759 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:05.759 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.760 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:05.761 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 47.8002ms
2024-11-10 20:09:05.962 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:05.964 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:05.965 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:05.965 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:05.966 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:05.967 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:05.968 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.968 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:05.969 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:05.969 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:05.970 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:05.971 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:05.972 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:05.973 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:05.974 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:05.975 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:05.976 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:05.977 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:05.977 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:05.978 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.979 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.979 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.980 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:05.981 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:05.981 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:05.982 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:05.983 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.984 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.984 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.985 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:05.985 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:05.986 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:05.986 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:05.987 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.988 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.988 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:05.989 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:05.990 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:05.990 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:05.991 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.991 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.992 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:05.993 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:05.994 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:05.996 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:05.997 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:05.997 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.998 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:05.999 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:06.000 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:06.001 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:06.001 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:06.007 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:06.009 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.010 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:09:06.011 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.012 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:06.013 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:06.014 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:06.015 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:06.015 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:06.016 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:06.016 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:06.017 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.3706ms
2024-11-10 20:09:06.018 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.019 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:06.019 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.020 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:06.021 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 58.4842ms
2024-11-10 20:09:06.194 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:06.195 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:06.196 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:06.197 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:06.198 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:06.198 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:06.199 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.200 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:06.200 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.201 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:06.202 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:06.203 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:06.203 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:06.205 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:06.205 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:06.206 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:06.207 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:06.207 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:06.208 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:06.208 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.209 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.210 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.210 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:06.211 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.211 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:06.212 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:06.213 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.213 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.214 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.215 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:06.215 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.216 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:06.217 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:06.218 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:06.218 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:06.219 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:06.219 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:06.220 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:06.220 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:06.221 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:06.222 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:06.222 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:06.223 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:06.224 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:06.225 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:06.225 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:06.226 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.226 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.227 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:06.227 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:06.228 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:06.228 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:06.233 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:06.235 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.235 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:06.236 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.236 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:06.237 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:06.238 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:06.239 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:06.239 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:06.239 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:06.240 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:06.241 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.2044ms
2024-11-10 20:09:06.242 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.243 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:06.243 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.244 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:06.244 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 51.0899ms
2024-11-10 20:09:06.421 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:06.423 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:06.423 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:06.424 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:06.424 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:06.425 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:06.426 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.427 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:06.427 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.428 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:06.429 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:06.429 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:06.430 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:06.431 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:06.433 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:06.434 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:06.435 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:06.436 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:06.436 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:06.437 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.438 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.439 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.440 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:06.441 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.442 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:06.442 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:06.444 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.444 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.445 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.446 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:06.447 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.448 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:06.448 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:06.449 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:06.450 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:06.450 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:06.451 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:06.451 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:06.453 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:06.454 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:06.455 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:06.455 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:06.456 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:06.458 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:06.460 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:06.461 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-10 20:09:06.462 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.464 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.465 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:06.465 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:06.466 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:06.467 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:06.474 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:06.475 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.476 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:06.477 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.478 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:09:06.479 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:06.481 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:06.481 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:06.482 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:06.482 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:06.483 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:06.484 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 49.782ms
2024-11-10 20:09:06.484 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.485 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:06.486 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.486 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:06.487 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 66.816ms
2024-11-10 20:09:06.657 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:06.658 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:06.658 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:06.659 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:06.659 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:06.660 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:06.661 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.662 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:06.662 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.663 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:06.664 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:06.664 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:06.665 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:06.667 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:06.668 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:06.669 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:06.669 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:06.670 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:06.671 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:06.671 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.672 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.673 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.673 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:06.674 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.675 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:06.675 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:06.676 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.677 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.677 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.678 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:06.679 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.679 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:06.680 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:06.681 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:06.681 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:06.682 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:06.682 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:06.683 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:06.683 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:06.684 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:06.685 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:06.685 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:06.686 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:06.687 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:06.689 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:06.689 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:06.689 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.690 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.691 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:06.691 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:06.692 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:06.692 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:06.696 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:06.697 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.698 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:06.699 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.699 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:06.700 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:06.701 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:06.701 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:06.702 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:06.702 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:06.703 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:06.704 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.3538ms
2024-11-10 20:09:06.705 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.705 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:06.706 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.706 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:06.707 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 50.627ms
2024-11-10 20:09:06.879 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:06.880 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:06.881 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:06.881 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:06.882 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:06.883 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:06.884 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.885 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:06.885 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.886 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:06.887 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:06.888 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:06.888 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:06.889 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:06.890 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:06.891 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:06.892 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:06.893 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:06.893 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:06.894 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.895 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.896 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.896 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:06.897 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:06.897 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:06.898 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:06.899 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.899 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.900 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.900 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:06.901 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:06.901 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:06.902 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:06.903 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:06.903 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:06.904 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:06.904 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:06.905 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:06.905 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:06.906 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:06.906 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:06.907 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:06.908 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:06.909 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:06.910 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:06.910 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:06.911 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.912 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.912 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:06.913 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:06.913 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:06.914 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:06.920 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:06.921 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.922 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:06.922 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.923 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:06.923 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:06.925 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:06.925 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:06.926 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:06.926 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:06.927 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:06.927 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.2095ms
2024-11-10 20:09:06.928 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:06.928 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:06.929 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:06.929 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:06.930 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 51.4072ms
2024-11-10 20:09:07.272 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:07.273 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:07.274 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:07.275 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:07.275 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:07.276 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:07.276 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:07.277 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:07.277 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:07.278 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:07.279 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:07.280 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:07.280 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:07.281 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:07.282 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:07.283 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:07.283 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:07.284 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:07.284 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:07.285 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:07.286 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:07.286 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:07.287 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:07.288 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:07.288 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:07.289 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:07.290 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:07.290 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:07.291 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:07.291 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:07.292 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:07.292 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:07.293 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:07.294 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:07.294 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:07.295 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:07.295 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:07.296 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:07.297 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:07.297 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:07.298 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:07.298 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:07.299 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:07.300 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:07.301 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:07.301 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:07.302 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.303 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.303 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:07.303 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:07.304 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:07.305 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:07.309 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:07.311 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.311 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:07.312 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.312 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:07.313 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:07.314 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:07.315 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:07.315 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:07.315 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:07.316 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:07.317 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.4766ms
2024-11-10 20:09:07.318 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:07.319 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:07.319 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.320 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:07.321 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 49.4203ms
2024-11-10 20:09:07.498 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:07.499 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:07.499 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:07.500 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:07.500 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:07.501 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:07.502 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:07.502 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:07.503 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:07.504 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:07.505 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:07.505 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:07.506 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:07.507 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:07.507 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:07.508 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:07.509 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:07.510 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:07.510 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:07.511 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:07.511 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:07.512 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:07.512 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:07.513 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:07.513 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:07.514 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:07.515 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:07.515 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:07.516 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:07.516 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:07.517 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:07.517 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:07.518 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:07.519 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:07.519 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:07.520 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:07.520 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:07.521 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:07.522 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:07.522 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:07.523 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:07.523 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:07.524 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:07.525 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:07.526 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:07.526 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:07.527 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.527 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.528 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:07.528 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:07.529 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:07.529 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:07.533 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:07.534 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.535 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:07.536 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.537 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:07.537 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:07.539 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:07.539 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:07.540 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:07.540 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:07.541 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:07.542 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.4156ms
2024-11-10 20:09:07.542 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:07.543 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:07.543 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.544 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:07.545 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 47.5909ms
2024-11-10 20:09:07.750 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:07.752 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:07.753 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:07.753 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:07.754 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:07.754 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:07.755 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:07.756 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:07.756 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:07.757 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:07.757 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:07.758 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:07.759 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:07.760 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:07.761 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:07.761 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:07.762 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:07.763 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:07.763 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:07.764 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:07.764 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:07.765 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:07.766 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:07.766 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:07.767 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:07.767 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:07.768 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:07.768 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:07.769 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:07.770 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:07.770 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:07.771 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:07.771 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:07.772 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:07.772 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:07.773 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:07.774 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:07.774 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:07.775 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:07.776 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:07.776 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:07.777 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:07.777 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:07.778 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:07.779 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:07.779 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:07.780 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.780 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.781 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:07.781 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:07.782 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:07.782 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:07.788 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:07.789 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.789 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:07.790 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.791 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:07.791 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:07.792 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:07.793 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:07.793 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:07.793 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:07.794 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:07.795 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.7447ms
2024-11-10 20:09:07.796 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:07.797 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:07.797 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:07.798 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:07.798 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 48.0821ms
2024-11-10 20:09:07.993 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:07.996 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:07.997 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:07.997 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:07.998 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:07.998 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:07.999 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.000 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:08.000 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.001 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:08.002 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:08.004 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:08.005 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:08.009 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:08.010 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:08.012 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:08.013 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:08.014 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:08.014 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:08.015 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.016 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.016 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.017 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:08.018 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.019 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:08.019 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:08.020 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.021 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.022 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.022 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:08.023 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.024 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:08.024 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:08.025 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.026 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.026 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:08.027 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.028 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:08.028 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:08.029 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.030 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.031 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:08.031 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.032 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:08.034 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:08.034 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:08.035 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.036 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.036 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:08.037 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:08.037 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:08.038 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:08.042 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:08.043 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.044 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:08.045 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.046 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:08.046 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:08.047 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:08.048 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:08.048 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:08.049 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:08.049 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:08.050 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.4285ms
2024-11-10 20:09:08.051 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.052 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:08.053 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.053 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:08.054 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 60.6033ms
2024-11-10 20:09:08.225 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:08.227 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:08.227 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:08.228 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:08.229 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:08.230 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:08.231 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.231 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:08.232 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.232 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:08.233 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:08.234 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:08.235 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:08.236 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:08.237 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:08.238 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:08.239 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:08.240 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:08.241 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:08.242 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.242 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.243 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.244 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:08.245 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.245 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:08.246 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:08.247 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.248 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.249 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.249 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:08.250 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.251 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:08.251 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:08.252 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.253 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.254 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:08.255 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.255 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:08.256 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:08.257 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.257 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.258 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:08.258 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.259 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:08.260 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:08.261 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:08.261 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.262 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.263 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:08.263 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:08.264 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:08.264 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:08.270 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:08.271 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.272 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:08.273 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.274 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:08.274 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:08.276 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:08.276 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:08.276 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:08.277 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:08.277 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:08.279 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.514ms
2024-11-10 20:09:08.280 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.280 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:08.281 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.282 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:08.282 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 57.5676ms
2024-11-10 20:09:08.451 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:08.453 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:08.453 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:08.453 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:08.454 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:08.455 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:08.456 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.456 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:08.457 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.457 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:08.458 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:08.459 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:08.459 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:08.461 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:08.461 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:08.462 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:08.463 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:08.463 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:08.464 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:08.464 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.465 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.465 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.466 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:08.467 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.467 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:08.468 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:08.468 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.469 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.470 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.470 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:08.471 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.471 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:08.472 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:08.472 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.473 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.473 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:08.474 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.475 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:08.475 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:08.476 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.476 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.477 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:08.477 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.478 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:08.479 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:08.480 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:08.480 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.481 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.481 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:08.482 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:08.482 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:08.483 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:08.488 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:08.489 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.490 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:08.490 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.491 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:08.492 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:08.493 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:08.493 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:08.493 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:08.494 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:08.494 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:08.495 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 32.9749ms
2024-11-10 20:09:08.496 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.496 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:08.497 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.497 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:08.498 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 46.6409ms
2024-11-10 20:09:08.681 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:08.682 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:08.683 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:08.683 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:08.684 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:08.684 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:08.685 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.686 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:08.686 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.687 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:08.688 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:08.689 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:08.690 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:08.692 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:08.692 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:08.693 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:08.694 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:08.694 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:08.695 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:08.696 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.697 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.698 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.698 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:08.699 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.700 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:08.700 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:08.701 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.702 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.702 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.704 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:08.704 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.705 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:08.706 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:08.706 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.707 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.708 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:08.709 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.709 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:08.710 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:08.711 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.712 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.712 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:08.713 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.714 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:08.715 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:08.715 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:08.715 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.716 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.717 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:08.717 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:08.718 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:08.718 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:08.724 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:08.725 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.725 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:08.726 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.727 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:08.727 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:08.728 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:08.729 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:08.729 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:08.729 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:08.730 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:08.731 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.1163ms
2024-11-10 20:09:08.733 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.733 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:08.734 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.735 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:08.735 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 55.0923ms
2024-11-10 20:09:08.902 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:08.903 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:08.903 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:08.904 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:08.904 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:08.905 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:08.906 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.906 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:08.907 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.908 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:08.908 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:08.909 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:08.910 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:08.911 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:08.911 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:08.912 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:08.913 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:08.914 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:08.914 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:08.915 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.915 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.916 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.916 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:08.917 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:08.918 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:08.918 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:08.919 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.919 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.920 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.920 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:08.921 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:08.921 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:08.922 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:08.923 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.923 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.924 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:08.924 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:08.925 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:08.926 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:08.926 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.927 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.927 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:08.928 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:08.929 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:08.930 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:08.930 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:08.931 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.931 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.932 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:08.932 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:08.933 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:08.933 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:08.937 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:08.938 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.939 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:08.939 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.940 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:08.941 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:08.942 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:08.943 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:08.943 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:08.943 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:08.944 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:08.944 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 32.1088ms
2024-11-10 20:09:08.945 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:08.946 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:08.946 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:08.947 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:08.947 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 45.8928ms
2024-11-10 20:09:09.110 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:09.111 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:09.112 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:09.113 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:09.114 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:09.114 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:09.115 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.116 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:09.116 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.117 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:09.118 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:09.118 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:09.119 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:09.121 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:09.121 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:09.122 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:09.123 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:09.124 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:09.124 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:09.125 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.126 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.127 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.128 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:09.128 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.129 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:09.129 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:09.130 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.131 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.131 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.132 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:09.133 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.133 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:09.134 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:09.135 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.136 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.136 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:09.137 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.137 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:09.138 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:09.138 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.139 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.139 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:09.140 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.141 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:09.142 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:09.143 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:09.143 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.144 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.144 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:09.145 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:09.145 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:09.146 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:09.150 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:09.151 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.152 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:09.152 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.153 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:09.154 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:09.155 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:09.155 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:09.155 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:09.156 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:09.156 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:09.158 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.863ms
2024-11-10 20:09:09.159 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.160 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:09.160 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.161 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:09.161 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 51.8234ms
2024-11-10 20:09:09.333 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:09.334 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:09.335 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:09.335 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:09.336 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:09.336 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:09.337 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.337 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:09.338 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.338 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:09.339 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:09.340 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:09.340 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:09.341 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:09.342 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:09.343 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:09.343 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:09.344 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:09.345 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:09.345 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.346 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.347 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.347 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:09.348 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.348 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:09.349 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:09.350 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.350 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.351 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.351 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:09.352 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.352 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:09.353 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:09.354 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.354 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.355 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:09.355 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.356 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:09.356 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:09.357 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.358 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.358 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:09.359 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.359 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:09.361 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:09.361 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:09.362 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.363 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.363 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:09.364 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:09.365 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:09.365 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:09.369 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:09.370 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.370 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:09.371 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.372 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:09.372 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:09.373 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:09.373 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:09.374 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:09.374 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:09.375 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:09.375 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 32.4237ms
2024-11-10 20:09:09.376 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.377 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:09.377 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.378 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:09.379 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 46.5315ms
2024-11-10 20:09:09.552 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:09.554 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:09.554 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:09.555 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:09.555 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:09.556 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:09.557 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.557 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:09.558 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.558 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:09.559 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:09.559 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:09.560 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:09.561 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:09.562 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:09.562 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:09.563 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:09.564 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:09.564 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:09.565 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.566 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.566 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.567 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:09.568 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.568 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:09.569 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:09.569 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.570 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.571 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.571 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:09.572 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.573 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:09.573 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:09.574 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.574 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.575 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:09.575 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.576 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:09.577 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:09.577 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.578 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.578 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:09.579 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.580 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:09.581 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:09.581 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:09.582 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.583 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.583 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:09.584 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:09.585 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:09.585 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:09.590 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:09.591 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.592 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:09.593 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.593 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:09.594 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:09.595 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:09.595 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:09.596 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:09.596 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:09.597 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:09.598 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.8752ms
2024-11-10 20:09:09.599 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.600 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:09.601 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.602 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:09.602 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 51.122ms
2024-11-10 20:09:09.752 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:09.754 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:09.754 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:09.755 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:09.755 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:09.756 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:09.756 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.757 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:09.758 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.758 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:09.759 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:09.760 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:09.761 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:09.761 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:09.762 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:09.763 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:09.763 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:09.765 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:09.766 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:09.766 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.767 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.768 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.768 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:09.769 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.770 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:09.770 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:09.771 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.772 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.773 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.774 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:09.774 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.775 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:09.776 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:09.776 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.777 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.777 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:09.778 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.778 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:09.779 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:09.780 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.781 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.781 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:09.782 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.783 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:09.784 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:09.784 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:09.785 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.786 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.786 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:09.787 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:09.787 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:09.788 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:09.792 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:09.793 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.793 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:09.794 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.795 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:09.795 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:09.796 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:09.797 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:09.797 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:09.797 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:09.798 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:09.799 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.8973ms
2024-11-10 20:09:09.799 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.800 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:09.801 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.802 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:09.802 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 51.1408ms
2024-11-10 20:09:09.951 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:09.953 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:09.953 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:09.954 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:09.954 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:09.955 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:09.956 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.956 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:09.957 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:09.957 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:09.958 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:09.959 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:09.959 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:09.961 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:09.962 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:09.963 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:09.964 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:09.965 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:09.965 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:09.966 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.967 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.968 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.969 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:09.970 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:09.970 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:09.971 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:09.972 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.973 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.974 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.974 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:09.975 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:09.976 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:09.976 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:09.977 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.978 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.979 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:09.979 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:09.980 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:09.980 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:09.981 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.982 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.983 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:09.983 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:09.984 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:09.985 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:09.986 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:09.986 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.987 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.988 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:09.988 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:09.989 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:09.989 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:09.994 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:09.995 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.995 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:09.996 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:09.997 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:09.997 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:09.998 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:09.999 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:09.999 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:09.999 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:10.000 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:10.002 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.2266ms
2024-11-10 20:09:10.003 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.004 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:10.004 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.005 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:10.005 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 54.6912ms
2024-11-10 20:09:10.161 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:10.163 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:10.164 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:10.164 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:10.164 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:10.165 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:10.166 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.166 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:10.167 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.167 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:10.168 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:10.169 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:10.169 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:10.170 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:10.171 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:10.172 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:10.173 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:10.173 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:10.174 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:10.174 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.175 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.176 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.176 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:10.177 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.178 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:10.178 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:10.179 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.180 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.180 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.181 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:10.181 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.182 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:10.182 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:10.183 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:10.184 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:10.185 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:10.185 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:10.186 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:10.186 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:10.187 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:10.187 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:10.188 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:10.189 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:10.190 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:10.191 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:10.192 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:10.192 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.193 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.193 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:10.193 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:10.194 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:10.194 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:10.199 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:10.200 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.201 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:10.201 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.202 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:10.203 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:10.204 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:10.204 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:10.205 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:10.205 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:10.206 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:10.206 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.6963ms
2024-11-10 20:09:10.207 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.207 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:10.208 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.208 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:10.209 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 47.6974ms
2024-11-10 20:09:10.388 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:10.389 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:10.389 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:10.390 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:10.390 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:10.391 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:10.392 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.393 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:10.393 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.394 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:10.395 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:10.395 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:10.396 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:10.398 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:10.399 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:10.400 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:10.400 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:10.401 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:10.401 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:10.402 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.403 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.403 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.404 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:10.405 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.406 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:10.407 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:10.408 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.408 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.409 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.409 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:10.410 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.411 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:10.411 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:10.412 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:10.413 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:10.414 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:10.414 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:10.415 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:10.415 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:10.416 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:10.416 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:10.417 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:10.417 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:10.418 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:10.419 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:10.420 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:10.420 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.421 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.421 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:10.422 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:10.422 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:10.423 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:10.428 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:10.429 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.430 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:10.430 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.431 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:10.432 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:10.433 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:10.433 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:10.434 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:10.434 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:10.435 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:10.436 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.3096ms
2024-11-10 20:09:10.437 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.437 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:10.438 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.439 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:10.439 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 52.015ms
2024-11-10 20:09:10.602 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:10.603 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:10.603 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:10.604 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:10.604 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:10.605 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:10.605 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.606 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:10.606 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.607 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:10.608 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:10.609 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:10.609 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:10.610 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:10.611 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:10.612 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:10.613 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:10.614 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:10.614 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:10.615 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.616 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.616 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.617 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:10.617 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.618 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:10.618 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:10.619 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.620 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.620 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.621 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:10.622 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.622 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:10.623 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:10.624 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:10.624 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:10.625 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:10.625 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:10.626 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:10.627 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:10.627 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:10.628 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:10.628 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:10.629 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:10.630 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:10.631 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:10.632 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:10.632 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.633 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.633 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:10.634 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:10.634 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:10.635 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:10.639 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:10.640 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.641 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:10.641 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.642 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:10.643 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:10.644 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:10.644 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:10.644 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:10.645 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:10.645 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:10.647 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.2004ms
2024-11-10 20:09:10.648 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.648 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:10.649 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.650 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:10.650 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 48.9057ms
2024-11-10 20:09:10.804 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:10.805 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:10.806 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:10.806 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:10.807 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:10.807 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:10.808 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.809 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:10.810 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.810 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:10.811 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:10.812 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:10.813 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:10.814 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:10.816 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:10.817 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:10.818 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:10.819 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:10.819 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:10.820 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.821 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.822 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.823 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:10.823 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:10.824 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:10.825 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:10.825 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.826 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.827 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.828 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:10.828 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:10.829 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:10.830 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:10.830 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:10.831 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:10.832 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:10.832 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:10.833 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:10.833 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:10.834 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:10.835 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:10.835 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:10.836 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:10.837 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:10.838 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:10.838 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:10.839 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.840 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.841 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:10.841 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:10.842 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:10.843 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:10.847 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:10.848 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.849 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:10.849 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.850 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:10.851 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:10.852 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:10.852 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:10.852 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:10.853 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:10.853 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:10.855 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.7509ms
2024-11-10 20:09:10.856 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:10.856 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:10.857 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:10.858 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:10.859 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 54.719ms
2024-11-10 20:09:11.032 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:11.033 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:11.033 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:11.034 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:11.034 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:11.035 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:11.036 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:11.036 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:11.037 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:11.037 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:11.038 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:11.039 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:11.039 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:11.040 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:11.041 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:11.042 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:11.043 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:11.043 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:11.044 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:11.045 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.045 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.046 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.046 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:11.047 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.047 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:11.048 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:11.049 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.050 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.051 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.051 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:11.052 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.053 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:11.053 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:11.054 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:11.054 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:11.055 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:11.055 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:11.056 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:11.056 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:11.057 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:11.058 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:11.058 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:11.059 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:11.060 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:11.061 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:11.062 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:11.062 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.063 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.063 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:11.064 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:11.064 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:11.065 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:11.069 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:11.070 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.071 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:11.071 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.072 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:11.073 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:11.074 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:11.074 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:11.074 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:11.075 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:11.075 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:11.076 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.0783ms
2024-11-10 20:09:11.076 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:11.077 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:11.078 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.078 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:11.079 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 47.6663ms
2024-11-10 20:09:11.254 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:11.255 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:11.256 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:11.256 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:11.257 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:11.257 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:11.258 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:11.259 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:11.259 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:11.260 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:11.260 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:11.261 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:11.262 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:11.263 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:11.263 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:11.264 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:11.265 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:11.265 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:11.266 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:11.267 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.268 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.268 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.269 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:11.269 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.270 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:11.271 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:11.271 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.272 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.273 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.274 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:11.274 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.275 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:11.275 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:11.276 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:11.276 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:11.277 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:11.277 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:11.278 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:11.278 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:11.279 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:11.280 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:11.281 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:11.281 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:11.282 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:11.284 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:11.284 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:11.284 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.285 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.285 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:11.286 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:11.286 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:11.287 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:11.291 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:11.293 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.293 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:11.294 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.295 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:11.295 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:11.297 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:11.297 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:11.297 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:11.298 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:11.298 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:11.299 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.5195ms
2024-11-10 20:09:11.300 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:11.301 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:11.302 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.303 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:11.303 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 49.453ms
2024-11-10 20:09:11.479 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:11.481 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:11.481 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:11.482 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:11.482 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:11.483 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:11.483 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:11.484 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:11.484 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:11.485 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:11.485 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:11.486 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:11.487 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:11.488 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:11.488 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:11.489 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:11.490 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:11.490 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:11.491 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:11.492 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.493 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.493 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.494 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:11.495 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.496 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:11.497 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:11.498 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.499 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.499 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.500 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:11.501 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.501 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:11.502 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:11.503 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:11.504 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:11.504 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:11.505 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:11.506 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:11.506 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:11.507 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:11.507 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:11.508 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:11.509 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:11.510 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:11.512 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:11.512 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:11.512 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.513 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.514 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:11.514 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:11.515 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:11.516 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:11.521 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:11.523 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.524 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:11.524 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.525 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:11.526 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:11.527 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:11.527 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:11.528 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:11.528 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:11.529 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:11.529 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.3489ms
2024-11-10 20:09:11.530 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:11.531 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:11.531 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.532 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:11.533 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 53.7373ms
2024-11-10 20:09:11.695 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:11.697 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:11.698 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:11.699 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:11.701 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:11.702 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:11.703 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:11.704 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:11.705 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:11.706 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:11.707 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:11.708 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:11.708 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:11.711 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:11.713 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:11.716 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:11.718 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:11.720 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:11.721 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:11.722 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.724 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.725 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.727 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:11.727 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:11.728 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:11.730 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:11.731 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.732 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.733 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.734 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:11.735 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:11.736 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:11.737 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:11.738 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:11.740 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:11.741 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:11.742 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:11.743 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:11.744 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:11.746 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:11.747 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:11.748 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:11.750 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:11.753 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:11.755 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:11.756 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:11.757 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.758 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.759 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:11.760 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:11.762 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-10 20:09:11.763 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:11.772 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:11.774 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.775 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:09:11.776 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.777 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:11.778 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:11.779 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:11.780 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:11.781 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:11.781 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:11.782 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:11.785 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 68.9266ms
2024-11-10 20:09:11.787 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:11.788 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:11.789 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:11.791 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:09:11.794 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 98.503ms
2024-11-10 20:09:12.159 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:12.161 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:12.162 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:12.162 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:12.163 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:12.163 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:12.164 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:12.165 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:12.165 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:12.166 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:12.166 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:12.167 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:12.168 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:12.169 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:12.170 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:12.172 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:12.173 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:12.173 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:12.175 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:12.177 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:12.178 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:12.179 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:12.179 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:12.180 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:12.180 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:12.181 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:12.181 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:12.182 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:12.183 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:12.184 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:12.185 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:12.185 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:12.186 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:12.187 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:12.187 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:12.188 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:12.189 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:12.189 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:12.190 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:12.191 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:12.191 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:12.192 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:12.193 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:12.194 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:12.196 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:12.196 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:12.196 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:12.197 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:12.198 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:12.198 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:12.199 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:12.199 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:12.205 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:12.207 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:12.208 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:12.209 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:12.210 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:09:12.211 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:12.212 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:12.212 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:12.213 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:12.213 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:12.214 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:12.214 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.496ms
2024-11-10 20:09:12.215 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:12.215 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:12.217 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:12.219 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:09:12.220 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 61.2031ms
2024-11-10 20:09:12.610 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:12.612 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:12.612 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:12.613 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:12.613 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:12.614 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:12.615 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:12.615 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:12.616 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:12.616 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:12.617 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:12.618 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:12.619 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:12.620 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:12.621 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:12.622 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:12.623 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:12.624 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:12.625 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:12.626 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:12.627 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:12.628 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:12.629 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:12.630 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:12.631 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:12.632 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:12.632 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:12.633 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:12.634 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:12.634 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:12.635 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:12.636 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:12.637 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:12.637 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:12.638 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:12.639 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:12.640 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:12.641 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:12.642 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:12.643 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:12.643 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:12.644 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:12.645 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:12.647 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:12.649 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:12.649 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:12.650 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:12.651 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:12.652 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:12.652 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:12.653 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:12.654 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:12.656 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:12.658 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:12.659 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:12.660 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:12.660 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:12.661 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:12.662 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:12.663 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:12.664 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:12.664 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:12.665 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:12.666 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.0414ms
2024-11-10 20:09:12.667 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:12.668 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:12.669 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:12.670 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:12.671 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 60.353ms
2024-11-10 20:09:13.172 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:13.173 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:13.174 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:13.174 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:13.175 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:13.175 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:13.176 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:13.177 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:13.177 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:13.177 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:13.178 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:13.179 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:13.179 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:13.180 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:13.181 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:13.182 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:13.182 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:13.183 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:13.183 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:13.184 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:13.185 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:13.185 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:13.186 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:13.186 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:13.187 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:13.187 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:13.188 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:13.188 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:13.189 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:13.189 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:13.190 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:13.191 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:13.191 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:13.192 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:13.193 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:13.193 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:13.194 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:13.194 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:13.195 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:13.196 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:13.197 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:13.197 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:13.198 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:13.199 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:13.201 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:13.202 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:13.202 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:13.203 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:13.203 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:13.204 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:13.205 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:13.205 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:13.207 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:13.208 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:13.208 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:13.209 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:13.210 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:13.210 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:13.212 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:13.212 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:13.213 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:13.213 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:13.214 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:13.214 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 32.6098ms
2024-11-10 20:09:13.215 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:13.215 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:13.216 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:13.216 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:13.217 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 44.898ms
2024-11-10 20:09:14.387 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:09:14.389 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:14.389 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:14.390 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:14.391 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:14.391 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:14.392 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:14.392 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:14.393 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:14.393 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:14.394 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:14.395 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:14.395 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:14.396 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:14.397 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:14.398 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:14.399 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:14.399 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:14.400 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:14.401 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:14.401 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:14.402 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:14.403 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:14.404 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:14.404 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:14.405 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:14.405 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:14.406 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:14.407 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:14.407 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:14.408 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:14.408 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:14.409 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:14.410 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:14.410 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:14.411 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:14.412 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:14.412 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:14.413 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:14.413 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:14.414 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:14.414 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:14.415 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:14.416 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:14.417 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:14.417 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:14.418 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:14.418 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:14.419 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:14.419 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:14.420 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:14.421 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:14.422 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:09:14.423 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:14.423 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:14.424 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:14.425 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:14.425 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:14.426 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:14.427 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:14.427 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:14.427 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:14.428 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:14.429 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 31.0037ms
2024-11-10 20:09:14.430 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:14.430 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:14.431 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:14.432 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:14.432 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 45.1979ms
2024-11-10 20:09:14.773 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:09:14.775 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:09:14.775 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:09:14.776 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:09:14.776 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:09:14.777 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:09:14.778 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:14.778 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:09:14.779 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:14.780 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:09:14.781 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:09:14.781 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:09:14.782 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:14.783 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:09:14.783 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:09:14.784 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:14.785 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:09:14.785 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:09:14.786 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:14.787 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:09:14.788 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:14.789 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:09:14.789 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:09:14.790 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:09:14.790 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:14.791 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:09:14.792 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:14.792 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:14.793 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:14.794 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:09:14.794 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:09:14.795 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:14.796 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:09:14.796 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:14.797 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:14.797 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:09:14.798 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:09:14.798 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:14.799 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:09:14.800 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:14.800 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:14.801 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:09:14.802 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:09:14.803 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:09:14.804 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:09:14.804 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:09:14.805 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:14.805 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:14.806 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:09:14.806 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:09:14.807 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:09:14.808 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:14.809 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:09:14.810 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:14.811 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:09:14.811 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:14.812 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:09:14.813 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:09:14.814 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:09:14.814 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:09:14.815 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:09:14.815 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:09:14.816 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:09:14.816 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 32.4116ms
2024-11-10 20:09:14.817 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:09:14.818 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:09:14.818 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:09:14.819 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:09:14.819 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 46.3141ms
2024-11-10 20:10:24.533 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:10:24.548 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:10:24.548 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:10:24.548 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:10:24.549 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:10:24.550 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:10:24.550 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:10:24.551 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:10:24.551 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:10:24.552 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:10:24.553 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:10:24.553 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:10:24.554 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:10:24.557 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:10:24.557 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:10:24.559 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:10:24.561 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:10:24.562 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:10:24.564 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:10:24.565 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:10:24.567 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:10:24.568 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:10:24.569 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:10:24.570 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:10:24.571 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:10:24.571 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:10:24.572 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:24.573 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:24.574 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:24.575 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:10:24.576 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:24.577 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:10:24.578 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:10:24.579 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:10:24.580 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:10:24.581 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:10:24.581 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:10:24.582 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:10:24.583 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:10:24.584 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:10:24.585 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:10:24.585 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:10:24.586 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:10:24.588 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:10:24.592 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:10:24.592 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:10:24.593 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:24.593 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:24.594 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:10:24.595 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:10:24.596 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:10:24.597 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:10:24.608 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:10:24.610 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:24.610 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:10:24.611 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:24.612 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:10:24.613 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:10:24.614 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:10:24.615 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:10:24.615 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:10:24.616 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:10:24.616 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:10:24.617 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 58.1174ms
2024-11-10 20:10:24.618 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:10:24.619 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:10:24.621 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:24.628 +07:00 [DBG] Disposed connection to database '' on server '' (6ms).
2024-11-10 20:10:24.629 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 95.698ms
2024-11-10 20:10:43.498 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:10:43.502 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:10:43.502 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:10:43.503 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:10:43.503 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:10:43.504 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:10:43.504 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:10:43.505 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:10:43.507 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:10:43.507 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:10:43.509 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:10:43.510 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:10:43.510 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:10:43.511 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:10:43.512 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:10:43.513 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:10:43.514 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:10:43.515 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:10:43.516 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:10:43.516 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:10:43.517 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:10:43.517 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:10:43.518 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:10:43.518 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:10:43.519 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:10:43.520 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:10:43.522 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:43.523 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:43.523 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:43.524 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:10:43.525 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:43.525 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:10:43.526 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:10:43.528 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:10:43.529 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:10:43.530 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:10:43.531 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:10:43.532 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:10:43.532 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:10:43.533 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:10:43.534 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:10:43.535 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:10:43.535 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:10:43.537 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:10:43.540 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:10:43.541 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:10:43.542 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:43.543 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:43.544 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:10:43.544 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:10:43.545 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:10:43.545 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:10:43.553 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:10:43.556 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:43.557 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:10:43.558 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:43.558 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:10:43.559 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:10:43.561 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:10:43.562 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:10:43.562 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:10:43.563 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:10:43.563 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:10:43.565 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 51.4682ms
2024-11-10 20:10:43.566 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:10:43.566 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:10:43.567 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:43.568 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:10:43.570 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 71.832ms
2024-11-10 20:10:47.032 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:10:47.033 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:10:47.034 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:10:47.034 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:10:47.035 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:10:47.035 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:10:47.036 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:10:47.036 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:10:47.037 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:10:47.037 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:10:47.038 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:10:47.039 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:10:47.039 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:10:47.040 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:10:47.041 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:10:47.042 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:10:47.043 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:10:47.044 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:10:47.045 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:10:47.045 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:10:47.046 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:10:47.047 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:10:47.048 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:10:47.048 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:10:47.049 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:10:47.050 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:10:47.051 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:47.051 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:47.052 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:47.052 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:10:47.053 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:47.053 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:10:47.054 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:10:47.055 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:10:47.055 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:10:47.056 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:10:47.057 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:10:47.057 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:10:47.058 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:10:47.058 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:10:47.059 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:10:47.059 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:10:47.060 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:10:47.062 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:10:47.063 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:10:47.063 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:10:47.064 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:47.064 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:47.065 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:10:47.065 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:10:47.066 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:10:47.066 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:10:47.072 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:10:47.073 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:47.073 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:10:47.074 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:47.075 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:10:47.075 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:10:47.076 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:10:47.077 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:10:47.077 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:10:47.077 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:10:47.078 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:10:47.078 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.457ms
2024-11-10 20:10:47.079 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:10:47.080 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:10:47.080 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:47.081 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:10:47.081 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 49.1479ms
2024-11-10 20:10:48.245 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:10:48.247 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:10:48.248 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:10:48.248 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:10:48.249 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:10:48.250 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:10:48.251 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:10:48.252 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:10:48.252 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:10:48.253 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:10:48.254 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:10:48.254 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:10:48.255 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:10:48.257 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:10:48.258 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:10:48.259 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:10:48.260 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:10:48.260 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:10:48.261 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:10:48.262 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:10:48.263 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:10:48.264 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:10:48.265 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:10:48.266 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:10:48.266 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:10:48.267 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:10:48.268 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:48.269 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:48.270 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:48.270 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:10:48.271 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:10:48.272 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:10:48.273 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:10:48.274 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:10:48.274 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:10:48.275 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:10:48.276 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:10:48.276 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:10:48.277 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:10:48.278 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:10:48.279 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:10:48.279 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:10:48.280 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:10:48.281 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:10:48.283 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:10:48.284 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-10 20:10:48.284 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:48.285 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:48.286 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:10:48.286 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:10:48.287 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:10:48.287 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:10:48.293 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:10:48.294 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:48.295 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:10:48.296 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:48.296 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:10:48.298 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:10:48.299 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:10:48.299 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:10:48.300 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:10:48.300 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:10:48.300 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:10:48.309 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 50.1554ms
2024-11-10 20:10:48.310 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:10:48.311 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:10:48.311 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:10:48.312 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:10:48.313 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 68.0616ms
2024-11-10 20:10:49.096 +07:00 [DBG] Connection id "0HN8198R1VNQB" received FIN.
2024-11-10 20:10:49.097 +07:00 [DBG] Connection id "0HN8198R1VNQB" is closed. The last processed stream ID was 149.
2024-11-10 20:10:49.097 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQB completed.
2024-11-10 20:10:49.099 +07:00 [DBG] Connection id "0HN8198R1VNQB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:10:49.115 +07:00 [DBG] Connection id "0HN8198R1VNQB" stopped.
2024-11-10 20:11:43.918 +07:00 [DBG] Connection id "0HN8198R1VNQC" accepted.
2024-11-10 20:11:43.919 +07:00 [DBG] Connection id "0HN8198R1VNQC" started.
2024-11-10 20:11:43.928 +07:00 [DBG] Connection 0HN8198R1VNQC established using the following protocol: "Tls13"
2024-11-10 20:11:43.941 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:11:43.949 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:11:43.950 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:11:43.951 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:11:43.951 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:11:43.952 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:11:43.953 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:11:43.954 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:11:43.954 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:11:43.955 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:11:43.957 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:11:43.958 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:11:43.959 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:11:43.960 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:11:43.961 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:11:43.964 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:11:43.965 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:11:43.966 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:11:43.967 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:11:43.967 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:11:43.968 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:11:43.969 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:11:43.970 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:11:43.971 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:11:43.972 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:11:43.973 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:11:43.974 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:11:43.975 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:11:43.978 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:11:43.979 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:11:43.980 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:11:43.981 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:11:43.987 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:11:43.988 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:11:43.989 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:11:43.991 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:11:43.992 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:11:43.993 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:11:44.010 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:11:44.013 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:11:44.014 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:11:44.015 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:11:44.016 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:11:44.019 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:11:44.021 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:11:44.021 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:11:44.022 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:11:44.023 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:11:44.023 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:11:44.024 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:11:44.026 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-10 20:11:44.027 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:11:44.037 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:11:44.039 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:11:44.040 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:11:44.041 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:11:44.041 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:11:44.042 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:11:44.044 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:11:44.044 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:11:44.044 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:11:44.045 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:11:44.046 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:11:44.047 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 83.7022ms
2024-11-10 20:11:44.048 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:11:44.049 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:11:44.049 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:11:44.050 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:11:44.051 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 111.1711ms
2024-11-10 20:11:44.167 +07:00 [DBG] Connection id "0HN8198R1VNQC" received FIN.
2024-11-10 20:11:44.168 +07:00 [DBG] Connection id "0HN8198R1VNQC" is closed. The last processed stream ID was 1.
2024-11-10 20:11:44.169 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQC completed.
2024-11-10 20:11:44.169 +07:00 [DBG] Connection id "0HN8198R1VNQC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:11:44.180 +07:00 [DBG] Connection id "0HN8198R1VNQC" stopped.
2024-11-10 20:11:50.754 +07:00 [DBG] Connection id "0HN8198R1VNQD" accepted.
2024-11-10 20:11:50.755 +07:00 [DBG] Connection id "0HN8198R1VNQD" started.
2024-11-10 20:11:50.759 +07:00 [DBG] Connection 0HN8198R1VNQD established using the following protocol: "Tls13"
2024-11-10 20:11:50.760 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:11:50.765 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:11:50.765 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:11:50.766 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:11:50.766 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:11:50.767 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:11:50.768 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:11:50.769 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:11:50.769 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:11:50.770 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:11:50.770 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:11:50.771 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:11:50.772 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:11:50.773 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:11:50.773 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:11:50.774 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:11:50.775 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:11:50.776 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:11:50.777 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:11:50.778 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:11:50.778 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:11:50.779 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:11:50.779 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:11:50.780 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:11:50.781 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:11:50.782 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:11:50.782 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:11:50.783 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:11:50.784 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:11:50.785 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:11:50.785 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:11:50.786 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:11:50.787 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:11:50.788 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:11:50.789 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:11:50.789 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:11:50.790 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:11:50.791 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:11:50.792 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:11:50.793 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:11:50.793 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:11:50.794 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:11:50.795 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:11:50.798 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:11:50.799 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:11:50.800 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:11:50.800 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:11:50.801 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:11:50.802 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:11:50.802 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:11:50.803 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:11:50.804 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:11:50.809 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:11:50.812 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:11:50.813 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:11:50.814 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:11:50.815 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:11:50.815 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:11:50.817 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:11:50.817 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:11:50.818 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:11:50.819 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:11:50.819 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:11:50.820 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 45.872ms
2024-11-10 20:11:50.821 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:11:50.822 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:11:50.822 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:11:50.823 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:11:50.824 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 64.5588ms
2024-11-10 20:25:25.445 +07:00 [DBG] Connection id "0HN8198R1VNQD" received FIN.
2024-11-10 20:25:25.446 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQD completed.
2024-11-10 20:25:25.446 +07:00 [DBG] Connection id "0HN8198R1VNQD" is closed. The last processed stream ID was 1.
2024-11-10 20:25:25.451 +07:00 [DBG] Connection id "0HN8198R1VNQD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:25:25.453 +07:00 [DBG] Connection id "0HN8198R1VNQD" stopped.
2024-11-10 20:25:28.920 +07:00 [DBG] Connection id "0HN8198R1VNQE" accepted.
2024-11-10 20:25:28.922 +07:00 [DBG] Connection id "0HN8198R1VNQE" started.
2024-11-10 20:25:28.928 +07:00 [DBG] Connection 0HN8198R1VNQE established using the following protocol: "Tls13"
2024-11-10 20:25:28.931 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:25:28.932 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:25:28.933 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:25:28.934 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:25:28.935 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:25:28.936 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:25:28.937 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:25:28.937 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:25:28.938 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:25:28.939 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:25:28.939 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:25:28.940 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:25:28.942 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:25:28.943 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:25:28.944 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:25:28.946 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:25:28.948 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:25:28.949 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:25:28.949 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:25:28.950 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:25:28.951 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:25:28.952 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:25:28.953 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:25:28.953 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:25:28.954 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:25:28.955 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:25:28.956 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:25:28.957 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:25:28.958 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:25:28.958 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:25:28.959 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:25:28.959 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:25:28.960 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:25:28.961 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:25:28.962 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:25:28.962 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:25:28.963 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:25:28.964 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:25:28.964 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:25:28.965 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:25:28.966 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:25:28.966 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:25:28.967 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:25:28.968 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:25:28.970 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:25:28.971 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:25:28.971 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:25:29.018 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:25:29.021 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:25:29.021 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:25:29.023 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-10 20:25:29.024 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:25:29.047 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:25:29.049 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:25:29.050 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:25:29.051 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:25:29.052 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:25:29.053 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:25:29.055 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:25:29.055 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:25:29.056 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:25:29.056 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:25:29.057 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:25:29.058 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 112.1819ms
2024-11-10 20:25:29.059 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:25:29.059 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:25:29.060 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:25:29.060 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:25:29.061 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 131.2337ms
2024-11-10 20:25:35.453 +07:00 [DBG] Connection id "0HN8198R1VNQE" received FIN.
2024-11-10 20:25:35.454 +07:00 [DBG] Connection id "0HN8198R1VNQE" is closed. The last processed stream ID was 1.
2024-11-10 20:25:35.454 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQE completed.
2024-11-10 20:25:35.455 +07:00 [DBG] Connection id "0HN8198R1VNQE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:25:35.468 +07:00 [DBG] Connection id "0HN8198R1VNQE" stopped.
2024-11-10 20:25:49.681 +07:00 [DBG] Connection id "0HN8198R1VNQF" accepted.
2024-11-10 20:25:49.682 +07:00 [DBG] Connection id "0HN8198R1VNQF" started.
2024-11-10 20:25:49.686 +07:00 [DBG] Connection 0HN8198R1VNQF established using the following protocol: "Tls13"
2024-11-10 20:25:49.687 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:25:49.695 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:25:49.696 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:25:49.697 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:25:49.698 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:25:49.698 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:25:49.700 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:25:49.701 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:25:49.701 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:25:49.702 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:25:49.703 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:25:49.704 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:25:49.705 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:25:49.706 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:25:49.707 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:25:49.708 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:25:49.708 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:25:49.709 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:25:49.710 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:25:49.711 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:25:49.712 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:25:49.712 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:25:49.713 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:25:49.713 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:25:49.714 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:25:49.715 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:25:49.715 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:25:49.716 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:25:49.716 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:25:49.717 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:25:49.718 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:25:49.719 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:25:49.720 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:25:49.720 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:25:49.721 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:25:49.722 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:25:49.722 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:25:49.723 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:25:49.723 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:25:49.724 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:25:49.725 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:25:49.726 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:25:49.726 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:25:49.728 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:25:49.729 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:25:49.729 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:25:49.730 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:25:49.730 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:25:49.731 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:25:49.732 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:25:49.733 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:25:49.733 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:25:49.739 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:25:49.740 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:25:49.741 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:25:49.742 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:25:49.742 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:25:49.743 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:25:49.744 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:25:49.744 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:25:49.745 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:25:49.745 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:25:49.746 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:25:49.747 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.9751ms
2024-11-10 20:25:49.747 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:25:49.748 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:25:49.749 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:25:49.749 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:25:49.750 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 62.4618ms
2024-11-10 20:25:55.471 +07:00 [DBG] Connection id "0HN8198R1VNQF" received FIN.
2024-11-10 20:25:55.472 +07:00 [DBG] Connection id "0HN8198R1VNQF" is closed. The last processed stream ID was 1.
2024-11-10 20:25:55.472 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQF completed.
2024-11-10 20:25:55.473 +07:00 [DBG] Connection id "0HN8198R1VNQF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:25:55.485 +07:00 [DBG] Connection id "0HN8198R1VNQF" stopped.
2024-11-10 20:26:01.711 +07:00 [DBG] Connection id "0HN8198R1VNQG" accepted.
2024-11-10 20:26:01.711 +07:00 [DBG] Connection id "0HN8198R1VNQG" started.
2024-11-10 20:26:01.715 +07:00 [DBG] Connection 0HN8198R1VNQG established using the following protocol: "Tls13"
2024-11-10 20:26:01.717 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:26:01.718 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:26:01.719 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:26:01.719 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:26:01.720 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:26:01.721 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:26:01.722 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:26:01.722 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:26:01.723 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:26:01.723 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:26:01.724 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:26:01.725 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:26:01.726 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:26:01.727 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:26:01.728 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:26:01.729 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:26:01.730 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:26:01.732 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:26:01.732 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:26:01.733 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:26:01.734 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:26:01.735 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:26:01.736 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:26:01.736 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:26:01.737 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:26:01.738 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:26:01.739 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:26:01.740 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:26:01.740 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:26:01.742 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:26:01.743 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:26:01.743 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:26:01.744 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:26:01.746 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:26:01.746 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:26:01.747 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:26:01.748 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:26:01.749 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:26:01.750 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:26:01.750 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:26:01.751 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:26:01.752 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:26:01.753 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:26:01.754 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:26:01.756 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:26:01.756 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:26:01.757 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:26:01.758 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:26:01.759 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:26:01.760 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:26:01.761 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:26:01.762 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:26:01.768 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:26:01.769 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:26:01.770 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:26:01.771 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:26:01.771 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:26:01.772 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:26:01.773 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:26:01.774 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:26:01.775 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:26:01.775 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:26:01.776 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:26:01.777 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.3184ms
2024-11-10 20:26:01.777 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:26:01.778 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:26:01.778 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:26:01.780 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:26:01.781 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 64.498ms
2024-11-10 20:26:05.476 +07:00 [DBG] Connection id "0HN8198R1VNQG" received FIN.
2024-11-10 20:26:05.477 +07:00 [DBG] Connection id "0HN8198R1VNQG" is closed. The last processed stream ID was 1.
2024-11-10 20:26:05.477 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQG completed.
2024-11-10 20:26:05.478 +07:00 [DBG] Connection id "0HN8198R1VNQG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:26:05.489 +07:00 [DBG] Connection id "0HN8198R1VNQG" stopped.
2024-11-10 20:26:58.941 +07:00 [DBG] Connection id "0HN8198R1VNQH" accepted.
2024-11-10 20:26:58.946 +07:00 [DBG] Connection id "0HN8198R1VNQH" started.
2024-11-10 20:26:58.950 +07:00 [DBG] Connection 0HN8198R1VNQH established using the following protocol: "Tls13"
2024-11-10 20:26:58.955 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:26:58.959 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:26:58.960 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:26:58.960 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:26:58.961 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:26:58.962 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:26:58.962 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:26:58.963 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:26:58.963 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:26:58.964 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:26:58.965 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:26:58.965 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:26:58.966 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:26:58.967 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:26:58.968 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:26:58.969 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:26:58.969 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:26:58.970 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:26:58.970 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:26:58.971 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:26:58.972 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:26:58.972 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:26:58.973 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:26:58.974 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:26:58.974 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:26:58.975 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:26:58.976 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:26:58.976 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:26:58.977 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:26:58.978 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:26:58.978 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:26:58.979 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:26:58.980 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:26:58.981 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:26:58.981 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:26:58.982 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:26:58.982 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:26:58.983 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:26:58.983 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:26:58.984 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:26:58.985 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:26:58.985 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:26:58.986 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:26:58.987 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:26:58.989 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:26:58.989 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:26:58.990 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:26:58.990 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:26:58.991 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:26:58.991 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:26:58.992 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:26:58.992 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:26:58.998 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:26:58.999 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:26:59.000 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:26:59.000 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:26:59.001 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:26:59.002 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:26:59.003 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:26:59.003 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:26:59.004 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:26:59.004 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:26:59.004 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:26:59.005 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.399ms
2024-11-10 20:26:59.006 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:26:59.006 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:26:59.007 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:26:59.008 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:26:59.008 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 53.5877ms
2024-11-10 20:27:02.162 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:27:02.163 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:27:02.165 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:27:02.165 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:27:02.166 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:27:02.167 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:27:02.168 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:27:02.168 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:27:02.169 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:27:02.169 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:27:02.170 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:27:02.171 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:27:02.172 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:27:02.173 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:27:02.174 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:27:02.175 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:27:02.176 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:27:02.177 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:27:02.177 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:27:02.178 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:27:02.179 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:27:02.179 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:27:02.180 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:27:02.181 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:27:02.181 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:27:02.182 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:27:02.183 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:27:02.184 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:27:02.184 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:27:02.185 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:27:02.185 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:27:02.186 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:27:02.187 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:27:02.187 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:27:02.188 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:27:02.189 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:27:02.190 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:27:02.191 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:27:02.191 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:27:02.192 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:27:02.193 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:27:02.193 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:27:02.194 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:27:02.196 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:27:02.198 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:27:02.198 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:27:02.199 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:27:02.199 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:27:02.200 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:27:02.201 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:27:02.201 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:27:02.202 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:27:02.210 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:27:02.211 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:27:02.212 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:27:02.213 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:27:02.213 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:27:02.214 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:27:02.215 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:27:02.215 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:27:02.216 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:27:02.216 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:27:02.217 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:27:02.218 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.2276ms
2024-11-10 20:27:02.219 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:27:02.219 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:27:02.220 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:27:02.221 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:27:02.222 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 60.2677ms
2024-11-10 20:27:05.570 +07:00 [DBG] Connection id "0HN8198R1VNQH" received FIN.
2024-11-10 20:27:05.571 +07:00 [DBG] Connection id "0HN8198R1VNQH" is closed. The last processed stream ID was 3.
2024-11-10 20:27:05.571 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQH completed.
2024-11-10 20:27:05.571 +07:00 [DBG] Connection id "0HN8198R1VNQH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:27:05.583 +07:00 [DBG] Connection id "0HN8198R1VNQH" stopped.
2024-11-10 20:27:06.667 +07:00 [DBG] Connection id "0HN8198R1VNQI" accepted.
2024-11-10 20:27:06.668 +07:00 [DBG] Connection id "0HN8198R1VNQI" started.
2024-11-10 20:27:06.672 +07:00 [DBG] Connection 0HN8198R1VNQI established using the following protocol: "Tls13"
2024-11-10 20:27:06.673 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:27:06.675 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:27:06.676 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:27:06.677 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:27:06.678 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:27:06.678 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:27:06.680 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:27:06.681 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:27:06.682 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:27:06.683 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:27:06.684 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:27:06.685 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:27:06.686 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:27:06.688 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:27:06.689 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:27:06.691 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:27:06.692 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:27:06.694 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:27:06.696 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:27:06.697 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:27:06.698 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:27:06.699 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:27:06.701 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:27:06.702 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:27:06.703 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:27:06.704 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:27:06.705 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:27:06.706 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:27:06.707 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:27:06.708 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:27:06.709 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:27:06.710 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:27:06.711 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:27:06.712 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:27:06.713 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:27:06.714 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:27:06.714 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:27:06.715 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:27:06.716 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:27:06.717 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:27:06.718 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:27:06.719 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:27:06.720 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:27:06.722 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:27:06.726 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:27:06.727 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:27:06.728 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:27:06.730 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:27:06.731 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:27:06.732 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:27:06.734 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-10 20:27:06.735 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:27:06.742 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:27:06.744 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:27:06.745 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:27:06.746 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:27:06.747 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:27:06.748 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:27:06.750 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:27:06.751 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:27:06.752 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:27:06.753 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:27:06.754 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:27:06.755 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 64.0861ms
2024-11-10 20:27:06.756 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:27:06.757 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:27:06.758 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:27:06.759 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:27:06.761 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 87.8519ms
2024-11-10 20:27:15.582 +07:00 [DBG] Connection id "0HN8198R1VNQI" received FIN.
2024-11-10 20:27:15.583 +07:00 [DBG] Connection id "0HN8198R1VNQI" is closed. The last processed stream ID was 1.
2024-11-10 20:27:15.583 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQI completed.
2024-11-10 20:27:15.584 +07:00 [DBG] Connection id "0HN8198R1VNQI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:27:15.596 +07:00 [DBG] Connection id "0HN8198R1VNQI" stopped.
2024-11-10 20:28:48.267 +07:00 [DBG] Connection id "0HN8198R1VNQJ" accepted.
2024-11-10 20:28:48.270 +07:00 [DBG] Connection id "0HN8198R1VNQJ" started.
2024-11-10 20:28:48.276 +07:00 [DBG] Connection 0HN8198R1VNQJ established using the following protocol: "Tls13"
2024-11-10 20:28:48.283 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:28:48.289 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:28:48.292 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:28:48.293 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:28:48.293 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:28:48.294 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:28:48.296 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:28:48.297 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:28:48.298 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:28:48.298 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:28:48.299 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:28:48.300 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:28:48.301 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:28:48.302 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:28:48.303 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:28:48.304 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:28:48.305 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:28:48.306 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:28:48.307 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:28:48.308 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:28:48.309 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:28:48.310 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:28:48.311 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:28:48.311 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:28:48.312 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:28:48.313 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:28:48.314 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:28:48.314 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:28:48.315 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:28:48.315 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:28:48.316 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:28:48.316 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:28:48.317 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:28:48.318 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:28:48.319 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:28:48.319 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:28:48.320 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:28:48.321 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:28:48.322 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:28:48.322 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:28:48.323 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:28:48.324 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:28:48.324 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:28:48.326 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:28:48.328 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:28:48.328 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:28:48.329 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:28:48.329 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:28:48.330 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:28:48.331 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:28:48.331 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:28:48.332 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:28:48.339 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:28:48.341 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:28:48.341 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:28:48.342 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:28:48.343 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:28:48.343 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:28:48.344 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:28:48.345 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:28:48.345 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:28:48.346 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:28:48.346 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:28:48.347 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.778ms
2024-11-10 20:28:48.348 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:28:48.348 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:28:48.349 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:28:48.349 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:28:48.350 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 67.3352ms
2024-11-10 20:28:55.690 +07:00 [DBG] Connection id "0HN8198R1VNQJ" received FIN.
2024-11-10 20:28:55.691 +07:00 [DBG] Connection id "0HN8198R1VNQJ" is closed. The last processed stream ID was 1.
2024-11-10 20:28:55.691 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQJ completed.
2024-11-10 20:28:55.691 +07:00 [DBG] Connection id "0HN8198R1VNQJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:28:55.704 +07:00 [DBG] Connection id "0HN8198R1VNQJ" stopped.
2024-11-10 20:29:13.350 +07:00 [DBG] Connection id "0HN8198R1VNQK" accepted.
2024-11-10 20:29:13.351 +07:00 [DBG] Connection id "0HN8198R1VNQK" started.
2024-11-10 20:29:13.354 +07:00 [DBG] Connection 0HN8198R1VNQK established using the following protocol: "Tls13"
2024-11-10 20:29:13.356 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:29:13.358 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:29:13.362 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:29:13.362 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:29:13.363 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:29:13.363 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:29:13.364 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:29:13.365 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:29:13.366 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:29:13.366 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:29:13.368 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:29:13.368 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:29:13.369 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:29:13.370 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:29:13.371 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:29:13.372 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:29:13.373 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:29:13.374 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:29:13.375 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:29:13.376 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:29:13.377 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:29:13.377 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:29:13.378 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:29:13.379 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:29:13.380 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:29:13.381 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:29:13.382 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:29:13.383 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:29:13.384 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:29:13.384 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:29:13.385 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:29:13.386 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:29:13.387 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:29:13.388 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:29:13.390 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:29:13.391 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:29:13.391 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:29:13.392 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:29:13.393 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:29:13.394 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:29:13.395 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:29:13.396 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:29:13.397 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:29:13.398 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:29:13.400 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:29:13.401 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:29:13.401 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:29:13.402 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:29:13.403 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:29:13.404 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:29:13.404 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:29:13.405 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:29:13.414 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:29:13.416 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:29:13.417 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:29:13.418 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:29:13.418 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:29:13.419 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:29:13.420 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:29:13.421 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:29:13.421 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:29:13.422 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:29:13.423 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:29:13.424 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 51.823ms
2024-11-10 20:29:13.424 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:29:13.425 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:29:13.426 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:29:13.427 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:29:13.428 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 72.6208ms
2024-11-10 20:29:15.713 +07:00 [DBG] Connection id "0HN8198R1VNQK" received FIN.
2024-11-10 20:29:15.714 +07:00 [DBG] Connection id "0HN8198R1VNQK" is closed. The last processed stream ID was 1.
2024-11-10 20:29:15.714 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQK completed.
2024-11-10 20:29:15.715 +07:00 [DBG] Connection id "0HN8198R1VNQK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:29:15.722 +07:00 [DBG] Connection id "0HN8198R1VNQK" stopped.
2024-11-10 20:29:16.400 +07:00 [DBG] Connection id "0HN8198R1VNQL" accepted.
2024-11-10 20:29:16.401 +07:00 [DBG] Connection id "0HN8198R1VNQL" started.
2024-11-10 20:29:16.405 +07:00 [DBG] Connection 0HN8198R1VNQL established using the following protocol: "Tls13"
2024-11-10 20:29:16.406 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:29:16.408 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:29:16.408 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:29:16.409 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:29:16.410 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:29:16.410 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:29:16.411 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:29:16.411 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:29:16.411 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:29:16.412 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:29:16.413 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:29:16.413 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:29:16.414 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:29:16.416 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:29:16.417 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:29:16.418 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:29:16.419 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:29:16.420 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:29:16.421 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:29:16.422 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:29:16.423 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:29:16.423 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:29:16.424 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:29:16.424 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:29:16.425 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:29:16.426 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:29:16.426 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:29:16.428 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:29:16.429 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:29:16.429 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:29:16.430 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:29:16.431 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:29:16.431 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:29:16.432 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:29:16.433 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:29:16.433 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:29:16.434 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:29:16.436 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:29:16.437 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:29:16.437 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:29:16.438 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:29:16.439 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:29:16.439 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:29:16.441 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:29:16.443 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:29:16.443 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:29:16.444 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:29:16.444 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:29:16.445 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:29:16.446 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:29:16.446 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:29:16.447 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:29:16.454 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:29:16.455 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:29:16.456 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:29:16.457 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:29:16.458 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:29:16.459 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:29:16.460 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:29:16.460 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:29:16.460 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:29:16.461 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:29:16.461 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:29:16.462 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.2761ms
2024-11-10 20:29:16.463 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:29:16.464 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:29:16.465 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:29:16.465 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:29:16.466 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 60.371ms
2024-11-10 20:29:17.868 +07:00 [DBG] Connection id "0HN8198R1VNQM" accepted.
2024-11-10 20:29:17.868 +07:00 [DBG] Connection id "0HN8198R1VNQM" started.
2024-11-10 20:29:17.871 +07:00 [DBG] Connection 0HN8198R1VNQM established using the following protocol: "Tls13"
2024-11-10 20:29:17.872 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-11-10 20:29:17.888 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-11-10 20:29:17.888 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-11-10 20:29:17.891 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-11-10 20:29:17.891 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-11-10 20:29:17.891 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 19.7343ms
2024-11-10 20:29:17.919 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-11-10 20:29:17.920 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-11-10 20:29:17.922 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 3.0869ms
2024-11-10 20:29:17.940 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.4235ms
2024-11-10 20:29:18.153 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-11-10 20:29:18.187 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 33.6266ms
2024-11-10 20:29:25.736 +07:00 [DBG] Connection id "0HN8198R1VNQM" received FIN.
2024-11-10 20:29:25.742 +07:00 [DBG] Connection id "0HN8198R1VNQL" received FIN.
2024-11-10 20:29:25.747 +07:00 [DBG] Connection id "0HN8198R1VNQL" is closed. The last processed stream ID was 1.
2024-11-10 20:29:25.749 +07:00 [DBG] Connection id "0HN8198R1VNQL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:29:25.746 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQM completed.
2024-11-10 20:29:25.746 +07:00 [DBG] Connection id "0HN8198R1VNQM" is closed. The last processed stream ID was 7.
2024-11-10 20:29:25.755 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQL completed.
2024-11-10 20:29:25.762 +07:00 [DBG] Connection id "0HN8198R1VNQM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:29:25.763 +07:00 [DBG] Connection id "0HN8198R1VNQL" stopped.
2024-11-10 20:29:25.779 +07:00 [DBG] Connection id "0HN8198R1VNQM" stopped.
2024-11-10 20:30:58.499 +07:00 [DBG] Connection id "0HN8198R1VNQN" accepted.
2024-11-10 20:30:58.503 +07:00 [DBG] Connection id "0HN8198R1VNQN" started.
2024-11-10 20:30:58.507 +07:00 [DBG] Connection 0HN8198R1VNQN established using the following protocol: "Tls13"
2024-11-10 20:30:58.513 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:30:58.518 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:30:58.519 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:30:58.519 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:30:58.520 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:30:58.520 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:30:58.521 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:30:58.522 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:30:58.522 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:30:58.523 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:30:58.524 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:30:58.525 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:30:58.526 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:30:58.527 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:30:58.527 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:30:58.528 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:30:58.529 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:30:58.530 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:30:58.531 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:30:58.531 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:30:58.532 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:30:58.533 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:30:58.533 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:30:58.534 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:30:58.534 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:30:58.535 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:30:58.536 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:30:58.537 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:30:58.537 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:30:58.538 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:30:58.539 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:30:58.539 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:30:58.540 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:30:58.541 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:30:58.541 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:30:58.542 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:30:58.543 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:30:58.544 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:30:58.545 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:30:58.546 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:30:58.546 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:30:58.547 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:30:58.547 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:30:58.548 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:30:58.550 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:30:58.551 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:30:58.551 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:30:58.552 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:30:58.553 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:30:58.553 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:30:58.554 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:30:58.554 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:30:58.567 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:30:58.568 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:30:58.569 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:30:58.570 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:30:58.571 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:30:58.572 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:30:58.573 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:30:58.574 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:30:58.574 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:30:58.575 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:30:58.575 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:30:58.576 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.605ms
2024-11-10 20:30:58.577 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:30:58.578 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:30:58.578 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:30:58.579 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:30:58.580 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 68.8047ms
2024-11-10 20:32:08.494 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:32:08.501 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:08.501 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:08.502 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:08.502 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:08.503 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:08.504 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:08.505 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:08.505 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:08.506 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:08.507 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:08.507 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:08.508 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:08.509 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:08.510 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:08.511 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:08.511 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:08.512 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:08.513 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:08.515 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:08.516 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:08.517 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:08.518 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:08.518 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:08.519 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:08.520 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:08.521 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:08.522 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:08.523 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:08.524 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:08.524 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:08.525 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:08.526 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:08.527 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:08.528 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:08.528 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:08.530 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:08.530 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:08.531 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:08.532 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:08.533 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:08.534 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:08.534 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:08.536 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:08.538 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:08.539 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:08.539 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:08.540 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:08.543 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:08.544 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:08.545 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:08.545 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:08.557 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:08.559 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:08.559 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:08.560 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:08.561 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:08.562 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:08.563 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:08.564 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:08.564 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:08.565 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:08.566 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:08.567 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 56.0063ms
2024-11-10 20:32:08.568 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:08.572 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:08.574 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:08.574 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:08.576 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 81.1675ms
2024-11-10 20:32:16.784 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:32:16.786 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:16.787 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:16.787 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:16.788 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:16.788 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:16.789 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:16.789 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:16.790 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:16.791 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:16.792 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:16.792 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:16.793 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:16.794 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:16.794 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:16.795 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:16.796 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:16.797 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:16.798 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:16.799 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:16.801 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:16.802 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:16.802 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:16.803 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:16.804 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:16.806 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:16.806 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:16.807 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:16.809 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:16.809 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:16.810 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:16.811 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:16.812 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:16.813 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:16.813 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:16.814 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:16.815 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:16.815 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:16.816 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:16.817 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:16.817 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:16.818 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:16.819 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:16.820 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:16.822 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:16.822 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:16.823 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:16.824 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:16.824 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:16.825 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:16.826 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:16.827 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:16.835 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:16.836 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:16.837 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:16.837 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:16.838 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:16.839 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:16.840 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:16.841 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:16.841 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:16.842 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:16.842 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:16.843 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.7753ms
2024-11-10 20:32:16.844 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:16.844 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:16.845 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:16.846 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:32:16.847 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 62.9793ms
2024-11-10 20:32:17.491 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:32:17.492 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:17.493 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:17.494 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:17.494 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:17.495 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:17.496 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:17.497 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:17.497 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:17.498 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:17.499 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:17.500 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:17.501 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:17.502 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:17.503 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:17.504 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:17.505 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:17.506 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:17.508 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:17.509 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:17.510 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:17.511 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:17.512 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:17.513 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:17.514 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:17.515 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:17.516 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:17.516 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:17.517 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:17.518 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:17.518 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:17.519 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:17.520 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:17.521 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:17.521 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:17.522 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:17.523 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:17.523 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:17.524 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:17.524 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:17.525 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:17.525 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:17.526 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:17.528 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:17.529 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:17.530 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:17.530 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:17.531 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:17.532 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:17.532 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:17.533 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:17.533 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:17.539 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:17.540 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:17.541 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:32:17.542 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:17.543 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:17.544 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:17.545 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:17.545 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:17.545 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:17.546 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:17.546 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:17.547 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.9221ms
2024-11-10 20:32:17.548 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:17.548 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:17.549 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:17.550 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:17.550 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 59.942ms
2024-11-10 20:32:18.040 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:32:18.041 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:18.042 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:18.042 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:18.043 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:18.043 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:18.044 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:18.044 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:18.045 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:18.045 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:18.046 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:18.047 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:18.048 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:18.048 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:18.049 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:18.050 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:18.051 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:18.051 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:18.052 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:18.054 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:18.055 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:18.056 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:18.057 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:18.058 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:18.059 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:18.060 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:18.061 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:18.062 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:18.063 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:18.063 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:18.064 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:18.065 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:18.066 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:18.066 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:18.067 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:18.067 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:18.068 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:18.069 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:18.070 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:18.071 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:18.071 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:18.072 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:18.073 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:18.074 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:18.075 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:18.075 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:18.076 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:18.077 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:18.078 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:18.078 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:18.079 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:18.079 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:18.085 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:18.087 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:18.087 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:18.088 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:18.088 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:18.090 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:18.091 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:18.091 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:18.092 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:18.092 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:18.093 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:18.094 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.8202ms
2024-11-10 20:32:18.094 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:18.095 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:18.095 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:18.096 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:18.097 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 57.4707ms
2024-11-10 20:32:27.312 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:32:27.314 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:27.314 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:27.315 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:27.316 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:27.316 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:27.317 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:27.317 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:27.318 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:27.318 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:27.319 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:27.320 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:27.321 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:27.322 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:27.322 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:27.323 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:27.324 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:27.325 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:27.326 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:27.326 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:27.327 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:27.328 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:27.328 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:27.329 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:27.329 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:27.330 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:27.331 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:27.333 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:27.334 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:27.335 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:27.335 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:27.336 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:27.337 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:27.337 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:27.338 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:27.339 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:27.339 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:27.340 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:27.341 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:27.342 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:27.342 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:27.343 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:27.344 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:27.345 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:27.348 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:27.348 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:27.348 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:27.349 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:27.349 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:27.350 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:27.350 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:27.351 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:27.358 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:27.359 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:27.360 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:27.361 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:27.362 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:27.363 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:27.364 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:27.364 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:27.365 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:27.365 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:27.366 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:27.367 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.3256ms
2024-11-10 20:32:27.367 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:27.368 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:27.369 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:27.372 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-11-10 20:32:27.373 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 60.7095ms
2024-11-10 20:32:34.093 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:32:34.095 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:34.096 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:34.097 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:34.098 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:34.099 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:34.101 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:34.101 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:34.103 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:34.103 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:34.105 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:34.106 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:34.108 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:34.110 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:34.111 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:34.113 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:34.114 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:34.115 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:34.116 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:34.117 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:34.118 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:34.119 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:34.120 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:34.121 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:34.122 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:34.123 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:34.124 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:34.124 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:34.125 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:34.126 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:34.126 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:34.127 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:34.128 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:34.129 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:34.131 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:34.134 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:34.136 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:34.137 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:34.138 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:34.140 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:34.141 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:34.142 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:34.142 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:34.143 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:34.145 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:34.145 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:34.146 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:34.147 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:34.148 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:34.148 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:34.149 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:34.149 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:32:34.155 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:32:34.157 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:34.158 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:34.158 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:34.159 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:34.160 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:34.161 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:34.161 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:34.162 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:34.162 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:34.162 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:34.165 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 52.1338ms
2024-11-10 20:32:34.169 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:34.170 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:34.170 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:34.171 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:34.172 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 79.6011ms
2024-11-10 20:32:35.428 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:32:35.430 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:35.431 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:35.432 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:35.432 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:35.433 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:35.434 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:35.434 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:35.434 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:35.435 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:35.436 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:35.436 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:35.437 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:35.438 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:35.439 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:35.440 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:35.440 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:35.441 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:35.442 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:35.442 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:35.443 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:35.444 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:35.444 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:35.445 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:35.445 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:35.446 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:35.447 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:35.447 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:35.448 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:35.448 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:35.449 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:35.450 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:35.451 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:35.451 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:35.452 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:35.453 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:35.453 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:35.454 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:35.454 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:35.455 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:35.456 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:35.456 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:35.457 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:35.458 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:35.460 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:35.460 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:35.461 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:35.461 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:35.462 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:35.462 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:35.463 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:35.464 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:35.468 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:35.470 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:35.470 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:35.471 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:35.472 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:35.473 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:35.474 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:35.474 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:35.474 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:35.475 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:35.475 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:35.476 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.4557ms
2024-11-10 20:32:35.477 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:35.477 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:35.478 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:35.479 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:35.480 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 51.9723ms
2024-11-10 20:32:36.398 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:32:36.399 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:36.400 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:36.400 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:36.401 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:36.402 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:36.403 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:36.403 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:36.404 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:36.404 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:36.405 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:36.406 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:36.406 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:36.407 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:36.408 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:36.409 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:36.409 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:36.410 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:36.411 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:36.412 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:36.412 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:36.413 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:36.413 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:36.414 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:36.415 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:36.415 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:36.416 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:36.417 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:36.418 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:36.418 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:36.419 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:36.420 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:36.420 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:36.421 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:36.421 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:36.422 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:36.423 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:36.423 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:36.424 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:36.425 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:36.425 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:36.426 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:36.426 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:36.427 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:36.428 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:36.429 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:36.429 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:36.430 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:36.431 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:36.431 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:36.432 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:36.432 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:32:36.438 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:32:36.440 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:36.440 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:36.441 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:36.441 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:36.442 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:36.443 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:36.443 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:36.444 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:36.444 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:36.445 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:36.447 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.2497ms
2024-11-10 20:32:36.448 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:36.448 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:36.449 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:36.450 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:36.451 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 52.5992ms
2024-11-10 20:32:37.286 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:32:37.287 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:37.288 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:37.288 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:37.289 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:37.290 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:37.291 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:37.291 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:37.292 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:37.293 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:37.294 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:37.295 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:37.295 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:37.297 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:37.298 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:37.299 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:37.300 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:37.300 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:37.301 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:37.302 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:37.303 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:37.303 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:37.304 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:37.305 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:37.306 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:37.306 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:37.307 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:37.308 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:37.309 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:37.309 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:37.310 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:37.311 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:37.311 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:37.312 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:37.313 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:37.313 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:37.314 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:37.315 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:37.315 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:37.316 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:37.317 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:37.317 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:37.318 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:37.319 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:37.321 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:37.321 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:37.322 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:37.322 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:37.323 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:37.323 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:37.324 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:37.325 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:37.341 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:37.342 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:37.343 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:37.344 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:37.344 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:37.345 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:37.347 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:37.347 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:37.347 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:37.348 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:37.349 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:37.350 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 51.1707ms
2024-11-10 20:32:37.351 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:37.351 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:37.352 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:37.353 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:37.354 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 68.4223ms
2024-11-10 20:32:38.282 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:32:38.284 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:38.284 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:38.285 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:38.285 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:38.286 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:38.286 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:38.287 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:38.287 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:38.288 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:38.288 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:38.289 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:38.290 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:38.291 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:38.292 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:38.292 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:38.293 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:38.294 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:38.294 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:38.295 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:38.296 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:38.296 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:38.297 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:38.297 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:38.298 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:38.298 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:38.299 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:38.300 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:38.300 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:38.301 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:38.301 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:38.302 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:38.302 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:38.303 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:38.304 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:38.304 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:38.305 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:38.305 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:38.306 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:38.307 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:38.307 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:38.308 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:38.308 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:38.309 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:38.310 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:38.311 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:38.311 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:38.312 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:38.312 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:38.313 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:38.313 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:38.314 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:32:38.325 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:32:38.326 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:38.327 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:38.328 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:38.329 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:38.329 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:38.330 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:38.330 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:38.331 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:38.331 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:38.332 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:38.333 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.8686ms
2024-11-10 20:32:38.335 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:38.335 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:38.336 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:38.336 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:38.337 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 54.7379ms
2024-11-10 20:32:39.291 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:32:39.293 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:39.293 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:39.294 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:39.295 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:39.295 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:39.296 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:39.297 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:39.298 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:39.298 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:39.299 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:39.300 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:39.300 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:39.301 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:39.302 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:39.303 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:39.304 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:39.305 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:39.305 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:39.307 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:39.307 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:39.308 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:39.309 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:39.309 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:39.310 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:39.311 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:39.312 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:39.313 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:39.314 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:39.314 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:39.315 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:39.316 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:39.316 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:39.317 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:39.318 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:39.319 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:39.320 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:39.320 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:39.321 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:39.322 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:39.322 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:39.323 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:39.324 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:39.325 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:39.327 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:39.328 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:39.329 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:39.329 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:39.330 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:39.331 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:39.332 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:39.332 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:39.343 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:39.344 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:39.345 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:39.345 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:39.346 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:39.347 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:39.348 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:39.348 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:39.349 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:39.349 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:39.349 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:39.350 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 46.9376ms
2024-11-10 20:32:39.351 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:39.352 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:39.352 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:39.354 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:32:39.355 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 63.5837ms
2024-11-10 20:32:40.045 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:32:40.046 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:40.047 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:40.048 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:40.048 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:40.049 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:40.050 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:40.051 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:40.051 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:40.052 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:40.053 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:40.054 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:40.055 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:40.056 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:40.057 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:40.058 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:40.058 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:40.059 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:40.060 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:40.061 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:40.062 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:40.064 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:40.065 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:40.066 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:40.066 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:40.067 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:40.068 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:40.068 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:40.069 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:40.070 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:40.070 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:40.071 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:40.072 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:40.072 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:40.073 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:40.073 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:40.074 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:40.075 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:40.076 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:40.077 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:40.077 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:40.078 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:40.079 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:40.079 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:40.080 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:40.081 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:40.082 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:40.082 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:40.083 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:40.083 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:40.084 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:40.085 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:32:40.095 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:32:40.097 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:40.098 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:32:40.099 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:40.100 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:40.101 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:40.102 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:40.102 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:40.102 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:40.103 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:40.103 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:40.105 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 47.3469ms
2024-11-10 20:32:40.106 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:40.106 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:40.107 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:40.107 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:40.108 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 63.5607ms
2024-11-10 20:32:54.952 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:32:54.953 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:54.954 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:54.954 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:54.955 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:54.955 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:54.956 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:54.957 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:54.957 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:54.958 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:54.958 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:54.959 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:54.959 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:54.960 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:54.961 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:54.962 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:54.963 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:54.963 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:54.964 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:54.964 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:54.965 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:54.966 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:54.966 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:54.967 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:54.967 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:54.968 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:54.969 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:54.969 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:54.970 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:54.971 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:54.972 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:54.973 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:54.973 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:54.974 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:54.974 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:54.975 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:54.976 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:54.976 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:54.977 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:54.978 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:54.979 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:54.979 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:54.980 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:54.981 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:54.982 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:54.982 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:54.983 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:54.984 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:54.984 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:54.985 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:54.985 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:54.986 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:32:54.992 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:32:54.994 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:54.994 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:54.995 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:54.995 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:54.996 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:54.997 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:54.997 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:54.998 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:54.998 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:54.999 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:55.001 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.2383ms
2024-11-10 20:32:55.002 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:55.003 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:55.004 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:55.004 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:55.005 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 53.4269ms
2024-11-10 20:32:56.435 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:32:56.437 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:56.438 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:56.438 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:56.439 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:56.439 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:56.440 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:56.440 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:56.441 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:56.441 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:56.442 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:56.443 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:56.443 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:56.444 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:56.445 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:56.446 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:56.446 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:56.447 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:56.447 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:56.448 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:56.449 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:56.449 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:56.450 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:56.450 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:56.451 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:56.451 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:56.452 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:56.453 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:56.454 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:56.454 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:56.455 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:56.455 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:56.456 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:56.457 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:56.458 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:56.458 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:56.459 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:56.459 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:56.460 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:56.460 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:56.461 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:56.462 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:56.462 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:56.463 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:56.464 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:56.465 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:56.465 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:56.466 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:56.466 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:56.467 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:56.467 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:56.468 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:56.472 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:56.473 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:56.474 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:56.475 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:56.475 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:56.476 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:56.477 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:56.477 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:56.478 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:56.478 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:56.479 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:56.479 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.6775ms
2024-11-10 20:32:56.480 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:56.480 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:56.481 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:56.482 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:56.482 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 48.0494ms
2024-11-10 20:32:57.113 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:32:57.114 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:57.114 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:57.115 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:57.116 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:57.116 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:57.117 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:57.118 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:57.118 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:57.119 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:57.120 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:57.120 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:57.121 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:57.122 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:57.124 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:57.124 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:57.125 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:57.126 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:57.126 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:57.127 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:57.127 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:57.128 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:57.128 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:57.129 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:57.130 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:57.130 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:57.131 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:57.132 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:57.132 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:57.133 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:57.133 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:57.134 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:57.134 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:57.135 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:57.136 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:57.136 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:57.137 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:57.138 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:57.138 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:57.139 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:57.140 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:57.140 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:57.141 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:57.142 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:57.142 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:57.143 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:57.143 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:57.144 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:57.145 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:57.145 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:57.146 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:57.146 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:32:57.151 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:32:57.152 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:57.153 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:57.153 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:57.154 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:57.155 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:57.155 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:57.156 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:57.156 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:57.157 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:57.157 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:57.159 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.3067ms
2024-11-10 20:32:57.160 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:57.161 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:57.161 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:57.162 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:57.162 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 49.4986ms
2024-11-10 20:32:58.453 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:32:58.454 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:32:58.455 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:32:58.455 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:32:58.456 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:32:58.457 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:32:58.457 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:58.458 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:32:58.459 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:58.459 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:32:58.460 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:32:58.461 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:32:58.461 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:58.462 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:32:58.464 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:32:58.464 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:58.465 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:32:58.466 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:32:58.467 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:58.468 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:32:58.469 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:58.469 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:32:58.470 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:32:58.471 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:32:58.472 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:58.473 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:32:58.474 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:58.474 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:58.475 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:58.475 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:32:58.476 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:32:58.476 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:58.477 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:32:58.478 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:58.479 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:58.479 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:32:58.480 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:32:58.480 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:58.481 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:32:58.482 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:58.483 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:58.483 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:32:58.484 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:32:58.485 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:32:58.487 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:32:58.487 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:32:58.488 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:58.489 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:58.489 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:32:58.490 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:32:58.491 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:32:58.491 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:58.497 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:32:58.499 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:58.499 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:32:58.500 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:58.501 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:32:58.502 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:32:58.503 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:32:58.503 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:32:58.503 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:32:58.504 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:32:58.505 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:32:58.506 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.3592ms
2024-11-10 20:32:58.507 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:32:58.507 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:32:58.508 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:32:58.509 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:32:58.510 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 57.4292ms
2024-11-10 20:33:02.622 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:33:02.624 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:02.625 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:02.625 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:02.626 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:02.627 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:02.627 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:02.628 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:02.628 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:02.628 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:02.629 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:02.630 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:02.631 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:02.632 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:02.633 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:02.633 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:02.634 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:02.634 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:02.635 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:02.636 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:02.637 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:02.637 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:02.638 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:02.639 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:02.639 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:02.640 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:02.640 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:02.641 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:02.642 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:02.642 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:02.643 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:02.644 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:02.645 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:02.645 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:02.646 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:02.646 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:02.647 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:02.647 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:02.648 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:02.649 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:02.649 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:02.650 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:02.651 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:02.652 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:02.654 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:02.654 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:02.655 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:02.655 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:02.656 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:02.656 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:02.657 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:02.658 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:02.662 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:02.664 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:02.664 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:02.665 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:02.666 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:02.667 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:02.668 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:02.668 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:02.669 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:02.669 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:02.670 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:02.671 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.7682ms
2024-11-10 20:33:02.672 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:02.673 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:02.673 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:02.674 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:02.675 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 53.1057ms
2024-11-10 20:33:09.442 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:33:09.445 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:09.445 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:09.447 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:09.448 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:09.450 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:09.451 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:09.452 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:09.452 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:09.453 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:09.454 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:09.455 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:09.456 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:09.458 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:09.459 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:09.460 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:09.461 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:09.462 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:09.463 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:09.464 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:09.465 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:09.465 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:09.466 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:09.466 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:09.467 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:09.468 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:09.468 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:09.469 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:09.470 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:09.471 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:09.472 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:09.472 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:09.473 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:09.474 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:09.474 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:09.475 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:09.475 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:09.476 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:09.478 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:09.479 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:09.480 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:09.480 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:09.482 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:09.485 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:09.487 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:09.488 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:09.489 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:09.490 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:09.491 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:09.492 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:09.492 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:09.493 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:09.503 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:09.505 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:09.506 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:09.506 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:09.507 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:09.508 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:09.510 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:09.510 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:09.510 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:09.511 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:09.512 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:09.513 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 52.5545ms
2024-11-10 20:33:09.513 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:09.514 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:09.515 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:09.516 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:09.517 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 76.0762ms
2024-11-10 20:33:09.980 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:33:09.981 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:09.982 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:09.982 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:09.983 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:09.983 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:09.984 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:09.985 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:09.985 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:09.986 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:09.987 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:09.988 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:09.988 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:09.989 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:09.990 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:09.991 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:09.992 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:09.993 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:09.993 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:09.994 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:09.994 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:09.995 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:09.996 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:09.997 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:09.998 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:09.998 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:09.999 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:10.000 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:10.000 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:10.001 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:10.001 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:10.002 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:10.003 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:10.003 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:10.004 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:10.005 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:10.005 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:10.006 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:10.006 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:10.007 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:10.008 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:10.008 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:10.009 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:10.010 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:10.011 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:10.012 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:10.012 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:10.013 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:10.014 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:10.014 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:10.015 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:10.015 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:10.020 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:10.021 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:10.022 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:10.023 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:10.023 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:10.024 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:10.025 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:10.026 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:10.026 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:10.027 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:10.027 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:10.029 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.6289ms
2024-11-10 20:33:10.030 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:10.031 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:10.031 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:10.032 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:10.033 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 53.8769ms
2024-11-10 20:33:10.872 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:33:10.875 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:10.876 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:10.877 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:10.878 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:10.880 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:10.881 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:10.883 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:10.884 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:10.885 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:10.886 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:10.890 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:10.892 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:10.895 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:10.896 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:10.902 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:10.904 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:10.906 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:10.909 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:10.910 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:10.912 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:10.915 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:10.917 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:10.917 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:10.920 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:10.922 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:10.923 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:10.925 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:10.926 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:10.930 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:10.932 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:10.934 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:10.936 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:10.938 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:10.939 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:10.943 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:10.946 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:10.951 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:10.953 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:10.955 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:10.956 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:10.957 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:10.959 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:10.960 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:10.965 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:10.966 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:10.967 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:10.968 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:10.969 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:10.970 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:10.972 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-10 20:33:10.975 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:10.985 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:10.987 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:10.988 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:33:10.989 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:10.989 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:10.990 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:10.992 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:10.992 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:10.993 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:10.993 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:10.994 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:10.996 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 93.665ms
2024-11-10 20:33:10.997 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:10.998 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:10.999 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:11.000 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:33:11.001 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 129.1792ms
2024-11-10 20:33:11.437 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:33:11.439 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:11.440 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:11.441 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:11.442 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:11.443 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:11.445 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:11.446 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:11.447 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:11.448 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:11.451 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:11.452 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:11.453 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:11.454 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:11.455 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:11.457 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:11.459 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:11.460 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:11.461 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:11.462 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:11.463 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:11.464 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:11.464 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:11.466 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:11.467 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:11.468 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:11.469 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:11.470 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:11.472 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:11.473 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:11.475 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:11.477 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:11.479 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:11.480 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:11.482 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:11.483 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:11.485 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:11.486 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:11.487 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:11.488 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:11.489 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:11.491 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:11.492 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:11.494 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:11.496 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:11.500 +07:00 [DBG] Created DbConnection. (4ms).
2024-11-10 20:33:11.501 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:11.503 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:11.507 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:11.508 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:11.509 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-10 20:33:11.511 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:11.521 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:11.523 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:11.524 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:33:11.525 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:11.527 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:33:11.528 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:11.530 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:11.531 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:11.531 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:11.533 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:11.534 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:11.538 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 80.5521ms
2024-11-10 20:33:11.539 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:11.540 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:11.541 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:11.544 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-10 20:33:11.546 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 108.5152ms
2024-11-10 20:33:16.816 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:33:16.818 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:16.818 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:16.819 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:16.819 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:16.820 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:16.820 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:16.821 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:16.821 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:16.822 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:16.823 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:16.824 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:16.825 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:16.827 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:16.828 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:16.829 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:16.830 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:16.831 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:16.832 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:16.833 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:16.834 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:16.835 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:16.836 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:16.836 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:16.838 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:16.839 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:16.840 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:16.841 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:16.842 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:16.843 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:16.844 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:16.845 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:16.845 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:16.846 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:16.847 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:16.847 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:16.848 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:16.849 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:16.849 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:16.850 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:16.851 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:16.852 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:16.852 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:16.854 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:16.855 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:16.855 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:16.856 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:16.857 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:16.857 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:16.858 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:16.859 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:16.859 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:16.864 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:16.866 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:16.866 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:16.867 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:16.868 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:16.869 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:16.870 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:16.871 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:16.871 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:16.872 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:16.873 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:16.875 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 45.3934ms
2024-11-10 20:33:16.876 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:16.876 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:16.877 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:16.878 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:16.878 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 62.8179ms
2024-11-10 20:33:18.220 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:33:18.222 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:18.222 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:18.223 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:18.223 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:18.224 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:18.225 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:18.225 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:18.226 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:18.227 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:18.228 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:18.228 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:18.229 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:18.230 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:18.231 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:18.232 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:18.233 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:18.235 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:18.236 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:18.237 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:18.238 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:18.239 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:18.242 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:18.243 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:18.244 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:18.245 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:18.247 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:18.248 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:18.249 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:18.250 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:18.251 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:18.252 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:18.253 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:18.254 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:18.254 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:18.255 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:18.256 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:18.256 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:18.258 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:18.259 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:18.259 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:18.260 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:18.261 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:18.263 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:18.266 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:18.266 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:18.267 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:18.268 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:18.270 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:18.271 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:18.272 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-10 20:33:18.273 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:18.279 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:18.280 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:18.281 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:18.282 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:18.283 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:33:18.284 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:18.286 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:18.286 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:18.286 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:18.287 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:18.287 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:18.288 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 56.1501ms
2024-11-10 20:33:18.289 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:18.290 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:18.291 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:18.291 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:18.292 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 72.815ms
2024-11-10 20:33:20.068 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:33:20.069 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:20.070 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:20.070 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:20.071 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:20.071 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:20.072 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:20.072 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:20.073 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:20.073 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:20.074 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:20.075 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:20.076 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:20.077 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:20.077 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:20.078 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:20.079 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:20.080 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:20.080 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:20.081 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:20.082 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:20.082 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:20.083 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:20.084 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:20.085 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:20.085 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:20.086 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:20.087 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:20.087 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:20.088 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:20.089 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:20.090 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:20.091 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:20.091 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:20.092 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:20.092 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:20.093 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:20.093 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:20.094 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:20.095 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:20.095 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:20.096 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:20.096 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:20.097 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:20.098 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:20.099 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:20.099 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:20.100 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:20.100 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:20.101 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:20.102 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:20.102 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:20.107 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:20.109 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:20.109 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:20.110 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:20.111 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:20.111 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:20.112 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:20.113 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:20.113 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:20.113 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:20.114 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:20.115 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.0891ms
2024-11-10 20:33:20.116 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:20.117 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:20.118 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:20.119 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:20.119 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 51.838ms
2024-11-10 20:33:20.635 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:33:20.636 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:20.637 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:20.637 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:20.638 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:20.639 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:20.639 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:20.640 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:20.640 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:20.641 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:20.642 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:20.642 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:20.643 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:20.644 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:20.645 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:20.646 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:20.646 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:20.647 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:20.648 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:20.648 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:20.649 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:20.650 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:20.650 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:20.651 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:20.652 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:20.653 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:20.653 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:20.654 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:20.655 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:20.655 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:20.656 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:20.656 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:20.657 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:20.657 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:20.658 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:20.659 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:20.659 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:20.660 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:20.660 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:20.661 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:20.662 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:20.662 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:20.663 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:20.664 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:20.665 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:20.666 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:20.666 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:20.667 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:20.667 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:20.668 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:20.668 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:20.669 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:20.674 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:20.675 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:20.676 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:20.676 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:20.677 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:20.678 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:20.679 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:20.679 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:20.680 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:20.680 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:20.681 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:20.682 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.0457ms
2024-11-10 20:33:20.682 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:20.683 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:20.683 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:20.684 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:20.685 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 50.2823ms
2024-11-10 20:33:21.087 +07:00 [DBG] Connection id "0HN8198R1VNQN" received FIN.
2024-11-10 20:33:21.088 +07:00 [DBG] Connection id "0HN8198R1VNQN" is closed. The last processed stream ID was 51.
2024-11-10 20:33:21.088 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQN completed.
2024-11-10 20:33:21.089 +07:00 [DBG] Connection id "0HN8198R1VNQN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:33:21.100 +07:00 [DBG] Connection id "0HN8198R1VNQN" stopped.
2024-11-10 20:33:21.222 +07:00 [DBG] Connection id "0HN8198R1VNQO" accepted.
2024-11-10 20:33:21.222 +07:00 [DBG] Connection id "0HN8198R1VNQO" started.
2024-11-10 20:33:21.226 +07:00 [DBG] Connection 0HN8198R1VNQO established using the following protocol: "Tls13"
2024-11-10 20:33:21.228 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:33:21.229 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:21.230 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:21.230 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:21.231 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:21.231 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:21.232 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:21.233 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:21.233 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:21.234 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:21.235 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:21.236 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:21.237 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:21.238 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:21.239 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:21.239 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:21.241 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:21.241 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:21.242 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:21.243 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:21.244 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:21.244 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:21.245 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:21.246 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:21.246 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:21.247 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:21.248 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:21.248 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:21.249 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:21.250 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:21.250 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:21.251 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:21.252 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:21.252 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:21.253 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:21.253 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:21.254 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:21.255 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:21.256 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:21.257 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:21.257 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:21.258 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:21.258 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:21.259 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:21.261 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:21.261 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:21.262 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:21.263 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:21.264 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:21.264 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:21.265 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:21.265 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:21.271 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:21.273 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:21.273 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:21.274 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:21.275 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:21.276 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:21.277 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:21.278 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:21.278 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:21.279 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:21.279 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:21.281 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.3133ms
2024-11-10 20:33:21.282 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:21.283 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:21.284 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:21.285 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:21.286 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 58.3379ms
2024-11-10 20:33:23.281 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:33:23.282 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:23.283 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:23.283 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:23.284 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:23.285 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:23.285 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:23.286 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:23.287 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:23.288 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:23.289 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:23.290 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:23.291 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:23.292 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:23.292 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:23.293 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:23.294 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:23.294 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:23.295 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:23.296 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:23.297 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:23.298 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:23.298 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:23.299 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:23.300 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:23.300 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:23.301 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:23.302 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:23.302 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:23.303 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:23.304 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:23.304 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:23.305 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:23.306 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:23.306 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:23.307 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:23.308 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:23.308 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:23.309 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:23.310 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:23.311 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:23.311 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:23.312 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:23.314 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:23.315 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:23.316 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:23.316 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:23.317 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:23.318 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:23.318 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:23.319 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:23.319 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:23.326 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:23.327 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:23.327 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:23.328 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:23.329 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:23.329 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:23.330 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:23.331 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:23.331 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:23.332 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:23.332 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:23.333 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.7468ms
2024-11-10 20:33:23.334 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:23.334 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:23.335 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:23.335 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:23.336 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 55.6514ms
2024-11-10 20:33:25.025 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:33:25.027 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:25.027 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:25.028 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:25.028 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:25.029 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:25.029 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:25.030 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:25.030 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:25.031 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:25.032 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:25.033 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:25.034 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:25.035 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:25.036 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:25.037 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:25.038 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:25.039 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:25.040 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:25.040 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:25.042 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:25.042 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:25.043 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:25.044 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:25.044 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:25.045 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:25.046 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:25.047 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:25.048 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:25.049 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:25.050 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:25.050 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:25.051 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:25.052 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:25.052 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:25.053 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:25.054 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:25.054 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:25.055 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:25.055 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:25.056 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:25.057 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:25.057 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:25.058 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:25.060 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:25.060 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:25.061 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:25.062 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:25.062 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:25.063 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:25.063 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:25.064 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:25.070 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:25.072 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:25.072 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:25.073 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:25.074 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:25.074 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:25.075 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:25.076 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:25.076 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:25.077 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:25.077 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:25.079 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.5662ms
2024-11-10 20:33:25.080 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:25.082 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:25.082 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:25.083 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:25.084 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 59.1941ms
2024-11-10 20:33:25.769 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:33:25.770 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:25.771 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:25.772 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:25.772 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:25.773 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:25.773 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:25.774 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:25.775 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:25.775 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:25.777 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:25.778 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:25.778 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:25.779 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:25.780 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:25.781 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:25.783 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:25.784 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:25.785 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:25.785 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:25.786 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:25.787 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:25.787 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:25.788 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:25.789 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:25.789 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:25.790 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:25.791 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:25.792 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:25.793 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:25.793 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:25.794 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:25.794 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:25.795 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:25.796 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:25.796 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:25.797 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:25.797 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:25.798 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:25.799 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:25.800 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:25.800 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:25.801 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:25.802 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:25.803 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:25.804 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:25.804 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:25.805 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:25.806 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:25.806 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:25.807 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:25.807 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:25.813 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:25.814 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:25.815 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:25.815 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:25.817 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:33:25.828 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:25.832 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:25.833 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:25.833 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:25.834 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:25.834 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:25.835 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 54.63ms
2024-11-10 20:33:25.838 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:25.839 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:25.839 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:25.840 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:33:25.841 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 72.2801ms
2024-11-10 20:33:40.171 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:33:40.172 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:40.173 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:40.173 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:40.174 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:40.174 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:40.175 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:40.175 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:40.176 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:40.176 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:40.177 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:40.178 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:40.178 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:40.179 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:40.180 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:40.181 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:40.181 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:40.182 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:40.183 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:40.183 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:40.184 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:40.185 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:40.185 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:40.186 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:40.187 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:40.188 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:40.188 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:40.189 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:40.190 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:40.190 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:40.191 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:40.192 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:40.192 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:40.193 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:40.194 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:40.194 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:40.195 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:40.195 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:40.196 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:40.196 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:40.197 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:40.197 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:40.198 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:40.199 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:40.200 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:40.201 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:40.201 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:40.202 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:40.202 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:40.203 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:40.203 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:40.204 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:40.209 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:40.210 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:40.211 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:40.212 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:40.213 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:40.213 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:40.214 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:40.215 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:40.215 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:40.216 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:40.216 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:40.217 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.1964ms
2024-11-10 20:33:40.218 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:40.218 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:40.219 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:40.220 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:40.221 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 49.8895ms
2024-11-10 20:33:41.116 +07:00 [DBG] Connection id "0HN8198R1VNQO" received FIN.
2024-11-10 20:33:41.117 +07:00 [DBG] Connection id "0HN8198R1VNQO" is closed. The last processed stream ID was 9.
2024-11-10 20:33:41.117 +07:00 [DBG] Connection id "0HN8198R1VNQO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:33:41.119 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQO completed.
2024-11-10 20:33:41.119 +07:00 [DBG] Connection id "0HN8198R1VNQO" stopped.
2024-11-10 20:33:41.510 +07:00 [DBG] Connection id "0HN8198R1VNQP" accepted.
2024-11-10 20:33:41.510 +07:00 [DBG] Connection id "0HN8198R1VNQP" started.
2024-11-10 20:33:41.513 +07:00 [DBG] Connection 0HN8198R1VNQP established using the following protocol: "Tls13"
2024-11-10 20:33:41.516 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:33:41.518 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:41.518 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:41.519 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:41.519 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:41.520 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:41.522 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:41.523 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:41.524 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:41.525 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:41.527 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:41.527 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:41.528 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:41.529 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:41.530 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:41.530 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:41.532 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:41.533 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:41.534 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:41.535 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:41.535 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:41.536 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:41.537 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:41.539 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:41.540 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:41.541 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:41.542 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:41.542 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:41.543 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:41.544 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:41.544 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:41.545 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:41.546 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:41.547 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:41.547 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:41.548 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:41.548 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:41.549 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:41.549 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:41.550 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:41.551 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:41.551 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:41.552 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:41.553 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:41.554 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:41.555 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-10 20:33:41.556 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:41.556 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:41.557 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:41.557 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:41.558 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:41.558 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:41.563 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:33:41.564 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:41.565 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:41.566 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:41.566 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:41.567 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:41.568 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:41.569 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:41.569 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:41.569 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:41.570 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:41.571 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.92ms
2024-11-10 20:33:41.572 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:41.573 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:41.573 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:41.574 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:41.574 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 58.7202ms
2024-11-10 20:33:43.623 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:33:43.624 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:43.625 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:43.626 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:43.626 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:43.627 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:43.628 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:43.628 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:43.629 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:43.630 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:43.631 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:43.632 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:43.632 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:43.633 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:43.634 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:43.634 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:43.636 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:43.637 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:43.638 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:43.639 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:43.640 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:43.641 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:43.641 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:43.642 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:43.644 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:43.644 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:43.645 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:43.646 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:43.646 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:43.647 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:43.648 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:43.648 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:43.649 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:43.650 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:43.651 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:43.651 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:43.652 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:43.653 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:43.653 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:43.654 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:43.655 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:43.655 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:43.656 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:43.657 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:43.659 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:43.659 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:43.660 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:43.661 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:43.661 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:43.662 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:43.662 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:43.663 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:43.669 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:43.671 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:43.671 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:43.672 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:43.673 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:43.673 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:43.674 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:43.675 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:43.675 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:43.675 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:43.676 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:43.676 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.931ms
2024-11-10 20:33:43.677 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:43.678 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:43.679 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:43.679 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:43.680 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 58.2061ms
2024-11-10 20:33:52.544 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:33:52.546 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:33:52.546 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:33:52.547 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:33:52.547 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:33:52.548 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:33:52.548 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:52.549 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:33:52.549 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:52.550 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:33:52.550 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:33:52.551 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:33:52.552 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:52.553 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:33:52.554 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:33:52.555 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:52.556 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:33:52.556 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:33:52.557 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:52.557 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:33:52.558 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:52.559 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:33:52.560 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:33:52.560 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:33:52.561 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:52.562 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:33:52.562 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:52.563 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:52.563 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:52.564 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:33:52.564 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:33:52.565 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:52.566 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:33:52.567 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:52.567 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:52.568 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:33:52.569 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:33:52.569 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:52.570 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:33:52.571 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:52.571 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:52.572 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:33:52.572 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:33:52.574 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:33:52.575 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:33:52.576 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:33:52.576 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:52.577 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:52.578 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:33:52.578 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:33:52.579 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:33:52.579 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:52.591 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:33:52.592 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:52.593 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:33:52.593 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:52.594 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:33:52.595 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:33:52.596 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:33:52.597 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:33:52.597 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:33:52.597 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:33:52.598 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:33:52.598 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.3986ms
2024-11-10 20:33:52.599 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:33:52.600 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:33:52.601 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:33:52.602 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:33:52.603 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 58.616ms
2024-11-10 20:34:25.472 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:34:25.477 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:34:25.478 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:34:25.479 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:34:25.479 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:34:25.480 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:34:25.480 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:25.481 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:34:25.481 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:25.482 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:34:25.483 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:34:25.483 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:34:25.484 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:25.485 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:34:25.486 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:25.486 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:25.487 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:25.487 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:34:25.488 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:25.489 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:34:25.489 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:25.490 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:25.491 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:34:25.491 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:34:25.492 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:25.492 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:25.493 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:25.494 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:25.494 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:25.495 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:25.495 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:25.496 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:25.497 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:34:25.497 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:25.498 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:25.499 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:25.499 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:25.500 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:25.500 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:34:25.501 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:25.501 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:25.502 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:25.503 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:25.504 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:34:25.505 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:34:25.506 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:34:25.506 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:25.507 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:25.507 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:34:25.508 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:25.508 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:25.509 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:25.514 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:25.515 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:25.515 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:34:25.516 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:25.517 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:34:25.518 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:34:25.519 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:34:25.519 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:34:25.520 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:34:25.520 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:34:25.521 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:34:25.521 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.114ms
2024-11-10 20:34:25.522 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:25.526 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:34:25.528 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:25.529 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:34:25.530 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 57.3901ms
2024-11-10 20:34:29.090 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:34:29.091 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:34:29.092 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:34:29.093 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:34:29.094 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:34:29.094 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:34:29.095 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:29.096 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:34:29.096 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:29.097 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:34:29.098 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:34:29.098 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:34:29.099 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:29.101 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:34:29.101 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:29.102 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:29.103 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:29.104 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:34:29.105 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:29.106 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:34:29.107 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:29.108 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:29.109 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:34:29.111 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:34:29.112 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:29.113 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:29.115 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:29.116 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:29.117 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:29.118 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:29.118 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:29.119 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:29.120 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:34:29.121 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:29.121 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:29.122 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:29.123 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:29.124 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:29.124 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:34:29.125 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:29.125 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:29.126 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:29.126 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:29.128 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:34:29.130 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:34:29.130 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:34:29.131 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:29.132 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:29.132 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:34:29.133 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:29.133 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:29.134 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:29.139 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:29.140 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:29.141 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:34:29.142 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:29.143 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:34:29.144 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:34:29.145 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:34:29.145 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:34:29.146 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:34:29.146 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:34:29.146 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:34:29.147 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 45.0707ms
2024-11-10 20:34:29.148 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:29.149 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:34:29.149 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:29.150 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:34:29.151 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 61.1107ms
2024-11-10 20:34:31.169 +07:00 [DBG] Connection id "0HN8198R1VNQP" received FIN.
2024-11-10 20:34:31.176 +07:00 [DBG] Connection id "0HN8198R1VNQP" is closed. The last processed stream ID was 9.
2024-11-10 20:34:31.176 +07:00 [DBG] Connection id "0HN8198R1VNQP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:34:31.179 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQP completed.
2024-11-10 20:34:31.180 +07:00 [DBG] Connection id "0HN8198R1VNQP" stopped.
2024-11-10 20:34:35.747 +07:00 [DBG] Connection id "0HN8198R1VNQQ" accepted.
2024-11-10 20:34:35.748 +07:00 [DBG] Connection id "0HN8198R1VNQQ" started.
2024-11-10 20:34:35.753 +07:00 [DBG] Connection 0HN8198R1VNQQ established using the following protocol: "Tls13"
2024-11-10 20:34:35.755 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:34:35.760 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:34:35.761 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:34:35.762 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:34:35.763 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:34:35.763 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:34:35.764 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:35.765 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:34:35.766 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:35.767 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:34:35.768 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:34:35.769 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:34:35.770 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:35.771 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:34:35.772 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:35.773 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:35.774 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:35.775 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:34:35.776 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:35.777 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:34:35.777 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:35.778 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:35.779 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:34:35.779 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:34:35.780 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:35.781 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:35.781 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:35.782 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:35.783 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:35.783 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:35.784 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:35.785 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:35.785 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:34:35.786 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:35.786 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:35.787 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:35.788 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:35.788 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:35.789 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:34:35.790 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:35.790 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:35.791 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:35.792 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:35.793 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:34:35.794 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:34:35.794 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:34:35.795 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:35.796 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:35.797 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:34:35.797 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:35.798 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:34:35.798 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:35.804 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:35.805 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:35.806 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:34:35.807 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:35.807 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:34:35.808 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:34:35.809 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:34:35.810 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:34:35.810 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:34:35.811 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:34:35.811 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:34:35.812 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.5025ms
2024-11-10 20:34:35.812 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:35.813 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:34:35.813 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:35.814 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:34:35.815 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 60.5704ms
2024-11-10 20:34:36.744 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:34:36.746 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:34:36.747 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:34:36.748 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:34:36.748 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:34:36.749 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:34:36.750 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:36.750 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:34:36.751 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:36.751 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:34:36.752 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:34:36.754 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:34:36.754 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:36.755 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:34:36.756 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:36.757 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:36.758 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:36.759 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:34:36.760 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:36.762 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:34:36.763 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:36.764 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:36.765 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:34:36.767 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:34:36.768 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:36.769 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:36.770 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:36.770 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:36.771 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:36.771 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:36.772 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:36.773 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:36.774 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:34:36.775 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:36.776 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:36.776 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:36.777 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:36.778 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:36.779 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:34:36.779 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:36.780 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:36.781 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:36.782 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:36.783 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:34:36.785 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:34:36.785 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:34:36.786 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:36.787 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:36.788 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:34:36.789 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:36.790 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:34:36.790 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:36.798 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:36.799 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:36.799 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:34:36.800 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:36.801 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:34:36.803 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:34:36.804 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:34:36.805 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:34:36.805 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:34:36.806 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:34:36.806 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:34:36.807 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 49.8367ms
2024-11-10 20:34:36.808 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:36.809 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:34:36.810 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:36.810 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:34:36.812 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 67.9497ms
2024-11-10 20:34:38.085 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:34:38.086 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:34:38.087 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:34:38.088 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:34:38.088 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:34:38.089 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:34:38.089 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:38.090 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:34:38.090 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:38.091 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:34:38.092 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:34:38.092 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:34:38.093 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:38.094 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:34:38.095 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:38.095 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:38.096 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:38.097 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:34:38.097 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:38.098 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:34:38.098 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:38.099 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:38.099 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:34:38.100 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:34:38.101 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:38.101 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:38.102 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:38.103 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:38.103 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:38.104 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:38.104 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:38.105 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:38.105 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:34:38.106 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:38.107 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:38.107 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:38.108 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:38.108 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:38.109 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:34:38.109 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:38.110 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:38.110 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:38.111 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:38.112 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:34:38.113 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:34:38.114 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:34:38.114 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:38.115 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:38.115 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:34:38.116 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:38.116 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:38.117 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:34:38.122 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:34:38.123 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:38.124 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:34:38.124 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:38.125 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:34:38.126 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:34:38.127 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:34:38.127 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:34:38.128 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:34:38.128 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:34:38.129 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:34:38.131 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.1484ms
2024-11-10 20:34:38.131 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:38.132 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:34:38.132 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:38.133 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:34:38.134 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 49.5662ms
2024-11-10 20:34:38.710 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:34:38.711 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:34:38.712 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:34:38.712 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:34:38.713 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:34:38.713 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:34:38.714 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:38.714 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:34:38.715 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:38.715 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:34:38.716 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:34:38.717 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:34:38.718 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:38.719 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:34:38.719 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:38.720 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:38.721 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:38.722 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:34:38.722 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:38.723 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:34:38.724 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:38.725 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:38.725 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:34:38.726 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:34:38.727 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:38.727 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:38.728 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:38.729 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:38.729 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:38.730 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:38.731 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:38.732 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:38.733 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:34:38.733 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:38.734 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:38.734 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:38.735 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:38.735 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:38.736 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:34:38.736 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:38.737 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:38.738 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:38.738 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:38.739 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:34:38.741 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:34:38.741 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:34:38.742 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:38.742 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:38.743 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:34:38.743 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:38.744 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:38.744 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:38.749 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:38.751 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:38.751 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:34:38.752 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:38.753 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:34:38.754 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:34:38.755 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:34:38.756 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:34:38.756 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:34:38.756 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:34:38.757 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:34:38.757 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.2909ms
2024-11-10 20:34:38.758 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:38.759 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:34:38.759 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:38.760 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:34:38.761 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 51.5571ms
2024-11-10 20:34:39.252 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:34:39.254 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:34:39.254 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:34:39.255 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:34:39.256 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:34:39.256 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:34:39.257 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:39.258 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:34:39.258 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:39.259 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:34:39.260 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:34:39.261 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:34:39.262 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:39.263 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:34:39.263 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:39.264 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:39.265 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:39.265 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:34:39.266 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:39.267 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:34:39.268 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:39.268 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:39.269 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:34:39.270 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:34:39.270 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:39.271 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:39.271 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:39.272 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:39.273 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:39.273 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:39.274 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:39.275 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:39.276 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:34:39.277 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:39.277 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:39.278 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:39.278 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:39.279 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:39.280 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:34:39.281 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:39.281 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:39.282 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:39.282 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:39.283 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:34:39.285 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:34:39.285 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:34:39.285 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:39.286 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:39.287 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:34:39.288 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:39.288 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:34:39.289 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:34:39.294 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:34:39.295 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:39.296 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:34:39.296 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:39.297 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:34:39.298 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:34:39.299 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:34:39.299 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:34:39.300 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:34:39.300 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:34:39.301 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:34:39.303 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.7404ms
2024-11-10 20:34:39.304 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:39.304 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:34:39.305 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:39.306 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:34:39.306 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 55.2164ms
2024-11-10 20:34:41.177 +07:00 [DBG] Connection id "0HN8198R1VNQQ" received FIN.
2024-11-10 20:34:41.178 +07:00 [DBG] Connection id "0HN8198R1VNQQ" is closed. The last processed stream ID was 9.
2024-11-10 20:34:41.178 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQQ completed.
2024-11-10 20:34:41.179 +07:00 [DBG] Connection id "0HN8198R1VNQQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:34:41.192 +07:00 [DBG] Connection id "0HN8198R1VNQQ" stopped.
2024-11-10 20:34:57.061 +07:00 [DBG] Connection id "0HN8198R1VNQR" accepted.
2024-11-10 20:34:57.062 +07:00 [DBG] Connection id "0HN8198R1VNQR" started.
2024-11-10 20:34:57.066 +07:00 [DBG] Connection 0HN8198R1VNQR established using the following protocol: "Tls13"
2024-11-10 20:34:57.067 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:34:57.069 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:34:57.070 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:34:57.070 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:34:57.070 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:34:57.071 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:34:57.072 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:57.073 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:34:57.073 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:57.074 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:34:57.075 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:34:57.076 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:34:57.076 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:57.077 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:34:57.078 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:57.079 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:57.080 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:57.081 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:34:57.081 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:57.082 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:34:57.083 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:57.083 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:57.084 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:34:57.084 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:34:57.085 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:57.086 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:57.087 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:57.088 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:57.089 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:57.089 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:57.090 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:57.090 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:57.091 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:34:57.092 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:57.092 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:57.093 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:57.094 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:57.095 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:57.095 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:34:57.096 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:57.097 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:57.097 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:57.098 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:57.100 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:34:57.102 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:34:57.103 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-10 20:34:57.103 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:57.104 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:57.105 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:34:57.106 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:57.107 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:34:57.108 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:57.114 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:57.116 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:57.116 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:34:57.117 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:57.117 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:34:57.118 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:34:57.119 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:34:57.120 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:34:57.120 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:34:57.121 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:34:57.121 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:34:57.123 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.4128ms
2024-11-10 20:34:57.124 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:57.124 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:34:57.125 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:57.125 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:34:57.127 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 59.7185ms
2024-11-10 20:34:57.854 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:34:57.856 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:34:57.856 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:34:57.857 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:34:57.857 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:34:57.858 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:34:57.859 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:57.859 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:34:57.860 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:57.860 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:34:57.861 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:34:57.861 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:34:57.862 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:57.863 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:34:57.864 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:57.865 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:57.865 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:57.866 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:34:57.867 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:57.867 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:34:57.868 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:57.868 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:57.869 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:34:57.870 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:34:57.870 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:57.871 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:57.872 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:57.872 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:57.873 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:57.873 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:57.874 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:57.874 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:57.875 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:34:57.875 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:57.876 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:57.877 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:57.877 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:57.878 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:57.879 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:34:57.879 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:57.880 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:57.880 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:57.881 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:57.882 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:34:57.883 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:34:57.883 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:34:57.884 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:57.885 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:57.885 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:34:57.886 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:57.886 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:34:57.887 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:34:57.891 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:34:57.893 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:57.893 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:34:57.894 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:57.894 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:34:57.895 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:34:57.896 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:34:57.896 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:34:57.897 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:34:57.897 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:34:57.898 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:34:57.900 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.6538ms
2024-11-10 20:34:57.901 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:57.901 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:34:57.902 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:57.903 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:34:57.903 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 49.2879ms
2024-11-10 20:34:59.030 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:34:59.031 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:34:59.032 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:34:59.033 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:34:59.033 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:34:59.034 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:34:59.034 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:59.035 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:34:59.035 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:59.036 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:34:59.037 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:34:59.037 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:34:59.038 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:59.039 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:34:59.040 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:34:59.040 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:59.041 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:34:59.042 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:34:59.042 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:59.043 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:34:59.044 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:59.044 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:34:59.045 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:34:59.045 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:34:59.046 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:59.046 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:34:59.047 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:59.048 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:59.048 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:59.049 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:34:59.049 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:34:59.050 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:59.051 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:34:59.051 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:59.052 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:59.053 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:34:59.053 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:34:59.054 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:59.054 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:34:59.055 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:59.055 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:59.056 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:34:59.057 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:34:59.058 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:34:59.059 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:34:59.059 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:34:59.060 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:59.060 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:59.061 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:34:59.061 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:34:59.062 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:34:59.063 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:59.065 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:34:59.066 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:59.067 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:34:59.068 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:59.068 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:34:59.069 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:34:59.070 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:34:59.071 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:34:59.071 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:34:59.072 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:34:59.072 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:34:59.073 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 32.4193ms
2024-11-10 20:34:59.074 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:34:59.074 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:34:59.075 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:34:59.075 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:34:59.076 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 46.2622ms
2024-11-10 20:35:24.184 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:35:24.192 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:35:24.193 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:35:24.194 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:35:24.195 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:35:24.196 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:35:24.197 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:35:24.198 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:35:24.198 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:35:24.199 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:35:24.200 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:35:24.201 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:35:24.202 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:35:24.204 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:35:24.204 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:35:24.205 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:35:24.207 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:35:24.207 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:35:24.208 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:35:24.209 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:35:24.210 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:35:24.210 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:35:24.211 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:35:24.212 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:35:24.213 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:35:24.214 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:35:24.214 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:35:24.215 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:35:24.216 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:35:24.217 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:35:24.218 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:35:24.218 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:35:24.219 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:35:24.220 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:35:24.221 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:35:24.221 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:35:24.222 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:35:24.223 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:35:24.223 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:35:24.224 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:35:24.225 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:35:24.226 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:35:24.226 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:35:24.227 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:35:24.228 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:35:24.229 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:35:24.229 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:24.230 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:24.231 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:35:24.232 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:35:24.233 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:35:24.233 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:35:24.235 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:35:24.236 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:24.237 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:35:24.237 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:24.238 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:35:24.239 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:35:24.240 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:35:24.241 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:35:24.241 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:35:24.242 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:35:24.242 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:35:24.243 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.1701ms
2024-11-10 20:35:24.243 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:35:24.244 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:35:24.245 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:24.246 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:35:24.247 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 63.001ms
2024-11-10 20:35:25.595 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:35:25.596 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:35:25.597 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:35:25.597 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:35:25.598 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:35:25.599 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:35:25.600 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:35:25.600 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:35:25.601 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:35:25.601 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:35:25.602 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:35:25.603 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:35:25.603 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:35:25.604 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:35:25.605 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:35:25.607 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:35:25.608 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:35:25.609 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:35:25.609 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:35:25.611 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:35:25.613 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:35:25.614 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:35:25.615 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:35:25.616 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:35:25.617 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:35:25.618 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:35:25.619 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:35:25.620 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:35:25.621 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:35:25.622 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:35:25.623 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:35:25.623 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:35:25.624 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:35:25.624 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:35:25.625 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:35:25.626 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:35:25.628 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:35:25.629 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:35:25.629 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:35:25.630 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:35:25.631 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:35:25.632 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:35:25.633 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:35:25.636 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:35:25.637 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:35:25.638 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:35:25.639 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:25.640 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:25.641 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:35:25.643 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:35:25.644 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-10 20:35:25.645 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:35:25.648 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:35:25.650 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:25.652 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:35:25.653 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:25.655 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:35:25.656 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:35:25.658 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:35:25.659 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:35:25.659 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:35:25.660 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:35:25.661 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:35:25.663 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 56.3907ms
2024-11-10 20:35:25.664 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:35:25.664 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:35:25.665 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:25.666 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:35:25.666 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 71.6121ms
2024-11-10 20:35:26.423 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:35:26.425 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:35:26.426 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:35:26.426 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:35:26.427 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:35:26.427 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:35:26.428 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:35:26.428 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:35:26.429 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:35:26.429 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:35:26.430 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:35:26.431 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:35:26.431 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:35:26.432 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:35:26.433 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:35:26.435 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:35:26.436 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:35:26.437 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:35:26.437 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:35:26.438 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:35:26.439 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:35:26.439 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:35:26.440 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:35:26.441 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:35:26.442 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:35:26.442 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:35:26.443 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:35:26.444 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:35:26.444 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:35:26.445 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:35:26.446 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:35:26.446 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:35:26.447 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:35:26.447 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:35:26.448 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:35:26.448 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:35:26.449 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:35:26.449 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:35:26.450 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:35:26.451 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:35:26.451 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:35:26.452 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:35:26.453 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:35:26.454 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:35:26.455 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:35:26.455 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:35:26.456 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:26.457 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:26.457 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:35:26.458 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:35:26.458 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:35:26.459 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:35:26.461 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:35:26.462 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:26.463 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:35:26.463 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:26.464 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:35:26.464 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:35:26.466 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:35:26.466 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:35:26.466 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:35:26.467 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:35:26.467 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:35:26.470 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.9777ms
2024-11-10 20:35:26.473 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:35:26.475 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:35:26.476 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:35:26.477 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:35:26.478 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 54.7125ms
2024-11-10 20:36:40.505 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:36:40.514 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:36:40.514 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:36:40.515 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:36:40.516 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:36:40.516 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:36:40.517 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:36:40.518 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:36:40.519 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:36:40.520 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:36:40.521 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:36:40.522 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:36:40.523 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:36:40.524 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:36:40.525 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:36:40.526 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:36:40.527 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:36:40.528 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:36:40.529 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:36:40.530 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:36:40.530 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:36:40.531 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:36:40.532 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:36:40.532 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:36:40.533 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:36:40.534 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:36:40.535 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:36:40.536 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:36:40.536 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:36:40.537 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:36:40.537 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:36:40.538 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:36:40.539 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:36:40.540 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:36:40.540 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:36:40.541 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:36:40.542 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:36:40.543 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:36:40.544 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:36:40.545 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:36:40.546 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:36:40.546 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:36:40.558 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:36:40.559 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:36:40.563 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:36:40.564 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:36:40.564 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:36:40.565 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:36:40.567 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:36:40.597 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (28ms).
2024-11-10 20:36:40.616 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (49ms).
2024-11-10 20:36:40.624 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:36:40.642 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:36:40.643 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:36:40.646 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-10 20:36:40.647 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:36:40.648 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:36:40.649 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:36:40.650 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:36:40.651 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:36:40.653 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:36:40.654 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:36:40.654 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:36:40.656 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 130.3922ms
2024-11-10 20:36:40.658 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:36:40.662 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:36:40.663 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:36:40.664 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:36:40.664 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 159.534ms
2024-11-10 20:36:52.514 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:36:52.516 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:36:52.517 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:36:52.518 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:36:52.520 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:36:52.521 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:36:52.523 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:36:52.523 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:36:52.525 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:36:52.525 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:36:52.526 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:36:52.526 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:36:52.527 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:36:52.529 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:36:52.530 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:36:52.531 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:36:52.531 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:36:52.532 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:36:52.533 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:36:52.534 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:36:52.535 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:36:52.536 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:36:52.537 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:36:52.537 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:36:52.538 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:36:52.538 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:36:52.539 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:36:52.540 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:36:52.541 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:36:52.541 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:36:52.542 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:36:52.543 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:36:52.544 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:36:52.545 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:36:52.545 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:36:52.546 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:36:52.546 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:36:52.547 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:36:52.548 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:36:52.548 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:36:52.549 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:36:52.550 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:36:52.551 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:36:52.551 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:36:52.552 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:36:52.553 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:36:52.553 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:36:52.554 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:36:52.555 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:36:52.555 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:36:52.556 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:36:52.557 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:36:52.563 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:36:52.565 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:36:52.566 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:36:52.567 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:36:52.567 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:36:52.568 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:36:52.570 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:36:52.571 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:36:52.571 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:36:52.572 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:36:52.572 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:36:52.575 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.7087ms
2024-11-10 20:36:52.580 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:36:52.581 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:36:52.582 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:36:52.583 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:36:52.584 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 70.6791ms
2024-11-10 20:37:03.518 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:37:03.520 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:37:03.521 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:37:03.521 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:37:03.522 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:37:03.523 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:37:03.523 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:37:03.524 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:37:03.524 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:37:03.525 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:37:03.526 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:37:03.527 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:37:03.528 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:37:03.529 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:37:03.530 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:37:03.531 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:37:03.532 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:37:03.534 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:37:03.535 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:37:03.538 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:37:03.542 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:37:03.544 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:37:03.545 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:37:03.546 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:37:03.549 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:37:03.550 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:37:03.551 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:37:03.552 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:37:03.554 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:37:03.557 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:37:03.558 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:37:03.560 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:37:03.563 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:37:03.570 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:37:03.571 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:37:03.572 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:37:03.573 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:37:03.576 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:37:03.577 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:37:03.578 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:37:03.580 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:37:03.581 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:37:03.581 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:37:03.583 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:37:03.584 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:37:03.584 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:37:03.585 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:37:03.586 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:37:03.586 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:37:03.587 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:37:03.587 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:37:03.587 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:37:03.594 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:37:03.596 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:37:03.597 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:37:03.598 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:37:03.598 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:37:03.599 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:37:03.600 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:37:03.601 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:37:03.601 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:37:03.602 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:37:03.603 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:37:03.606 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 74.9218ms
2024-11-10 20:37:03.611 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:37:03.612 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:37:03.613 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:37:03.614 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:37:03.614 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 96.5429ms
2024-11-10 20:37:41.391 +07:00 [DBG] Connection id "0HN8198R1VNQR" received FIN.
2024-11-10 20:37:41.392 +07:00 [DBG] Connection id "0HN8198R1VNQR" is closed. The last processed stream ID was 17.
2024-11-10 20:37:41.392 +07:00 [DBG] Connection id "0HN8198R1VNQR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:37:41.398 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQR completed.
2024-11-10 20:37:41.398 +07:00 [DBG] Connection id "0HN8198R1VNQR" stopped.
2024-11-10 20:38:40.502 +07:00 [DBG] Connection id "0HN8198R1VNQS" accepted.
2024-11-10 20:38:40.506 +07:00 [DBG] Connection id "0HN8198R1VNQS" started.
2024-11-10 20:38:40.513 +07:00 [DBG] Connection 0HN8198R1VNQS established using the following protocol: "Tls13"
2024-11-10 20:38:40.520 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:38:40.524 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:38:40.525 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:38:40.526 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:38:40.526 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:38:40.527 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:38:40.527 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:38:40.528 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:38:40.528 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:38:40.528 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:38:40.529 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:38:40.530 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:38:40.531 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:38:40.531 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:38:40.532 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:38:40.533 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:38:40.534 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:38:40.535 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:38:40.535 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:38:40.536 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:38:40.536 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:38:40.537 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:38:40.537 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:38:40.538 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:38:40.538 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:38:40.539 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:38:40.540 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:38:40.540 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:38:40.541 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:38:40.542 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:38:40.542 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:38:40.543 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:38:40.543 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:38:40.544 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:38:40.544 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:38:40.545 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:38:40.546 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:38:40.546 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:38:40.547 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:38:40.548 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:38:40.548 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:38:40.549 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:38:40.549 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:38:40.550 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:38:40.551 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:38:40.552 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:38:40.552 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:38:40.553 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:38:40.554 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:38:40.554 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:38:40.555 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:38:40.555 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:38:40.567 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:38:40.568 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:38:40.569 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:38:40.570 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:38:40.570 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:38:40.571 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:38:40.572 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:38:40.573 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:38:40.573 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:38:40.574 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:38:40.574 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:38:40.577 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.0434ms
2024-11-10 20:38:40.582 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:38:40.584 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:38:40.584 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:38:40.585 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:38:40.586 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 66.2353ms
2024-11-10 20:39:31.547 +07:00 [DBG] Connection id "0HN8198R1VNQS" received FIN.
2024-11-10 20:39:31.548 +07:00 [DBG] Connection id "0HN8198R1VNQS" is closed. The last processed stream ID was 1.
2024-11-10 20:39:31.549 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQS completed.
2024-11-10 20:39:31.554 +07:00 [DBG] Connection id "0HN8198R1VNQS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:39:31.562 +07:00 [DBG] Connection id "0HN8198R1VNQS" stopped.
2024-11-10 20:40:00.498 +07:00 [DBG] Connection id "0HN8198R1VNQT" accepted.
2024-11-10 20:40:00.500 +07:00 [DBG] Connection id "0HN8198R1VNQT" started.
2024-11-10 20:40:00.506 +07:00 [DBG] Connection 0HN8198R1VNQT established using the following protocol: "Tls13"
2024-11-10 20:40:00.511 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:40:00.515 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:40:00.516 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:40:00.517 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:40:00.517 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:40:00.518 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:40:00.519 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:00.520 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:40:00.521 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:00.522 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:40:00.523 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:40:00.523 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:40:00.524 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:40:00.525 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:40:00.526 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:40:00.526 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:40:00.527 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:40:00.528 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:40:00.528 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:40:00.529 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:40:00.530 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:40:00.531 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:40:00.531 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:40:00.532 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:40:00.532 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:40:00.533 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:40:00.533 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:00.534 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:00.535 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:00.535 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:40:00.536 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:00.537 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:40:00.537 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:40:00.538 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:00.539 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:00.539 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:40:00.540 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:00.540 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:40:00.541 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:40:00.542 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:00.543 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:00.543 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:40:00.544 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:00.545 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:40:00.546 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:40:00.546 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:40:00.547 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:00.547 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:00.548 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:40:00.548 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:40:00.549 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:40:00.550 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:40:00.561 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:40:00.562 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:00.563 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:40:00.564 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:00.565 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:40:00.566 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:40:00.567 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:40:00.567 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:40:00.568 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:40:00.568 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:40:00.568 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:40:00.570 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.6808ms
2024-11-10 20:40:00.571 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:00.572 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:40:00.573 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:00.573 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:40:00.574 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 63.2947ms
2024-11-10 20:40:01.593 +07:00 [DBG] Connection id "0HN8198R1VNQT" received FIN.
2024-11-10 20:40:01.593 +07:00 [DBG] Connection id "0HN8198R1VNQT" is closed. The last processed stream ID was 1.
2024-11-10 20:40:01.594 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQT completed.
2024-11-10 20:40:01.594 +07:00 [DBG] Connection id "0HN8198R1VNQT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:40:01.608 +07:00 [DBG] Connection id "0HN8198R1VNQT" stopped.
2024-11-10 20:40:24.515 +07:00 [DBG] Connection id "0HN8198R1VNQU" accepted.
2024-11-10 20:40:24.520 +07:00 [DBG] Connection id "0HN8198R1VNQU" started.
2024-11-10 20:40:24.526 +07:00 [DBG] Connection 0HN8198R1VNQU established using the following protocol: "Tls13"
2024-11-10 20:40:24.534 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:40:24.540 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:40:24.541 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:40:24.542 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:40:24.542 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:40:24.543 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:40:24.544 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:24.545 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:40:24.545 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:24.546 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:40:24.547 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:40:24.548 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:40:24.548 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:40:24.549 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:40:24.550 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:40:24.551 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:40:24.552 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:40:24.553 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:40:24.554 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:40:24.555 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:40:24.556 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:40:24.557 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:40:24.557 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:40:24.558 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:40:24.559 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:40:24.560 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:40:24.560 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:24.561 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:24.562 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:24.563 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:40:24.563 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:24.564 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:40:24.565 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:40:24.565 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:24.566 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:24.566 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:40:24.567 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:24.567 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:40:24.568 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:40:24.569 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:24.570 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:24.571 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:40:24.571 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:24.573 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:40:24.574 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:40:24.574 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:40:24.574 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:24.575 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:24.576 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:40:24.577 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:40:24.578 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:40:24.578 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:40:24.584 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:40:24.585 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:24.586 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:40:24.587 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:24.587 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:40:24.588 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:40:24.589 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:40:24.589 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:40:24.590 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:40:24.591 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:40:24.591 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:40:24.593 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.0705ms
2024-11-10 20:40:24.594 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:24.595 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:40:24.596 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:24.597 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:40:24.598 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 64.229ms
2024-11-10 20:40:31.653 +07:00 [DBG] Connection id "0HN8198R1VNQU" received FIN.
2024-11-10 20:40:31.653 +07:00 [DBG] Connection id "0HN8198R1VNQU" is closed. The last processed stream ID was 1.
2024-11-10 20:40:31.653 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQU completed.
2024-11-10 20:40:31.654 +07:00 [DBG] Connection id "0HN8198R1VNQU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:40:31.668 +07:00 [DBG] Connection id "0HN8198R1VNQU" stopped.
2024-11-10 20:40:36.496 +07:00 [DBG] Connection id "0HN8198R1VNQV" accepted.
2024-11-10 20:40:36.497 +07:00 [DBG] Connection id "0HN8198R1VNQV" started.
2024-11-10 20:40:36.500 +07:00 [DBG] Connection 0HN8198R1VNQV established using the following protocol: "Tls13"
2024-11-10 20:40:36.501 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:40:36.503 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:40:36.504 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:40:36.504 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:40:36.505 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:40:36.505 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:40:36.506 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:36.507 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:40:36.507 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:36.508 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:40:36.509 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:40:36.509 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:40:36.510 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:40:36.511 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:40:36.511 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:40:36.512 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:40:36.513 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:40:36.514 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:40:36.514 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:40:36.515 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:40:36.516 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:40:36.516 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:40:36.517 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:40:36.517 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:40:36.518 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:40:36.519 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:40:36.519 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:36.521 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:36.521 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:36.522 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:40:36.523 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:36.523 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:40:36.524 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:40:36.525 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:36.525 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:36.526 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:40:36.526 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:36.527 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:40:36.528 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:40:36.529 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:36.529 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:36.530 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:40:36.530 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:36.532 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:40:36.533 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:40:36.533 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:40:36.534 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:36.535 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:36.535 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:40:36.536 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:40:36.537 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:40:36.537 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:40:36.543 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:40:36.545 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:36.546 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:40:36.546 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:36.547 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:40:36.547 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:40:36.549 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:40:36.549 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:40:36.550 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:40:36.550 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:40:36.551 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:40:36.553 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.6603ms
2024-11-10 20:40:36.554 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:36.554 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:40:36.555 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:36.556 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:40:36.557 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 55.748ms
2024-11-10 20:40:38.650 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:40:38.651 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:40:38.651 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:40:38.652 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:40:38.652 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:40:38.653 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:40:38.654 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:38.654 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:40:38.655 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:38.655 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:40:38.656 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:40:38.657 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:40:38.657 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:40:38.658 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:40:38.659 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:40:38.660 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:40:38.661 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:40:38.662 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:40:38.663 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:40:38.664 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:40:38.664 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:40:38.665 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:40:38.666 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:40:38.667 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:40:38.667 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:40:38.668 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:40:38.669 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:38.671 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:38.672 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:38.674 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:40:38.675 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:38.676 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:40:38.676 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:40:38.677 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:38.677 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:38.678 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:40:38.678 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:38.679 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:40:38.680 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:40:38.681 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:38.681 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:38.682 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:40:38.682 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:38.683 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:40:38.684 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:40:38.685 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:40:38.685 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:38.686 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:38.686 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:40:38.687 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:40:38.688 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:40:38.688 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:40:38.694 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:40:38.696 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:38.697 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:40:38.697 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:38.698 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:40:38.699 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:40:38.700 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:40:38.700 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:40:38.700 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:40:38.701 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:40:38.702 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:40:38.703 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.579ms
2024-11-10 20:40:38.704 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:38.704 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:40:38.705 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:38.705 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:40:38.706 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 56.4035ms
2024-11-10 20:40:41.660 +07:00 [DBG] Connection id "0HN8198R1VNQV" received FIN.
2024-11-10 20:40:41.661 +07:00 [DBG] Connection id "0HN8198R1VNQV" is closed. The last processed stream ID was 3.
2024-11-10 20:40:41.662 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNQV completed.
2024-11-10 20:40:41.662 +07:00 [DBG] Connection id "0HN8198R1VNQV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:40:41.678 +07:00 [DBG] Connection id "0HN8198R1VNQV" stopped.
2024-11-10 20:40:43.089 +07:00 [DBG] Connection id "0HN8198R1VNR0" accepted.
2024-11-10 20:40:43.090 +07:00 [DBG] Connection id "0HN8198R1VNR0" started.
2024-11-10 20:40:43.093 +07:00 [DBG] Connection 0HN8198R1VNR0 established using the following protocol: "Tls13"
2024-11-10 20:40:43.095 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:40:43.096 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:40:43.096 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:40:43.097 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:40:43.098 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:40:43.099 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:40:43.099 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:43.100 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:40:43.101 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:43.101 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:40:43.102 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:40:43.103 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:40:43.104 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:40:43.105 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:40:43.106 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:40:43.107 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:40:43.109 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:40:43.109 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:40:43.111 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:40:43.112 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:40:43.113 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:40:43.113 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:40:43.114 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:40:43.114 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:40:43.115 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:40:43.116 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:40:43.116 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:43.118 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:43.118 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:43.119 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:40:43.120 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:40:43.120 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:40:43.121 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:40:43.122 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:43.122 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:43.123 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:40:43.123 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:40:43.124 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:40:43.125 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:40:43.126 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:43.126 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:43.127 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:40:43.128 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:40:43.129 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:40:43.130 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:40:43.131 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:40:43.132 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:43.133 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:43.133 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:40:43.134 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:40:43.134 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:40:43.135 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:40:43.141 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:40:43.143 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:43.143 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:40:43.144 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:43.144 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:40:43.145 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:40:43.147 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:40:43.147 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:40:43.148 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:40:43.148 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:40:43.149 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:40:43.149 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.9753ms
2024-11-10 20:40:43.150 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:40:43.150 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:40:43.151 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:40:43.152 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:40:43.153 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 58.062ms
2024-11-10 20:41:13.108 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:41:13.115 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:41:13.115 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:41:13.116 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:41:13.117 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:41:13.117 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:41:13.118 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:41:13.119 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:41:13.119 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:41:13.120 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:41:13.121 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:41:13.121 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:41:13.122 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:41:13.123 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:41:13.123 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:41:13.125 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:41:13.125 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:41:13.126 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:41:13.127 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:41:13.128 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:41:13.129 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:41:13.129 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:41:13.131 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:41:13.132 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:41:13.133 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:41:13.134 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:41:13.135 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:41:13.136 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:41:13.136 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:41:13.138 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:41:13.138 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:41:13.139 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:41:13.140 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:41:13.141 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:41:13.141 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:41:13.142 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:41:13.142 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:41:13.143 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:41:13.144 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:41:13.145 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:41:13.146 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:41:13.146 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:41:13.147 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:41:13.148 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:41:13.150 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:41:13.150 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:41:13.151 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:41:13.152 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:41:13.153 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:41:13.153 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:41:13.154 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:41:13.155 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:41:13.161 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:41:13.162 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:41:13.163 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:41:13.163 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:41:13.164 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:41:13.165 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:41:13.166 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:41:13.167 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:41:13.167 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:41:13.167 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:41:13.168 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:41:13.169 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 44.2244ms
2024-11-10 20:41:13.169 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:41:13.170 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:41:13.171 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:41:13.171 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:41:13.172 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 63.5889ms
2024-11-10 20:45:23.510 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:45:23.517 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:45:23.518 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:45:23.519 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:45:23.519 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:45:23.520 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:45:23.521 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:45:23.521 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:45:23.522 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:45:23.522 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:45:23.523 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:45:23.524 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:45:23.525 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:45:23.525 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:45:23.526 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:45:23.528 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:45:23.529 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:45:23.530 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:45:23.530 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:45:23.531 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:45:23.532 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:45:23.533 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:45:23.534 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:45:23.535 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:45:23.535 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:45:23.536 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:45:23.536 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:45:23.537 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:45:23.538 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:45:23.539 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:45:23.539 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:45:23.540 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:45:23.541 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:45:23.542 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:45:23.542 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:45:23.543 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:45:23.544 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:45:23.545 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:45:23.545 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:45:23.546 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:45:23.546 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:45:23.547 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:45:23.548 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:45:23.551 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:45:23.552 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:45:23.553 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:45:23.553 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:45:23.600 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:45:23.600 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:45:23.601 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:45:23.601 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:45:23.602 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:45:23.621 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:45:23.625 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:45:23.626 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:45:23.628 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:45:23.629 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:45:23.631 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:45:23.633 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:45:23.635 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:45:23.635 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:45:23.636 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:45:23.639 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:45:23.640 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 112.2139ms
2024-11-10 20:45:23.641 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:45:23.649 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:45:23.650 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:45:23.654 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-11-10 20:45:23.655 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 144.5519ms
2024-11-10 20:45:48.521 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:45:48.527 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:45:48.528 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:45:48.529 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:45:48.529 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:45:48.530 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:45:48.531 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:45:48.531 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:45:48.532 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:45:48.533 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:45:48.534 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:45:48.534 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:45:48.535 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:45:48.537 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:45:48.538 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:45:48.539 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:45:48.539 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:45:48.540 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:45:48.541 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:45:48.543 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:45:48.543 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:45:48.544 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:45:48.545 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:45:48.546 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:45:48.546 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:45:48.547 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:45:48.548 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:45:48.549 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:45:48.549 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:45:48.550 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:45:48.551 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:45:48.552 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:45:48.552 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:45:48.554 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:45:48.555 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:45:48.556 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:45:48.557 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:45:48.558 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:45:48.558 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:45:48.559 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:45:48.560 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:45:48.560 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:45:48.561 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:45:48.563 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:45:48.564 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:45:48.564 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:45:48.565 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:45:48.566 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:45:48.567 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:45:48.568 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:45:48.568 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:45:48.569 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:45:48.571 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:45:48.572 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:45:48.573 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:45:48.574 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:45:48.574 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:45:48.575 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:45:48.576 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:45:48.576 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:45:48.577 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:45:48.577 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:45:48.578 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:45:48.578 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.6971ms
2024-11-10 20:45:48.579 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:45:48.583 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:45:48.584 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:45:48.585 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:45:48.585 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 64.7069ms
2024-11-10 20:46:00.617 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:46:00.620 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:00.621 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:00.621 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:00.622 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:00.623 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:00.624 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:00.624 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:00.625 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:00.626 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:00.627 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:00.628 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:00.629 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:00.631 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:00.635 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:00.639 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:00.640 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:00.641 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:00.642 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:00.643 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:00.644 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:00.645 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:00.645 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:00.646 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:00.647 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:00.648 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:00.648 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:00.649 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:00.650 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:00.651 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:00.652 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:00.653 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:00.654 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:00.655 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:00.656 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:00.656 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:00.658 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:00.659 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:00.660 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:00.661 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:00.662 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:00.663 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:00.666 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:00.668 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:00.669 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:00.670 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:00.670 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:00.672 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:00.673 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:00.673 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:00.675 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:46:00.676 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:00.690 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:00.692 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:00.693 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:00.694 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:00.694 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:00.695 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:00.697 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:00.697 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:00.697 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:00.698 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:00.699 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:00.700 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 60.7429ms
2024-11-10 20:46:00.701 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:00.701 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:00.702 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:00.706 +07:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-11-10 20:46:00.708 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 90.6153ms
2024-11-10 20:46:03.947 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:46:03.948 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:03.949 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:03.949 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:03.950 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:03.950 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:03.951 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:03.952 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:03.952 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:03.953 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:03.953 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:03.954 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:03.954 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:03.955 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:03.956 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:03.957 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:03.958 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:03.959 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:03.959 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:03.960 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:03.961 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:03.961 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:03.962 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:03.963 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:03.964 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:03.964 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:03.965 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:03.966 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:03.967 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:03.967 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:03.968 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:03.968 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:03.969 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:03.970 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:03.970 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:03.971 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:03.972 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:03.973 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:03.973 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:03.974 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:03.975 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:03.976 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:03.976 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:03.977 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:03.978 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:03.979 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:03.979 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:03.980 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:03.981 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:03.981 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:03.982 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:03.982 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:46:03.988 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:46:03.989 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:03.989 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:03.990 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:03.991 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:03.992 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:03.993 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:03.993 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:03.994 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:03.994 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:03.995 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:03.996 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.9689ms
2024-11-10 20:46:03.997 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:03.998 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:03.998 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:03.999 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:46:04.000 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 53.5044ms
2024-11-10 20:46:04.672 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:46:04.673 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:04.674 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:04.675 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:04.675 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:04.676 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:04.676 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:04.677 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:04.677 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:04.678 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:04.679 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:04.679 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:04.680 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:04.681 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:04.681 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:04.682 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:04.683 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:04.683 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:04.684 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:04.684 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:04.685 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:04.686 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:04.687 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:04.687 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:04.688 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:04.688 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:04.689 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:04.690 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:04.690 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:04.691 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:04.691 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:04.692 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:04.693 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:04.694 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:04.694 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:04.695 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:04.695 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:04.696 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:04.696 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:04.697 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:04.698 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:04.698 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:04.699 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:04.700 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:04.701 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:04.701 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:04.702 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:04.702 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:04.703 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:04.703 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:04.704 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:04.704 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:04.706 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:04.708 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:04.708 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:04.709 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:04.709 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:04.710 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:04.711 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:04.711 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:04.712 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:04.712 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:04.713 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:04.713 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 31.1751ms
2024-11-10 20:46:04.714 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:04.715 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:04.715 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:04.716 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:46:04.717 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 45.4474ms
2024-11-10 20:46:05.316 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:46:05.318 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:05.319 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:05.320 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:05.320 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:05.321 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:05.322 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:05.322 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:05.323 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:05.323 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:05.325 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:05.325 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:05.326 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:05.327 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:05.328 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:05.329 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:05.330 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:05.331 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:05.332 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:05.332 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:05.333 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:05.334 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:05.334 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:05.335 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:05.335 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:05.336 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:05.336 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:05.337 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:05.338 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:05.338 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:05.339 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:05.340 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:05.340 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:05.341 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:05.342 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:05.342 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:05.343 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:05.344 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:05.344 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:05.346 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:05.347 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:05.347 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:05.348 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:05.349 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:05.350 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:05.350 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:05.350 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:05.351 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:05.352 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:05.352 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:05.353 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:46:05.354 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:46:05.355 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:46:05.356 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:05.357 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:05.358 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:05.358 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:05.359 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:05.361 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:05.361 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:05.361 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:05.362 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:05.362 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:05.364 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.7371ms
2024-11-10 20:46:05.364 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:05.365 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:05.366 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:05.366 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:46:05.367 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 51.4926ms
2024-11-10 20:46:05.800 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:46:05.801 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:05.801 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:05.802 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:05.802 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:05.803 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:05.804 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:05.804 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:05.805 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:05.806 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:05.806 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:05.807 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:05.808 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:05.808 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:05.809 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:05.810 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:05.811 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:05.812 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:05.812 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:05.813 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:05.813 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:05.814 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:05.814 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:05.815 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:05.815 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:05.816 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:05.817 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:05.817 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:05.818 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:05.819 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:05.819 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:05.820 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:05.820 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:05.821 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:05.822 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:05.822 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:05.823 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:05.823 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:05.824 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:05.825 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:05.825 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:05.826 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:05.827 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:05.828 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:05.829 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:05.829 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:05.830 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:05.830 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:05.831 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:05.831 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:05.832 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:46:05.832 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:05.834 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:05.835 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:05.836 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:05.837 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:05.837 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:05.838 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:05.839 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:05.840 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:05.840 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:05.840 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:05.841 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:05.842 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 31.7499ms
2024-11-10 20:46:05.842 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:05.843 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:05.843 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:05.844 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:46:05.845 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 45.6514ms
2024-11-10 20:46:06.332 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:46:06.333 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:06.334 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:06.335 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:06.335 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:06.335 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:06.336 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:06.337 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:06.337 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:06.338 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:06.338 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:06.339 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:06.340 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:06.341 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:06.341 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:06.342 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:06.342 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:06.343 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:06.343 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:06.344 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:06.345 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:06.346 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:06.346 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:06.347 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:06.347 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:06.348 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:06.349 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:06.349 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:06.350 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:06.350 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:06.351 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:06.351 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:06.352 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:06.353 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:06.353 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:06.354 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:06.354 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:06.355 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:06.355 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:06.356 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:06.357 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:06.357 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:06.358 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:06.359 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:06.360 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:06.361 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:06.361 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:06.362 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:06.362 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:06.363 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:06.363 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:46:06.364 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:46:06.365 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:46:06.366 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:06.367 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:06.368 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:06.368 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:06.369 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:06.370 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:06.370 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:06.371 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:06.371 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:06.371 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:06.373 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 31.3602ms
2024-11-10 20:46:06.374 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:06.375 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:06.375 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:06.376 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:46:06.377 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 45.1681ms
2024-11-10 20:46:07.839 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:46:07.841 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:07.842 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:07.842 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:07.843 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:07.843 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:07.844 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:07.844 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:07.845 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:07.845 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:07.846 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:07.847 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:07.847 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:07.848 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:07.849 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:07.850 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:07.850 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:07.851 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:07.851 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:07.852 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:07.853 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:07.853 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:07.854 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:07.855 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:07.855 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:07.856 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:07.857 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:07.857 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:07.858 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:07.858 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:07.859 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:07.860 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:07.860 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:07.861 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:07.862 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:07.862 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:07.863 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:07.863 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:07.864 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:07.864 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:07.865 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:07.866 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:07.866 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:07.867 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:07.869 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:07.869 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:07.869 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:07.870 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:07.871 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:07.871 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:07.872 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:07.872 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:07.874 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:07.875 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:07.876 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:07.876 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:07.877 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:07.877 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:07.878 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:07.879 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:07.879 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:07.880 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:07.880 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:07.881 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 31.3932ms
2024-11-10 20:46:07.882 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:07.882 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:07.883 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:07.883 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:46:07.884 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 45.2181ms
2024-11-10 20:46:10.649 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:46:10.650 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:10.650 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:10.651 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:10.652 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:10.653 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:10.653 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:10.654 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:10.654 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:10.655 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:10.656 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:10.656 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:10.657 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:10.658 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:10.659 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:10.660 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:10.660 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:10.661 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:10.661 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:10.662 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:10.663 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:10.663 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:10.664 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:10.665 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:10.666 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:10.667 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:10.668 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:10.668 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:10.669 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:10.669 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:10.670 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:10.670 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:10.671 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:10.672 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:10.672 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:10.673 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:10.674 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:10.674 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:10.675 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:10.675 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:10.676 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:10.677 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:10.677 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:10.678 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:10.680 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:10.680 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:10.681 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:10.681 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:10.682 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:10.682 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:10.683 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:10.683 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:10.685 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:10.687 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:10.687 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:10.688 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:10.689 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:10.689 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:10.691 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:10.691 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:10.691 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:10.692 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:10.692 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:10.693 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.7836ms
2024-11-10 20:46:10.694 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:10.695 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:10.695 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:10.696 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:46:10.697 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 48.342ms
2024-11-10 20:46:20.422 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:46:20.423 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:20.424 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:20.424 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:20.425 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:20.426 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:20.427 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:20.429 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:20.430 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:20.430 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:20.431 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:20.432 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:20.433 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:20.434 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:20.435 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:20.436 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:20.437 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:20.438 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:20.439 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:20.440 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:20.441 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:20.441 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:20.443 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:20.444 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:20.444 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:20.445 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:20.446 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:20.447 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:20.447 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:20.448 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:20.449 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:20.450 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:20.451 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:20.452 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:20.452 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:20.453 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:20.454 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:20.454 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:20.456 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:20.457 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:20.458 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:20.458 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:20.459 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:20.460 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:20.462 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:20.463 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-10 20:46:20.464 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:20.464 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:20.465 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:20.466 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:20.466 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:46:20.467 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:20.468 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:20.470 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:20.471 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:20.471 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:20.472 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:20.473 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:20.474 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:20.474 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:20.475 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:20.475 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:20.476 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:20.478 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.6093ms
2024-11-10 20:46:20.479 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:20.479 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:20.480 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:20.481 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:46:20.482 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 60.1574ms
2024-11-10 20:46:21.405 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:46:21.408 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:21.409 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:21.409 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:21.410 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:21.410 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:21.411 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:21.412 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:21.413 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:21.413 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:21.416 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:21.417 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:21.418 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:21.419 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:21.423 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:21.427 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:21.429 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:21.431 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:21.431 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:21.433 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:21.436 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:21.438 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:21.439 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:21.440 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:21.441 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:21.444 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:21.445 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:21.446 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:21.446 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:21.447 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:21.448 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:21.449 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:21.450 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:21.450 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:21.451 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:21.452 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:21.453 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:21.453 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:21.454 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:21.454 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:21.457 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:21.459 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:21.460 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:21.461 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:21.464 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:21.465 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:21.465 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:21.466 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:21.467 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:21.468 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:21.468 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:46:21.470 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:21.473 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:21.474 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:21.475 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:21.475 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:21.476 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:21.477 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:21.479 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:21.479 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:21.479 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:21.480 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:21.481 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:21.481 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 54.8581ms
2024-11-10 20:46:21.482 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:21.483 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:21.484 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:21.486 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:46:21.487 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 81.5549ms
2024-11-10 20:46:22.738 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:46:22.740 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:22.741 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:22.742 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:22.743 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:22.744 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:22.744 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:22.745 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:22.745 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:22.746 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:22.747 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:22.748 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:22.748 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:22.750 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:22.750 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:22.751 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:22.752 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:22.753 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:22.754 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:22.756 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:22.758 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:22.758 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:22.760 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:22.760 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:22.762 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:22.762 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:22.763 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:22.764 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:22.765 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:22.766 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:22.766 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:22.767 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:22.768 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:22.769 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:22.770 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:22.770 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:22.771 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:22.772 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:22.773 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:22.773 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:22.774 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:22.775 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:22.776 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:22.778 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:22.779 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:22.779 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:22.780 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:22.780 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:22.781 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:22.781 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:22.782 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:46:22.783 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:22.785 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:22.786 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:22.787 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:22.788 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:22.788 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:22.789 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:22.791 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:22.791 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:22.792 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:22.792 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:22.793 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:22.794 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.3754ms
2024-11-10 20:46:22.794 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:22.795 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:22.796 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:22.796 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:46:22.798 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 59.7666ms
2024-11-10 20:46:23.419 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:46:23.421 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:23.422 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:23.423 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:23.424 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:23.424 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:23.425 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:23.425 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:23.426 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:23.426 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:23.427 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:23.428 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:23.429 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:23.430 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:23.430 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:23.431 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:23.432 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:23.434 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:23.435 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:23.436 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:23.438 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:23.439 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:23.439 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:23.440 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:23.441 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:23.443 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:23.443 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:23.444 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:23.445 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:23.446 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:23.446 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:23.447 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:23.447 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:23.448 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:23.449 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:23.450 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:23.450 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:23.451 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:23.452 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:23.452 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:23.453 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:23.454 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:23.454 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:23.456 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:23.457 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:23.458 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:23.458 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:23.459 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:23.459 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:23.460 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:23.460 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:23.461 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:23.463 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:23.465 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:23.466 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:46:23.467 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:23.467 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:23.468 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:23.469 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:23.470 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:23.470 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:23.471 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:23.472 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:23.473 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.5145ms
2024-11-10 20:46:23.474 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:23.474 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:23.475 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:23.475 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:46:23.476 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 56.5004ms
2024-11-10 20:46:50.685 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:46:50.687 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:50.689 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:50.689 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:50.690 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:50.691 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:50.692 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:50.693 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:50.693 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:50.694 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:50.695 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:50.696 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:50.696 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:50.698 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:50.699 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:50.700 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:50.701 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:50.701 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:50.702 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:50.702 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:50.703 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:50.704 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:50.705 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:50.705 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:50.706 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:50.708 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:50.708 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:50.709 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:50.710 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:50.710 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:50.711 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:50.712 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:50.712 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:50.713 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:50.714 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:50.714 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:50.715 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:50.716 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:50.717 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:50.717 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:50.718 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:50.719 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:50.719 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:50.722 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:50.723 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:50.724 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:50.724 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:50.725 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:50.726 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:50.727 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:50.728 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:46:50.728 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:46:50.730 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:46:50.731 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:50.732 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:50.733 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:50.734 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:50.735 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:50.736 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:50.736 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:50.737 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:50.737 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:50.738 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:50.740 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.5263ms
2024-11-10 20:46:50.745 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:50.746 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:50.746 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:50.747 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:46:50.748 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 63.8822ms
2024-11-10 20:46:53.960 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:46:53.962 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:46:53.962 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:46:53.963 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:46:53.963 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:46:53.964 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:46:53.965 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:53.965 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:46:53.966 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:53.966 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:46:53.967 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:46:53.968 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:46:53.969 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:53.970 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:46:53.971 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:46:53.972 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:53.973 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:46:53.973 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:46:53.974 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:53.975 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:46:53.976 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:53.978 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:46:53.978 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:46:53.979 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:46:53.980 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:53.981 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:46:53.981 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:53.982 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:53.983 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:53.983 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:46:53.984 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:46:53.985 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:53.986 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:46:53.986 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:53.987 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:53.988 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:46:53.988 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:46:53.989 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:53.990 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:46:53.991 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:53.991 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:53.992 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:46:53.993 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:46:53.994 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:46:53.995 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:46:53.995 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:46:53.996 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:53.997 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:53.997 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:46:53.998 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:46:53.999 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:46:53.999 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:54.001 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:46:54.002 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:54.003 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:46:54.004 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:54.005 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:46:54.006 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:46:54.007 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:46:54.008 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:46:54.008 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:46:54.008 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:46:54.009 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:46:54.010 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.2003ms
2024-11-10 20:46:54.011 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:46:54.012 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:46:54.013 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:46:54.013 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:46:54.014 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 54.3891ms
2024-11-10 20:47:05.676 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:47:05.678 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:05.679 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:05.679 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:05.680 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:05.680 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:05.681 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:05.681 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:05.682 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:05.683 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:05.684 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:05.686 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:05.687 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:05.688 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:05.689 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:05.690 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:05.691 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:05.692 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:05.692 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:05.693 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:05.694 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:05.695 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:05.695 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:05.696 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:05.697 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:05.698 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:05.698 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:05.699 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:05.700 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:05.701 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:05.702 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:05.703 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:05.703 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:05.704 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:05.706 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:05.706 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:05.707 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:05.708 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:05.709 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:05.710 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:05.710 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:05.712 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:05.713 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:05.714 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:05.716 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:05.717 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:05.719 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:05.720 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:05.721 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:05.721 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:05.722 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:47:05.723 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:05.742 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:05.744 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:05.746 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:47:05.747 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:05.749 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:47:05.750 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:05.753 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:05.754 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:05.755 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:05.755 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:05.757 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:05.758 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 67.581ms
2024-11-10 20:47:05.759 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:05.759 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:05.760 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:05.761 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:47:05.762 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 86.5054ms
2024-11-10 20:47:07.390 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:47:07.392 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:07.393 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:07.393 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:07.394 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:07.394 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:07.395 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:07.396 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:07.396 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:07.396 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:07.397 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:07.398 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:07.399 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:07.400 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:07.400 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:07.401 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:07.402 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:07.402 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:07.403 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:07.404 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:07.404 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:07.405 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:07.406 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:07.406 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:07.407 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:07.408 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:07.408 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:07.409 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:07.409 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:07.410 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:07.411 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:07.411 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:07.412 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:07.413 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:07.413 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:07.414 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:07.414 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:07.415 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:07.416 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:07.417 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:07.417 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:07.418 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:07.419 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:07.420 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:07.421 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:07.422 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:07.423 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:07.423 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:07.424 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:07.425 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:07.425 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:47:07.426 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:07.428 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:07.429 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:07.430 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:47:07.431 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:07.431 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:47:07.432 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:07.433 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:07.434 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:07.434 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:07.435 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:07.435 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:07.436 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.2202ms
2024-11-10 20:47:07.437 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:07.438 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:07.438 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:07.439 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:47:07.440 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 49.8346ms
2024-11-10 20:47:08.509 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:47:08.510 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:08.510 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:08.511 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:08.512 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:08.512 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:08.513 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:08.513 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:08.514 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:08.514 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:08.515 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:08.515 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:08.516 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:08.517 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:08.518 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:08.519 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:08.519 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:08.520 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:08.520 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:08.521 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:08.522 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:08.522 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:08.523 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:08.523 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:08.524 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:08.525 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:08.525 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:08.526 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:08.527 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:08.527 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:08.528 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:08.528 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:08.529 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:08.530 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:08.530 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:08.531 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:08.531 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:08.532 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:08.533 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:08.533 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:08.534 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:08.534 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:08.535 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:08.536 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:08.537 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:08.537 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:08.538 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:08.538 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:08.539 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:08.539 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:08.540 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:47:08.541 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:47:08.544 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:47:08.546 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:08.546 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:47:08.547 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:08.548 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:47:08.549 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:08.550 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:08.550 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:08.551 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:08.551 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:08.552 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:08.554 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.3582ms
2024-11-10 20:47:08.558 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:08.559 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:08.559 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:08.560 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:47:08.561 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 52.0934ms
2024-11-10 20:47:14.592 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:47:14.593 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:14.594 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:14.595 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:14.595 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:14.596 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:14.596 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:14.597 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:14.597 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:14.598 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:14.599 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:14.599 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:14.600 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:14.601 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:14.602 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:14.602 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:14.603 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:14.604 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:14.604 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:14.605 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:14.605 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:14.606 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:14.607 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:14.607 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:14.608 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:14.609 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:14.609 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:14.610 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:14.611 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:14.611 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:14.612 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:14.612 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:14.613 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:14.613 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:14.614 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:14.615 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:14.616 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:14.616 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:14.617 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:14.618 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:14.618 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:14.619 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:14.619 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:14.620 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:14.622 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:14.622 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:14.623 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:14.623 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:14.624 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:14.624 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:14.625 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:47:14.625 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:47:14.627 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:47:14.628 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:14.629 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:47:14.629 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:14.630 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:47:14.630 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:14.631 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:14.631 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:14.632 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:14.632 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:14.632 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:14.634 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 31.6608ms
2024-11-10 20:47:14.635 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:14.636 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:14.636 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:14.638 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:47:14.638 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 46.9382ms
2024-11-10 20:47:15.489 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:47:15.491 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:15.492 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:15.493 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:15.493 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:15.494 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:15.494 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:15.495 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:15.496 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:15.496 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:15.497 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:15.498 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:15.499 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:15.500 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:15.501 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:15.502 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:15.502 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:15.503 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:15.504 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:15.505 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:15.505 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:15.506 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:15.507 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:15.508 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:15.509 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:15.510 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:15.511 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:15.512 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:15.513 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:15.513 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:15.514 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:15.515 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:15.515 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:15.516 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:15.517 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:15.518 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:15.519 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:15.519 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:15.520 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:15.521 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:15.522 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:15.523 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:15.523 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:15.525 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:15.527 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:15.527 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:15.528 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:15.528 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:15.529 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:15.529 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:15.530 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:47:15.532 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:15.534 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:15.535 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:15.536 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:47:15.537 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:15.539 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:47:15.540 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:15.542 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:15.542 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:15.542 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:15.543 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:15.543 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:15.545 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.1945ms
2024-11-10 20:47:15.546 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:15.546 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:15.547 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:15.548 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:47:15.549 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 60.2846ms
2024-11-10 20:47:16.328 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:47:16.329 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:16.330 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:16.330 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:16.331 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:16.332 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:16.332 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:16.333 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:16.333 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:16.334 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:16.334 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:16.335 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:16.336 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:16.336 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:16.337 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:16.338 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:16.339 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:16.340 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:16.340 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:16.341 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:16.342 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:16.342 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:16.343 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:16.343 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:16.344 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:16.345 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:16.345 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:16.346 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:16.346 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:16.347 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:16.348 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:16.348 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:16.349 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:16.349 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:16.350 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:16.351 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:16.351 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:16.352 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:16.352 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:16.353 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:16.353 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:16.354 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:16.354 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:16.355 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:16.356 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:16.357 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:16.357 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:16.358 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:16.359 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:16.360 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:16.360 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:47:16.361 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:47:16.362 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:47:16.364 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:16.364 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:47:16.365 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:16.366 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:47:16.367 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:16.368 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:16.369 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:16.369 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:16.369 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:16.370 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:16.371 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.0746ms
2024-11-10 20:47:16.372 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:16.373 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:16.374 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:16.374 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:47:16.375 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 47.886ms
2024-11-10 20:47:20.090 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:47:20.091 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:20.092 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:20.093 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:20.093 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:20.094 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:20.094 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:20.095 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:20.095 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:20.096 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:20.097 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:20.097 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:20.098 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:20.099 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:20.100 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:20.100 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:20.101 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:20.102 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:20.102 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:20.103 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:20.104 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:20.104 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:20.105 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:20.105 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:20.106 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:20.106 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:20.107 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:20.108 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:20.108 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:20.109 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:20.109 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:20.110 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:20.110 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:20.111 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:20.111 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:20.112 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:20.112 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:20.113 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:20.114 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:20.114 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:20.115 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:20.115 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:20.116 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:20.117 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:20.118 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:20.119 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:20.119 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:20.120 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:20.120 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:20.121 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:20.122 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:47:20.122 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:20.124 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:20.125 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:20.125 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:47:20.126 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:20.127 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:47:20.127 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:20.128 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:20.129 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:20.129 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:20.130 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:20.130 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:20.131 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 30.4561ms
2024-11-10 20:47:20.131 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:20.132 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:20.133 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:20.133 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:47:20.134 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 43.8866ms
2024-11-10 20:47:23.108 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:47:23.110 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:23.110 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:23.111 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:23.111 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:23.112 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:23.113 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:23.114 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:23.114 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:23.115 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:23.116 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:23.116 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:23.117 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:23.118 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:23.118 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:23.119 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:23.120 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:23.121 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:23.121 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:23.122 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:23.123 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:23.123 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:23.124 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:23.124 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:23.125 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:23.125 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:23.126 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:23.127 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:23.127 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:23.128 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:23.128 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:23.129 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:23.130 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:23.130 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:23.131 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:23.132 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:23.132 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:23.133 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:23.134 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:23.135 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:23.135 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:23.136 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:23.136 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:23.137 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:23.138 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:23.139 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:23.139 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:23.140 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:23.140 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:23.141 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:23.141 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:47:23.142 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:47:23.144 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:47:23.145 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:23.145 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:47:23.146 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:23.146 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:47:23.147 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:23.149 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:23.149 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:23.150 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:23.150 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:23.151 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:23.152 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 32.8468ms
2024-11-10 20:47:23.153 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:23.153 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:23.154 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:23.155 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:47:23.156 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 47.5979ms
2024-11-10 20:47:24.717 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:47:24.719 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:24.719 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:24.720 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:24.720 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:24.721 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:24.721 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:24.722 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:24.722 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:24.723 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:24.723 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:24.724 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:24.725 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:24.726 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:24.726 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:24.727 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:24.728 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:24.728 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:24.729 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:24.729 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:24.730 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:24.731 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:24.731 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:24.732 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:24.732 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:24.733 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:24.734 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:24.734 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:24.735 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:24.736 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:24.736 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:24.737 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:24.737 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:24.738 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:24.739 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:24.740 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:24.740 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:24.741 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:24.742 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:24.742 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:24.743 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:24.743 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:24.744 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:24.745 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:24.746 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:24.747 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:24.747 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:24.748 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:24.749 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:24.749 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:24.749 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:24.750 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:24.753 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:24.755 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:24.755 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:47:24.756 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:24.757 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:47:24.757 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:24.758 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:24.759 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:24.759 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:24.760 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:24.760 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:24.761 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.9224ms
2024-11-10 20:47:24.762 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:24.763 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:24.763 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:24.764 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:47:24.765 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 47.7341ms
2024-11-10 20:47:25.640 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:47:25.641 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:25.642 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:25.643 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:25.644 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:25.644 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:25.645 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:25.645 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:25.646 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:25.646 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:25.647 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:25.648 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:25.649 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:25.649 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:25.650 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:25.651 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:25.652 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:25.653 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:25.653 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:25.655 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:25.656 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:25.657 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:25.658 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:25.659 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:25.660 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:25.661 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:25.662 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:25.663 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:25.664 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:25.664 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:25.665 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:25.666 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:25.666 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:25.667 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:25.667 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:25.668 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:25.669 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:25.670 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:25.670 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:25.671 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:25.672 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:25.673 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:25.673 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:25.674 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:25.676 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:25.677 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:25.677 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:25.678 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:25.679 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:25.680 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:25.680 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:47:25.681 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:25.682 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:25.684 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:25.685 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:47:25.686 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:25.687 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:47:25.687 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:25.688 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:25.689 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:25.689 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:25.690 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:25.690 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:25.692 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.3117ms
2024-11-10 20:47:25.692 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:25.693 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:25.694 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:25.694 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:47:25.695 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 55.2656ms
2024-11-10 20:47:28.510 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:47:28.511 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:28.512 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:28.513 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:28.513 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:28.514 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:28.515 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:28.515 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:28.516 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:28.516 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:28.517 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:28.518 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:28.519 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:28.520 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:28.520 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:28.521 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:28.522 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:28.522 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:28.523 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:28.524 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:28.524 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:28.525 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:28.526 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:28.526 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:28.527 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:28.527 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:28.528 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:28.528 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:28.529 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:28.530 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:28.530 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:28.531 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:28.532 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:28.532 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:28.533 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:28.533 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:28.534 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:28.534 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:28.535 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:28.536 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:28.537 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:28.537 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:28.538 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:28.540 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:28.541 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:28.541 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:28.542 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:28.543 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:28.543 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:28.544 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:28.544 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:47:28.545 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:47:28.546 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:47:28.548 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:28.548 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:47:28.549 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:28.549 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:47:28.550 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:28.551 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:28.552 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:28.552 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:28.552 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:28.553 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:28.555 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.3608ms
2024-11-10 20:47:28.555 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:28.556 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:28.556 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:28.557 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:47:28.558 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 47.956ms
2024-11-10 20:47:30.165 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:47:30.166 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:30.167 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:30.167 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:30.168 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:30.168 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:30.169 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:30.169 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:30.170 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:30.170 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:30.171 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:30.172 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:30.172 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:30.173 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:30.174 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:30.175 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:30.175 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:30.176 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:30.176 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:30.177 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:30.178 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:30.179 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:30.179 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:30.180 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:30.180 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:30.181 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:30.181 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:30.182 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:30.183 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:30.184 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:30.184 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:30.185 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:30.186 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:30.186 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:30.187 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:30.187 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:30.188 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:30.189 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:30.189 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:30.190 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:30.190 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:30.191 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:30.192 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:30.193 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:30.194 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:30.194 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:30.194 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:30.195 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:30.196 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:30.196 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:30.197 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:47:30.198 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:30.199 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:47:30.200 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:30.201 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:47:30.202 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:30.202 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:47:30.203 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:30.204 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:30.204 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:30.205 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:30.205 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:30.206 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:30.207 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 32.0484ms
2024-11-10 20:47:30.207 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:30.208 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:30.208 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:30.209 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:47:30.209 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 44.9168ms
2024-11-10 20:47:32.217 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:47:32.218 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:47:32.219 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:47:32.219 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:47:32.220 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:47:32.221 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:47:32.221 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:32.222 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:47:32.222 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:32.222 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:47:32.223 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:47:32.224 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:47:32.224 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:32.225 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:47:32.226 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:47:32.227 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:32.227 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:47:32.228 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:47:32.229 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:32.229 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:47:32.230 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:32.230 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:47:32.231 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:47:32.232 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:47:32.232 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:32.233 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:47:32.234 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:32.234 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:32.235 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:32.235 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:47:32.236 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:47:32.237 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:32.237 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:47:32.238 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:32.239 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:32.239 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:47:32.240 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:47:32.240 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:32.241 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:47:32.242 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:32.242 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:32.243 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:47:32.243 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:47:32.244 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:47:32.245 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:47:32.246 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:47:32.246 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:32.247 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:32.248 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:47:32.248 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:47:32.249 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:47:32.249 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:47:32.251 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:47:32.252 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:32.253 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:47:32.253 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:32.254 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:47:32.255 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:47:32.256 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:47:32.256 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:47:32.256 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:47:32.257 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:47:32.257 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:47:32.259 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 31.9921ms
2024-11-10 20:47:32.260 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:47:32.260 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:47:32.261 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:47:32.262 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:47:32.262 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 45.8012ms
2024-11-10 20:48:07.277 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:07.282 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:07.283 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:07.283 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:07.284 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:07.284 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:07.285 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:07.286 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:07.286 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:07.287 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:07.288 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:07.289 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:07.289 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:07.290 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:07.291 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:07.292 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:07.293 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:07.294 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:07.295 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:07.296 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:07.297 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:07.297 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:07.298 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:07.299 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:07.300 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:07.300 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:07.301 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:07.302 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:07.303 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:07.303 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:07.304 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:07.305 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:07.305 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:07.306 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:07.307 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:07.308 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:07.308 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:07.309 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:07.310 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:07.311 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:07.311 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:07.312 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:07.313 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:07.314 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:07.315 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:07.316 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:07.316 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:07.317 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:07.318 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:07.318 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:07.319 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:07.320 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:07.332 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:07.334 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:07.335 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:07.336 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:07.337 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:48:07.338 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:07.339 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:07.340 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:07.340 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:07.340 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:07.341 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:07.343 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 51.4364ms
2024-11-10 20:48:07.346 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:07.348 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:07.349 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:07.350 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:07.351 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 74.2259ms
2024-11-10 20:48:08.751 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:08.753 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:08.754 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:08.754 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:08.754 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:08.755 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:08.756 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:08.756 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:08.757 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:08.757 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:08.758 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:08.759 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:08.760 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:08.761 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:08.762 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:08.763 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:08.764 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:08.764 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:08.766 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:08.767 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:08.768 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:08.769 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:08.769 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:08.770 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:08.771 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:08.771 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:08.772 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:08.773 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:08.774 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:08.775 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:08.775 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:08.776 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:08.777 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:08.777 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:08.778 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:08.778 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:08.779 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:08.780 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:08.780 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:08.782 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:08.782 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:08.783 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:08.783 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:08.784 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:08.785 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:08.786 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:08.786 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:08.787 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:08.788 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:08.788 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:08.789 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:08.789 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:08.800 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:08.801 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:08.802 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:08.802 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:08.803 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:08.803 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:08.804 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:08.805 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:08.805 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:08.805 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:08.806 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:08.807 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.93ms
2024-11-10 20:48:08.808 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:08.809 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:08.809 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:08.810 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:08.811 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 59.9255ms
2024-11-10 20:48:09.922 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:09.923 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:09.924 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:09.924 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:09.925 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:09.926 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:09.926 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:09.927 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:09.927 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:09.928 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:09.929 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:09.929 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:09.930 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:09.931 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:09.931 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:09.932 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:09.933 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:09.934 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:09.934 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:09.935 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:09.936 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:09.936 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:09.937 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:09.937 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:09.938 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:09.939 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:09.940 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:09.940 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:09.941 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:09.942 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:09.942 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:09.943 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:09.943 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:09.944 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:09.944 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:09.945 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:09.946 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:09.946 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:09.947 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:09.948 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:09.948 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:09.949 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:09.949 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:09.950 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:09.951 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:09.952 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:09.953 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:09.953 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:09.954 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:09.954 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:09.955 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:09.956 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:09.961 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:09.962 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:09.963 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:48:09.964 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:09.965 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:09.965 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:09.967 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:09.967 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:09.968 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:09.968 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:09.969 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:09.971 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.5456ms
2024-11-10 20:48:09.975 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:09.977 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:09.977 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:09.978 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:09.979 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 57.255ms
2024-11-10 20:48:10.786 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:10.788 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:10.789 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:10.789 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:10.790 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:10.791 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:10.791 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:10.792 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:10.793 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:10.793 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:10.795 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:10.796 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:10.797 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:10.798 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:10.799 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:10.800 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:10.801 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:10.802 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:10.802 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:10.803 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:10.804 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:10.805 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:10.805 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:10.806 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:10.807 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:10.807 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:10.808 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:10.809 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:10.810 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:10.811 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:10.811 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:10.812 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:10.813 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:10.813 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:10.814 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:10.815 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:10.816 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:10.816 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:10.817 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:10.818 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:10.819 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:10.819 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:10.820 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:10.822 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:10.823 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:10.824 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:10.824 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:10.825 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:10.825 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:10.826 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:10.826 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:10.827 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:10.833 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:10.834 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:10.834 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:10.835 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:10.836 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:10.837 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:10.838 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:10.838 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:10.839 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:10.839 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:10.839 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:10.840 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.1719ms
2024-11-10 20:48:10.841 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:10.841 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:10.842 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:10.843 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:10.843 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 57.6861ms
2024-11-10 20:48:11.581 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:11.582 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:11.583 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:11.583 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:11.584 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:11.585 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:11.586 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:11.586 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:11.587 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:11.588 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:11.589 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:11.589 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:11.590 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:11.591 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:11.592 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:11.593 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:11.594 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:11.595 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:11.596 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:11.597 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:11.598 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:11.599 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:11.599 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:11.600 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:11.601 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:11.602 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:11.603 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:11.603 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:11.604 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:11.605 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:11.606 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:11.606 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:11.607 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:11.608 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:11.608 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:11.609 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:11.610 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:11.610 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:11.611 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:11.612 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:11.612 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:11.613 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:11.614 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:11.615 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:11.616 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:11.616 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:11.617 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:11.618 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:11.618 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:11.619 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:11.619 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:11.620 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:11.626 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:11.628 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:11.629 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:48:11.629 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:11.630 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:11.631 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:11.632 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:11.633 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:11.633 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:11.634 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:11.635 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:11.637 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.8632ms
2024-11-10 20:48:11.641 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:11.643 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:11.643 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:11.645 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:48:11.646 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 65.3273ms
2024-11-10 20:48:12.228 +07:00 [DBG] Connection id "0HN8198R1VNR0" received FIN.
2024-11-10 20:48:12.228 +07:00 [DBG] Connection id "0HN8198R1VNR0" is closed. The last processed stream ID was 71.
2024-11-10 20:48:12.228 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNR0 completed.
2024-11-10 20:48:12.229 +07:00 [DBG] Connection id "0HN8198R1VNR0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:48:12.242 +07:00 [DBG] Connection id "0HN8198R1VNR0" stopped.
2024-11-10 20:48:14.078 +07:00 [DBG] Connection id "0HN8198R1VNR1" accepted.
2024-11-10 20:48:14.078 +07:00 [DBG] Connection id "0HN8198R1VNR1" started.
2024-11-10 20:48:14.081 +07:00 [DBG] Connection 0HN8198R1VNR1 established using the following protocol: "Tls13"
2024-11-10 20:48:14.082 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:14.084 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:14.084 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:14.085 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:14.085 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:14.086 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:14.086 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:14.087 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:14.087 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:14.088 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:14.088 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:14.089 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:14.090 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:14.091 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:14.092 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:14.093 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:14.093 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:14.094 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:14.094 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:14.095 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:14.096 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:14.096 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:14.097 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:14.097 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:14.098 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:14.099 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:14.099 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:14.100 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:14.101 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:14.101 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:14.102 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:14.102 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:14.103 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:14.103 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:14.104 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:14.104 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:14.105 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:14.106 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:14.106 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:14.107 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:14.108 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:14.108 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:14.109 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:14.109 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:14.110 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:14.111 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:14.111 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:14.112 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:14.113 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:14.113 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:14.114 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:14.115 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:14.120 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:14.121 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:14.122 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:14.122 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:14.123 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:14.124 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:14.125 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:14.125 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:14.125 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:14.126 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:14.126 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:14.127 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.8949ms
2024-11-10 20:48:14.128 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:14.129 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:14.129 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:14.130 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:14.130 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 48.0341ms
2024-11-10 20:48:28.298 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:28.323 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:28.324 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:28.325 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:28.328 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:28.329 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:28.330 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:28.331 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:28.332 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:28.332 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:28.333 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:28.333 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:28.334 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:28.335 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:28.336 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:28.337 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:28.338 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:28.338 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:28.339 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:28.340 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:28.341 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:28.342 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:28.343 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:28.344 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:28.345 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:28.346 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:28.347 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:28.348 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:28.349 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:28.352 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:28.353 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:28.354 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:28.355 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:28.356 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:28.357 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:28.358 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:28.359 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:28.360 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:28.360 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:28.361 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:28.362 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:28.363 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:28.363 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:28.365 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:28.367 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:28.368 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:28.369 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:28.370 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:28.371 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:28.373 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-11-10 20:48:28.375 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-10 20:48:28.377 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:28.382 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:28.384 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:28.385 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:28.385 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:28.385 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:28.387 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:28.387 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:28.388 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:48:28.388 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:28.389 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:28.390 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:28.390 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:48:28.391 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:28.392 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:28.392 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:28.393 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:28.393 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:28.394 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:28.394 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:28.395 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:28.395 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:28.395 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:28.396 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:28.397 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:28.398 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:28.398 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 61.4305ms
2024-11-10 20:48:28.399 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:28.400 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:28.401 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:28.401 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:28.402 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:28.402 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:28.403 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:28.404 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:48:28.404 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:28.405 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 106.8097ms
2024-11-10 20:48:28.406 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:28.408 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:28.408 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:28.409 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:28.410 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:28.410 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:28.411 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:28.412 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:28.412 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:28.413 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:28.414 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:28.414 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:28.415 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:28.415 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:28.416 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:28.417 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:28.417 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:28.418 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:28.418 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:28.419 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:28.420 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:28.420 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:28.421 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:28.421 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:28.422 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:28.423 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:28.423 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:28.424 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:28.424 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:28.425 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:28.426 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:28.426 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:28.427 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:28.430 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:28.431 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:28.432 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:28.433 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:28.433 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:28.434 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:28.435 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:28.436 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:28.436 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:28.436 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:28.437 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:28.438 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.8165ms
2024-11-10 20:48:28.439 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:28.440 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:28.441 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:28.441 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:28.442 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 60.9431ms
2024-11-10 20:48:29.184 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:29.191 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:29.191 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:29.192 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:29.193 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:29.193 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:29.196 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:29.197 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:29.198 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:29.198 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:29.200 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:29.201 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:29.202 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:29.203 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:29.204 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:29.205 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:29.206 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:29.206 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:29.207 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:29.208 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:29.209 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:29.210 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:29.210 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:29.211 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:29.211 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:29.212 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:29.213 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:29.214 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:29.214 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:29.215 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:29.216 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:29.217 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:29.217 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:29.218 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:29.219 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:29.219 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:29.220 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:29.220 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:29.221 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:29.221 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:29.222 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:29.223 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:29.224 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:29.225 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:29.227 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:29.228 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:29.229 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:29.230 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:29.231 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:29.231 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:29.232 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:29.232 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:29.235 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:29.236 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:29.237 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:29.238 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:29.239 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:29.240 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:29.241 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:29.242 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:29.242 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:29.243 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:29.245 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:29.247 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.5812ms
2024-11-10 20:48:29.248 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:29.248 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:29.250 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:29.251 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:48:29.253 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 69.1536ms
2024-11-10 20:48:29.721 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:29.723 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:29.723 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:29.724 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:29.724 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:29.725 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:29.726 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:29.726 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:29.727 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:29.728 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:29.729 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:29.730 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:29.730 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:29.731 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:29.732 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:29.733 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:29.734 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:29.734 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:29.735 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:29.735 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:29.736 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:29.737 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:29.738 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:29.738 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:29.739 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:29.740 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:29.740 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:29.741 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:29.741 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:29.742 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:29.742 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:29.743 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:29.744 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:29.744 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:29.745 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:29.746 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:29.746 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:29.747 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:29.748 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:29.748 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:29.749 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:29.749 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:29.750 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:29.751 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:29.752 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:29.752 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:29.753 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:29.754 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:29.754 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:29.755 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:29.755 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:29.756 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:29.758 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:29.759 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:29.760 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:29.760 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:29.761 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:29.762 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:29.763 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:29.763 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:29.763 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:29.764 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:29.764 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:29.766 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 32.9201ms
2024-11-10 20:48:29.767 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:29.768 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:29.769 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:29.769 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:29.770 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 49.1661ms
2024-11-10 20:48:30.334 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:30.336 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:30.336 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:30.337 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:30.338 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:30.338 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:30.339 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:30.340 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:30.340 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:30.341 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:30.342 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:30.342 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:30.343 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:30.344 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:30.345 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:30.345 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:30.346 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:30.347 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:30.348 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:30.348 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:30.349 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:30.350 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:30.350 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:30.351 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:30.352 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:30.352 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:30.353 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:30.354 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:30.354 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:30.355 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:30.356 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:30.356 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:30.357 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:30.358 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:30.358 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:30.359 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:30.359 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:30.360 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:30.360 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:30.361 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:30.362 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:30.362 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:30.363 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:30.364 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:30.365 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:30.366 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:30.366 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:30.367 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:30.367 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:30.368 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:30.368 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:30.369 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:30.370 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:30.372 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:30.372 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:30.373 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:30.373 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:30.374 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:30.375 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:30.375 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:30.376 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:30.376 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:30.377 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:30.378 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 32.1757ms
2024-11-10 20:48:30.378 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:30.379 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:30.379 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:30.380 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:30.380 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 46.6253ms
2024-11-10 20:48:30.821 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:30.822 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:30.823 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:30.823 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:30.824 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:30.824 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:30.825 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:30.825 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:30.826 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:30.826 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:30.827 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:30.828 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:30.828 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:30.829 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:30.830 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:30.831 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:30.831 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:30.832 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:30.832 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:30.833 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:30.834 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:30.834 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:30.835 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:30.835 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:30.836 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:30.837 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:30.837 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:30.838 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:30.838 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:30.839 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:30.839 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:30.840 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:30.841 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:30.841 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:30.842 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:30.843 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:30.843 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:30.844 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:30.844 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:30.845 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:30.846 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:30.846 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:30.847 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:30.848 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:30.849 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:30.850 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:30.850 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:30.851 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:30.851 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:30.852 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:30.852 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:30.853 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:30.854 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:30.855 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:30.856 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:30.857 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:30.857 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:30.858 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:30.859 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:30.859 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:30.859 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:30.860 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:30.860 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:30.862 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 31.0744ms
2024-11-10 20:48:30.863 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:30.863 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:30.864 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:30.865 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:30.866 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 45.2825ms
2024-11-10 20:48:31.367 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:31.369 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:31.369 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:31.370 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:31.370 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:31.371 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:31.372 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:31.372 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:31.373 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:31.373 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:31.374 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:31.374 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:31.375 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:31.376 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:31.376 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:31.377 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:31.378 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:31.378 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:31.379 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:31.380 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:31.380 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:31.381 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:31.381 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:31.382 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:31.383 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:31.383 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:31.384 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:31.385 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:31.385 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:31.386 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:31.387 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:31.387 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:31.388 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:31.388 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:31.389 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:31.389 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:31.390 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:31.390 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:31.391 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:31.392 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:31.392 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:31.393 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:31.393 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:31.394 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:31.395 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:31.395 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:31.396 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:31.397 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:31.397 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:31.398 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:31.399 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:31.399 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:31.400 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:31.401 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:31.402 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:31.403 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:31.403 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:31.404 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:31.405 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:31.406 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:31.406 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:31.407 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:31.408 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:31.408 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 30.8886ms
2024-11-10 20:48:31.409 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:31.409 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:31.410 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:31.411 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:31.412 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 44.6358ms
2024-11-10 20:48:31.745 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:31.746 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:31.747 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:31.747 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:31.748 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:31.748 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:31.749 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:31.749 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:31.750 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:31.751 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:31.751 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:31.752 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:31.753 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:31.754 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:31.754 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:31.755 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:31.755 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:31.756 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:31.757 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:31.757 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:31.758 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:31.759 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:31.759 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:31.760 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:31.761 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:31.761 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:31.762 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:31.763 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:31.763 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:31.764 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:31.764 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:31.765 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:31.765 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:31.766 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:31.767 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:31.767 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:31.768 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:31.769 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:31.769 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:31.770 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:31.770 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:31.771 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:31.771 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:31.773 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:31.774 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:31.774 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:31.774 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:31.775 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:31.775 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:31.776 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:31.776 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:31.777 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:31.778 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:31.780 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:31.780 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:31.781 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:31.782 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:31.782 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:31.783 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:31.783 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:31.784 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:31.784 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:31.785 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:31.786 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 31.3429ms
2024-11-10 20:48:31.787 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:31.788 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:31.789 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:31.789 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:31.790 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 45.62ms
2024-11-10 20:48:32.147 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:32.149 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:32.150 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:32.150 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:32.151 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:32.151 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:32.152 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:32.152 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:32.153 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:32.154 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:32.155 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:32.156 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:32.156 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:32.157 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:32.158 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:32.159 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:32.159 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:32.160 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:32.161 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:32.162 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:32.162 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:32.163 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:32.164 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:32.164 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:32.165 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:32.165 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:32.166 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:32.167 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:32.168 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:32.169 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:32.169 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:32.170 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:32.171 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:32.171 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:32.172 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:32.173 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:32.173 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:32.174 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:32.174 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:32.175 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:32.176 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:32.176 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:32.177 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:32.178 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:32.179 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:32.180 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:32.180 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:32.181 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:32.181 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:32.182 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:32.182 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:32.183 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:32.185 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:32.186 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:32.186 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:32.187 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:32.188 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:32.189 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:32.190 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:32.191 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:32.191 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:32.191 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:32.192 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:32.193 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.1082ms
2024-11-10 20:48:32.193 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:32.194 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:32.195 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:32.196 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:48:32.196 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 49.255ms
2024-11-10 20:48:40.663 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:40.665 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:40.665 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:40.666 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:40.666 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:40.667 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:40.668 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:40.668 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:40.669 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:40.669 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:40.670 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:40.671 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:40.671 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:40.672 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:40.673 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:40.674 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:40.675 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:40.675 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:40.676 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:40.677 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:40.677 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:40.678 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:40.678 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:40.679 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:40.680 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:40.680 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:40.682 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:40.683 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:40.683 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:40.684 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:40.684 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:40.685 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:40.686 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:40.686 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:40.687 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:40.688 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:40.689 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:40.689 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:40.690 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:40.691 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:40.691 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:40.692 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:40.692 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:40.693 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:40.695 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:40.696 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:40.697 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:40.698 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:40.698 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:40.699 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:40.699 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:40.700 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:40.701 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:40.703 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:40.703 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:40.704 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:40.705 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:40.705 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:40.706 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:40.707 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:40.707 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:40.707 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:40.708 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:40.709 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.3425ms
2024-11-10 20:48:40.710 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:40.711 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:40.711 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:40.712 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:40.713 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 50.3919ms
2024-11-10 20:48:41.009 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:41.011 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:41.012 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:41.012 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:41.013 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:41.014 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:41.015 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:41.015 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:41.016 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:41.016 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:41.017 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:41.018 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:41.018 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:41.019 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:41.020 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:41.021 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:41.022 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:41.022 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:41.023 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:41.024 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:41.024 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:41.025 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:41.025 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:41.026 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:41.026 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:41.027 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:41.028 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:41.029 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:41.030 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:41.030 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:41.031 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:41.031 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:41.032 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:41.033 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:41.033 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:41.034 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:41.034 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:41.035 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:41.036 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:41.037 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:41.038 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:41.038 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:41.039 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:41.040 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:41.041 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:41.041 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:41.042 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:41.043 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:41.043 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:41.044 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:41.044 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:41.045 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:41.046 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:41.048 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:41.048 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:41.049 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:41.050 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:41.051 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:41.052 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:41.052 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:41.053 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:41.053 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:41.054 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:41.055 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 33.9388ms
2024-11-10 20:48:41.056 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:41.057 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:41.057 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:41.058 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:41.060 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 50.8007ms
2024-11-10 20:48:41.539 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:41.541 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:41.541 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:41.542 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:41.543 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:41.543 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:41.544 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:41.545 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:41.545 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:41.546 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:41.546 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:41.547 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:41.548 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:41.549 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:41.550 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:41.551 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:41.552 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:41.552 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:41.553 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:41.553 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:41.554 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:41.554 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:41.555 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:41.556 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:41.557 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:41.558 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:41.559 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:41.559 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:41.560 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:41.561 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:41.561 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:41.562 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:41.562 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:41.563 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:41.564 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:41.565 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:41.566 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:41.566 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:41.567 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:41.567 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:41.568 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:41.568 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:41.569 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:41.571 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:41.573 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:41.573 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:41.574 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:41.575 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:41.575 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:41.576 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:41.576 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:41.577 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:41.580 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:41.581 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:41.582 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:41.582 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:41.583 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:41.584 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:41.585 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:41.586 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:41.586 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:41.587 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:41.588 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:41.588 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.4658ms
2024-11-10 20:48:41.589 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:41.589 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:41.590 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:41.591 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:41.592 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 53.1849ms
2024-11-10 20:48:41.980 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:41.981 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:41.982 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:41.982 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:41.983 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:41.983 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:41.984 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:41.985 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:41.985 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:41.985 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:41.987 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:41.987 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:41.988 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:41.989 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:41.990 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:41.991 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:41.991 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:41.992 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:41.992 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:41.994 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:41.995 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:41.996 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:41.996 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:41.997 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:41.997 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:41.998 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:41.999 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:41.999 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:42.000 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:42.001 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:42.001 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:42.002 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:42.002 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:42.003 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:42.004 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:42.005 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:42.005 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:42.006 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:42.006 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:42.007 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:42.008 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:42.008 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:42.009 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:42.010 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:42.011 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:42.011 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:42.012 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.013 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.013 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:42.014 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:42.014 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:42.015 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:42.017 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:42.018 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.019 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:42.020 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.020 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:42.021 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:42.023 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:42.023 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:42.024 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:42.024 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:42.025 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:42.027 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.6964ms
2024-11-10 20:48:42.028 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:42.028 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:42.029 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.029 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:42.031 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 51.5071ms
2024-11-10 20:48:42.409 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:42.411 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:42.412 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:42.413 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:42.413 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:42.414 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:42.414 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:42.415 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:42.415 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:42.416 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:42.416 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:42.417 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:42.418 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:42.419 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:42.420 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:42.421 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:42.422 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:42.422 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:42.423 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:42.423 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:42.424 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:42.425 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:42.425 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:42.426 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:42.427 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:42.427 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:42.428 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:42.428 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:42.429 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:42.430 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:42.430 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:42.431 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:42.431 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:42.432 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:42.433 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:42.433 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:42.434 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:42.435 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:42.435 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:42.436 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:42.436 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:42.437 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:42.438 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:42.439 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:42.440 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:42.440 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:42.441 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.441 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.442 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:42.442 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:42.443 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:42.443 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:42.445 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:42.446 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.447 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:42.448 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.448 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:42.449 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:42.450 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:42.451 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:42.451 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:42.451 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:42.452 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:42.453 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 32.4902ms
2024-11-10 20:48:42.454 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:42.454 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:42.455 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.456 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:42.456 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 47.3293ms
2024-11-10 20:48:42.783 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:42.784 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:42.785 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:42.785 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:42.786 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:42.787 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:42.788 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:42.788 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:42.789 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:42.789 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:42.790 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:42.791 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:42.792 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:42.793 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:42.794 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:42.795 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:42.796 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:42.797 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:42.798 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:42.798 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:42.799 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:42.800 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:42.801 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:42.802 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:42.803 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:42.803 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:42.804 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:42.805 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:42.805 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:42.806 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:42.807 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:42.807 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:42.808 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:42.809 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:42.810 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:42.810 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:42.811 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:42.811 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:42.812 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:42.813 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:42.814 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:42.814 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:42.815 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:42.816 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:42.817 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:42.818 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:42.818 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.819 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.820 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:42.820 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:42.821 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:42.822 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:42.827 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:42.828 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.829 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:42.830 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.831 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:42.832 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:42.833 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:42.833 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:42.834 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:42.834 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:42.835 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:42.837 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.1577ms
2024-11-10 20:48:42.838 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:42.839 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:42.839 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:42.840 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:48:42.841 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 58.8793ms
2024-11-10 20:48:43.194 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:43.195 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:43.196 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:43.196 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:43.197 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:43.198 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:43.198 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:43.199 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:43.199 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:43.200 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:43.201 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:43.202 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:43.202 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:43.204 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:43.204 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:43.205 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:43.206 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:43.206 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:43.207 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:43.207 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:43.208 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:43.209 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:43.210 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:43.210 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:43.211 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:43.211 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:43.212 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:43.213 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:43.213 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:43.214 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:43.215 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:43.216 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:43.217 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:43.218 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:43.218 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:43.219 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:43.220 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:43.220 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:43.221 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:43.221 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:43.222 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:43.223 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:43.223 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:43.224 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:43.226 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:43.226 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:43.227 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:43.227 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:43.228 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:43.229 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:43.229 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:43.230 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:43.235 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:43.236 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:43.237 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:43.237 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:43.238 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:43.239 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:43.240 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:43.240 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:43.241 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:43.241 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:43.242 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:43.242 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.2919ms
2024-11-10 20:48:43.243 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:43.244 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:43.244 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:43.245 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:43.246 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 52.6453ms
2024-11-10 20:48:43.661 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:43.662 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:43.663 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:43.664 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:43.664 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:43.665 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:43.665 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:43.666 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:43.666 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:43.667 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:43.668 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:43.669 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:43.669 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:43.670 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:43.671 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:43.671 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:43.672 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:43.673 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:43.673 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:43.674 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:43.675 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:43.675 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:43.676 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:43.677 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:43.678 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:43.678 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:43.679 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:43.679 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:43.680 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:43.681 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:43.681 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:43.682 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:43.682 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:43.683 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:43.683 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:43.684 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:43.684 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:43.685 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:43.686 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:43.686 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:43.687 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:43.687 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:43.688 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:43.689 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:43.690 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:43.690 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:43.691 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:43.692 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:43.692 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:43.693 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:43.693 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:43.694 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:43.699 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:43.700 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:43.700 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:43.701 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:43.702 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:43.702 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:43.703 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:43.704 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:43.704 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:43.705 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:43.705 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:43.706 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.9782ms
2024-11-10 20:48:43.707 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:43.708 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:43.709 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:43.709 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:43.710 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 49.2527ms
2024-11-10 20:48:44.084 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:44.086 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:44.087 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:44.087 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:44.088 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:44.088 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:44.089 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:44.089 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:44.090 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:44.091 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:44.091 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:44.092 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:44.093 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:44.093 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:44.094 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:44.095 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:44.095 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:44.096 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:44.096 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:44.098 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:44.098 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:44.099 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:44.100 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:44.101 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:44.101 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:44.102 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:44.102 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:44.103 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:44.104 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:44.105 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:44.105 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:44.106 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:44.106 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:44.107 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:44.108 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:44.108 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:44.109 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:44.109 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:44.110 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:44.110 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:44.111 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:44.112 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:44.112 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:44.114 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:44.115 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:44.115 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:44.116 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:44.116 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:44.117 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:44.117 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:44.118 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:44.119 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:44.123 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:44.125 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:44.125 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:44.126 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:44.127 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:44.127 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:44.128 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:44.129 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:44.129 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:44.129 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:44.130 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:44.130 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.7004ms
2024-11-10 20:48:44.131 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:44.132 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:44.132 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:44.133 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:44.134 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 49.3975ms
2024-11-10 20:48:44.507 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:44.508 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:44.509 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:44.509 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:44.510 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:44.510 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:44.511 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:44.512 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:44.512 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:44.512 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:44.513 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:44.514 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:44.515 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:44.516 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:44.516 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:44.517 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:44.518 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:44.518 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:44.519 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:44.520 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:44.520 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:44.521 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:44.522 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:44.522 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:44.523 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:44.523 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:44.524 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:44.524 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:44.525 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:44.526 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:44.526 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:44.527 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:44.527 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:44.528 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:44.528 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:44.529 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:44.530 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:44.530 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:44.531 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:44.532 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:44.532 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:44.533 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:44.533 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:44.534 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:44.535 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:44.536 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:44.536 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:44.537 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:44.538 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:44.538 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:44.539 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:44.539 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:44.544 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:44.545 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:44.546 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:44.546 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:44.547 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:44.548 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:44.549 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:44.549 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:44.549 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:44.550 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:44.550 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:44.552 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.8657ms
2024-11-10 20:48:44.553 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:44.554 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:44.554 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:44.555 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:44.555 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 49.1155ms
2024-11-10 20:48:45.592 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:45.593 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:45.594 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:45.595 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:45.595 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:45.596 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:45.596 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:45.597 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:45.597 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:45.598 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:45.599 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:45.599 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:45.600 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:45.601 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:45.602 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:45.602 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:45.604 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:45.605 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:45.605 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:45.606 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:45.607 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:45.608 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:45.610 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:45.611 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:45.612 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:45.613 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:45.614 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:45.615 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:45.616 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:45.616 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:45.617 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:45.617 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:45.618 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:45.619 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:45.619 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:45.620 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:45.621 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:45.621 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:45.622 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:45.623 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:45.623 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:45.624 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:45.625 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:45.626 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:45.628 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:45.629 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:45.629 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:45.630 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:45.630 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:45.631 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:45.631 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:45.632 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:45.637 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:45.638 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:45.639 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:45.640 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:45.641 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:45.642 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:45.643 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:45.643 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:45.644 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:45.644 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:45.644 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:45.645 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 42.8591ms
2024-11-10 20:48:45.646 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:45.647 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:45.647 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:45.648 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:45.649 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 57.2642ms
2024-11-10 20:48:46.493 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:46.494 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:46.495 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:46.495 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:46.496 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:46.496 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:46.497 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:46.497 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:46.498 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:46.498 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:46.499 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:46.500 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:46.501 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:46.502 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:46.502 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:46.503 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:46.504 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:46.505 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:46.505 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:46.506 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:46.506 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:46.507 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:46.508 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:46.509 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:46.509 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:46.510 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:46.510 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:46.511 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:46.512 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:46.512 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:46.513 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:46.513 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:46.514 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:46.515 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:46.515 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:46.516 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:46.516 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:46.517 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:46.518 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:46.518 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:46.519 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:46.519 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:46.520 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:46.521 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:46.522 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:46.522 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:46.523 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:46.524 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:46.524 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:46.525 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:46.525 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:46.526 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:46.531 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:46.532 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:46.532 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:46.533 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:46.534 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:46.534 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:46.535 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:46.536 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:46.536 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:46.537 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:46.537 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:46.539 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.4064ms
2024-11-10 20:48:46.540 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:46.540 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:46.540 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:46.541 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:46.542 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 49.3518ms
2024-11-10 20:48:46.912 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:46.913 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:46.914 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:46.914 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:46.915 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:46.915 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:46.916 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:46.917 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:46.917 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:46.918 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:46.919 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:46.919 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:46.920 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:46.921 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:46.921 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:46.922 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:46.922 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:46.923 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:46.924 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:46.924 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:46.925 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:46.926 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:46.926 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:46.927 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:46.927 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:46.928 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:46.929 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:46.929 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:46.930 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:46.930 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:46.931 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:46.932 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:46.932 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:46.933 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:46.934 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:46.934 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:46.935 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:46.935 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:46.936 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:46.936 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:46.937 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:46.938 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:46.938 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:46.939 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:46.940 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:46.941 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:46.941 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:46.942 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:46.942 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:46.943 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:46.943 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:46.944 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:46.949 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:46.950 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:46.951 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:46.952 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:46.952 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:46.953 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:46.954 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:46.954 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:46.955 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:46.955 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:46.956 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:46.956 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.4573ms
2024-11-10 20:48:46.957 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:46.957 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:46.958 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:46.959 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:46.959 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 47.3813ms
2024-11-10 20:48:47.325 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:47.326 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:47.327 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:47.327 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:47.328 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:47.328 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:47.329 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:47.330 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:47.330 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:47.330 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:47.331 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:47.332 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:47.332 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:47.333 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:47.334 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:47.335 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:47.336 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:47.336 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:47.337 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:47.337 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:47.338 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:47.338 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:47.339 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:47.339 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:47.340 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:47.341 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:47.341 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:47.342 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:47.343 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:47.343 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:47.344 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:47.344 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:47.345 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:47.345 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:47.346 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:47.347 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:47.347 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:47.348 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:47.349 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:47.349 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:47.350 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:47.351 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:47.351 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:47.352 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:47.353 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:47.353 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:47.354 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:47.355 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:47.355 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:47.356 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:47.356 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:47.357 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:47.362 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:47.363 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:47.364 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:47.364 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:47.365 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:47.365 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:47.366 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:47.367 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:47.367 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:47.368 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:47.368 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:47.370 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.1743ms
2024-11-10 20:48:47.371 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:47.372 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:47.372 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:47.373 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:47.373 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 48.1844ms
2024-11-10 20:48:47.711 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:47.712 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:47.713 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:47.713 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:47.714 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:47.714 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:47.715 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:47.715 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:47.716 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:47.716 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:47.717 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:47.718 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:47.718 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:47.719 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:47.720 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:47.721 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:47.721 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:47.722 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:47.723 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:47.723 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:47.724 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:47.724 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:47.725 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:47.725 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:47.726 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:47.727 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:47.727 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:47.728 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:47.728 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:47.729 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:47.730 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:47.731 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:47.731 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:47.732 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:47.733 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:47.733 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:47.734 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:47.734 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:47.735 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:47.735 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:47.736 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:47.737 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:47.738 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:47.739 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:47.740 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:47.740 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:47.741 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:47.741 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:47.742 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:47.742 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:47.743 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:47.744 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:47.750 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:47.752 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:47.753 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:47.754 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:47.755 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:47.756 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:47.758 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:47.759 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:47.760 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:47.760 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:47.761 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:47.762 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.7362ms
2024-11-10 20:48:47.763 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:47.764 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:47.765 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:47.766 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:48:47.767 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 56.4092ms
2024-11-10 20:48:54.019 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:54.020 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:54.020 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:54.021 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:54.021 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:54.022 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:54.023 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:54.023 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:54.024 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:54.024 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:54.025 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:54.026 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:54.026 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:54.027 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:54.028 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:54.029 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:54.030 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:54.030 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:54.031 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:54.032 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.032 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.033 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.033 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:54.034 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.035 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:54.035 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:54.036 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.037 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.038 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.038 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:54.039 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.039 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:54.040 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:54.040 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:54.041 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:54.042 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:54.042 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:54.043 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:54.044 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:54.044 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:54.045 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:54.045 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:54.046 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:54.047 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:54.048 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:54.049 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:54.049 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.050 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.051 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:54.052 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:54.052 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:54.053 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:54.060 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:54.061 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.062 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:54.063 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.063 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:54.064 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:54.065 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:54.066 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:54.066 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:54.067 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:54.067 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:54.068 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.7132ms
2024-11-10 20:48:54.068 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:54.069 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:54.070 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.070 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:54.071 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 52.4517ms
2024-11-10 20:48:54.205 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:54.207 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:54.208 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:54.208 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:54.209 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:54.209 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:54.210 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:54.211 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:54.211 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:54.212 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:54.213 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:54.213 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:54.214 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:54.215 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:54.215 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:54.216 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:54.217 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:54.218 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:54.218 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:54.219 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.219 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.220 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.220 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:54.221 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.221 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:54.222 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:54.223 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.224 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.225 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.226 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:54.226 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.227 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:54.228 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:54.229 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:54.229 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:54.230 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:54.231 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:54.231 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:54.232 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:54.232 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:54.233 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:54.233 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:54.234 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:54.235 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:54.236 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:54.237 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:54.237 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.238 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.239 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:54.239 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:54.240 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:54.240 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:54.244 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:54.246 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.246 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:54.247 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.248 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:54.248 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:54.249 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:54.250 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:54.250 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:54.250 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:54.251 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:54.253 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.2181ms
2024-11-10 20:48:54.254 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:54.254 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:54.254 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.255 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:54.256 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 50.4017ms
2024-11-10 20:48:54.508 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:54.510 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:54.510 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:54.511 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:54.511 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:54.512 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:54.513 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:54.513 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:54.514 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:54.515 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:54.516 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:54.517 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:54.517 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:54.518 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:54.519 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:54.520 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:54.521 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:54.522 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:54.523 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:54.523 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.524 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.525 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.526 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:54.528 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.529 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:54.530 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:54.530 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.531 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.532 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.532 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:54.533 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.534 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:54.534 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:54.535 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:54.536 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:54.537 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:54.537 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:54.538 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:54.539 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:54.539 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:54.540 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:54.541 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:54.542 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:54.543 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:54.545 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:54.545 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:54.546 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.547 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.547 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:54.549 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:54.550 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-10 20:48:54.550 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:54.552 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:54.554 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.554 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:54.556 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.557 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:48:54.558 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:54.559 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:54.560 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:54.560 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:54.560 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:54.561 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:54.562 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.4357ms
2024-11-10 20:48:54.563 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:54.564 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:54.564 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.565 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:54.566 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 58.6165ms
2024-11-10 20:48:54.790 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:54.793 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:54.794 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:54.795 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:54.795 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:54.796 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:54.797 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:54.797 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:54.798 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:54.799 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:54.800 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:54.802 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:54.802 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:54.804 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:54.805 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:54.806 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:54.807 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:54.808 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:54.809 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:54.810 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.811 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.811 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.812 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:54.813 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:54.814 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:54.815 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:54.816 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.817 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.818 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.819 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:54.820 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:54.820 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:54.821 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:54.822 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:54.822 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:54.823 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:54.824 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:54.824 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:54.825 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:54.826 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:54.826 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:54.827 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:54.828 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:54.829 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:54.831 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:54.831 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:54.831 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.832 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.833 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:54.834 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:54.834 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:54.835 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:54.837 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:54.838 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.839 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:54.839 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.840 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:54.841 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:54.842 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:54.843 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:54.843 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:54.843 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:54.844 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:54.846 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 39.1251ms
2024-11-10 20:48:54.846 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:54.847 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:54.848 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:54.849 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:54.850 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 60.1403ms
2024-11-10 20:48:54.994 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:54.995 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:54.996 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:54.997 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:54.998 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:54.998 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:54.999 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:55.001 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:55.002 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:55.003 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:55.004 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:55.005 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:55.007 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:55.008 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:55.009 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:55.011 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:55.012 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:55.013 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:55.014 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:55.017 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:55.019 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:55.020 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:55.023 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:55.024 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:55.024 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:55.025 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:55.026 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:55.027 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:55.029 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:55.030 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:55.031 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:55.032 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:55.033 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:55.034 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:55.036 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:55.036 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:55.037 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:55.039 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:55.040 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:55.041 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:55.043 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:55.044 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:55.044 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:55.045 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:55.047 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:55.047 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:55.048 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:55.049 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:55.050 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:55.051 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:55.052 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:55.053 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:55.054 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:55.056 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:55.057 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:55.058 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:55.059 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:55.059 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:55.060 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:55.061 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:55.061 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:55.061 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:55.062 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:55.063 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 52.3959ms
2024-11-10 20:48:55.064 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:55.065 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:55.066 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:55.066 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:55.067 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 74.224ms
2024-11-10 20:48:56.025 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:56.027 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:56.028 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:56.028 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:56.029 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:56.030 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:56.030 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:56.031 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:56.031 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:56.031 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:56.032 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:56.033 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:56.034 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:56.035 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:56.035 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:56.036 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:56.037 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:56.038 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:56.039 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:56.039 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:56.040 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:56.042 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:56.043 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:56.044 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:56.044 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:56.045 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:56.046 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:56.047 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:56.048 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:56.049 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:56.050 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:56.051 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:56.051 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:56.052 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:56.052 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:56.053 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:56.053 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:56.054 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:56.054 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:56.055 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:56.057 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:56.057 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:56.058 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:56.059 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:56.060 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:56.061 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:56.061 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:56.062 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:56.062 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:56.063 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:56.064 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:56.064 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:56.066 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:56.067 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:56.068 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:56.068 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:56.069 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:56.070 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:56.071 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:56.071 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:56.072 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:56.072 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:56.073 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:56.074 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.3942ms
2024-11-10 20:48:56.074 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:56.075 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:56.075 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:56.076 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:56.077 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 51.8086ms
2024-11-10 20:48:56.804 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:56.806 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:56.806 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:56.807 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:56.807 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:56.808 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:56.808 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:56.809 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:56.809 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:56.810 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:56.810 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:56.811 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:56.811 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:56.812 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:56.813 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:56.814 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:56.815 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:56.816 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:56.816 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:56.817 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:56.817 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:56.818 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:56.819 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:56.820 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:56.820 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:56.821 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:56.822 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:56.823 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:56.823 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:56.824 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:56.824 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:56.825 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:56.825 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:56.826 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:56.827 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:56.827 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:56.828 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:56.828 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:56.829 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:56.829 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:56.830 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:56.831 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:56.832 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:56.833 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:56.834 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:56.835 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:56.835 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:56.836 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:56.837 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:56.837 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:56.838 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:56.839 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:56.844 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:56.846 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:56.847 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:56.848 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:56.848 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:56.849 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:56.850 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:56.851 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:56.851 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:56.852 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:56.853 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:56.854 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.3026ms
2024-11-10 20:48:56.856 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:56.856 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:56.857 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:56.858 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:56.859 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 54.5433ms
2024-11-10 20:48:57.063 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:57.065 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:57.066 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:57.066 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:57.067 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:57.067 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:57.068 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:57.069 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:57.069 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:57.070 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:57.070 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:57.071 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:57.072 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:57.073 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:57.073 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:57.074 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:57.075 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:57.075 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:57.077 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:57.078 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.078 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.079 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.080 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:57.080 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.081 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:57.081 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:57.082 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.083 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.084 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.084 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:57.085 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.086 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:57.086 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:57.087 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:57.088 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:57.088 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:57.089 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:57.089 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:57.090 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:57.091 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:57.091 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:57.092 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:57.093 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:57.094 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:57.095 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:57.095 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:57.096 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.096 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.097 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:57.097 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:57.098 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:57.098 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:57.103 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:57.104 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.105 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:57.105 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.106 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:57.107 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:57.108 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:57.108 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:57.108 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:57.109 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:57.109 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:57.110 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.0424ms
2024-11-10 20:48:57.111 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:57.111 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:57.112 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.113 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:57.114 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 50.5275ms
2024-11-10 20:48:57.348 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:57.350 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:57.350 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:57.351 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:57.351 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:57.352 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:57.352 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:57.353 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:57.353 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:57.354 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:57.355 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:57.355 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:57.356 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:57.357 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:57.358 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:57.359 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:57.359 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:57.360 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:57.360 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:57.362 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.363 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.364 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.364 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:57.365 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.365 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:57.366 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:57.366 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.367 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.368 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.368 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:57.369 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.369 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:57.370 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:57.371 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:57.371 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:57.372 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:57.373 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:57.373 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:57.374 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:57.374 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:57.375 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:57.375 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:57.376 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:57.377 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:57.378 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:57.378 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:57.379 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.379 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.380 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:57.380 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:57.381 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:57.381 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:57.386 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:57.387 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.388 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:57.389 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.390 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:57.390 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:57.391 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:57.392 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:57.392 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:57.392 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:57.393 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:57.394 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.5396ms
2024-11-10 20:48:57.395 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:57.396 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:57.396 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.397 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:57.398 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 49.429ms
2024-11-10 20:48:57.650 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:57.651 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:57.652 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:57.652 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:57.653 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:57.653 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:57.654 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:57.655 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:57.655 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:57.656 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:57.657 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:57.657 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:57.658 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:57.659 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:57.660 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:57.661 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:57.662 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:57.663 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:57.663 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:57.664 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.664 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.665 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.666 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:57.667 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.667 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:57.668 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:57.669 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.670 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.670 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.671 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:57.672 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.672 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:57.673 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:57.674 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:57.675 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:57.675 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:57.676 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:57.676 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:57.677 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:57.678 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:57.678 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:57.679 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:57.679 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:57.680 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:57.682 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:57.683 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:57.683 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.684 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.685 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:57.685 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:57.686 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:57.686 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:57.693 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:57.694 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.695 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:57.696 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.697 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:57.697 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:57.699 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:57.699 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:57.700 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:57.700 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:57.701 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:57.702 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.9628ms
2024-11-10 20:48:57.703 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:57.704 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:57.705 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.705 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:57.706 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 56.3987ms
2024-11-10 20:48:57.881 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:57.882 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:57.883 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:57.883 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:57.884 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:57.884 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:57.885 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:57.886 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:57.886 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:57.887 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:57.888 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:57.888 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:57.889 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:57.890 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:57.891 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:57.892 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:57.893 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:57.893 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:57.894 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:57.895 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.896 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.896 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.897 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:57.898 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:57.898 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:57.899 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:57.900 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.901 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.902 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.903 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:57.904 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:57.904 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:57.905 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:57.906 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:57.906 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:57.907 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:57.907 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:57.908 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:57.909 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:57.910 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:57.910 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:57.911 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:57.912 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:57.913 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:57.914 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:57.914 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:57.915 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.915 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.916 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:57.916 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:57.917 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:57.918 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:57.923 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:57.924 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.925 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:57.926 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.926 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:57.927 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:57.929 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:57.929 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:57.929 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:57.930 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:57.931 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:57.932 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 40.6779ms
2024-11-10 20:48:57.933 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:57.934 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:57.935 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:57.935 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:57.936 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 55.4477ms
2024-11-10 20:48:58.141 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:58.143 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:58.143 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:58.144 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:58.144 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:58.145 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:58.145 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:58.146 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:58.146 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:58.147 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:58.148 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:58.148 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:58.149 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:58.150 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:58.150 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:58.151 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:58.152 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:58.152 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:58.153 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:58.154 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.155 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.155 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.156 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:58.156 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.157 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:58.157 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:58.158 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.159 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.159 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.160 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:58.160 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.161 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:58.162 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:58.162 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:58.163 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:58.163 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:58.164 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:58.164 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:58.165 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:58.166 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:58.166 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:58.167 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:58.168 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:58.169 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:58.170 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:58.170 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:58.171 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.171 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.172 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:58.172 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:58.173 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:58.173 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:58.178 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:58.179 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.180 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:58.181 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.182 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:58.183 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:58.184 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:58.184 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:58.185 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:58.185 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:58.185 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:58.186 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 34.9122ms
2024-11-10 20:48:58.187 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:58.187 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:58.188 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.188 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:58.189 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 47.7833ms
2024-11-10 20:48:58.388 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:58.390 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:58.391 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:58.392 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:58.392 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:58.393 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:58.393 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:58.394 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:58.394 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:58.395 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:58.396 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:58.397 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:58.398 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:58.399 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:58.400 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:58.400 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:58.401 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:58.402 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:58.402 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:58.403 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.404 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.404 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.405 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:58.406 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.406 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:58.407 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:58.407 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.408 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.409 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.409 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:58.410 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.411 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:58.411 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:58.412 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:58.413 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:58.413 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:58.414 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:58.414 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:58.415 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:58.416 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:58.416 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:58.417 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:58.417 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:58.419 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:58.420 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:58.420 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:58.421 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.421 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.422 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:58.422 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:58.423 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:58.423 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:58.428 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:58.429 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.430 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:58.431 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.431 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:58.432 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:58.433 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:58.434 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:58.434 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:58.434 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:58.435 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:58.436 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 35.8067ms
2024-11-10 20:48:58.437 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:58.438 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:58.438 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.439 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:58.439 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 51.6982ms
2024-11-10 20:48:58.626 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:48:58.627 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:58.628 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:58.629 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:58.629 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:58.630 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:58.630 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:58.631 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:58.632 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:58.632 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:58.633 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:58.634 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:58.634 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:58.635 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:58.636 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:58.637 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:58.638 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:58.638 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:58.639 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:58.640 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.640 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.641 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.642 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:58.642 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.643 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:58.644 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:58.644 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.645 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.646 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.647 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:58.647 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.648 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:58.649 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:58.650 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:58.650 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:58.651 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:58.651 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:58.652 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:58.653 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:58.653 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:58.654 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:58.654 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:58.655 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:58.656 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:58.657 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:58.658 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:58.658 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.659 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.659 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:58.660 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:58.660 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:58.661 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:58.666 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:48:58.668 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.669 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:58.670 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.670 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:58.671 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:58.672 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:58.673 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:58.673 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:58.674 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:58.674 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:58.675 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.6269ms
2024-11-10 20:48:58.676 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:58.677 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:58.678 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.678 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:58.679 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 53.3177ms
2024-11-10 20:48:58.959 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:48:58.960 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:48:58.961 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:48:58.961 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:48:58.962 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:48:58.962 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:48:58.963 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:58.964 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:48:58.964 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:58.965 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:48:58.967 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:48:58.967 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:48:58.968 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:58.969 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:48:58.970 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:48:58.970 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:58.971 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:48:58.972 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:48:58.973 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:58.974 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.974 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.975 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.976 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:48:58.976 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:48:58.977 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:58.978 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:48:58.978 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.980 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.980 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.981 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:48:58.982 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:48:58.982 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:58.983 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:48:58.983 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:58.984 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:58.985 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:48:58.985 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:48:58.986 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:58.987 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:48:58.987 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:58.988 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:58.989 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:48:58.990 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:48:58.991 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:48:58.992 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:48:58.992 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:48:58.993 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.993 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:58.994 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:48:58.995 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:48:58.996 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:48:58.996 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:59.001 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:48:59.002 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:59.003 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:48:59.004 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:59.004 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:48:59.005 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:48:59.006 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:48:59.006 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:48:59.006 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:48:59.007 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:48:59.008 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:48:59.009 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.9473ms
2024-11-10 20:48:59.010 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:48:59.011 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:48:59.011 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:48:59.012 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:48:59.012 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 53.9538ms
2024-11-10 20:49:01.033 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:49:01.034 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:49:01.035 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:49:01.035 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:49:01.036 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:49:01.036 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:49:01.037 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:49:01.038 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:49:01.038 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:49:01.038 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:49:01.039 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:49:01.040 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:49:01.040 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:49:01.041 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:49:01.042 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:49:01.043 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:49:01.043 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:49:01.044 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:49:01.045 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:49:01.045 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:49:01.046 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:49:01.046 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:49:01.047 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:49:01.047 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:49:01.048 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:49:01.049 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:49:01.050 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:49:01.051 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:49:01.051 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:49:01.052 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:49:01.052 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:49:01.053 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:49:01.053 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:49:01.054 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:49:01.054 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:49:01.055 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:49:01.056 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:49:01.056 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:49:01.057 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:49:01.058 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:49:01.058 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:49:01.059 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:49:01.059 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:49:01.060 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:49:01.063 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:49:01.063 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:49:01.063 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:49:01.064 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:49:01.065 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:49:01.065 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:49:01.066 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:49:01.066 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:49:01.072 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:49:01.073 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:49:01.074 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:49:01.074 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:49:01.075 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:49:01.076 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:49:01.077 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:49:01.077 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:49:01.078 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:49:01.078 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:49:01.079 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:49:01.079 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 36.6499ms
2024-11-10 20:49:01.080 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:49:01.081 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:49:01.081 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:49:01.082 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:49:01.082 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 49.6384ms
2024-11-10 20:49:27.340 +07:00 [DBG] Connection id "0HN8198R1VNR1" received FIN.
2024-11-10 20:49:27.342 +07:00 [DBG] Connection id "0HN8198R1VNR1" is closed. The last processed stream ID was 81.
2024-11-10 20:49:27.342 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNR1 completed.
2024-11-10 20:49:27.345 +07:00 [DBG] Connection id "0HN8198R1VNR1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:49:27.366 +07:00 [DBG] Connection id "0HN8198R1VNR1" stopped.
2024-11-10 20:57:16.492 +07:00 [DBG] Connection id "0HN8198R1VNR2" accepted.
2024-11-10 20:57:16.497 +07:00 [DBG] Connection id "0HN8198R1VNR2" started.
2024-11-10 20:57:16.505 +07:00 [DBG] Connection 0HN8198R1VNR2 established using the following protocol: "Tls13"
2024-11-10 20:57:16.512 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:57:16.525 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:57:16.526 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:57:16.527 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:57:16.528 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:57:16.530 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:57:16.533 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:16.534 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:57:16.535 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:16.536 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:57:16.537 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:57:16.539 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:57:16.541 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:16.543 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:57:16.544 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:16.546 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:16.548 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:16.548 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:57:16.550 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:57:16.551 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:57:16.552 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:57:16.552 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:57:16.553 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:57:16.554 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:57:16.555 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:57:16.555 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:57:16.557 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:16.558 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:16.559 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:16.559 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:57:16.560 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:16.561 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:57:16.562 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:57:16.563 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:16.563 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:16.564 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:57:16.566 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:16.566 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:57:16.567 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:57:16.568 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:16.569 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:16.569 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:57:16.570 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:16.572 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:57:16.574 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:57:16.575 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:57:16.576 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:16.625 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:16.626 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:16.627 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:16.628 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:57:16.628 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:57:16.643 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:57:16.645 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:16.646 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:57:16.648 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:16.648 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:57:16.649 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:57:16.651 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:57:16.652 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:57:16.652 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:57:16.653 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:57:16.653 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:57:16.654 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 108.5535ms
2024-11-10 20:57:16.655 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:16.656 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:57:16.657 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:16.658 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:57:16.659 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 146.6959ms
2024-11-10 20:57:18.025 +07:00 [DBG] Connection id "0HN8198R1VNR2" received FIN.
2024-11-10 20:57:18.026 +07:00 [DBG] Connection id "0HN8198R1VNR2" is closed. The last processed stream ID was 1.
2024-11-10 20:57:18.026 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNR2 completed.
2024-11-10 20:57:18.027 +07:00 [DBG] Connection id "0HN8198R1VNR2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:57:18.038 +07:00 [DBG] Connection id "0HN8198R1VNR2" stopped.
2024-11-10 20:57:19.413 +07:00 [DBG] Connection id "0HN8198R1VNR3" accepted.
2024-11-10 20:57:19.414 +07:00 [DBG] Connection id "0HN8198R1VNR3" started.
2024-11-10 20:57:19.416 +07:00 [DBG] Connection 0HN8198R1VNR3 established using the following protocol: "Tls13"
2024-11-10 20:57:19.417 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - null null
2024-11-10 20:57:19.419 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:57:19.419 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:57:19.420 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:57:19.420 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:57:19.421 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:57:19.421 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:19.422 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:57:19.422 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:19.423 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:57:19.423 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:57:19.424 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:57:19.425 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:19.426 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:57:19.427 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:19.427 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:19.428 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:19.429 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:57:19.429 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:57:19.430 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:57:19.431 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:57:19.431 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:57:19.432 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:57:19.433 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:57:19.433 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:57:19.434 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:57:19.435 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:19.435 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:19.436 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:19.437 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:57:19.437 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:19.438 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:57:19.439 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:57:19.440 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:19.440 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:19.441 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:57:19.442 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:19.442 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:57:19.443 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:57:19.443 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:19.444 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:19.445 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:57:19.446 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:19.447 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:57:19.448 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:57:19.449 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:57:19.449 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:19.450 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:19.450 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:19.451 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:19.452 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:57:19.452 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:57:19.457 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[AppointmentTime], [a].[AppointmentStatus], [a].[AppointmentComment], [a].[PatientId], [a].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
ORDER BY [a].[AppointmentTime]
2024-11-10 20:57:19.458 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:19.458 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:57:19.459 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:19.460 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:57:19.461 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:57:19.462 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:57:19.462 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:57:19.463 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:57:19.463 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:57:19.463 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:57:19.464 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 37.0242ms
2024-11-10 20:57:19.465 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:19.466 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:57:19.467 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:19.467 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:57:19.468 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=0 - 200 7509 application/json; charset=utf-8 50.9732ms
2024-11-10 20:57:22.495 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:57:22.497 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:57:22.498 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:57:22.498 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:57:22.499 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:57:22.500 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:57:22.500 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:22.501 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:57:22.502 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:22.502 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:57:22.503 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:57:22.504 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:57:22.504 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:22.505 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:57:22.506 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:22.507 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:22.508 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:22.509 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:57:22.509 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:57:22.510 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:57:22.511 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:57:22.511 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:57:22.512 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:57:22.513 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:57:22.513 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:57:22.514 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:57:22.515 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:22.516 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:22.517 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:22.518 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:57:22.518 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:22.519 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:57:22.520 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:57:22.520 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:22.521 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:22.522 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:57:22.522 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:22.523 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:57:22.524 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:57:22.525 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:22.525 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:22.526 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:57:22.527 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:22.528 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:57:22.530 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:57:22.530 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:57:22.531 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:22.531 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:22.532 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:22.533 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:22.533 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:57:22.534 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:57:22.540 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:57:22.541 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:22.542 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:57:22.543 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:22.544 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:57:22.545 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:57:22.546 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:57:22.546 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:57:22.547 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:57:22.547 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:57:22.548 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:57:22.548 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 41.1831ms
2024-11-10 20:57:22.549 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:22.550 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:57:22.550 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:22.551 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:57:22.552 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3746 application/json; charset=utf-8 57.1779ms
2024-11-10 20:57:26.771 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/e0ac8128-2b35-4551-2bb4-08dcf012f04b - null null
2024-11-10 20:57:26.773 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:57:26.773 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:57:26.775 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:57:26.777 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/e0ac8128-2b35-4551-2bb4-08dcf012f04b'
2024-11-10 20:57:26.780 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/e0ac8128-2b35-4551-2bb4-08dcf012f04b'
2024-11-10 20:57:26.784 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-10 20:57:26.785 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:57:26.786 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-10 20:57:26.821 +07:00 [INF] Route matched with {action = "GetById", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:57:26.822 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:57:26.823 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:57:26.823 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:26.825 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:57:26.826 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:26.827 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:26.828 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:26.829 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-10 20:57:26.830 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-10 20:57:26.834 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-10 20:57:26.835 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-10 20:57:26.835 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-10 20:57:26.836 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-10 20:57:26.851 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:57:26.873 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(pt => pt.Patient)
    .SingleOrDefault(ap => ap.AppointmentId == __id_0)'
2024-11-10 20:57:26.900 +07:00 [DBG] Including navigation: 'Appointment.Patient'.
2024-11-10 20:57:26.997 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppointmentComment (string) Required, 1], [Property: Appointment.AppointmentStatus (string) Required MaxLength(50), 2], [Property: Appointment.AppointmentTime (DateTime) Required, 3], [Property: Appointment.DoctorId (Guid) Required FK Index, 4], [Property: Appointment.PatientId (Guid) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Patient.Avatar (string) Required MaxLength(255), 7], [Property: Patient.Date (DateTime) Required, 8], [Property: Patient.Diseases (string) Required MaxLength(500), 9], [Property: Patient.Email (string) Required MaxLength(100), 10], [Property: Patient.FullName (string) Required MaxLength(100), 11], [Property: Patient.Gender (string) Required, 12], [Property: Patient.Location (string) Required MaxLength(255), 13], [Property: Patient.PaymentId (Guid) Required FK Index, 14], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 15], [Property: Patient.Status (string) Required, 16] }
        SELECT TOP(2) a.AppointmentId, a.AppointmentComment, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId, p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Appointment AS a
        INNER JOIN Patient AS p ON a.PatientId == p.PatientId
        WHERE a.AppointmentId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-11-10 20:57:27.000 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:57:27.001 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:57:27.001 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.002 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.003 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:27.003 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:27.004 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:57:27.005 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-10 20:57:27.013 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-10 20:57:27.049 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:27.083 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:27.090 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:27.101 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.102 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 87ms reading results.
2024-11-10 20:57:27.102 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.103 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:57:27.105 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:57:27.106 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:57:27.106 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:57:27.107 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:57:27.107 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:57:27.108 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModel'.
2024-11-10 20:57:27.109 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API) in 281.8301ms
2024-11-10 20:57:27.109 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-10 20:57:27.110 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:57:27.111 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.111 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:57:27.112 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/e0ac8128-2b35-4551-2bb4-08dcf012f04b - 200 526 application/json; charset=utf-8 341.2012ms
2024-11-10 20:57:27.115 +07:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7169/api/Appointment/e0ac8128-2b35-4551-2bb4-08dcf012f04b - null null
2024-11-10 20:57:27.116 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:57:27.116 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:57:27.118 +07:00 [DBG] The request is a preflight request.
2024-11-10 20:57:27.120 +07:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7169/api/Appointment/e0ac8128-2b35-4551-2bb4-08dcf012f04b - 204 null null 5.3654ms
2024-11-10 20:57:27.123 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7169/api/Appointment/e0ac8128-2b35-4551-2bb4-08dcf012f04b - application/json 527
2024-11-10 20:57:27.124 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:57:27.124 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:57:27.125 +07:00 [DBG] PUT requests are not supported
2024-11-10 20:57:27.126 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/e0ac8128-2b35-4551-2bb4-08dcf012f04b'
2024-11-10 20:57:27.126 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/e0ac8128-2b35-4551-2bb4-08dcf012f04b'
2024-11-10 20:57:27.127 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-10 20:57:27.128 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:57:27.129 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-10 20:57:27.131 +07:00 [INF] Route matched with {action = "Update", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Update(System.Guid, CityInfo.API.Models.AppointmentVM) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:57:27.132 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:57:27.133 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:57:27.134 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:27.135 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:57:27.136 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:27.136 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:27.137 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:27.138 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-10 20:57:27.138 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-10 20:57:27.139 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-10 20:57:27.140 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-10 20:57:27.140 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-10 20:57:27.141 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-10 20:57:27.142 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' ...
2024-11-10 20:57:27.145 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' using the name '' in request data ...
2024-11-10 20:57:27.149 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-10 20:57:27.150 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-10 20:57:27.163 +07:00 [DBG] Connection id "0HN8198R1VNR3", Request id "0HN8198R1VNR3:00000009": started reading request body.
2024-11-10 20:57:27.164 +07:00 [DBG] Connection id "0HN8198R1VNR3", Request id "0HN8198R1VNR3:00000009": done reading request body.
2024-11-10 20:57:27.205 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-10 20:57:27.206 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-10 20:57:27.207 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' ...
2024-11-10 20:57:27.222 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-10 20:57:27.225 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:57:27.226 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .SingleOrDefault(ap => ap.AppointmentId == __appointment_AppointmentId_0)'
2024-11-10 20:57:27.230 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppointmentComment (string) Required, 1], [Property: Appointment.AppointmentStatus (string) Required MaxLength(50), 2], [Property: Appointment.AppointmentTime (DateTime) Required, 3], [Property: Appointment.DoctorId (Guid) Required FK Index, 4], [Property: Appointment.PatientId (Guid) Required FK Index, 5] }
        SELECT TOP(2) a.AppointmentId, a.AppointmentComment, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId
        FROM Appointment AS a
        WHERE a.AppointmentId == @__appointment_AppointmentId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-11-10 20:57:27.231 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:57:27.231 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:57:27.232 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.232 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.233 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:27.233 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:27.234 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:27.234 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_AppointmentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppointmentId] = @__appointment_AppointmentId_0
2024-11-10 20:57:27.238 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__appointment_AppointmentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppointmentId] = @__appointment_AppointmentId_0
2024-11-10 20:57:27.240 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:27.240 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.241 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:57:27.242 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.242 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:57:27.245 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-11-10 20:57:27.248 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-11-10 20:57:27.258 +07:00 [DBG] The unchanged property 'Appointment.AppointmentStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-10 20:57:27.265 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:27.272 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-11-10 20:57:27.335 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.336 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.338 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:27.339 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:27.342 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-10 20:57:27.342 +07:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointment] SET [AppointmentStatus] = @p0
OUTPUT 1
WHERE [AppointmentId] = @p1;
2024-11-10 20:57:27.350 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointment] SET [AppointmentStatus] = @p0
OUTPUT 1
WHERE [AppointmentId] = @p1;
2024-11-10 20:57:27.354 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.355 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-11-10 20:57:27.357 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.357 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:57:27.361 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:27.363 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-11-10 20:57:27.365 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-11-10 20:57:27.366 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API) in 229.2917ms
2024-11-10 20:57:27.366 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-10 20:57:27.367 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:57:27.367 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.368 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:57:27.369 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7169/api/Appointment/e0ac8128-2b35-4551-2bb4-08dcf012f04b - 204 null null 246.1175ms
2024-11-10 20:57:27.372 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:57:27.374 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:57:27.374 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:57:27.374 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:57:27.375 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:57:27.376 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:57:27.377 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:27.377 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:57:27.378 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:27.378 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:57:27.379 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:57:27.380 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:57:27.380 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:27.381 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:57:27.382 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:27.383 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:27.383 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:27.384 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:57:27.385 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:57:27.385 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:57:27.386 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:57:27.387 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:57:27.387 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:57:27.388 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:57:27.388 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:57:27.389 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:57:27.390 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:27.390 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:27.391 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:27.392 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:57:27.392 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:27.393 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:57:27.393 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:57:27.394 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:27.394 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:27.395 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:57:27.396 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:27.397 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:57:27.397 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:57:27.398 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:27.399 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:27.399 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:57:27.400 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:27.401 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:57:27.402 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:57:27.402 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:57:27.403 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.403 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.404 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:27.405 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:27.406 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:57:27.406 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:57:27.412 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:57:27.414 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.415 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:57:27.415 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.416 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:57:27.417 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:57:27.418 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:57:27.419 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:57:27.419 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:57:27.420 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:57:27.420 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:57:27.421 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 38.164ms
2024-11-10 20:57:27.421 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:27.422 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:57:27.422 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:27.423 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:57:27.424 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3747 application/json; charset=utf-8 51.4033ms
2024-11-10 20:57:33.937 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/426446a0-17a4-46e0-2bb5-08dcf012f04b - null null
2024-11-10 20:57:33.938 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:57:33.939 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:57:33.939 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:57:33.940 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/426446a0-17a4-46e0-2bb5-08dcf012f04b'
2024-11-10 20:57:33.941 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/426446a0-17a4-46e0-2bb5-08dcf012f04b'
2024-11-10 20:57:33.941 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-10 20:57:33.942 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:57:33.942 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-10 20:57:33.943 +07:00 [INF] Route matched with {action = "GetById", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:57:33.943 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:57:33.944 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:57:33.945 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:33.946 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:57:33.947 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:33.948 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:33.949 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:33.949 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-10 20:57:33.950 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-10 20:57:33.951 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-10 20:57:33.952 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-10 20:57:33.953 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-10 20:57:33.953 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-10 20:57:33.955 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:57:33.956 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:57:33.957 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:57:33.957 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:33.958 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:33.959 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:33.959 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:33.960 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:57:33.961 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-10 20:57:33.964 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-10 20:57:33.966 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:33.968 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:33.969 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:33.969 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:33.970 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-11-10 20:57:33.971 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:33.971 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:57:33.972 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:57:33.973 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:57:33.974 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:57:33.974 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:57:33.975 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:57:33.976 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModel'.
2024-11-10 20:57:33.977 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API) in 29.352ms
2024-11-10 20:57:33.978 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-10 20:57:33.978 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:57:33.979 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:33.980 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:57:33.981 +07:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7169/api/Appointment/426446a0-17a4-46e0-2bb5-08dcf012f04b - null null
2024-11-10 20:57:33.981 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/426446a0-17a4-46e0-2bb5-08dcf012f04b - 200 531 application/json; charset=utf-8 44.2878ms
2024-11-10 20:57:33.982 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:57:33.984 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:57:33.984 +07:00 [DBG] The request is a preflight request.
2024-11-10 20:57:33.985 +07:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7169/api/Appointment/426446a0-17a4-46e0-2bb5-08dcf012f04b - 204 null null 4.3572ms
2024-11-10 20:57:33.988 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7169/api/Appointment/426446a0-17a4-46e0-2bb5-08dcf012f04b - application/json 533
2024-11-10 20:57:33.989 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:57:33.989 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:57:33.990 +07:00 [DBG] PUT requests are not supported
2024-11-10 20:57:33.990 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/426446a0-17a4-46e0-2bb5-08dcf012f04b'
2024-11-10 20:57:33.991 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/426446a0-17a4-46e0-2bb5-08dcf012f04b'
2024-11-10 20:57:33.991 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-10 20:57:33.992 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:57:33.992 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-10 20:57:33.993 +07:00 [INF] Route matched with {action = "Update", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Update(System.Guid, CityInfo.API.Models.AppointmentVM) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:57:33.994 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:57:33.995 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:57:33.996 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:33.997 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:57:33.997 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:33.998 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:33.999 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:34.000 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-10 20:57:34.001 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-10 20:57:34.002 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-10 20:57:34.002 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-10 20:57:34.003 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-10 20:57:34.004 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-10 20:57:34.004 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' ...
2024-11-10 20:57:34.005 +07:00 [DBG] Attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' using the name '' in request data ...
2024-11-10 20:57:34.006 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-11-10 20:57:34.006 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-11-10 20:57:34.007 +07:00 [DBG] Connection id "0HN8198R1VNR3", Request id "0HN8198R1VNR3:00000011": started reading request body.
2024-11-10 20:57:34.009 +07:00 [DBG] Connection id "0HN8198R1VNR3", Request id "0HN8198R1VNR3:00000011": done reading request body.
2024-11-10 20:57:34.010 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-10 20:57:34.011 +07:00 [DBG] Done attempting to bind parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-10 20:57:34.012 +07:00 [DBG] Attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM' ...
2024-11-10 20:57:34.013 +07:00 [DBG] Done attempting to validate the bound parameter 'appointment' of type 'CityInfo.API.Models.AppointmentVM'.
2024-11-10 20:57:34.014 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:57:34.016 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:57:34.016 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:57:34.017 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.019 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.019 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:34.020 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:34.021 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:57:34.021 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_AppointmentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppointmentId] = @__appointment_AppointmentId_0
2024-11-10 20:57:34.026 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__appointment_AppointmentId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
FROM [Appointment] AS [a]
WHERE [a].[AppointmentId] = @__appointment_AppointmentId_0
2024-11-10 20:57:34.027 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:34.028 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.029 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-10 20:57:34.030 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.031 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:57:34.032 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __appointment_PatientId_0)'
2024-11-10 20:57:34.037 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status
        FROM Patient AS p
        WHERE p.PatientId == @__appointment_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-11-10 20:57:34.040 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.041 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.042 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:34.043 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:34.043 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:57:34.044 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-11-10 20:57:34.048 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__appointment_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__appointment_PatientId_0
2024-11-10 20:57:34.050 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:34.051 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:34.052 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.053 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-11-10 20:57:34.054 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.055 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:57:34.056 +07:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .SingleOrDefault(dt => dt.DoctorId == __appointment_DoctorId_0)'
2024-11-10 20:57:34.061 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Doctor>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.DoctorDepartment (string) Required, 1], [Property: Doctor.DoctorName (string) Required, 2] }
        SELECT TOP(2) d.DoctorId, d.DoctorDepartment, d.DoctorName
        FROM Doctor AS d
        WHERE d.DoctorId == @__appointment_DoctorId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-11-10 20:57:34.063 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.064 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.064 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:34.065 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:34.066 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:57:34.067 +07:00 [DBG] Executing DbCommand [Parameters=[@__appointment_DoctorId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [d].[DoctorId], [d].[DoctorDepartment], [d].[DoctorName]
FROM [Doctor] AS [d]
WHERE [d].[DoctorId] = @__appointment_DoctorId_0
2024-11-10 20:57:34.071 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__appointment_DoctorId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [d].[DoctorId], [d].[DoctorDepartment], [d].[DoctorName]
FROM [Doctor] AS [d]
WHERE [d].[DoctorId] = @__appointment_DoctorId_0
2024-11-10 20:57:34.076 +07:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:34.080 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:34.085 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.087 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 14ms reading results.
2024-11-10 20:57:34.089 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.090 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-10 20:57:34.283 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-11-10 20:57:34.284 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-11-10 20:57:34.285 +07:00 [DBG] The unchanged property 'Appointment.AppointmentStatus' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-10 20:57:34.285 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:34.295 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-11-10 20:57:34.297 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.297 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.298 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:34.299 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:34.299 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:57:34.300 +07:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointment] SET [AppointmentStatus] = @p0
OUTPUT 1
WHERE [AppointmentId] = @p1;
2024-11-10 20:57:34.303 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Appointment] SET [AppointmentStatus] = @p0
OUTPUT 1
WHERE [AppointmentId] = @p1;
2024-11-10 20:57:34.305 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.306 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-10 20:57:34.307 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.307 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:57:34.308 +07:00 [DBG] An entity of type 'Appointment' tracked by 'DoctorManagementContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-10 20:57:34.309 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-11-10 20:57:34.310 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-11-10 20:57:34.311 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API) in 312.1825ms
2024-11-10 20:57:34.311 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.Update (CityInfo.API)'
2024-11-10 20:57:34.312 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:57:34.312 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.314 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-10 20:57:34.314 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7169/api/Appointment/426446a0-17a4-46e0-2bb5-08dcf012f04b - 204 null null 327.0463ms
2024-11-10 20:57:34.318 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-10 20:57:34.320 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-10 20:57:34.320 +07:00 [INF] CORS policy execution successful.
2024-11-10 20:57:34.321 +07:00 [DBG] The request path  does not match the path filter
2024-11-10 20:57:34.321 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-10 20:57:34.322 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-10 20:57:34.323 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:34.323 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-10 20:57:34.324 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:34.325 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-10 20:57:34.326 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-10 20:57:34.326 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-10 20:57:34.327 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:34.329 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-10 20:57:34.330 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-10 20:57:34.331 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:34.331 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-10 20:57:34.332 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-10 20:57:34.333 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-10 20:57:34.333 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-10 20:57:34.334 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:57:34.335 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-10 20:57:34.336 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-10 20:57:34.336 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-10 20:57:34.337 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:57:34.338 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-10 20:57:34.339 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:34.339 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:34.340 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:34.341 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-10 20:57:34.342 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-10 20:57:34.342 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-10 20:57:34.343 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-10 20:57:34.344 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:34.344 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:34.345 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-10 20:57:34.345 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-10 20:57:34.346 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:57:34.347 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-10 20:57:34.348 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:34.348 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:34.349 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-10 20:57:34.350 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-10 20:57:34.351 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-10 20:57:34.352 +07:00 [DBG] Creating DbConnection.
2024-11-10 20:57:34.353 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-10 20:57:34.354 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.354 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.355 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-10 20:57:34.356 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-10 20:57:34.357 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-10 20:57:34.358 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:57:34.363 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-10 20:57:34.365 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.367 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-10 20:57:34.367 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.368 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-10 20:57:34.369 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-10 20:57:34.371 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-10 20:57:34.371 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-10 20:57:34.372 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-10 20:57:34.372 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-10 20:57:34.373 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-10 20:57:34.374 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 43.2821ms
2024-11-10 20:57:34.375 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-10 20:57:34.375 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-10 20:57:34.376 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-10 20:57:34.377 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-10 20:57:34.378 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3749 application/json; charset=utf-8 59.8968ms
2024-11-10 20:57:48.044 +07:00 [DBG] Connection id "0HN8198R1VNR3" received FIN.
2024-11-10 20:57:48.045 +07:00 [DBG] Connection id "0HN8198R1VNR3" is closed. The last processed stream ID was 19.
2024-11-10 20:57:48.045 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNR3 completed.
2024-11-10 20:57:48.046 +07:00 [DBG] Connection id "0HN8198R1VNR3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-10 20:57:48.060 +07:00 [DBG] Connection id "0HN8198R1VNR3" stopped.
