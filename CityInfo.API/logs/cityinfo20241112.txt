2024-11-12 09:01:31.168 +07:00 [DBG] Connection id "0HN8198R1VNR4" accepted.
2024-11-12 09:01:31.390 +07:00 [DBG] Connection id "0HN8198R1VNR4" started.
2024-11-12 09:01:31.489 +07:00 [DBG] Connection 0HN8198R1VNR4 established using the following protocol: "Tls13"
2024-11-12 09:01:31.504 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - null null
2024-11-12 09:01:31.513 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-12 09:01:31.516 +07:00 [INF] CORS policy execution successful.
2024-11-12 09:01:31.520 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 09:01:31.523 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-12 09:01:31.526 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-12 09:01:31.532 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-12 09:01:31.537 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 09:01:31.540 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-12 09:01:31.545 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-12 09:01:31.551 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 09:01:31.553 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 09:01:31.558 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 09:01:31.564 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 09:01:31.566 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 09:01:31.568 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-12 09:01:31.581 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-12 09:01:31.584 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-12 09:01:31.586 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-12 09:01:31.587 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-12 09:01:31.589 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 09:01:31.595 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 09:01:31.596 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-12 09:01:31.598 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-12 09:01:31.599 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-12 09:01:31.601 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-12 09:01:31.602 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-12 09:01:31.604 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 09:01:31.605 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 09:01:31.607 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-12 09:01:31.608 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-12 09:01:31.610 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-12 09:01:31.612 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-12 09:01:31.613 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 09:01:31.615 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 09:01:31.617 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-12 09:01:31.618 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-12 09:01:31.620 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-12 09:01:31.621 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-12 09:01:31.623 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:01:31.625 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:01:31.626 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-12 09:01:31.628 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:01:31.664 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 09:01:31.693 +07:00 [DBG] Creating DbConnection.
2024-11-12 09:01:31.699 +07:00 [DBG] Created DbConnection. (6ms).
2024-11-12 09:01:31.701 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:01:31.786 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:01:31.790 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 09:01:31.792 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-12 09:01:31.794 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-12 09:01:31.801 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-12 09:01:31.849 +07:00 [INF] Executed DbCommand (52ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-12 09:01:31.852 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:01:31.854 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-12 09:01:31.855 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:01:31.858 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-11-12 09:01:31.861 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 09:01:31.864 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 09:01:31.865 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 09:01:31.866 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 09:01:31.867 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 09:01:31.869 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-12 09:01:31.873 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 305.1596ms
2024-11-12 09:01:31.875 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-12 09:01:31.876 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 09:01:31.878 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:01:31.881 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-12 09:01:31.882 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=7 - 200 3749 application/json; charset=utf-8 380.5021ms
2024-11-12 09:01:34.094 +07:00 [DBG] Connection id "0HN8198R1VNR4" received FIN.
2024-11-12 09:01:34.101 +07:00 [DBG] Connection id "0HN8198R1VNR4" is closed. The last processed stream ID was 1.
2024-11-12 09:01:34.101 +07:00 [DBG] Connection id "0HN8198R1VNR4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 09:01:34.114 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNR4 completed.
2024-11-12 09:01:34.118 +07:00 [DBG] Connection id "0HN8198R1VNR4" stopped.
2024-11-12 09:01:48.791 +07:00 [DBG] Connection id "0HN8198R1VNR5" accepted.
2024-11-12 09:01:48.793 +07:00 [DBG] Connection id "0HN8198R1VNR5" started.
2024-11-12 09:01:48.803 +07:00 [DBG] Connection 0HN8198R1VNR5 established using the following protocol: "Tls13"
2024-11-12 09:01:48.844 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - null null
2024-11-12 09:01:48.845 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-11-12 09:01:48.844 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - null null
2024-11-12 09:01:48.884 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 38.8664ms
2024-11-12 09:01:48.916 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-11-12 09:01:48.919 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 75.6366ms
2024-11-12 09:01:48.939 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-11-12 09:01:48.940 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 97.0557ms
2024-11-12 09:02:09.119 +07:00 [DBG] Connection id "0HN8198R1VNR5" received FIN.
2024-11-12 09:02:09.121 +07:00 [DBG] Connection id "0HN8198R1VNR5" is closed. The last processed stream ID was 5.
2024-11-12 09:02:09.122 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNR5 completed.
2024-11-12 09:02:09.128 +07:00 [DBG] Connection id "0HN8198R1VNR5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 09:02:09.149 +07:00 [DBG] Connection id "0HN8198R1VNR5" stopped.
2024-11-12 09:06:14.808 +07:00 [DBG] Connection id "0HN8198R1VNR6" accepted.
2024-11-12 09:06:14.811 +07:00 [DBG] Connection id "0HN8198R1VNR6" started.
2024-11-12 09:06:14.825 +07:00 [DBG] Connection 0HN8198R1VNR6 established using the following protocol: "Tls13"
2024-11-12 09:06:14.835 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient - null null
2024-11-12 09:06:14.844 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-12 09:06:14.846 +07:00 [INF] CORS policy execution successful.
2024-11-12 09:06:14.847 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 09:06:14.848 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 09:06:14.850 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 09:06:14.853 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 09:06:14.855 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 09:06:14.857 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 09:06:14.909 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 09:06:14.912 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 09:06:14.913 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 09:06:14.915 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 09:06:14.917 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 09:06:14.919 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 09:06:14.921 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 09:06:14.925 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 09:06:14.927 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-12 09:06:14.929 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-12 09:06:14.931 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-12 09:06:14.932 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 09:06:14.934 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 09:06:14.935 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-12 09:06:14.937 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-12 09:06:14.939 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-12 09:06:14.940 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-12 09:06:14.941 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-12 09:06:14.943 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 09:06:14.944 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 09:06:14.945 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-12 09:06:14.947 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-12 09:06:14.948 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-12 09:06:14.950 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name '' in request data ...
2024-11-12 09:06:14.951 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'page' of type 'System.Int32'.
2024-11-12 09:06:14.953 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 09:06:14.954 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 09:06:14.955 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-12 09:06:14.959 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-12 09:06:14.960 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-12 09:06:14.961 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name '' in request data ...
2024-11-12 09:06:14.962 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:06:14.963 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:06:14.965 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:06:14.966 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-12 09:06:14.967 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:06:14.982 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 09:06:15.002 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .OrderBy(pt => pt.FullName)
    .Skip(__p_0)
    .Take(__p_1)
    .Select(pt => new PatientModel{ 
        Status = pt.Status, 
        Gender = pt.Gender, 
        Avatar = pt.Avatar, 
        FullName = pt.FullName, 
        Date = pt.Date, 
        Location = pt.Location, 
        Email = pt.Email, 
        PhoneNumber = pt.PhoneNumber, 
        Diseases = pt.Diseases, 
        PaymentId = pt.PaymentId, 
        Age = DateTime.Now.Year - pt.Date.Year - DateTime.Now < pt.Date.AddYears(DateTime.Now.Year - pt.Date.Year) ? 1 : 0 
    }
    )'
2024-11-12 09:06:15.044 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PatientModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Status -> 0
            Gender -> 1
            Avatar -> 2
            FullName -> 3
            Date -> 4
            Location -> 5
            Email -> 6
            PhoneNumber -> 7
            Diseases -> 8
            PaymentId -> 9
            Age -> 10
        SELECT p.Status, p.Gender, p.Avatar, p.FullName, p.Date, p.Location, p.Email, p.PhoneNumber, p.Diseases, p.PaymentId, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM Patient AS p
        ORDER BY p.FullName ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PatientModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-11-12 09:06:15.051 +07:00 [DBG] Creating DbConnection.
2024-11-12 09:06:15.054 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-12 09:06:15.055 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:06:15.057 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:06:15.058 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 09:06:15.059 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-12 09:06:15.060 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-12 09:06:15.062 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-11-12 09:06:15.079 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-11-12 09:06:15.084 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:06:15.085 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 3ms reading results.
2024-11-12 09:06:15.086 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:06:15.087 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 09:06:15.090 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 09:06:15.092 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 09:06:15.092 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 09:06:15.093 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 09:06:15.093 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 09:06:15.095 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-12 09:06:15.113 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 192.063ms
2024-11-12 09:06:15.116 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 09:06:15.117 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 09:06:15.119 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:06:15.120 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-12 09:06:15.121 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient - 200 2233 application/json; charset=utf-8 287.6905ms
2024-11-12 09:06:17.392 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient - null null
2024-11-12 09:06:17.395 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-12 09:06:17.396 +07:00 [INF] CORS policy execution successful.
2024-11-12 09:06:17.397 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 09:06:17.399 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 09:06:17.401 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 09:06:17.404 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 09:06:17.405 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 09:06:17.406 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 09:06:17.406 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 09:06:17.408 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 09:06:17.411 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 09:06:17.413 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 09:06:17.417 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 09:06:17.419 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 09:06:17.422 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 09:06:17.425 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 09:06:17.426 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-12 09:06:17.428 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-12 09:06:17.430 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-12 09:06:17.431 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 09:06:17.432 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 09:06:17.433 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-12 09:06:17.434 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-12 09:06:17.436 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-12 09:06:17.437 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-12 09:06:17.438 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-12 09:06:17.439 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 09:06:17.440 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 09:06:17.441 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-12 09:06:17.443 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-12 09:06:17.446 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-12 09:06:17.448 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name '' in request data ...
2024-11-12 09:06:17.451 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'page' of type 'System.Int32'.
2024-11-12 09:06:17.453 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 09:06:17.454 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 09:06:17.455 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-12 09:06:17.458 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-12 09:06:17.460 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-12 09:06:17.462 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name '' in request data ...
2024-11-12 09:06:17.464 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:06:17.466 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:06:17.468 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:06:17.469 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-12 09:06:17.472 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:06:17.475 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 09:06:17.478 +07:00 [DBG] Creating DbConnection.
2024-11-12 09:06:17.479 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-12 09:06:17.481 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:06:17.483 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:06:17.487 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 09:06:17.490 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-12 09:06:17.494 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-11-12 09:06:17.497 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-11-12 09:06:17.502 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-11-12 09:06:17.507 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:06:17.509 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-12 09:06:17.511 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:06:17.513 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-11-12 09:06:17.516 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 09:06:17.521 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 09:06:17.522 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 09:06:17.524 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 09:06:17.526 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 09:06:17.531 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-12 09:06:17.534 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 111.7911ms
2024-11-12 09:06:17.538 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 09:06:17.540 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 09:06:17.543 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:06:17.544 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-12 09:06:17.547 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient - 200 2233 application/json; charset=utf-8 155.4009ms
2024-11-12 09:07:16.282 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0 - null null
2024-11-12 09:07:16.291 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-12 09:07:16.292 +07:00 [INF] CORS policy execution successful.
2024-11-12 09:07:16.293 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 09:07:16.294 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 09:07:16.296 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 09:07:16.298 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 09:07:16.298 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 09:07:16.300 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 09:07:16.301 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 09:07:16.303 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 09:07:16.304 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 09:07:16.305 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 09:07:16.307 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 09:07:16.309 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 09:07:16.311 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 09:07:16.316 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 09:07:16.317 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-12 09:07:16.319 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-12 09:07:16.320 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-12 09:07:16.322 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 09:07:16.323 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 09:07:16.325 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-12 09:07:16.326 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-12 09:07:16.327 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-12 09:07:16.328 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-12 09:07:16.330 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-12 09:07:16.332 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 09:07:16.333 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 09:07:16.334 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-12 09:07:16.336 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-12 09:07:16.337 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-12 09:07:16.338 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-12 09:07:16.340 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 09:07:16.341 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 09:07:16.342 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-12 09:07:16.343 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-12 09:07:16.345 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-12 09:07:16.346 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-12 09:07:16.347 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:07:16.349 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:07:16.350 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-12 09:07:16.352 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:07:16.354 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 09:07:16.357 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .OrderBy(pt => pt.FullName)
    .Select(pt => new PatientModel{ 
        Status = pt.Status, 
        Gender = pt.Gender, 
        Avatar = pt.Avatar, 
        FullName = pt.FullName, 
        Date = pt.Date, 
        Location = pt.Location, 
        Email = pt.Email, 
        PhoneNumber = pt.PhoneNumber, 
        Diseases = pt.Diseases, 
        PaymentId = pt.PaymentId, 
        Age = DateTime.Now.Year - pt.Date.Year - DateTime.Now < pt.Date.AddYears(DateTime.Now.Year - pt.Date.Year) ? 1 : 0 
    }
    )'
2024-11-12 09:07:16.365 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PatientModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Status -> 0
            Gender -> 1
            Avatar -> 2
            FullName -> 3
            Date -> 4
            Location -> 5
            Email -> 6
            PhoneNumber -> 7
            Diseases -> 8
            PaymentId -> 9
            Age -> 10
        SELECT p.Status, p.Gender, p.Avatar, p.FullName, p.Date, p.Location, p.Email, p.PhoneNumber, p.Diseases, p.PaymentId, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM Patient AS p
        ORDER BY p.FullName ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PatientModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-11-12 09:07:16.368 +07:00 [DBG] Creating DbConnection.
2024-11-12 09:07:16.368 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-12 09:07:16.369 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:07:16.371 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:07:16.373 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 09:07:16.374 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-12 09:07:16.375 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-12 09:07:16.376 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
2024-11-12 09:07:16.392 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
2024-11-12 09:07:16.396 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:07:16.397 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-12 09:07:16.398 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:07:16.400 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-12 09:07:16.402 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 09:07:16.404 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 09:07:16.405 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 09:07:16.406 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 09:07:16.407 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 09:07:16.408 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-12 09:07:16.422 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 110.127ms
2024-11-12 09:07:16.425 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 09:07:16.426 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 09:07:16.427 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:07:16.428 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-11-12 09:07:16.430 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0 - 200 21965 application/json; charset=utf-8 147.7594ms
2024-11-12 09:07:17.443 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0 - null null
2024-11-12 09:07:17.446 +07:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2024-11-12 09:07:17.447 +07:00 [INF] CORS policy execution successful.
2024-11-12 09:07:17.448 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 09:07:17.451 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 09:07:17.452 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 09:07:17.455 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 09:07:17.456 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 09:07:17.456 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 09:07:17.457 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 09:07:17.458 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 09:07:17.459 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 09:07:17.460 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 09:07:17.463 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 09:07:17.465 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 09:07:17.468 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 09:07:17.471 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 09:07:17.473 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-12 09:07:17.475 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-12 09:07:17.477 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-12 09:07:17.479 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 09:07:17.480 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 09:07:17.481 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-12 09:07:17.486 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-12 09:07:17.489 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-12 09:07:17.492 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-12 09:07:17.493 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-12 09:07:17.495 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 09:07:17.499 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 09:07:17.501 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-12 09:07:17.502 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-12 09:07:17.505 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-12 09:07:17.506 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-12 09:07:17.508 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 09:07:17.509 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 09:07:17.513 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-12 09:07:17.515 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-12 09:07:17.516 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-12 09:07:17.521 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-12 09:07:17.522 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:07:17.526 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:07:17.527 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-12 09:07:17.529 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-12 09:07:17.532 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 09:07:17.537 +07:00 [DBG] Creating DbConnection.
2024-11-12 09:07:17.540 +07:00 [DBG] Created DbConnection. (2ms).
2024-11-12 09:07:17.541 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:07:17.542 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:07:17.544 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 09:07:17.546 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-12 09:07:17.547 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-11-12 09:07:17.548 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
2024-11-12 09:07:17.553 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
2024-11-12 09:07:17.556 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:07:17.558 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-12 09:07:17.561 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:07:17.562 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (1ms).
2024-11-12 09:07:17.564 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 09:07:17.568 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 09:07:17.569 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 09:07:17.570 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 09:07:17.570 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 09:07:17.571 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-12 09:07:17.582 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 114.2437ms
2024-11-12 09:07:17.592 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 09:07:17.593 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 09:07:17.594 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 09:07:17.595 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 09:07:17.597 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=0 - 200 21965 application/json; charset=utf-8 154.9066ms
2024-11-12 09:13:26.238 +07:00 [DBG] Connection id "0HN8198R1VNR6" received FIN.
2024-11-12 09:13:26.245 +07:00 [DBG] Connection id "0HN8198R1VNR6" is closed. The last processed stream ID was 7.
2024-11-12 09:13:26.245 +07:00 [DBG] The connection queue processing loop for 0HN8198R1VNR6 completed.
2024-11-12 09:13:26.249 +07:00 [DBG] Connection id "0HN8198R1VNR6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 09:13:26.270 +07:00 [DBG] Connection id "0HN8198R1VNR6" stopped.
2024-11-12 11:19:33.483 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-12 11:19:33.847 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 11:19:34.228 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 11:21:22.085 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-12 11:21:22.413 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 11:21:22.424 +07:00 [DBG] Creating DbConnection.
2024-11-12 11:21:22.458 +07:00 [DBG] Created DbConnection. (32ms).
2024-11-12 11:21:22.461 +07:00 [DBG] Migrating using database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.467 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.647 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.650 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-11-12 11:21:22.654 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (3ms).
2024-11-12 11:21:22.655 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (6ms).
2024-11-12 11:21:22.658 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-11-12 11:21:22.672 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-11-12 11:21:22.674 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.678 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (2ms).
2024-11-12 11:21:22.680 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-11-12 11:21:22.680 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-11-12 11:21:22.680 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-11-12 11:21:22.680 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.680 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.681 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-11-12 11:21:22.691 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-11-12 11:21:22.691 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.692 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 11:21:22.692 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.692 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.692 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-11-12 11:21:22.692 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-11-12 11:21:22.692 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-11-12 11:21:22.692 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-11-12 11:21:22.693 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-11-12 11:21:22.693 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.693 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 11:21:22.693 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-11-12 11:21:22.693 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-11-12 11:21:22.693 +07:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-11-12 11:21:22.693 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.693 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.693 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-11-12 11:21:22.694 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-11-12 11:21:22.694 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.694 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 11:21:22.700 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.700 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.700 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 11:21:22.700 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 11:21:22.700 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-12 11:21:22.701 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-11-12 11:21:22.708 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-11-12 11:21:22.709 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.710 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-12 11:21:22.710 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.710 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 11:21:22.716 +07:00 [INF] Applying migration '20241112041934_AddTiemColumnToPatient'.
2024-11-12 11:21:22.733 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.734 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:22.735 +07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-11-12 11:21:22.739 +07:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-11-12 11:21:23.065 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-11-12 11:21:23.065 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-11-12 11:21:23.065 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-11-12 11:21:23.066 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Patient] ADD [Time] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2024-11-12 11:21:23.099 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Patient] ADD [Time] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2024-11-12 11:21:23.099 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-11-12 11:21:23.099 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-11-12 11:21:23.099 +07:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-11-12 11:21:23.099 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20241112041934_AddTiemColumnToPatient', N'8.0.8');
2024-11-12 11:21:23.102 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20241112041934_AddTiemColumnToPatient', N'8.0.8');
2024-11-12 11:21:23.103 +07:00 [DBG] Committing transaction.
2024-11-12 11:21:23.106 +07:00 [DBG] Committed transaction.
2024-11-12 11:21:23.106 +07:00 [DBG] Disposing transaction.
2024-11-12 11:21:23.106 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:23.107 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 11:21:23.107 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 11:21:23.108 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 11:21:23.109 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 14:11:32.061 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-12 14:11:32.166 +07:00 [DBG] Hosting starting
2024-11-12 14:11:32.189 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-12 14:11:32.196 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-11-12 14:11:32.207 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-11-12 14:11:32.212 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-11-12 14:11:32.218 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-11-12 14:11:32.222 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-11-12 14:11:32.224 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-12 14:11:32.226 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-12 14:11:32.228 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-12 14:11:32.232 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-12 14:11:32.233 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-12 14:11:32.235 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-11-12 14:11:32.236 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-11-12 14:11:32.410 +07:00 [DBG] Connection id "0HN82T4U9S2U4" accepted.
2024-11-12 14:11:32.412 +07:00 [DBG] Connection id "0HN82T4U9S2U4" started.
2024-11-12 14:11:32.413 +07:00 [INF] Now listening on: https://localhost:7169
2024-11-12 14:11:32.414 +07:00 [INF] Now listening on: http://localhost:5169
2024-11-12 14:11:32.414 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-11-12 14:11:32.415 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-11-12 14:11:32.416 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-11-12 14:11:32.418 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-11-12 14:11:32.451 +07:00 [DBG] Connection 0HN82T4U9S2U4 established using the following protocol: "Tls13"
2024-11-12 14:11:32.477 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-12 14:11:32.478 +07:00 [INF] Hosting environment: Development
2024-11-12 14:11:32.479 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\api\CityInfo.API
2024-11-12 14:11:32.479 +07:00 [DBG] Hosting started
2024-11-12 14:11:32.491 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-11-12 14:11:32.579 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-12 14:11:32.613 +07:00 [DBG] Connection id "0HN82T4U9S2U5" accepted.
2024-11-12 14:11:32.614 +07:00 [DBG] Connection id "0HN82T4U9S2U5" started.
2024-11-12 14:11:32.615 +07:00 [DBG] Connection id "0HN82T4U9S2U6" accepted.
2024-11-12 14:11:32.616 +07:00 [DBG] Connection id "0HN82T4U9S2U6" started.
2024-11-12 14:11:32.618 +07:00 [DBG] Connection 0HN82T4U9S2U5 established using the following protocol: "Tls13"
2024-11-12 14:11:32.619 +07:00 [DBG] Connection 0HN82T4U9S2U6 established using the following protocol: "Tls13"
2024-11-12 14:11:32.635 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-11-12 14:11:32.637 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-11-12 14:11:32.651 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-11-12 14:11:32.652 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-11-12 14:11:32.654 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 168.7108ms
2024-11-12 14:11:32.662 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - null null
2024-11-12 14:11:32.662 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-11-12 14:11:32.662 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - null null
2024-11-12 14:11:32.662 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-11-12 14:11:32.672 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 10.7196ms
2024-11-12 14:11:32.695 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-11-12 14:11:32.697 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 35.4325ms
2024-11-12 14:11:32.713 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-11-12 14:11:32.715 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 53.0934ms
2024-11-12 14:11:32.717 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.4473ms
2024-11-12 14:11:32.856 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-11-12 14:11:33.023 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 167.0581ms
2024-11-12 14:11:34.235 +07:00 [DBG] Connection id "0HN82T4U9S2U4" received FIN.
2024-11-12 14:11:34.235 +07:00 [DBG] Connection id "0HN82T4U9S2U5" received FIN.
2024-11-12 14:11:34.235 +07:00 [DBG] Connection id "0HN82T4U9S2U6" received FIN.
2024-11-12 14:11:34.238 +07:00 [DBG] The connection queue processing loop for 0HN82T4U9S2U5 completed.
2024-11-12 14:11:34.238 +07:00 [DBG] The connection queue processing loop for 0HN82T4U9S2U6 completed.
2024-11-12 14:11:34.238 +07:00 [DBG] The connection queue processing loop for 0HN82T4U9S2U4 completed.
2024-11-12 14:11:34.246 +07:00 [DBG] Connection id "0HN82T4U9S2U6" is closed. The last processed stream ID was 0.
2024-11-12 14:11:34.246 +07:00 [DBG] Connection id "0HN82T4U9S2U5" is closed. The last processed stream ID was 0.
2024-11-12 14:11:34.246 +07:00 [DBG] Connection id "0HN82T4U9S2U4" is closed. The last processed stream ID was 11.
2024-11-12 14:11:34.247 +07:00 [DBG] Connection id "0HN82T4U9S2U6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:11:34.248 +07:00 [DBG] Connection id "0HN82T4U9S2U5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:11:34.249 +07:00 [DBG] Connection id "0HN82T4U9S2U4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:11:34.260 +07:00 [DBG] Connection id "0HN82T4U9S2U6" stopped.
2024-11-12 14:11:34.260 +07:00 [DBG] Connection id "0HN82T4U9S2U5" stopped.
2024-11-12 14:11:34.260 +07:00 [DBG] Connection id "0HN82T4U9S2U4" stopped.
2024-11-12 14:11:45.241 +07:00 [DBG] Connection id "0HN82T4U9S2U7" accepted.
2024-11-12 14:11:45.242 +07:00 [DBG] Connection id "0HN82T4U9S2U7" started.
2024-11-12 14:11:45.246 +07:00 [DBG] Connection 0HN82T4U9S2U7 established using the following protocol: "Tls13"
2024-11-12 14:11:45.250 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/2020 - null null
2024-11-12 14:11:45.253 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:11:45.271 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Patient/2020'
2024-11-12 14:11:45.273 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2020'
2024-11-12 14:11:45.274 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PantientChart (CityInfo.API)' with route pattern 'api/Patient/{n}' is valid for the request path '/api/Patient/2020'
2024-11-12 14:11:45.283 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)
CityInfo.API.Controllers.PatientController.PantientChart (CityInfo.API)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.SelectAsync(HttpContext httpContext, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.SelectEndpointWithPoliciesAsync(HttpContext httpContext, IEndpointSelectorPolicy[] policies, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatch|10_1(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task matchTask)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-12 14:11:45.316 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/2020 - 500 null text/plain; charset=utf-8 66.0539ms
2024-11-12 14:11:49.253 +07:00 [DBG] Connection id "0HN82T4U9S2U7" received FIN.
2024-11-12 14:11:49.253 +07:00 [DBG] Connection id "0HN82T4U9S2U7" is closed. The last processed stream ID was 1.
2024-11-12 14:11:49.253 +07:00 [DBG] The connection queue processing loop for 0HN82T4U9S2U7 completed.
2024-11-12 14:11:49.254 +07:00 [DBG] Connection id "0HN82T4U9S2U7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:11:49.268 +07:00 [DBG] Connection id "0HN82T4U9S2U7" stopped.
2024-11-12 14:14:09.801 +07:00 [DBG] Connection id "0HN82T4U9S2U8" accepted.
2024-11-12 14:14:09.805 +07:00 [DBG] Connection id "0HN82T4U9S2U8" started.
2024-11-12 14:14:09.809 +07:00 [DBG] Connection 0HN82T4U9S2U8 established using the following protocol: "Tls13"
2024-11-12 14:14:09.813 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/c8f37fde-36c6-4a60-a4dc-08dcf00bc5d5 - null null
2024-11-12 14:14:09.818 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:14:09.820 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Patient/c8f37fde-36c6-4a60-a4dc-08dcf00bc5d5'
2024-11-12 14:14:09.821 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/c8f37fde-36c6-4a60-a4dc-08dcf00bc5d5'
2024-11-12 14:14:09.822 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PantientChart (CityInfo.API)' with route pattern 'api/Patient/{n}' is valid for the request path '/api/Patient/c8f37fde-36c6-4a60-a4dc-08dcf00bc5d5'
2024-11-12 14:14:09.824 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)
CityInfo.API.Controllers.PatientController.PantientChart (CityInfo.API)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.SelectAsync(HttpContext httpContext, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.SelectEndpointWithPoliciesAsync(HttpContext httpContext, IEndpointSelectorPolicy[] policies, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatch|10_1(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task matchTask)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-12 14:14:09.826 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/c8f37fde-36c6-4a60-a4dc-08dcf00bc5d5 - 500 null text/plain; charset=utf-8 13.3472ms
2024-11-12 14:14:14.445 +07:00 [DBG] Connection id "0HN82T4U9S2U8" received FIN.
2024-11-12 14:14:14.446 +07:00 [DBG] Connection id "0HN82T4U9S2U8" is closed. The last processed stream ID was 1.
2024-11-12 14:14:14.446 +07:00 [DBG] The connection queue processing loop for 0HN82T4U9S2U8 completed.
2024-11-12 14:14:14.446 +07:00 [DBG] Connection id "0HN82T4U9S2U8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:14:14.455 +07:00 [DBG] Connection id "0HN82T4U9S2U8" stopped.
2024-11-12 14:14:19.732 +07:00 [DBG] Connection id "0HN82T4U9S2U9" accepted.
2024-11-12 14:14:19.732 +07:00 [DBG] Connection id "0HN82T4U9S2U9" started.
2024-11-12 14:14:19.739 +07:00 [DBG] Connection 0HN82T4U9S2U9 established using the following protocol: "Tls13"
2024-11-12 14:14:19.741 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=5 - null null
2024-11-12 14:14:19.743 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:14:19.744 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 14:14:19.744 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 14:14:19.750 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:14:19.795 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:14:19.797 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:14:19.817 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 14:14:19.818 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:14:19.819 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:14:19.820 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:14:19.821 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:14:19.823 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:14:19.825 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:14:19.933 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-12 14:14:19.946 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:14:19.950 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-12 14:14:19.953 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-12 14:14:19.955 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-12 14:14:19.955 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 14:14:19.956 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 14:14:19.957 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-12 14:14:19.958 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-12 14:14:19.960 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-12 14:14:19.960 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-12 14:14:19.961 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-12 14:14:19.962 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 14:14:19.963 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 14:14:19.963 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-12 14:14:19.964 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-12 14:14:19.964 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-12 14:14:19.965 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-12 14:14:19.967 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 14:14:19.967 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 14:14:19.968 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-12 14:14:19.969 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-12 14:14:19.970 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-12 14:14:19.971 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-12 14:14:19.971 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:14:19.972 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:14:19.973 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-12 14:14:19.973 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:14:20.451 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:14:20.503 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .OrderBy(pt => pt.FullName)
    .Skip(__p_0)
    .Take(__p_1)
    .Select(pt => new PatientModel{ 
        Status = pt.Status, 
        Gender = pt.Gender, 
        Avatar = pt.Avatar, 
        FullName = pt.FullName, 
        Date = pt.Date, 
        Time = pt.Time, 
        Location = pt.Location, 
        Email = pt.Email, 
        PhoneNumber = pt.PhoneNumber, 
        Diseases = pt.Diseases, 
        PaymentId = pt.PaymentId, 
        Age = DateTime.Now.Year - pt.Date.Year - DateTime.Now < pt.Date.AddYears(DateTime.Now.Year - pt.Date.Year) ? 1 : 0 
    }
    )'
2024-11-12 14:14:20.644 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PatientModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Status -> 0
            Gender -> 1
            Avatar -> 2
            FullName -> 3
            Date -> 4
            Time -> 5
            Location -> 6
            Email -> 7
            PhoneNumber -> 8
            Diseases -> 9
            PaymentId -> 10
            Age -> 11
        SELECT p.Status, p.Gender, p.Avatar, p.FullName, p.Date, p.Time, p.Location, p.Email, p.PhoneNumber, p.Diseases, p.PaymentId, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM Patient AS p
        ORDER BY p.FullName ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PatientModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-11-12 14:14:20.670 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:14:20.688 +07:00 [DBG] Created DbConnection. (17ms).
2024-11-12 14:14:20.690 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:14:20.916 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:14:20.919 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:14:20.922 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-12 14:14:20.929 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-11-12 14:14:20.936 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-11-12 14:14:21.003 +07:00 [INF] Executed DbCommand (69ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-11-12 14:14:21.014 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:14:21.020 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 12ms reading results.
2024-11-12 14:14:21.023 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:14:21.028 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (5ms).
2024-11-12 14:14:21.032 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:14:21.035 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:14:21.035 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 14:14:21.036 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 14:14:21.037 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 14:14:21.038 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-12 14:14:21.104 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 1278.2332ms
2024-11-12 14:14:21.106 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:14:21.108 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:14:21.112 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:14:21.114 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-12 14:14:21.115 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=5 - 200 2378 application/json; charset=utf-8 1374.325ms
2024-11-12 14:14:24.456 +07:00 [DBG] Connection id "0HN82T4U9S2U9" received FIN.
2024-11-12 14:14:24.457 +07:00 [DBG] Connection id "0HN82T4U9S2U9" is closed. The last processed stream ID was 1.
2024-11-12 14:14:24.457 +07:00 [DBG] The connection queue processing loop for 0HN82T4U9S2U9 completed.
2024-11-12 14:14:24.458 +07:00 [DBG] Connection id "0HN82T4U9S2U9" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:14:24.473 +07:00 [DBG] Connection id "0HN82T4U9S2U9" stopped.
2024-11-12 14:23:12.716 +07:00 [DBG] Connection id "0HN82T4U9S2UA" accepted.
2024-11-12 14:23:12.720 +07:00 [DBG] Connection id "0HN82T4U9S2UA" started.
2024-11-12 14:23:12.724 +07:00 [DBG] Connection 0HN82T4U9S2UA established using the following protocol: "Tls13"
2024-11-12 14:23:12.729 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-11-12 14:23:12.745 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-11-12 14:23:12.745 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-11-12 14:23:12.746 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-11-12 14:23:12.747 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-11-12 14:23:12.748 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 18.7465ms
2024-11-12 14:23:12.763 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-11-12 14:23:12.763 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-11-12 14:23:12.765 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 2.0203ms
2024-11-12 14:23:12.781 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.2904ms
2024-11-12 14:23:12.934 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-11-12 14:23:12.957 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.1345ms
2024-11-12 14:23:18.249 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=5 - null null
2024-11-12 14:23:18.251 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:23:18.252 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 14:23:18.252 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 14:23:18.253 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:23:18.255 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:23:18.256 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:23:18.257 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 14:23:18.258 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:23:18.259 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:23:18.260 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:23:18.261 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:23:18.262 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:23:18.263 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:23:18.264 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:23:18.265 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-12 14:23:18.266 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-12 14:23:18.267 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-12 14:23:18.267 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 14:23:18.268 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 14:23:18.268 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-12 14:23:18.269 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-12 14:23:18.269 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-12 14:23:18.270 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-12 14:23:18.271 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-12 14:23:18.271 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 14:23:18.272 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 14:23:18.273 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-12 14:23:18.273 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-12 14:23:18.274 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-12 14:23:18.274 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-12 14:23:18.275 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 14:23:18.276 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 14:23:18.276 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-12 14:23:18.277 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-12 14:23:18.277 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-12 14:23:18.278 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-12 14:23:18.279 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:23:18.280 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:23:18.280 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-12 14:23:18.281 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:23:18.290 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:23:18.296 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:23:18.297 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-12 14:23:18.298 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:18.303 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:18.304 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:23:18.305 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:23:18.306 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-12 14:23:18.307 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-11-12 14:23:18.317 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-11-12 14:23:18.318 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:18.319 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-12 14:23:18.319 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:18.320 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:23:18.322 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:23:18.323 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:23:18.323 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 14:23:18.324 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 14:23:18.324 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 14:23:18.325 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-12 14:23:18.326 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 63.2861ms
2024-11-12 14:23:18.326 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:23:18.327 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:23:18.328 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:18.329 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 14:23:18.330 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=5 - 200 2378 application/json; charset=utf-8 80.4121ms
2024-11-12 14:23:20.129 +07:00 [DBG] Connection id "0HN82T4U9S2UA" received FIN.
2024-11-12 14:23:20.130 +07:00 [DBG] Connection id "0HN82T4U9S2UA" is closed. The last processed stream ID was 9.
2024-11-12 14:23:20.130 +07:00 [DBG] The connection queue processing loop for 0HN82T4U9S2UA completed.
2024-11-12 14:23:20.131 +07:00 [DBG] Connection id "0HN82T4U9S2UA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:23:20.145 +07:00 [DBG] Connection id "0HN82T4U9S2UA" stopped.
2024-11-12 14:23:27.619 +07:00 [DBG] Connection id "0HN82T4U9S2UB" accepted.
2024-11-12 14:23:27.620 +07:00 [DBG] Connection id "0HN82T4U9S2UB" started.
2024-11-12 14:23:27.624 +07:00 [DBG] Connection 0HN82T4U9S2UB established using the following protocol: "Tls13"
2024-11-12 14:23:27.626 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=5 - null null
2024-11-12 14:23:27.628 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:23:27.628 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2024-11-12 14:23:27.629 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2024-11-12 14:23:27.629 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-12 14:23:27.632 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:23:27.633 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-12 14:23:27.636 +07:00 [INF] Route matched with {action = "GetAllAppointment", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllAppointment(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-12 14:23:27.637 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:23:27.637 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:23:27.638 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:23:27.640 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:23:27.640 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:23:27.641 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-12 14:23:27.646 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-12 14:23:27.646 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-12 14:23:27.647 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-12 14:23:27.648 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-12 14:23:27.649 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 14:23:27.649 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 14:23:27.650 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-12 14:23:27.651 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-12 14:23:27.651 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-12 14:23:27.652 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-12 14:23:27.653 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-12 14:23:27.653 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 14:23:27.654 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 14:23:27.655 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-12 14:23:27.655 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-12 14:23:27.656 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-12 14:23:27.656 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-12 14:23:27.657 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 14:23:27.658 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 14:23:27.658 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-12 14:23:27.659 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-12 14:23:27.660 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-12 14:23:27.660 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-12 14:23:27.661 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:23:27.662 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:23:27.662 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-12 14:23:27.663 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:23:27.702 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:23:27.705 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .OrderBy(pt => pt.AppointmentTime)
    .Skip(__p_0)
    .Take(__p_1)
    .Select(ap => new AppointmentModel{ 
        AppointmentId = ap.AppointmentId, 
        AppointmentTime = ap.AppointmentTime, 
        AppointmentStatus = ap.AppointmentStatus, 
        AppointmentComment = ap.AppointmentComment, 
        PatientId = ap.PatientId, 
        DoctorId = ap.DoctorId, 
        Gender = ap.Patient.Gender, 
        Avatar = ap.Patient.Avatar, 
        FullName = ap.Patient.FullName, 
        Date = ap.Patient.Date, 
        Age = DateTime.Now.Year - ap.Patient.Date.Year - DateTime.Now < ap.Patient.Date.AddYears(DateTime.Now.Year - ap.Patient.Date.Year) ? 1 : 0 
    }
    )'
2024-11-12 14:23:27.748 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<AppointmentModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            AppointmentId -> 0
            AppointmentTime -> 1
            AppointmentStatus -> 2
            AppointmentComment -> 3
            PatientId -> 4
            DoctorId -> 5
            Gender -> 6
            Avatar -> 7
            FullName -> 8
            Date -> 9
            Age -> 10
        SELECT t.AppointmentId, t.AppointmentTime, t.AppointmentStatus, t.AppointmentComment, t.PatientId, t.DoctorId, p.Gender, p.Avatar, p.FullName, p.Date, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM 
        (
            SELECT a.AppointmentId, a.AppointmentComment, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId
            FROM Appointment AS a
            ORDER BY a.AppointmentTime ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        INNER JOIN Patient AS p ON t.PatientId == p.PatientId
        ORDER BY t.AppointmentTime ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AppointmentModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-11-12 14:23:27.752 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:23:27.753 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-12 14:23:27.753 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:27.755 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:27.755 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:23:27.756 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:23:27.757 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-12 14:23:27.757 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-12 14:23:27.772 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[AppointmentId], [t].[AppointmentTime], [t].[AppointmentStatus], [t].[AppointmentComment], [t].[PatientId], [t].[DoctorId], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM (
    SELECT [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId]
    FROM [Appointment] AS [a]
    ORDER BY [a].[AppointmentTime]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Patient] AS [p] ON [t].[PatientId] = [p].[PatientId]
ORDER BY [t].[AppointmentTime]
2024-11-12 14:23:27.774 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:27.774 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-12 14:23:27.775 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:27.776 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:23:27.776 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:23:27.778 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:23:27.778 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 14:23:27.779 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 14:23:27.779 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 14:23:27.780 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.AppointmentModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-12 14:23:27.784 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API) in 142.9462ms
2024-11-12 14:23:27.785 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetAllAppointment (CityInfo.API)'
2024-11-12 14:23:27.785 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:23:27.786 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:27.787 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 14:23:27.788 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment?page=1&page_size=5 - 200 2683 application/json; charset=utf-8 161.8633ms
2024-11-12 14:23:30.141 +07:00 [DBG] Connection id "0HN82T4U9S2UB" received FIN.
2024-11-12 14:23:30.142 +07:00 [DBG] Connection id "0HN82T4U9S2UB" is closed. The last processed stream ID was 1.
2024-11-12 14:23:30.142 +07:00 [DBG] The connection queue processing loop for 0HN82T4U9S2UB completed.
2024-11-12 14:23:30.142 +07:00 [DBG] Connection id "0HN82T4U9S2UB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:23:30.156 +07:00 [DBG] Connection id "0HN82T4U9S2UB" stopped.
2024-11-12 14:23:50.832 +07:00 [DBG] Connection id "0HN82T4U9S2UC" accepted.
2024-11-12 14:23:50.834 +07:00 [DBG] Connection id "0HN82T4U9S2UC" started.
2024-11-12 14:23:50.842 +07:00 [DBG] Connection 0HN82T4U9S2UC established using the following protocol: "Tls13"
2024-11-12 14:23:50.843 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b - null null
2024-11-12 14:23:50.849 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:23:50.849 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b'
2024-11-12 14:23:50.850 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b'
2024-11-12 14:23:50.851 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-12 14:23:50.851 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:23:50.852 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-12 14:23:50.854 +07:00 [INF] Route matched with {action = "GetById", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-12 14:23:50.855 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:23:50.855 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:23:50.856 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:23:50.857 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:23:50.857 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:23:50.858 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-12 14:23:50.859 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-12 14:23:50.860 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-12 14:23:50.861 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-12 14:23:50.862 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:23:50.862 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:23:50.863 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-12 14:23:50.863 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-12 14:23:50.866 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:23:50.869 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(pt => pt.Patient)
    .SingleOrDefault(ap => ap.AppointmentId == __id_0)'
2024-11-12 14:23:50.876 +07:00 [DBG] Including navigation: 'Appointment.Patient'.
2024-11-12 14:23:50.909 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppointmentComment (string) Required, 1], [Property: Appointment.AppointmentStatus (string) Required MaxLength(50), 2], [Property: Appointment.AppointmentTime (DateTime) Required, 3], [Property: Appointment.DoctorId (Guid) Required FK Index, 4], [Property: Appointment.PatientId (Guid) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Patient.Avatar (string) Required MaxLength(255), 7], [Property: Patient.Date (DateTime) Required, 8], [Property: Patient.Diseases (string) Required MaxLength(500), 9], [Property: Patient.Email (string) Required MaxLength(100), 10], [Property: Patient.FullName (string) Required MaxLength(100), 11], [Property: Patient.Gender (string) Required, 12], [Property: Patient.Location (string) Required MaxLength(255), 13], [Property: Patient.PaymentId (Guid) Required FK Index, 14], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 15], [Property: Patient.Status (string) Required, 16], [Property: Patient.Time (DateTime) Required, 17] }
        SELECT TOP(2) a.AppointmentId, a.AppointmentComment, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId, p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
        FROM Appointment AS a
        INNER JOIN Patient AS p ON a.PatientId == p.PatientId
        WHERE a.AppointmentId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-11-12 14:23:50.912 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:23:50.912 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-12 14:23:50.913 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:50.914 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:50.914 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:23:50.915 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:23:50.916 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-12 14:23:50.917 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-12 14:23:50.923 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-12 14:23:50.944 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:23:50.967 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:23:50.973 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:23:50.983 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:50.984 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 59ms reading results.
2024-11-12 14:23:50.985 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:50.986 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:23:50.987 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:23:50.988 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:23:50.988 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 14:23:50.989 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 14:23:50.989 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 14:23:50.990 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModel'.
2024-11-12 14:23:50.991 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API) in 132.5478ms
2024-11-12 14:23:50.991 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-12 14:23:50.992 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:23:50.992 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:23:50.993 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 14:23:50.994 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/4cb2af1d-56fc-405c-2bb2-08dcf012f04b - 200 538 application/json; charset=utf-8 150.911ms
2024-11-12 14:35:19.488 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-12 14:35:19.590 +07:00 [DBG] Hosting starting
2024-11-12 14:35:19.613 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-12 14:35:19.619 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-11-12 14:35:19.628 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-11-12 14:35:19.633 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-11-12 14:35:19.637 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-11-12 14:35:19.641 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-11-12 14:35:19.643 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-12 14:35:19.646 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-12 14:35:19.647 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-12 14:35:19.651 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-12 14:35:19.652 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-12 14:35:19.654 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-11-12 14:35:19.655 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-11-12 14:35:19.804 +07:00 [INF] Now listening on: https://localhost:7169
2024-11-12 14:35:19.804 +07:00 [INF] Now listening on: http://localhost:5169
2024-11-12 14:35:19.805 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-11-12 14:35:19.805 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-11-12 14:35:19.806 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-11-12 14:35:19.806 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-11-12 14:35:19.853 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-12 14:35:19.854 +07:00 [INF] Hosting environment: Development
2024-11-12 14:35:19.854 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\api\CityInfo.API
2024-11-12 14:35:19.855 +07:00 [DBG] Hosting started
2024-11-12 14:35:49.437 +07:00 [DBG] Connection id "0HN82TIGH592D" accepted.
2024-11-12 14:35:49.439 +07:00 [DBG] Connection id "0HN82TIGH592D" started.
2024-11-12 14:35:49.484 +07:00 [DBG] Connection 0HN82TIGH592D established using the following protocol: "Tls13"
2024-11-12 14:35:49.521 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-11-12 14:35:49.591 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-12 14:35:49.644 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-11-12 14:35:49.646 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-11-12 14:35:49.669 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-11-12 14:35:49.670 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-11-12 14:35:49.672 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 154.7338ms
2024-11-12 14:35:49.679 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-11-12 14:35:49.679 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-11-12 14:35:49.689 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 9.9082ms
2024-11-12 14:35:49.711 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.8611ms
2024-11-12 14:35:49.846 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-11-12 14:35:49.963 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 117.4043ms
2024-11-12 14:35:51.154 +07:00 [DBG] Connection id "0HN82TIGH592D" received FIN.
2024-11-12 14:35:51.156 +07:00 [DBG] Connection id "0HN82TIGH592D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:35:51.159 +07:00 [DBG] Connection id "0HN82TIGH592D" is closed. The last processed stream ID was 7.
2024-11-12 14:35:51.161 +07:00 [DBG] The connection queue processing loop for 0HN82TIGH592D completed.
2024-11-12 14:35:51.165 +07:00 [DBG] Connection id "0HN82TIGH592D" stopped.
2024-11-12 14:36:01.863 +07:00 [DBG] Connection id "0HN82TIGH592E" accepted.
2024-11-12 14:36:01.864 +07:00 [DBG] Connection id "0HN82TIGH592E" started.
2024-11-12 14:36:01.867 +07:00 [DBG] Connection 0HN82TIGH592E established using the following protocol: "Tls13"
2024-11-12 14:36:01.869 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/cc0ffea5-5496-48cc-a4d6-08dcf00bc5d5 - null null
2024-11-12 14:36:01.873 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:36:01.894 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Patient/cc0ffea5-5496-48cc-a4d6-08dcf00bc5d5'
2024-11-12 14:36:01.896 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/cc0ffea5-5496-48cc-a4d6-08dcf00bc5d5'
2024-11-12 14:36:01.897 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PantientChart (CityInfo.API)' with route pattern 'api/Patient/{n}' is valid for the request path '/api/Patient/cc0ffea5-5496-48cc-a4d6-08dcf00bc5d5'
2024-11-12 14:36:01.906 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)
CityInfo.API.Controllers.PatientController.PantientChart (CityInfo.API)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.SelectAsync(HttpContext httpContext, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.SelectEndpointWithPoliciesAsync(HttpContext httpContext, IEndpointSelectorPolicy[] policies, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatch|10_1(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task matchTask)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-12 14:36:01.934 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/cc0ffea5-5496-48cc-a4d6-08dcf00bc5d5 - 500 null text/plain; charset=utf-8 65.0122ms
2024-11-12 14:36:11.169 +07:00 [DBG] Connection id "0HN82TIGH592E" received FIN.
2024-11-12 14:36:11.170 +07:00 [DBG] Connection id "0HN82TIGH592E" is closed. The last processed stream ID was 1.
2024-11-12 14:36:11.170 +07:00 [DBG] The connection queue processing loop for 0HN82TIGH592E completed.
2024-11-12 14:36:11.171 +07:00 [DBG] Connection id "0HN82TIGH592E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:36:11.184 +07:00 [DBG] Connection id "0HN82TIGH592E" stopped.
2024-11-12 14:36:31.187 +07:00 [DBG] Connection id "0HN82TIGH592F" accepted.
2024-11-12 14:36:31.187 +07:00 [DBG] Connection id "0HN82TIGH592F" started.
2024-11-12 14:36:31.195 +07:00 [DBG] Connection 0HN82TIGH592F established using the following protocol: "Tls13"
2024-11-12 14:36:31.204 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d - null null
2024-11-12 14:36:31.208 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:36:31.210 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d'
2024-11-12 14:36:31.211 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d'
2024-11-12 14:36:31.212 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PantientChart (CityInfo.API)' with route pattern 'api/Patient/{n}' is valid for the request path '/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d'
2024-11-12 14:36:31.213 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)
CityInfo.API.Controllers.PatientController.PantientChart (CityInfo.API)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.SelectAsync(HttpContext httpContext, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.SelectEndpointWithPoliciesAsync(HttpContext httpContext, IEndpointSelectorPolicy[] policies, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatch|10_1(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task matchTask)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-12 14:36:31.216 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d - 500 null text/plain; charset=utf-8 12.317ms
2024-11-12 14:36:32.459 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d - null null
2024-11-12 14:36:32.460 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:36:32.461 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d'
2024-11-12 14:36:32.462 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d'
2024-11-12 14:36:32.463 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PantientChart (CityInfo.API)' with route pattern 'api/Patient/{n}' is valid for the request path '/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d'
2024-11-12 14:36:32.464 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)
CityInfo.API.Controllers.PatientController.PantientChart (CityInfo.API)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.SelectAsync(HttpContext httpContext, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.SelectEndpointWithPoliciesAsync(HttpContext httpContext, IEndpointSelectorPolicy[] policies, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatch|10_1(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task matchTask)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-12 14:36:32.467 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d - 500 null text/plain; charset=utf-8 8.3537ms
2024-11-12 14:36:34.456 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d - null null
2024-11-12 14:36:34.458 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:36:34.459 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d'
2024-11-12 14:36:34.460 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d'
2024-11-12 14:36:34.461 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PantientChart (CityInfo.API)' with route pattern 'api/Patient/{n}' is valid for the request path '/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d'
2024-11-12 14:36:34.462 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)
CityInfo.API.Controllers.PatientController.PantientChart (CityInfo.API)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.SelectAsync(HttpContext httpContext, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.SelectEndpointWithPoliciesAsync(HttpContext httpContext, IEndpointSelectorPolicy[] policies, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatch|10_1(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task matchTask)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-12 14:36:34.464 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/61d21fc6-f963-4073-2163-08dcdadb480d - 500 null text/plain; charset=utf-8 8.1406ms
2024-11-12 14:36:41.193 +07:00 [DBG] Connection id "0HN82TIGH592F" received FIN.
2024-11-12 14:36:41.194 +07:00 [DBG] Connection id "0HN82TIGH592F" is closed. The last processed stream ID was 5.
2024-11-12 14:36:41.194 +07:00 [DBG] The connection queue processing loop for 0HN82TIGH592F completed.
2024-11-12 14:36:41.195 +07:00 [DBG] Connection id "0HN82TIGH592F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:36:41.208 +07:00 [DBG] Connection id "0HN82TIGH592F" stopped.
2024-11-12 14:36:48.208 +07:00 [DBG] Connection id "0HN82TIGH592G" accepted.
2024-11-12 14:36:48.209 +07:00 [DBG] Connection id "0HN82TIGH592G" started.
2024-11-12 14:36:48.216 +07:00 [DBG] Connection 0HN82TIGH592G established using the following protocol: "Tls13"
2024-11-12 14:36:48.219 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/61d21fc6-f963-4073-2163-08dcdadb480d - null null
2024-11-12 14:36:48.222 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:36:48.223 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/61d21fc6-f963-4073-2163-08dcdadb480d'
2024-11-12 14:36:48.224 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/61d21fc6-f963-4073-2163-08dcdadb480d'
2024-11-12 14:36:48.226 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-12 14:36:48.269 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:36:48.271 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-12 14:36:48.292 +07:00 [INF] Route matched with {action = "GetById", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-12 14:36:48.294 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:36:48.294 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:36:48.295 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:36:48.296 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:36:48.297 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:36:48.299 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-12 14:36:48.400 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-12 14:36:48.415 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-12 14:36:48.419 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-12 14:36:48.421 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-12 14:36:48.422 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:36:48.423 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:36:48.424 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-12 14:36:48.426 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-12 14:36:48.906 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:36:48.955 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(pt => pt.Patient)
    .SingleOrDefault(ap => ap.AppointmentId == __id_0)'
2024-11-12 14:36:49.009 +07:00 [DBG] Including navigation: 'Appointment.Patient'.
2024-11-12 14:36:49.131 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppointmentComment (string) Required, 1], [Property: Appointment.AppointmentStatus (string) Required MaxLength(50), 2], [Property: Appointment.AppointmentTime (DateTime) Required, 3], [Property: Appointment.DoctorId (Guid) Required FK Index, 4], [Property: Appointment.PatientId (Guid) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Patient.Avatar (string) Required MaxLength(255), 7], [Property: Patient.Date (DateTime) Required, 8], [Property: Patient.Diseases (string) Required MaxLength(500), 9], [Property: Patient.Email (string) Required MaxLength(100), 10], [Property: Patient.FullName (string) Required MaxLength(100), 11], [Property: Patient.Gender (string) Required, 12], [Property: Patient.Location (string) Required MaxLength(255), 13], [Property: Patient.PaymentId (Guid) Required FK Index, 14], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 15], [Property: Patient.Status (string) Required, 16], [Property: Patient.Time (DateTime) Required, 17] }
        SELECT TOP(2) a.AppointmentId, a.AppointmentComment, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId, p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
        FROM Appointment AS a
        INNER JOIN Patient AS p ON a.PatientId == p.PatientId
        WHERE a.AppointmentId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-11-12 14:36:49.157 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:36:49.178 +07:00 [DBG] Created DbConnection. (19ms).
2024-11-12 14:36:49.181 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:36:49.391 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:36:49.393 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:36:49.398 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-11-12 14:36:49.405 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-11-12 14:36:49.412 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-12 14:36:49.458 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-12 14:36:49.463 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:36:49.470 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 7ms reading results.
2024-11-12 14:36:49.472 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:36:49.477 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (5ms).
2024-11-12 14:36:49.482 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:36:49.484 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:36:49.485 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-11-12 14:36:49.488 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-11-12 14:36:49.489 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-11-12 14:36:49.559 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API) in 1258.2446ms
2024-11-12 14:36:49.559 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-12 14:36:49.562 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:36:49.567 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:36:49.569 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-12 14:36:49.570 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/61d21fc6-f963-4073-2163-08dcdadb480d - 404 162 application/problem+json; charset=utf-8 1351.0302ms
2024-11-12 14:36:51.204 +07:00 [DBG] Connection id "0HN82TIGH592G" received FIN.
2024-11-12 14:36:51.205 +07:00 [DBG] Connection id "0HN82TIGH592G" is closed. The last processed stream ID was 1.
2024-11-12 14:36:51.205 +07:00 [DBG] The connection queue processing loop for 0HN82TIGH592G completed.
2024-11-12 14:36:51.206 +07:00 [DBG] Connection id "0HN82TIGH592G" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:36:51.208 +07:00 [DBG] Connection id "0HN82TIGH592G" stopped.
2024-11-12 14:37:11.214 +07:00 [DBG] Connection id "0HN82TIGH592H" accepted.
2024-11-12 14:37:11.215 +07:00 [DBG] Connection id "0HN82TIGH592H" started.
2024-11-12 14:37:11.218 +07:00 [DBG] Connection 0HN82TIGH592H established using the following protocol: "Tls13"
2024-11-12 14:37:11.220 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b - null null
2024-11-12 14:37:11.226 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:37:11.226 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b'
2024-11-12 14:37:11.227 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b'
2024-11-12 14:37:11.229 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-12 14:37:11.230 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:37:11.231 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-12 14:37:11.232 +07:00 [INF] Route matched with {action = "GetById", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-12 14:37:11.233 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:37:11.233 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:37:11.234 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:37:11.235 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:37:11.236 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:37:11.237 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-12 14:37:11.238 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-12 14:37:11.239 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-12 14:37:11.240 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-12 14:37:11.241 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:37:11.241 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:37:11.242 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-12 14:37:11.243 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-12 14:37:11.252 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:37:11.255 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:37:11.256 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-12 14:37:11.257 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:37:11.258 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:37:11.259 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:37:11.259 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:37:11.260 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-12 14:37:11.260 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-12 14:37:11.271 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-12 14:37:11.296 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:37:11.321 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:37:11.328 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:37:11.339 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:37:11.340 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 67ms reading results.
2024-11-12 14:37:11.341 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:37:11.341 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:37:11.343 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:37:11.344 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:37:11.345 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 14:37:11.345 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 14:37:11.346 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 14:37:11.346 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModel'.
2024-11-12 14:37:11.351 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API) in 114.3748ms
2024-11-12 14:37:11.352 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-12 14:37:11.353 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:37:11.353 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:37:11.354 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 14:37:11.355 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/a7649131-298e-4d50-2bb1-08dcf012f04b - 200 534 application/json; charset=utf-8 135.1364ms
2024-11-12 14:37:21.240 +07:00 [DBG] Connection id "0HN82TIGH592H" received FIN.
2024-11-12 14:37:21.241 +07:00 [DBG] Connection id "0HN82TIGH592H" is closed. The last processed stream ID was 1.
2024-11-12 14:37:21.241 +07:00 [DBG] The connection queue processing loop for 0HN82TIGH592H completed.
2024-11-12 14:37:21.242 +07:00 [DBG] Connection id "0HN82TIGH592H" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:37:21.254 +07:00 [DBG] Connection id "0HN82TIGH592H" stopped.
2024-11-12 14:43:24.970 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-12 14:43:25.051 +07:00 [DBG] Hosting starting
2024-11-12 14:43:25.072 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-12 14:43:25.078 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-11-12 14:43:25.085 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-11-12 14:43:25.090 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-11-12 14:43:25.094 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-11-12 14:43:25.097 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-11-12 14:43:25.100 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-12 14:43:25.102 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-12 14:43:25.103 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-12 14:43:25.106 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-12 14:43:25.107 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-12 14:43:25.109 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-11-12 14:43:25.109 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-11-12 14:43:25.249 +07:00 [INF] Now listening on: https://localhost:7169
2024-11-12 14:43:25.250 +07:00 [INF] Now listening on: http://localhost:5169
2024-11-12 14:43:25.250 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-11-12 14:43:25.251 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-11-12 14:43:25.251 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-11-12 14:43:25.251 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-11-12 14:43:25.300 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-12 14:43:25.302 +07:00 [INF] Hosting environment: Development
2024-11-12 14:43:25.302 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\api\CityInfo.API
2024-11-12 14:43:25.303 +07:00 [DBG] Hosting started
2024-11-12 14:44:40.995 +07:00 [DBG] Connection id "0HN82TNEUFUAS" accepted.
2024-11-12 14:44:40.997 +07:00 [DBG] Connection id "0HN82TNEUFUAS" started.
2024-11-12 14:44:41.038 +07:00 [DBG] Connection 0HN82TNEUFUAS established using the following protocol: "Tls13"
2024-11-12 14:44:41.075 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-11-12 14:44:41.142 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-12 14:44:41.195 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-11-12 14:44:41.196 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-11-12 14:44:41.213 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-11-12 14:44:41.214 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-11-12 14:44:41.217 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 144.7035ms
2024-11-12 14:44:41.224 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-11-12 14:44:41.224 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-11-12 14:44:41.234 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 9.5845ms
2024-11-12 14:44:41.260 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.3391ms
2024-11-12 14:44:41.409 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-11-12 14:44:41.531 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 122.2521ms
2024-11-12 14:44:41.943 +07:00 [DBG] Connection id "0HN82TNEUFUAS" received FIN.
2024-11-12 14:44:41.946 +07:00 [DBG] The connection queue processing loop for 0HN82TNEUFUAS completed.
2024-11-12 14:44:41.947 +07:00 [DBG] Connection id "0HN82TNEUFUAS" is closed. The last processed stream ID was 7.
2024-11-12 14:44:41.948 +07:00 [DBG] Connection id "0HN82TNEUFUAS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:44:41.957 +07:00 [DBG] Connection id "0HN82TNEUFUAS" stopped.
2024-11-12 14:45:02.873 +07:00 [DBG] Connection id "0HN82TNEUFUAT" accepted.
2024-11-12 14:45:02.873 +07:00 [DBG] Connection id "0HN82TNEUFUAT" started.
2024-11-12 14:45:02.877 +07:00 [DBG] Connection 0HN82TNEUFUAT established using the following protocol: "Tls13"
2024-11-12 14:45:02.883 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b - null null
2024-11-12 14:45:02.889 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:45:02.906 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b'
2024-11-12 14:45:02.908 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)' with route pattern 'api/Appointment/{id}' is valid for the request path '/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b'
2024-11-12 14:45:02.914 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-12 14:45:02.955 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:45:02.957 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-12 14:45:02.973 +07:00 [INF] Route matched with {action = "GetById", controller = "Appointment"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(System.Guid) on controller CityInfo.API.Controllers.AppointmentController (CityInfo.API).
2024-11-12 14:45:02.975 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:45:02.976 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:45:02.976 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:45:02.977 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:45:02.978 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:45:02.980 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-12 14:45:03.078 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-12 14:45:03.092 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.AppointmentController (CityInfo.API)
2024-11-12 14:45:03.095 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-12 14:45:03.097 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-12 14:45:03.098 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:45:03.099 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:45:03.100 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-12 14:45:03.103 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-12 14:45:03.554 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:45:03.609 +07:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(pt => pt.Patient)
    .SingleOrDefault(ap => ap.AppointmentId == __id_0)'
2024-11-12 14:45:03.668 +07:00 [DBG] Including navigation: 'Appointment.Patient'.
2024-11-12 14:45:03.785 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.AppointmentComment (string) Required, 1], [Property: Appointment.AppointmentStatus (string) Required MaxLength(50), 2], [Property: Appointment.AppointmentTime (DateTime) Required, 3], [Property: Appointment.DoctorId (Guid) Required FK Index, 4], [Property: Appointment.PatientId (Guid) Required FK Index, 5] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Patient.Avatar (string) Required MaxLength(255), 7], [Property: Patient.Date (DateTime) Required, 8], [Property: Patient.Diseases (string) Required MaxLength(500), 9], [Property: Patient.Email (string) Required MaxLength(100), 10], [Property: Patient.FullName (string) Required MaxLength(100), 11], [Property: Patient.Gender (string) Required, 12], [Property: Patient.Location (string) Required MaxLength(255), 13], [Property: Patient.PaymentId (Guid) Required FK Index, 14], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 15], [Property: Patient.Status (string) Required, 16], [Property: Patient.Time (DateTime) Required, 17] }
        SELECT TOP(2) a.AppointmentId, a.AppointmentComment, a.AppointmentStatus, a.AppointmentTime, a.DoctorId, a.PatientId, p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
        FROM Appointment AS a
        INNER JOIN Patient AS p ON a.PatientId == p.PatientId
        WHERE a.AppointmentId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-11-12 14:45:03.809 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:45:03.827 +07:00 [DBG] Created DbConnection. (18ms).
2024-11-12 14:45:03.830 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:04.048 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:04.051 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:45:04.054 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-12 14:45:04.061 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-11-12 14:45:04.070 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-12 14:45:04.113 +07:00 [INF] Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[AppointmentId], [a].[AppointmentComment], [a].[AppointmentStatus], [a].[AppointmentTime], [a].[DoctorId], [a].[PatientId], [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Appointment] AS [a]
INNER JOIN [Patient] AS [p] ON [a].[PatientId] = [p].[PatientId]
WHERE [a].[AppointmentId] = @__id_0
2024-11-12 14:45:04.141 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:45:04.168 +07:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:45:04.175 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:45:04.190 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:04.199 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 79ms reading results.
2024-11-12 14:45:04.203 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:04.209 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (5ms).
2024-11-12 14:45:04.214 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:45:04.218 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:45:04.218 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 14:45:04.219 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 14:45:04.220 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 14:45:04.221 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.AppointmentModel'.
2024-11-12 14:45:04.294 +07:00 [INF] Executed action CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API) in 1312.4753ms
2024-11-12 14:45:04.296 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.AppointmentController.GetById (CityInfo.API)'
2024-11-12 14:45:04.298 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:45:04.302 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:04.304 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-12 14:45:04.305 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Appointment/605d20cf-c1cf-430e-2bb3-08dcf012f04b - 200 545 application/json; charset=utf-8 1422.5781ms
2024-11-12 14:45:12.004 +07:00 [DBG] Connection id "0HN82TNEUFUAT" received FIN.
2024-11-12 14:45:12.005 +07:00 [DBG] Connection id "0HN82TNEUFUAT" is closed. The last processed stream ID was 1.
2024-11-12 14:45:12.005 +07:00 [DBG] The connection queue processing loop for 0HN82TNEUFUAT completed.
2024-11-12 14:45:12.005 +07:00 [DBG] Connection id "0HN82TNEUFUAT" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:45:12.019 +07:00 [DBG] Connection id "0HN82TNEUFUAT" stopped.
2024-11-12 14:45:26.043 +07:00 [DBG] Connection id "0HN82TNEUFUAU" accepted.
2024-11-12 14:45:26.044 +07:00 [DBG] Connection id "0HN82TNEUFUAU" started.
2024-11-12 14:45:26.048 +07:00 [DBG] Connection 0HN82TNEUFUAU established using the following protocol: "Tls13"
2024-11-12 14:45:26.050 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/2000 - null null
2024-11-12 14:45:26.052 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:45:26.053 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Patient/2000'
2024-11-12 14:45:26.054 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2000'
2024-11-12 14:45:26.055 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/{n}' is valid for the request path '/api/Patient/2000'
2024-11-12 14:45:26.060 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)
CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.SelectAsync(HttpContext httpContext, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.SelectEndpointWithPoliciesAsync(HttpContext httpContext, IEndpointSelectorPolicy[] policies, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatch|10_1(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task matchTask)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-12 14:45:26.085 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/2000 - 500 null text/plain; charset=utf-8 34.4113ms
2024-11-12 14:45:32.018 +07:00 [DBG] Connection id "0HN82TNEUFUAU" received FIN.
2024-11-12 14:45:32.019 +07:00 [DBG] Connection id "0HN82TNEUFUAU" is closed. The last processed stream ID was 1.
2024-11-12 14:45:32.019 +07:00 [DBG] The connection queue processing loop for 0HN82TNEUFUAU completed.
2024-11-12 14:45:32.020 +07:00 [DBG] Connection id "0HN82TNEUFUAU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:45:32.034 +07:00 [DBG] Connection id "0HN82TNEUFUAU" stopped.
2024-11-12 14:45:32.199 +07:00 [DBG] Connection id "0HN82TNEUFUAV" accepted.
2024-11-12 14:45:32.202 +07:00 [DBG] Connection id "0HN82TNEUFUAV" started.
2024-11-12 14:45:32.206 +07:00 [DBG] Connection 0HN82TNEUFUAV established using the following protocol: "Tls13"
2024-11-12 14:45:32.209 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/ac478e10-bcee-42e7-a4bf-08dcf00bc5d5 - null null
2024-11-12 14:45:32.212 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:45:32.212 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Patient/ac478e10-bcee-42e7-a4bf-08dcf00bc5d5'
2024-11-12 14:45:32.213 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/ac478e10-bcee-42e7-a4bf-08dcf00bc5d5'
2024-11-12 14:45:32.214 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/{n}' is valid for the request path '/api/Patient/ac478e10-bcee-42e7-a4bf-08dcf00bc5d5'
2024-11-12 14:45:32.216 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)
CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.SelectAsync(HttpContext httpContext, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.SelectEndpointWithPoliciesAsync(HttpContext httpContext, IEndpointSelectorPolicy[] policies, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatch|10_1(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task matchTask)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-12 14:45:32.218 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/ac478e10-bcee-42e7-a4bf-08dcf00bc5d5 - 500 null text/plain; charset=utf-8 9.1665ms
2024-11-12 14:45:39.354 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=5 - null null
2024-11-12 14:45:39.355 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:45:39.356 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 14:45:39.359 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 14:45:39.366 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:45:39.370 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:45:39.371 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:45:39.374 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 14:45:39.375 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:45:39.376 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:45:39.377 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:45:39.378 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:45:39.379 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:45:39.380 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:45:39.383 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:45:39.384 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-12 14:45:39.385 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-12 14:45:39.386 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-12 14:45:39.387 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 14:45:39.387 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 14:45:39.388 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-12 14:45:39.389 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-12 14:45:39.390 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-12 14:45:39.391 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-12 14:45:39.391 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-12 14:45:39.392 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 14:45:39.393 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 14:45:39.393 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-12 14:45:39.394 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-12 14:45:39.395 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-12 14:45:39.396 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-12 14:45:39.397 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 14:45:39.397 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 14:45:39.398 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-12 14:45:39.399 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-12 14:45:39.399 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-12 14:45:39.400 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-12 14:45:39.401 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:45:39.402 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:45:39.403 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-12 14:45:39.404 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:45:39.415 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:45:39.423 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .OrderBy(pt => pt.FullName)
    .Skip(__p_0)
    .Take(__p_1)
    .Select(pt => new PatientModel{ 
        Status = pt.Status, 
        Gender = pt.Gender, 
        Avatar = pt.Avatar, 
        FullName = pt.FullName, 
        Date = pt.Date, 
        Time = pt.Time, 
        Location = pt.Location, 
        Email = pt.Email, 
        PhoneNumber = pt.PhoneNumber, 
        Diseases = pt.Diseases, 
        PaymentId = pt.PaymentId, 
        Age = DateTime.Now.Year - pt.Date.Year - DateTime.Now < pt.Date.AddYears(DateTime.Now.Year - pt.Date.Year) ? 1 : 0 
    }
    )'
2024-11-12 14:45:39.445 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PatientModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Status -> 0
            Gender -> 1
            Avatar -> 2
            FullName -> 3
            Date -> 4
            Time -> 5
            Location -> 6
            Email -> 7
            PhoneNumber -> 8
            Diseases -> 9
            PaymentId -> 10
            Age -> 11
        SELECT p.Status, p.Gender, p.Avatar, p.FullName, p.Date, p.Time, p.Location, p.Email, p.PhoneNumber, p.Diseases, p.PaymentId, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
            WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
            ELSE 0
        END AS Age
        FROM Patient AS p
        ORDER BY p.FullName ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PatientModel>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)'
2024-11-12 14:45:39.452 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:45:39.452 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-12 14:45:39.453 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:39.454 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:39.455 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:45:39.455 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:45:39.456 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-12 14:45:39.457 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-11-12 14:45:39.469 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-11-12 14:45:39.471 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:39.472 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 2ms reading results.
2024-11-12 14:45:39.473 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:39.473 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:45:39.474 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:45:39.475 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:45:39.476 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 14:45:39.476 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 14:45:39.476 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 14:45:39.477 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-12 14:45:39.486 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 106.2714ms
2024-11-12 14:45:39.487 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:45:39.488 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:45:39.489 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:39.489 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 14:45:39.490 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=5 - 200 2378 application/json; charset=utf-8 136.312ms
2024-11-12 14:45:42.024 +07:00 [DBG] Connection id "0HN82TNEUFUAV" received FIN.
2024-11-12 14:45:42.024 +07:00 [DBG] Connection id "0HN82TNEUFUAV" is closed. The last processed stream ID was 3.
2024-11-12 14:45:42.025 +07:00 [DBG] The connection queue processing loop for 0HN82TNEUFUAV completed.
2024-11-12 14:45:42.025 +07:00 [DBG] Connection id "0HN82TNEUFUAV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:45:42.040 +07:00 [DBG] Connection id "0HN82TNEUFUAV" stopped.
2024-11-12 14:45:43.997 +07:00 [DBG] Connection id "0HN82TNEUFUB0" accepted.
2024-11-12 14:45:43.998 +07:00 [DBG] Connection id "0HN82TNEUFUB0" started.
2024-11-12 14:45:44.002 +07:00 [DBG] Connection 0HN82TNEUFUB0 established using the following protocol: "Tls13"
2024-11-12 14:45:44.003 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?search=ac478e10-bcee-42e7-a4bf-08dcf00bc5d5&page=1&page_size=5 - null null
2024-11-12 14:45:44.005 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:45:44.005 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 14:45:44.006 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 14:45:44.007 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:45:44.010 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:45:44.010 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:45:44.011 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 14:45:44.012 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:45:44.013 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:45:44.014 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:45:44.015 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:45:44.016 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:45:44.016 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:45:44.018 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:45:44.019 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-12 14:45:44.019 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name 'search' in request data ...
2024-11-12 14:45:44.020 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 14:45:44.021 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 14:45:44.021 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-12 14:45:44.022 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-12 14:45:44.022 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-12 14:45:44.023 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-12 14:45:44.023 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-12 14:45:44.024 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 14:45:44.024 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 14:45:44.025 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-12 14:45:44.025 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-12 14:45:44.026 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-12 14:45:44.027 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-12 14:45:44.028 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 14:45:44.028 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 14:45:44.029 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-12 14:45:44.029 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-12 14:45:44.030 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-12 14:45:44.031 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-12 14:45:44.031 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:45:44.032 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:45:44.033 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-12 14:45:44.034 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:45:44.072 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:45:44.075 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Where(pt => pt.FullName.Contains(__search_0))
    .OrderBy(pt => pt.FullName)
    .Skip(__p_1)
    .Take(__p_2)
    .Select(pt => new PatientModel{ 
        Status = pt.Status, 
        Gender = pt.Gender, 
        Avatar = pt.Avatar, 
        FullName = pt.FullName, 
        Date = pt.Date, 
        Time = pt.Time, 
        Location = pt.Location, 
        Email = pt.Email, 
        PhoneNumber = pt.PhoneNumber, 
        Diseases = pt.Diseases, 
        PaymentId = pt.PaymentId, 
        Age = DateTime.Now.Year - pt.Date.Year - DateTime.Now < pt.Date.AddYears(DateTime.Now.Year - pt.Date.Year) ? 1 : 0 
    }
    )'
2024-11-12 14:45:44.084 +07:00 [DBG] Generated query execution expression: 
'queryContext => 
{
    queryContext.AddParameter(
        name: "__search_0_contains", 
        value: (object)Invoke(queryContext => SqlServerSqlTranslatingExpressionVisitor.ConstructLikePatternParameter(
            queryContext: queryContext, 
            baseParameterName: "__search_0", 
            methodType: Contains), queryContext));
    return new SingleQueryingEnumerable<PatientModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                Status -> 0
                Gender -> 1
                Avatar -> 2
                FullName -> 3
                Date -> 4
                Time -> 5
                Location -> 6
                Email -> 7
                PhoneNumber -> 8
                Diseases -> 9
                PaymentId -> 10
                Age -> 11
            SELECT p.Status, p.Gender, p.Avatar, p.FullName, p.Date, p.Time, p.Location, p.Email, p.PhoneNumber, p.Diseases, p.PaymentId, (DATEPART(year, GETDATE()) - DATEPART(year, p.Date)) - CASE
                WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, p.Date) AS int), p.Date) THEN 1
                ELSE 0
            END AS Age
            FROM Patient AS p
            WHERE p.FullName LIKE @__search_0_contains ESCAPE N'\'
            ORDER BY p.FullName ASC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PatientModel>, 
        CityInfo.API.DbContexts.DoctorManagementContext, 
        False, 
        False, 
        True
    );
}'
2024-11-12 14:45:44.086 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:45:44.087 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-12 14:45:44.087 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:44.088 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:44.089 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:45:44.089 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:45:44.090 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-12 14:45:44.091 +07:00 [DBG] Executing DbCommand [Parameters=[@__search_0_contains='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
WHERE [p].[FullName] LIKE @__search_0_contains ESCAPE N'\'
ORDER BY [p].[FullName]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2024-11-12 14:45:44.097 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__search_0_contains='?' (Size = 100), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
WHERE [p].[FullName] LIKE @__search_0_contains ESCAPE N'\'
ORDER BY [p].[FullName]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2024-11-12 14:45:44.098 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:44.099 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-12 14:45:44.099 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:44.100 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:45:44.101 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:45:44.102 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:45:44.102 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 14:45:44.103 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 14:45:44.103 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 14:45:44.104 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-12 14:45:44.105 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 88.7054ms
2024-11-12 14:45:44.106 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:45:44.106 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:45:44.107 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:44.108 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 14:45:44.108 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?search=ac478e10-bcee-42e7-a4bf-08dcf00bc5d5&page=1&page_size=5 - 200 2 application/json; charset=utf-8 105.0923ms
2024-11-12 14:45:49.927 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=5 - null null
2024-11-12 14:45:49.928 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:45:49.929 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 14:45:49.930 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 14:45:49.930 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:45:49.931 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:45:49.932 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:45:49.932 +07:00 [INF] Route matched with {action = "GetAllPatient", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAllPatient(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 14:45:49.933 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:45:49.934 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:45:49.934 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:45:49.935 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:45:49.936 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:45:49.937 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:45:49.940 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:45:49.940 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' ...
2024-11-12 14:45:49.941 +07:00 [DBG] Attempting to bind parameter 'search' of type 'System.String' using the name '' in request data ...
2024-11-12 14:45:49.942 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'search' of type 'System.String'.
2024-11-12 14:45:49.943 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 14:45:49.944 +07:00 [DBG] Done attempting to bind parameter 'search' of type 'System.String'.
2024-11-12 14:45:49.945 +07:00 [DBG] Attempting to validate the bound parameter 'search' of type 'System.String' ...
2024-11-12 14:45:49.945 +07:00 [DBG] Done attempting to validate the bound parameter 'search' of type 'System.String'.
2024-11-12 14:45:49.946 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' ...
2024-11-12 14:45:49.946 +07:00 [DBG] Attempting to bind parameter 'sortBy' of type 'System.String' using the name '' in request data ...
2024-11-12 14:45:49.947 +07:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortBy' of type 'System.String'.
2024-11-12 14:45:49.947 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 14:45:49.948 +07:00 [DBG] Done attempting to bind parameter 'sortBy' of type 'System.String'.
2024-11-12 14:45:49.948 +07:00 [DBG] Attempting to validate the bound parameter 'sortBy' of type 'System.String' ...
2024-11-12 14:45:49.949 +07:00 [DBG] Done attempting to validate the bound parameter 'sortBy' of type 'System.String'.
2024-11-12 14:45:49.950 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2024-11-12 14:45:49.950 +07:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2024-11-12 14:45:49.951 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 14:45:49.951 +07:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2024-11-12 14:45:49.952 +07:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2024-11-12 14:45:49.952 +07:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2024-11-12 14:45:49.953 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' ...
2024-11-12 14:45:49.954 +07:00 [DBG] Attempting to bind parameter 'page_size' of type 'System.Int32' using the name 'page_size' in request data ...
2024-11-12 14:45:49.954 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:45:49.955 +07:00 [DBG] Done attempting to bind parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:45:49.955 +07:00 [DBG] Attempting to validate the bound parameter 'page_size' of type 'System.Int32' ...
2024-11-12 14:45:49.956 +07:00 [DBG] Done attempting to validate the bound parameter 'page_size' of type 'System.Int32'.
2024-11-12 14:45:49.957 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:45:49.962 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:45:49.962 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-12 14:45:49.962 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:49.963 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:49.964 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:45:49.964 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:45:49.965 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-12 14:45:49.966 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-11-12 14:45:49.974 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Status], [p].[Gender], [p].[Avatar], [p].[FullName], [p].[Date], [p].[Time], [p].[Location], [p].[Email], [p].[PhoneNumber], [p].[Diseases], [p].[PaymentId], (DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date])) - CASE
    WHEN GETDATE() < DATEADD(year, CAST(DATEPART(year, GETDATE()) - DATEPART(year, [p].[Date]) AS int), [p].[Date]) THEN 1
    ELSE 0
END AS [Age]
FROM [Patient] AS [p]
ORDER BY [p].[FullName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-11-12 14:45:49.975 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:49.976 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 0ms reading results.
2024-11-12 14:45:49.976 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:49.977 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:45:49.978 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:45:49.979 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:45:49.979 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 14:45:49.980 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 14:45:49.980 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 14:45:49.981 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PatientModel, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-11-12 14:45:49.981 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API) in 44.1237ms
2024-11-12 14:45:49.982 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetAllPatient (CityInfo.API)'
2024-11-12 14:45:49.983 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:45:49.983 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:45:49.984 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 14:45:49.985 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient?page=1&page_size=5 - 200 2378 application/json; charset=utf-8 58.6007ms
2024-11-12 14:45:52.030 +07:00 [DBG] Connection id "0HN82TNEUFUB0" received FIN.
2024-11-12 14:45:52.031 +07:00 [DBG] Connection id "0HN82TNEUFUB0" is closed. The last processed stream ID was 3.
2024-11-12 14:45:52.031 +07:00 [DBG] The connection queue processing loop for 0HN82TNEUFUB0 completed.
2024-11-12 14:45:52.031 +07:00 [DBG] Connection id "0HN82TNEUFUB0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:45:52.041 +07:00 [DBG] Connection id "0HN82TNEUFUB0" stopped.
2024-11-12 14:46:47.535 +07:00 [DBG] Connection id "0HN82TNEUFUB1" accepted.
2024-11-12 14:46:47.540 +07:00 [DBG] Connection id "0HN82TNEUFUB1" started.
2024-11-12 14:46:47.543 +07:00 [DBG] Connection 0HN82TNEUFUB1 established using the following protocol: "Tls13"
2024-11-12 14:46:47.548 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/3ee52826-4cb3-4c5b-a4d8-08dcf00bc5d5 - null null
2024-11-12 14:46:47.552 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:46:47.553 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Patient/3ee52826-4cb3-4c5b-a4d8-08dcf00bc5d5'
2024-11-12 14:46:47.553 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/3ee52826-4cb3-4c5b-a4d8-08dcf00bc5d5'
2024-11-12 14:46:47.554 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/{n}' is valid for the request path '/api/Patient/3ee52826-4cb3-4c5b-a4d8-08dcf00bc5d5'
2024-11-12 14:46:47.555 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)
CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.SelectAsync(HttpContext httpContext, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.SelectEndpointWithPoliciesAsync(HttpContext httpContext, IEndpointSelectorPolicy[] policies, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatch|10_1(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task matchTask)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-12 14:46:47.558 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/3ee52826-4cb3-4c5b-a4d8-08dcf00bc5d5 - 500 null text/plain; charset=utf-8 10.4275ms
2024-11-12 14:46:52.108 +07:00 [DBG] Connection id "0HN82TNEUFUB1" received FIN.
2024-11-12 14:46:52.109 +07:00 [DBG] Connection id "0HN82TNEUFUB1" is closed. The last processed stream ID was 1.
2024-11-12 14:46:52.109 +07:00 [DBG] The connection queue processing loop for 0HN82TNEUFUB1 completed.
2024-11-12 14:46:52.109 +07:00 [DBG] Connection id "0HN82TNEUFUB1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:46:52.115 +07:00 [DBG] Connection id "0HN82TNEUFUB1" stopped.
2024-11-12 14:47:10.826 +07:00 [DBG] Connection id "0HN82TNEUFUB2" accepted.
2024-11-12 14:47:10.826 +07:00 [DBG] Connection id "0HN82TNEUFUB2" started.
2024-11-12 14:47:10.830 +07:00 [DBG] Connection 0HN82TNEUFUB2 established using the following protocol: "Tls13"
2024-11-12 14:47:10.833 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Patient - application/json-patch+json 331
2024-11-12 14:47:10.835 +07:00 [DBG] The request has an origin header: 'https://localhost:7169'.
2024-11-12 14:47:10.837 +07:00 [INF] CORS policy execution failed.
2024-11-12 14:47:10.837 +07:00 [INF] Request origin https://localhost:7169 does not have permission to access the resource.
2024-11-12 14:47:10.839 +07:00 [DBG] POST requests are not supported
2024-11-12 14:47:10.840 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 14:47:10.840 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 14:47:10.841 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-11-12 14:47:10.841 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:47:10.842 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-11-12 14:47:10.845 +07:00 [INF] Route matched with {action = "Add", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.PatientModel) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 14:47:10.846 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:47:10.846 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:47:10.847 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:47:10.848 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:47:10.848 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:47:10.849 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:47:10.850 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:47:10.851 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel' ...
2024-11-12 14:47:10.852 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel' using the name '' in request data ...
2024-11-12 14:47:10.854 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-11-12 14:47:10.855 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-11-12 14:47:10.859 +07:00 [DBG] Connection id "0HN82TNEUFUB2", Request id "0HN82TNEUFUB2:00000001": started reading request body.
2024-11-12 14:47:10.860 +07:00 [DBG] Connection id "0HN82TNEUFUB2", Request id "0HN82TNEUFUB2:00000001": done reading request body.
2024-11-12 14:47:10.882 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:47:10.883 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:47:10.884 +07:00 [DBG] Attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientModel' ...
2024-11-12 14:47:10.889 +07:00 [DBG] Done attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:47:10.892 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:47:10.904 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Patient.PatientId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:47:10.911 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:47:10.913 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-11-12 14:47:10.915 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-11-12 14:47:10.923 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-11-12 14:47:10.969 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:47:10.970 +07:00 [DBG] Created DbConnection. (1ms).
2024-11-12 14:47:10.971 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:47:10.971 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:47:10.973 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:47:10.974 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:47:10.975 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-12 14:47:10.976 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (DbType = DateTime2), @p3='?' (Size = 500), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (DbType = Guid), @p9='?' (Size = 15), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patient] ([PatientId], [Avatar], [Date], [Diseases], [Email], [FullName], [Gender], [Location], [PaymentId], [PhoneNumber], [Status], [Time])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-11-12 14:47:10.998 +07:00 [ERR] Failed executing DbCommand (22ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (DbType = DateTime2), @p3='?' (Size = 500), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (DbType = Guid), @p9='?' (Size = 15), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patient] ([PatientId], [Avatar], [Date], [Diseases], [Email], [FullName], [Gender], [Location], [PaymentId], [PhoneNumber], [Status], [Time])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-11-12 14:47:11.001 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:47:11.002 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:47:11.009 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.DoctorManagementContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Payment". The conflict occurred in database "DoctorDatabase", table "dbo.Payment", column 'PaymentId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:ae24e4be-3403-49e8-b9ac-4bcda0d1b9d6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Payment". The conflict occurred in database "DoctorDatabase", table "dbo.Payment", column 'PaymentId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:ae24e4be-3403-49e8-b9ac-4bcda0d1b9d6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-11-12 14:47:11.084 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:47:11.085 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:47:11.086 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-11-12 14:47:11.087 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-11-12 14:47:11.087 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-11-12 14:47:11.097 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.Add (CityInfo.API) in 248.1828ms
2024-11-12 14:47:11.098 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-11-12 14:47:11.098 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:47:11.099 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:47:11.099 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 14:47:11.100 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Patient - 500 201 application/problem+json; charset=utf-8 267.6211ms
2024-11-12 14:47:12.124 +07:00 [DBG] Connection id "0HN82TNEUFUB2" received FIN.
2024-11-12 14:47:12.125 +07:00 [DBG] Connection id "0HN82TNEUFUB2" is closed. The last processed stream ID was 1.
2024-11-12 14:47:12.125 +07:00 [DBG] The connection queue processing loop for 0HN82TNEUFUB2 completed.
2024-11-12 14:47:12.125 +07:00 [DBG] Connection id "0HN82TNEUFUB2" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:47:12.139 +07:00 [DBG] Connection id "0HN82TNEUFUB2" stopped.
2024-11-12 14:47:33.327 +07:00 [DBG] Connection id "0HN82TNEUFUB3" accepted.
2024-11-12 14:47:33.330 +07:00 [DBG] Connection id "0HN82TNEUFUB3" started.
2024-11-12 14:47:33.333 +07:00 [DBG] Connection 0HN82TNEUFUB3 established using the following protocol: "Tls13"
2024-11-12 14:47:33.335 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Patient - application/json-patch+json 276
2024-11-12 14:47:33.341 +07:00 [DBG] The request has an origin header: 'https://localhost:7169'.
2024-11-12 14:47:33.342 +07:00 [INF] CORS policy execution failed.
2024-11-12 14:47:33.342 +07:00 [INF] Request origin https://localhost:7169 does not have permission to access the resource.
2024-11-12 14:47:33.343 +07:00 [DBG] POST requests are not supported
2024-11-12 14:47:33.343 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 14:47:33.344 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 14:47:33.345 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-11-12 14:47:33.346 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:47:33.347 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-11-12 14:47:33.347 +07:00 [INF] Route matched with {action = "Add", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.PatientModel) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 14:47:33.348 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:47:33.349 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:47:33.350 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:47:33.351 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:47:33.352 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:47:33.353 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:47:33.354 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:47:33.354 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel' ...
2024-11-12 14:47:33.355 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel' using the name '' in request data ...
2024-11-12 14:47:33.356 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-11-12 14:47:33.356 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-11-12 14:47:33.357 +07:00 [DBG] Connection id "0HN82TNEUFUB3", Request id "0HN82TNEUFUB3:00000001": started reading request body.
2024-11-12 14:47:33.358 +07:00 [DBG] Connection id "0HN82TNEUFUB3", Request id "0HN82TNEUFUB3:00000001": done reading request body.
2024-11-12 14:47:33.359 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:47:33.359 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:47:33.360 +07:00 [DBG] Attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientModel' ...
2024-11-12 14:47:33.361 +07:00 [DBG] Done attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:47:33.362 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:47:33.366 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Patient.PatientId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:47:33.368 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:47:33.368 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-11-12 14:47:33.369 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-11-12 14:47:33.369 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-11-12 14:47:33.371 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:47:33.371 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-12 14:47:33.372 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:47:33.372 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:47:33.373 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:47:33.374 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:47:33.374 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-12 14:47:33.375 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (DbType = DateTime2), @p3='?' (Size = 500), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (DbType = Guid), @p9='?' (Size = 15), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patient] ([PatientId], [Avatar], [Date], [Diseases], [Email], [FullName], [Gender], [Location], [PaymentId], [PhoneNumber], [Status], [Time])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-11-12 14:47:33.380 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (DbType = DateTime2), @p3='?' (Size = 500), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (DbType = Guid), @p9='?' (Size = 15), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patient] ([PatientId], [Avatar], [Date], [Diseases], [Email], [FullName], [Gender], [Location], [PaymentId], [PhoneNumber], [Status], [Time])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-11-12 14:47:33.382 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:47:33.382 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:47:33.383 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.DoctorManagementContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Payment". The conflict occurred in database "DoctorDatabase", table "dbo.Payment", column 'PaymentId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:ae24e4be-3403-49e8-b9ac-4bcda0d1b9d6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Payment". The conflict occurred in database "DoctorDatabase", table "dbo.Payment", column 'PaymentId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:ae24e4be-3403-49e8-b9ac-4bcda0d1b9d6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-11-12 14:47:33.405 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:47:33.406 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:47:33.406 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-11-12 14:47:33.407 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-11-12 14:47:33.408 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-11-12 14:47:33.409 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.Add (CityInfo.API) in 56.2899ms
2024-11-12 14:47:33.410 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-11-12 14:47:33.410 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:47:33.411 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:47:33.411 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 14:47:33.412 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Patient - 500 201 application/problem+json; charset=utf-8 77.5709ms
2024-11-12 14:47:39.443 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Patient - application/json-patch+json 331
2024-11-12 14:47:39.444 +07:00 [DBG] The request has an origin header: 'https://localhost:7169'.
2024-11-12 14:47:39.444 +07:00 [INF] CORS policy execution failed.
2024-11-12 14:47:39.445 +07:00 [INF] Request origin https://localhost:7169 does not have permission to access the resource.
2024-11-12 14:47:39.445 +07:00 [DBG] POST requests are not supported
2024-11-12 14:47:39.446 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 14:47:39.449 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 14:47:39.450 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-11-12 14:47:39.451 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:47:39.451 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-11-12 14:47:39.453 +07:00 [INF] Route matched with {action = "Add", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.PatientModel) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 14:47:39.454 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:47:39.455 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:47:39.456 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:47:39.457 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:47:39.458 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:47:39.459 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:47:39.460 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:47:39.461 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel' ...
2024-11-12 14:47:39.463 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel' using the name '' in request data ...
2024-11-12 14:47:39.464 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-11-12 14:47:39.464 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-11-12 14:47:39.465 +07:00 [DBG] Connection id "0HN82TNEUFUB3", Request id "0HN82TNEUFUB3:00000003": started reading request body.
2024-11-12 14:47:39.465 +07:00 [DBG] Connection id "0HN82TNEUFUB3", Request id "0HN82TNEUFUB3:00000003": done reading request body.
2024-11-12 14:47:39.466 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:47:39.467 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:47:39.467 +07:00 [DBG] Attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientModel' ...
2024-11-12 14:47:39.468 +07:00 [DBG] Done attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:47:39.470 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:47:39.471 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Patient.PatientId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:47:39.472 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:47:39.472 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-11-12 14:47:39.473 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-11-12 14:47:39.473 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-11-12 14:47:39.474 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:47:39.474 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-12 14:47:39.475 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:47:39.476 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:47:39.476 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:47:39.477 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:47:39.477 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-12 14:47:39.478 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (DbType = DateTime2), @p3='?' (Size = 500), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (DbType = Guid), @p9='?' (Size = 15), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patient] ([PatientId], [Avatar], [Date], [Diseases], [Email], [FullName], [Gender], [Location], [PaymentId], [PhoneNumber], [Status], [Time])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-11-12 14:47:39.482 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (DbType = DateTime2), @p3='?' (Size = 500), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (DbType = Guid), @p9='?' (Size = 15), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patient] ([PatientId], [Avatar], [Date], [Diseases], [Email], [FullName], [Gender], [Location], [PaymentId], [PhoneNumber], [Status], [Time])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-11-12 14:47:39.484 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:47:39.485 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:47:39.486 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.DoctorManagementContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Payment". The conflict occurred in database "DoctorDatabase", table "dbo.Payment", column 'PaymentId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:ae24e4be-3403-49e8-b9ac-4bcda0d1b9d6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Patient_Payment". The conflict occurred in database "DoctorDatabase", table "dbo.Payment", column 'PaymentId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:ae24e4be-3403-49e8-b9ac-4bcda0d1b9d6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-11-12 14:47:39.512 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:47:39.513 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:47:39.513 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-11-12 14:47:39.514 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-11-12 14:47:39.515 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-11-12 14:47:39.516 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.Add (CityInfo.API) in 56.2925ms
2024-11-12 14:47:39.517 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-11-12 14:47:39.518 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:47:39.518 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:47:39.519 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 14:47:39.519 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Patient - 500 201 application/problem+json; charset=utf-8 76.7951ms
2024-11-12 14:47:42.160 +07:00 [DBG] Connection id "0HN82TNEUFUB3" received FIN.
2024-11-12 14:47:42.160 +07:00 [DBG] Connection id "0HN82TNEUFUB3" is closed. The last processed stream ID was 3.
2024-11-12 14:47:42.160 +07:00 [DBG] The connection queue processing loop for 0HN82TNEUFUB3 completed.
2024-11-12 14:47:42.161 +07:00 [DBG] Connection id "0HN82TNEUFUB3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:47:42.175 +07:00 [DBG] Connection id "0HN82TNEUFUB3" stopped.
2024-11-12 14:49:45.362 +07:00 [DBG] Connection id "0HN82TNEUFUB4" accepted.
2024-11-12 14:49:45.366 +07:00 [DBG] Connection id "0HN82TNEUFUB4" started.
2024-11-12 14:49:45.369 +07:00 [DBG] Connection 0HN82TNEUFUB4 established using the following protocol: "Tls13"
2024-11-12 14:49:45.375 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7169/api/Patient - application/json-patch+json 331
2024-11-12 14:49:45.382 +07:00 [DBG] The request has an origin header: 'https://localhost:7169'.
2024-11-12 14:49:45.382 +07:00 [INF] CORS policy execution failed.
2024-11-12 14:49:45.383 +07:00 [INF] Request origin https://localhost:7169 does not have permission to access the resource.
2024-11-12 14:49:45.384 +07:00 [DBG] POST requests are not supported
2024-11-12 14:49:45.384 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2024-11-12 14:49:45.385 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2024-11-12 14:49:45.385 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-11-12 14:49:45.386 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:49:45.386 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-11-12 14:49:45.387 +07:00 [INF] Route matched with {action = "Add", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Add(CityInfo.API.Models.PatientModel) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 14:49:45.388 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:49:45.389 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:49:45.389 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:49:45.390 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:49:45.391 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:49:45.391 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:49:45.392 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:49:45.393 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel' ...
2024-11-12 14:49:45.393 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel' using the name '' in request data ...
2024-11-12 14:49:45.394 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-11-12 14:49:45.395 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-11-12 14:49:45.395 +07:00 [DBG] Connection id "0HN82TNEUFUB4", Request id "0HN82TNEUFUB4:00000001": started reading request body.
2024-11-12 14:49:45.396 +07:00 [DBG] Connection id "0HN82TNEUFUB4", Request id "0HN82TNEUFUB4:00000001": done reading request body.
2024-11-12 14:49:45.397 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:49:45.397 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:49:45.398 +07:00 [DBG] Attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientModel' ...
2024-11-12 14:49:45.398 +07:00 [DBG] Done attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:49:45.400 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:49:45.401 +07:00 [DBG] 'DoctorManagementContext' generated a value for the property 'Patient.PatientId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:49:45.402 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:49:45.402 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-11-12 14:49:45.403 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-11-12 14:49:45.403 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-11-12 14:49:45.404 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:49:45.404 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-12 14:49:45.405 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:49:45.405 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:49:45.406 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:49:45.406 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:49:45.407 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:49:45.407 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (DbType = DateTime2), @p3='?' (Size = 500), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (DbType = Guid), @p9='?' (Size = 15), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patient] ([PatientId], [Avatar], [Date], [Diseases], [Email], [FullName], [Gender], [Location], [PaymentId], [PhoneNumber], [Status], [Time])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-11-12 14:49:45.416 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (DbType = DateTime2), @p3='?' (Size = 500), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 255), @p8='?' (DbType = Guid), @p9='?' (Size = 15), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patient] ([PatientId], [Avatar], [Date], [Diseases], [Email], [FullName], [Gender], [Location], [PaymentId], [PhoneNumber], [Status], [Time])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2024-11-12 14:49:45.418 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:49:45.419 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-12 14:49:45.420 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:49:45.421 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:49:45.426 +07:00 [DBG] An entity of type 'Patient' tracked by 'DoctorManagementContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:49:45.428 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-11-12 14:49:45.428 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:49:45.430 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:49:45.430 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 14:49:45.430 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 14:49:45.431 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 14:49:45.431 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:49:45.433 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.Add (CityInfo.API) in 41.3161ms
2024-11-12 14:49:45.433 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.Add (CityInfo.API)'
2024-11-12 14:49:45.434 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:49:45.434 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:49:45.435 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-11-12 14:49:45.435 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7169/api/Patient - 200 282 application/json; charset=utf-8 61.1684ms
2024-11-12 14:49:52.355 +07:00 [DBG] Connection id "0HN82TNEUFUB4" received FIN.
2024-11-12 14:49:52.355 +07:00 [DBG] Connection id "0HN82TNEUFUB4" is closed. The last processed stream ID was 1.
2024-11-12 14:49:52.356 +07:00 [DBG] The connection queue processing loop for 0HN82TNEUFUB4 completed.
2024-11-12 14:49:52.356 +07:00 [DBG] Connection id "0HN82TNEUFUB4" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:49:52.371 +07:00 [DBG] Connection id "0HN82TNEUFUB4" stopped.
2024-11-12 14:50:09.765 +07:00 [DBG] Connection id "0HN82TNEUFUB5" accepted.
2024-11-12 14:50:09.766 +07:00 [DBG] Connection id "0HN82TNEUFUB5" started.
2024-11-12 14:50:09.770 +07:00 [DBG] Connection 0HN82TNEUFUB5 established using the following protocol: "Tls13"
2024-11-12 14:50:09.771 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7169/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742 - application/json-patch+json 374
2024-11-12 14:50:09.772 +07:00 [DBG] The request has an origin header: 'https://localhost:7169'.
2024-11-12 14:50:09.773 +07:00 [INF] CORS policy execution failed.
2024-11-12 14:50:09.773 +07:00 [INF] Request origin https://localhost:7169 does not have permission to access the resource.
2024-11-12 14:50:09.774 +07:00 [DBG] PUT requests are not supported
2024-11-12 14:50:09.774 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742'
2024-11-12 14:50:09.775 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.Update (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742'
2024-11-12 14:50:09.776 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.Update (CityInfo.API)'
2024-11-12 14:50:09.777 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:50:09.777 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.Update (CityInfo.API)'
2024-11-12 14:50:09.779 +07:00 [INF] Route matched with {action = "Update", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Update(System.Guid, CityInfo.API.Models.PatientVM) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 14:50:09.780 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:50:09.781 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:50:09.781 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:50:09.782 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:50:09.783 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:50:09.784 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:50:09.785 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:50:09.785 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-12 14:50:09.786 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-12 14:50:09.786 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:50:09.787 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:50:09.787 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-12 14:50:09.788 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-12 14:50:09.788 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientVM' ...
2024-11-12 14:50:09.789 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientVM' using the name '' in request data ...
2024-11-12 14:50:09.790 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-11-12 14:50:09.790 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-11-12 14:50:09.791 +07:00 [DBG] Connection id "0HN82TNEUFUB5", Request id "0HN82TNEUFUB5:00000001": started reading request body.
2024-11-12 14:50:09.792 +07:00 [DBG] Connection id "0HN82TNEUFUB5", Request id "0HN82TNEUFUB5:00000001": done reading request body.
2024-11-12 14:50:09.796 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientVM'.
2024-11-12 14:50:09.796 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientVM'.
2024-11-12 14:50:09.797 +07:00 [DBG] Attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientVM' ...
2024-11-12 14:50:09.799 +07:00 [DBG] Done attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientVM'.
2024-11-12 14:50:09.801 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:50:09.802 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:50:09.803 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-11-12 14:50:09.804 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-11-12 14:50:09.804 +07:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-11-12 14:50:09.805 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.Update (CityInfo.API) in 21.1682ms
2024-11-12 14:50:09.806 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.Update (CityInfo.API)'
2024-11-12 14:50:09.806 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7169/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742 - 400 164 application/problem+json; charset=utf-8 34.9509ms
2024-11-12 14:50:44.191 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7169/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742 - application/json-patch+json 377
2024-11-12 14:50:44.196 +07:00 [DBG] The request has an origin header: 'https://localhost:7169'.
2024-11-12 14:50:44.196 +07:00 [INF] CORS policy execution failed.
2024-11-12 14:50:44.197 +07:00 [INF] Request origin https://localhost:7169 does not have permission to access the resource.
2024-11-12 14:50:44.197 +07:00 [DBG] PUT requests are not supported
2024-11-12 14:50:44.198 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742'
2024-11-12 14:50:44.198 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.Update (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742'
2024-11-12 14:50:44.199 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.Update (CityInfo.API)'
2024-11-12 14:50:44.200 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:50:44.200 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.Update (CityInfo.API)'
2024-11-12 14:50:44.201 +07:00 [INF] Route matched with {action = "Update", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Update(System.Guid, CityInfo.API.Models.PatientVM) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 14:50:44.202 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:50:44.203 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:50:44.204 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:50:44.205 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:50:44.205 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:50:44.206 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:50:44.207 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:50:44.208 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-12 14:50:44.209 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-12 14:50:44.209 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:50:44.210 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:50:44.211 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-12 14:50:44.211 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-12 14:50:44.212 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientVM' ...
2024-11-12 14:50:44.212 +07:00 [DBG] Attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientVM' using the name '' in request data ...
2024-11-12 14:50:44.213 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-11-12 14:50:44.214 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-11-12 14:50:44.214 +07:00 [DBG] Connection id "0HN82TNEUFUB5", Request id "0HN82TNEUFUB5:00000003": started reading request body.
2024-11-12 14:50:44.215 +07:00 [DBG] Connection id "0HN82TNEUFUB5", Request id "0HN82TNEUFUB5:00000003": done reading request body.
2024-11-12 14:50:44.215 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientVM'.
2024-11-12 14:50:44.216 +07:00 [DBG] Done attempting to bind parameter 'patient' of type 'CityInfo.API.Models.PatientVM'.
2024-11-12 14:50:44.216 +07:00 [DBG] Attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientVM' ...
2024-11-12 14:50:44.217 +07:00 [DBG] Done attempting to validate the bound parameter 'patient' of type 'CityInfo.API.Models.PatientVM'.
2024-11-12 14:50:44.219 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:50:44.220 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __patient_PatientId_0)'
2024-11-12 14:50:44.224 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10], [Property: Patient.Time (DateTime) Required, 11] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
        FROM Patient AS p
        WHERE p.PatientId == @__patient_PatientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-11-12 14:50:44.225 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:50:44.226 +07:00 [DBG] Created DbConnection. (0ms).
2024-11-12 14:50:44.226 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:50:44.227 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:50:44.228 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:50:44.228 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-11-12 14:50:44.229 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-11-12 14:50:44.230 +07:00 [DBG] Executing DbCommand [Parameters=[@__patient_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__patient_PatientId_0
2024-11-12 14:50:44.234 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__patient_PatientId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__patient_PatientId_0
2024-11-12 14:50:44.236 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:50:44.237 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:50:44.237 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-12 14:50:44.238 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:50:44.238 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:50:44.239 +07:00 [DBG] SaveChanges starting for 'DoctorManagementContext'.
2024-11-12 14:50:44.239 +07:00 [DBG] DetectChanges starting for 'DoctorManagementContext'.
2024-11-12 14:50:44.241 +07:00 [DBG] The unchanged property 'Patient.Date' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-12 14:50:44.242 +07:00 [DBG] An entity of type 'Patient' tracked by 'DoctorManagementContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:50:44.243 +07:00 [DBG] The unchanged property 'Patient.Diseases' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-12 14:50:44.244 +07:00 [DBG] The unchanged property 'Patient.Gender' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-12 14:50:44.245 +07:00 [DBG] The unchanged property 'Patient.PhoneNumber' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-12 14:50:44.245 +07:00 [DBG] The unchanged property 'Patient.Status' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-12 14:50:44.246 +07:00 [DBG] The unchanged property 'Patient.Time' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-11-12 14:50:44.246 +07:00 [DBG] DetectChanges completed for 'DoctorManagementContext'.
2024-11-12 14:50:44.253 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:50:44.254 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:50:44.254 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:50:44.256 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-11-12 14:50:44.257 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-11-12 14:50:44.257 +07:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 500), @p2='?' (Size = 4000), @p3='?' (Size = 15), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Patient] SET [Date] = @p0, [Diseases] = @p1, [Gender] = @p2, [PhoneNumber] = @p3, [Status] = @p4, [Time] = @p5
OUTPUT 1
WHERE [PatientId] = @p6;
2024-11-12 14:50:44.264 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (Size = 500), @p2='?' (Size = 4000), @p3='?' (Size = 15), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Patient] SET [Date] = @p0, [Diseases] = @p1, [Gender] = @p2, [PhoneNumber] = @p3, [Status] = @p4, [Time] = @p5
OUTPUT 1
WHERE [PatientId] = @p6;
2024-11-12 14:50:44.266 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:50:44.267 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 1ms reading results.
2024-11-12 14:50:44.268 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:50:44.269 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (0ms).
2024-11-12 14:50:44.270 +07:00 [DBG] An entity of type 'Patient' tracked by 'DoctorManagementContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:50:44.271 +07:00 [DBG] SaveChanges completed for 'DoctorManagementContext' with 1 entities written to the database.
2024-11-12 14:50:44.273 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-11-12 14:50:44.274 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.Update (CityInfo.API) in 67.4052ms
2024-11-12 14:50:44.274 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.Update (CityInfo.API)'
2024-11-12 14:50:44.275 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:50:44.276 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:50:44.280 +07:00 [DBG] Disposed connection to database '' on server '' (4ms).
2024-11-12 14:50:44.281 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7169/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742 - 204 null null 90.3002ms
2024-11-12 14:51:05.176 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742 - null null
2024-11-12 14:51:05.182 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:51:05.183 +07:00 [DBG] 2 candidate(s) found for the request path '/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742'
2024-11-12 14:51:05.184 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742'
2024-11-12 14:51:05.185 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)' with route pattern 'api/Patient/{n}' is valid for the request path '/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742'
2024-11-12 14:51:05.186 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)
CityInfo.API.Controllers.PatientController.PatientChart (CityInfo.API)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.SelectAsync(HttpContext httpContext, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.SelectEndpointWithPoliciesAsync(HttpContext httpContext, IEndpointSelectorPolicy[] policies, CandidateSet candidateSet)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatch|10_1(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task matchTask)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-11-12 14:51:05.190 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/9e6ec4c7-837f-41dd-25fa-08dd02ee3742 - 500 null text/plain; charset=utf-8 13.8725ms
2024-11-12 14:53:42.666 +07:00 [DBG] Connection id "0HN82TNEUFUB5" received FIN.
2024-11-12 14:53:42.668 +07:00 [DBG] Connection id "0HN82TNEUFUB5" is closed. The last processed stream ID was 5.
2024-11-12 14:53:42.668 +07:00 [DBG] Connection id "0HN82TNEUFUB5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:53:42.672 +07:00 [DBG] The connection queue processing loop for 0HN82TNEUFUB5 completed.
2024-11-12 14:53:42.673 +07:00 [DBG] Connection id "0HN82TNEUFUB5" stopped.
2024-11-12 14:58:29.309 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-11-12 14:58:29.408 +07:00 [DBG] Hosting starting
2024-11-12 14:58:29.426 +07:00 [INF] User profile is available. Using 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-12 14:58:29.433 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-401a87b9-185b-4ae6-b430-e2cba568700e.xml'.
2024-11-12 14:58:29.437 +07:00 [DBG] Reading data from file 'C:\Users\giato\AppData\Local\ASP.NET\DataProtection-Keys\key-74288969-9a33-424a-9467-b5621ad6023e.xml'.
2024-11-12 14:58:29.440 +07:00 [DBG] Found key {401a87b9-185b-4ae6-b430-e2cba568700e}.
2024-11-12 14:58:29.442 +07:00 [DBG] Found key {74288969-9a33-424a-9467-b5621ad6023e}.
2024-11-12 14:58:29.446 +07:00 [DBG] Considering key {74288969-9a33-424a-9467-b5621ad6023e} with expiration date 2024-11-14 09:41:20Z as default key.
2024-11-12 14:58:29.449 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-12 14:58:29.450 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-11-12 14:58:29.452 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-11-12 14:58:29.455 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-11-12 14:58:29.456 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-11-12 14:58:29.458 +07:00 [DBG] Using key {74288969-9a33-424a-9467-b5621ad6023e} as the default key.
2024-11-12 14:58:29.459 +07:00 [DBG] Key ring with default key {74288969-9a33-424a-9467-b5621ad6023e} was loaded during application startup.
2024-11-12 14:58:29.575 +07:00 [INF] Now listening on: https://localhost:7169
2024-11-12 14:58:29.576 +07:00 [INF] Now listening on: http://localhost:5169
2024-11-12 14:58:29.576 +07:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-11-12 14:58:29.577 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2024-11-12 14:58:29.577 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-11-12 14:58:29.578 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-11-12 14:58:29.614 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-12 14:58:29.615 +07:00 [INF] Hosting environment: Development
2024-11-12 14:58:29.616 +07:00 [INF] Content root path: C:\Users\giato\Downloads\Workspace\.Net\api\CityInfo.API
2024-11-12 14:58:29.616 +07:00 [DBG] Hosting started
2024-11-12 14:58:31.218 +07:00 [DBG] Connection id "0HN82TV6C3U3H" accepted.
2024-11-12 14:58:31.220 +07:00 [DBG] Connection id "0HN82TV6C3U3H" started.
2024-11-12 14:58:31.255 +07:00 [DBG] Connection 0HN82TV6C3U3H established using the following protocol: "Tls13"
2024-11-12 14:58:31.286 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/index.html - null null
2024-11-12 14:58:31.347 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-11-12 14:58:31.393 +07:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-11-12 14:58:31.394 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-11-12 14:58:31.406 +07:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-11-12 14:58:31.407 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-11-12 14:58:31.410 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/index.html - 200 null text/html;charset=utf-8 126.8392ms
2024-11-12 14:58:31.426 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - null null
2024-11-12 14:58:31.429 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/_vs/browserLink - null null
2024-11-12 14:58:31.440 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 14.1406ms
2024-11-12 14:58:31.471 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.8826ms
2024-11-12 14:58:31.650 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - null null
2024-11-12 14:58:31.763 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 113.259ms
2024-11-12 14:58:49.210 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7169/api/Patient/3db4430e-725e-42b4-a4db-08dcf00bc5d5 - null null
2024-11-12 14:58:49.213 +07:00 [DBG] The request path  does not match the path filter
2024-11-12 14:58:49.230 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/3db4430e-725e-42b4-a4db-08dcf00bc5d5'
2024-11-12 14:58:49.233 +07:00 [DBG] Endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/3db4430e-725e-42b4-a4db-08dcf00bc5d5'
2024-11-12 14:58:49.239 +07:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)'
2024-11-12 14:58:49.272 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-11-12 14:58:49.274 +07:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)'
2024-11-12 14:58:49.288 +07:00 [INF] Route matched with {action = "GetById", controller = "Patient"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetById(System.Guid) on controller CityInfo.API.Controllers.PatientController (CityInfo.API).
2024-11-12 14:58:49.289 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-11-12 14:58:49.291 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-11-12 14:58:49.292 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:58:49.294 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-11-12 14:58:49.294 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ReportApiVersionsAttribute (Order: 0)"]
2024-11-12 14:58:49.296 +07:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:58:49.368 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-11-12 14:58:49.380 +07:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PatientController (CityInfo.API)
2024-11-12 14:58:49.384 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' ...
2024-11-12 14:58:49.386 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Guid' using the name 'id' in request data ...
2024-11-12 14:58:49.388 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:58:49.388 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Guid'.
2024-11-12 14:58:49.389 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Guid' ...
2024-11-12 14:58:49.391 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Guid'.
2024-11-12 14:58:49.809 +07:00 [DBG] Entity Framework Core 8.0.8 initialized 'DoctorManagementContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.8' with options: None
2024-11-12 14:58:49.847 +07:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .SingleOrDefault(pt => pt.PatientId == __id_0)'
2024-11-12 14:58:50.003 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.Avatar (string) Required MaxLength(255), 1], [Property: Patient.Date (DateTime) Required, 2], [Property: Patient.Diseases (string) Required MaxLength(500), 3], [Property: Patient.Email (string) Required MaxLength(100), 4], [Property: Patient.FullName (string) Required MaxLength(100), 5], [Property: Patient.Gender (string) Required, 6], [Property: Patient.Location (string) Required MaxLength(255), 7], [Property: Patient.PaymentId (Guid) Required FK Index, 8], [Property: Patient.PhoneNumber (string) Required MaxLength(15), 9], [Property: Patient.Status (string) Required, 10], [Property: Patient.Time (DateTime) Required, 11] }
        SELECT TOP(2) p.PatientId, p.Avatar, p.Date, p.Diseases, p.Email, p.FullName, p.Gender, p.Location, p.PaymentId, p.PhoneNumber, p.Status, p.Time
        FROM Patient AS p
        WHERE p.PatientId == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    CityInfo.API.DbContexts.DoctorManagementContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-11-12 14:58:50.026 +07:00 [DBG] Creating DbConnection.
2024-11-12 14:58:50.044 +07:00 [DBG] Created DbConnection. (16ms).
2024-11-12 14:58:50.047 +07:00 [DBG] Opening connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:58:50.241 +07:00 [DBG] Opened connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:58:50.244 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-11-12 14:58:50.248 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-11-12 14:58:50.254 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-11-12 14:58:50.261 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__id_0
2024-11-12 14:58:50.295 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[PatientId], [p].[Avatar], [p].[Date], [p].[Diseases], [p].[Email], [p].[FullName], [p].[Gender], [p].[Location], [p].[PaymentId], [p].[PhoneNumber], [p].[Status], [p].[Time]
FROM [Patient] AS [p]
WHERE [p].[PatientId] = @__id_0
2024-11-12 14:58:50.322 +07:00 [DBG] Context 'DoctorManagementContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-11-12 14:58:50.343 +07:00 [DBG] Closing data reader to 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:58:50.349 +07:00 [DBG] A data reader for 'DoctorDatabase' on server '.\sqlexpress' is being disposed after spending 49ms reading results.
2024-11-12 14:58:50.351 +07:00 [DBG] Closing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:58:50.355 +07:00 [DBG] Closed connection to database 'DoctorDatabase' on server '.\sqlexpress' (4ms).
2024-11-12 14:58:50.359 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-11-12 14:58:50.362 +07:00 [DBG] No information found on request to perform content negotiation.
2024-11-12 14:58:50.362 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-11-12 14:58:50.363 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-11-12 14:58:50.364 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-11-12 14:58:50.365 +07:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PatientModel'.
2024-11-12 14:58:50.417 +07:00 [INF] Executed action CityInfo.API.Controllers.PatientController.GetById (CityInfo.API) in 1119.3865ms
2024-11-12 14:58:50.419 +07:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PatientController.GetById (CityInfo.API)'
2024-11-12 14:58:50.421 +07:00 [DBG] 'DoctorManagementContext' disposed.
2024-11-12 14:58:50.424 +07:00 [DBG] Disposing connection to database 'DoctorDatabase' on server '.\sqlexpress'.
2024-11-12 14:58:50.426 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-11-12 14:58:50.427 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7169/api/Patient/3db4430e-725e-42b4-a4db-08dcf00bc5d5 - 200 479 application/json; charset=utf-8 1218.0781ms
2024-11-12 14:58:53.216 +07:00 [DBG] Connection id "0HN82TV6C3U3H" received FIN.
2024-11-12 14:58:53.220 +07:00 [DBG] Connection id "0HN82TV6C3U3H" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-11-12 14:58:53.220 +07:00 [DBG] Connection id "0HN82TV6C3U3H" is closed. The last processed stream ID was 9.
2024-11-12 14:58:53.222 +07:00 [DBG] The connection queue processing loop for 0HN82TV6C3U3H completed.
2024-11-12 14:58:53.224 +07:00 [DBG] Connection id "0HN82TV6C3U3H" stopped.
